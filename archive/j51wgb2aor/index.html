<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="摘自RisingStack：用Nightwatch.js做Node.js平台端到端测试"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>摘自RisingStack：用Nightwatch.js做Node.js平台端到端测试 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/j51wgb2aor/",
				"appid": "1613049289050283", 
				"title": "摘自RisingStack：用Nightwatch.js做Node.js平台端到端测试 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-25T02:30:23"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/wa8a3i7gv6/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/qzmzjpzjqo9/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fj51wgb2aor%2f&text=%e6%91%98%e8%87%aaRisingStack%ef%bc%9a%e7%94%a8Nightwatch.js%e5%81%9aNode.js%e5%b9%b3%e5%8f%b0%e7%ab%af%e5%88%b0%e7%ab%af%e6%b5%8b%e8%af%95"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fj51wgb2aor%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fj51wgb2aor%2f&text=%e6%91%98%e8%87%aaRisingStack%ef%bc%9a%e7%94%a8Nightwatch.js%e5%81%9aNode.js%e5%b9%b3%e5%8f%b0%e7%ab%af%e5%88%b0%e7%ab%af%e6%b5%8b%e8%af%95"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fj51wgb2aor%2f&title=%e6%91%98%e8%87%aaRisingStack%ef%bc%9a%e7%94%a8Nightwatch.js%e5%81%9aNode.js%e5%b9%b3%e5%8f%b0%e7%ab%af%e5%88%b0%e7%ab%af%e6%b5%8b%e8%af%95"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fj51wgb2aor%2f&is_video=false&description=%e6%91%98%e8%87%aaRisingStack%ef%bc%9a%e7%94%a8Nightwatch.js%e5%81%9aNode.js%e5%b9%b3%e5%8f%b0%e7%ab%af%e5%88%b0%e7%ab%af%e6%b5%8b%e8%af%95"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e6%91%98%e8%87%aaRisingStack%ef%bc%9a%e7%94%a8Nightwatch.js%e5%81%9aNode.js%e5%b9%b3%e5%8f%b0%e7%ab%af%e5%88%b0%e7%ab%af%e6%b5%8b%e8%af%95&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fj51wgb2aor%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fj51wgb2aor%2f&title=%e6%91%98%e8%87%aaRisingStack%ef%bc%9a%e7%94%a8Nightwatch.js%e5%81%9aNode.js%e5%b9%b3%e5%8f%b0%e7%ab%af%e5%88%b0%e7%ab%af%e6%b5%8b%e8%af%95"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fj51wgb2aor%2f&title=%e6%91%98%e8%87%aaRisingStack%ef%bc%9a%e7%94%a8Nightwatch.js%e5%81%9aNode.js%e5%b9%b3%e5%8f%b0%e7%ab%af%e5%88%b0%e7%ab%af%e6%b5%8b%e8%af%95"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fj51wgb2aor%2f&title=%e6%91%98%e8%87%aaRisingStack%ef%bc%9a%e7%94%a8Nightwatch.js%e5%81%9aNode.js%e5%b9%b3%e5%8f%b0%e7%ab%af%e5%88%b0%e7%ab%af%e6%b5%8b%e8%af%95"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fj51wgb2aor%2f&title=%e6%91%98%e8%87%aaRisingStack%ef%bc%9a%e7%94%a8Nightwatch.js%e5%81%9aNode.js%e5%b9%b3%e5%8f%b0%e7%ab%af%e5%88%b0%e7%ab%af%e6%b5%8b%e8%af%95"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">摘自RisingStack：用Nightwatch.js做Node.js平台端到端测试</h1><div class="meta"><div class="postdate"><time datetime="2019-01-25" itemprop="datePublished">2019-01-25</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n            \x3ch1\x3e用Nightwatch.js做Node.js平台端到端测试\x3c\/h1\x3e\n\x3ch2\x3e什么是Node.js平台的端到端测试？\x3c\/h2\x3e\n\x3cp\x3e先不要急着看码例。首先我们有必要探讨一下端到端测试到底是什么，然后才能学习如何为Node.js平台项目进行测试。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e第一，端到端测试是黑箱测试的工具之一。\x3c\/strong\x3e这就意味着写测试的人只审查软件功能，不知道软件内部如何实现，即不看源代码。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e第二，端到端测试也可以用作用户验收测试(UAT)。\x3c\/strong\x3e 用户验收测试是验证这个解决方案对用户来说确实可用的过程，关注的不是拼写之类的小错误，而是那些会使系统瘫痪、或使系统功能无法满足用户需求的问题。\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/twitter.com\/share?text=%22End-to-end%20testing%20can%20also%20be%20used%20as%20user%20acceptance%20testing%2C%20or%20UAT%22%20via%20%40RisingStack;url=https:\/\/blog.risingstack.com\/end-to-end-testing-with-nightwatch-js-node-js-at-scale\x22\x3e“端到端测试也可以用作用户验收测试(UAT)”，见RisingStack\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/twitter.com\/share?text=%22End-to-end%20testing%20can%20also%20be%20used%20as%20user%20acceptance%20testing%2C%20or%20UAT%22%20via%20%40RisingStack;url=https:\/\/blog.risingstack.com\/end-to-end-testing-with-nightwatch-js-node-js-at-scale\x22\x3e点击发推\x3c\/a\x3e\x3c\/p\x3e\n\x3ch2\x3e进入Nightwatch.js\x3c\/h2\x3e\n\x3cp\x3eNightwatch.js让大家能\x3cem\x3e“在Node.js平台上省时省力地编写运行于Selenium\/WebDriver服务器上的端到端测试”\x3c\/em\x3e。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3eNightwatch带有以下功能：\x3c\/strong\x3e\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e内置测试运行程序，\x3c\/p\x3e\n\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e能控制selenium服务器，\x3c\/p\x3e\n\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e支持由供应商提供并运行的selenium主机，比如BrowserStack或SauceLabs上的主机，\x3c\/p\x3e\n\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e用CSS和Xpath选择元素。\x3c\/p\x3e\n\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch3\x3e安装Nightwatch\x3c\/h3\x3e\n\x3cp\x3e想在本地运行Nightwatch，要稍微多做点事。\x3cstrong\x3e在本地环境里需要有一个独立Selenium服务器，以及webdriver程序，\x3c\/strong\x3e这样才能使用Chrome\/Firefox浏览器对程序进行本地测试。\x3c\/p\x3e\n\x3cp\x3e有了以上三个工具，我们就要实施下图所示的工作流程了。\x3c\/p\x3e\n\x3cp\x3e\x3cimg src=\x22http:\/\/p0.qhimg.com\/t012ce2a8a6a174ee6f.png\x22 alt=\x22node.js平台nightwatch.js端到端测试流程图\x22\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cem\x3e感谢：\x3ca href=\x22http:\/\/nightwatchjs.org\x22\x3enightwatchjs.org\x3c\/a\x3e提供的图片\x3c\/em\x3e\x3c\/p\x3e\n\x3ch4\x3e第一步：添加Nightwatch\x3c\/h4\x3e\n\x3cp\x3e只要运行\x3ccode\x3enpm install nightwatch --save-dev\x3c\/code\x3e命令就可以将Nightwatch添加到项目里去。\x3c\/p\x3e\n\x3cp\x3e_这个命令把Nightwatch的可执行文件放到了\x3ccode\x3e.\/node_modules\/.bin\x3c\/code\x3e文件夹里，这样就不用全局安装了。_\x3c\/p\x3e\n\x3ch4\x3e第二步：下载Selenium程序\x3c\/h4\x3e\n\x3cp\x3eSelenium是多平台上网站浏览器自动化的工具套件。\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3cp\x3e先决条件：确保JDK安装好了，版本至少是7。如果还没装，可以到\x3ca href=\x22http:\/\/oracle.com\/technetwork\/java\/javase\/downloads\/index.html\x22\x3e这里\x3c\/a\x3e下载。\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3eSelenium服务器是一个Java程序。Nightwatch用了这个程序就可以连接到各种各样的浏览器上去。在\x3ca href=\x22http:\/\/selenium-release.storage.googleapis.com\/index.html\x22\x3e这里\x3c\/a\x3e可以下载二进制执行文件。\x3c\/p\x3e\n\x3cp\x3e下载了JAR文件后，在项目里创建一个\x3ccode\x3ebin\x3c\/code\x3e文件夹，把文件放进去。我们要设置好让Nightwatch使用这个文件，这样就不必手动启动Selenium服务器程序了。\x3c\/p\x3e\n\x3ch4\x3e第三步：下载Chromedriver程序\x3c\/h4\x3e\n\x3cp\x3eChromeDriver是一个独立的服务器，为Chromium浏览器实现了W3C的WebDriver有线协议。\x3c\/p\x3e\n\x3cp\x3e去\x3ca href=\x22https:\/\/sites.google.com\/a\/chromium.org\/chromedriver\/downloads\x22\x3e下载页面\x3c\/a\x3e获取可执行文件，同样把文件放到\x3ccode\x3ebin\x3c\/code\x3e文件夹里去。\x3c\/p\x3e\n\x3ch4\x3e第四步：配置Nightwatch.js\x3c\/h4\x3e\n\x3cp\x3e基本Nightwatch配置可以通过一个\x3ccode\x3ejson\x3c\/code\x3e配置文件来完成。\x3c\/p\x3e\n\x3cp\x3e我们创建一个\x3ccode\x3enightwatch.json\x3c\/code\x3e文件，填上以下内容：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs json\x22\x3e{\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22src_folders\x22\x3c\/span\x3e : [\x3cspan class=\x22hljs-string\x22\x3e\x22tests\x22\x3c\/span\x3e],\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22output_folder\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x22reports\x22\x3c\/span\x3e,\n\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22selenium\x22\x3c\/span\x3e : {\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22start_process\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22server_path\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x22.\/bin\/selenium-server-standalone-3.3.1.jar\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22log_path\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x22\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22port\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-number\x22\x3e4444\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22cli_args\x22\x3c\/span\x3e : {\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22webdriver.chrome.driver\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x22.\/bin\/chromedriver\x22\x3c\/span\x3e\n    }\n  },\n\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22test_settings\x22\x3c\/span\x3e : {\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22default\x22\x3c\/span\x3e : {\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22launch_url\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x22http:\/\/localhost\x22\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22selenium_port\x22\x3c\/span\x3e  : \x3cspan class=\x22hljs-number\x22\x3e4444\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22selenium_host\x22\x3c\/span\x3e  : \x3cspan class=\x22hljs-string\x22\x3e\x22localhost\x22\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22desiredCapabilities\x22\x3c\/span\x3e: {\n        \x3cspan class=\x22hljs-attr\x22\x3e\x22browserName\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22chrome\x22\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3e\x22javascriptEnabled\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3e\x22acceptSslCerts\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n      }\n    }\n  }\n}\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e有了这个配置文件，我们就告诉了Nightwatch去哪里找Selenium服务器和Chromedriver的二进制执行文件，以及想运行的测试在哪里。\x3c\/p\x3e\n\x3cp\x3e\x3cimg src=\x22http:\/\/s4.qhres.com\/static\/b964fa6cd00b3e46.svg\x22 alt=\x22\x22\x3e\x3c\/p\x3e\n\x3cp\x3e译注：下面是广告\x3c\/p\x3e\n\x3ch4\x3e在做品控时，大家不应该依赖端到端测试。要用追踪方法找出所有的问题，不要留给用户发现。\x3c\/h4\x3e\n\x3ch5\x3eRisingStack专家关于Node.js监控与调试的建议\x3c\/h5\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/trace.risingstack.com?utm_source=rsblog\x26amp;utm_medium=roadblock-new\x26amp;utm_campaign=trace\x22 title=\x22追踪Node.js平台监控信息\x22\x3e想了解更多，看\x3c\/a\x3e \x3c\/p\x3e\n\x3ch4\x3e即时小结\x3c\/h4\x3e\n\x3cp\x3e目前为止，我们安装好了Nightwatch，下载好了独立的Selenium服务器，以及Chromedriver程序。做好了这几步，必备工具就都齐了，可以用Node.js平台和Selenium软件创建端到端测试了。\x3c\/p\x3e\n\x3ch3\x3e编写第一个Nightwatch测试\x3c\/h3\x3e\n\x3cp\x3e让我们在\x3ccode\x3etests\x3c\/code\x3e文件夹里添加一个新文件，叫作\x3ccode\x3ehomepage.js\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e我们这个例子是从\x3ca href=\x22http:\/\/nightwatchjs.org\/gettingstarted\x22\x3eNightwatch初学指南\x3c\/a\x3e里来的。我们的测试脚本会去Google网站，搜索Rembrandt这个词，然后查看维基页面：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs lua\x22\x3emodule.exports = {\n  \x3cspan class=\x22hljs-string\x22\x3e\x27Demo test Google\x27\x3c\/span\x3e : \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-params\x22\x3e(client)\x3c\/span\x3e\x3c\/span\x3e {\n    client\n      .url(\x3cspan class=\x22hljs-string\x22\x3e\x27http:\/\/www.google.com\x27\x3c\/span\x3e)\n      .waitForElementVisible(\x3cspan class=\x22hljs-string\x22\x3e\x27body\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1000\x3c\/span\x3e)\n      .\x3cspan class=\x22hljs-built_in\x22\x3eassert\x3c\/span\x3e.title(\x3cspan class=\x22hljs-string\x22\x3e\x27Google\x27\x3c\/span\x3e)\n      .\x3cspan class=\x22hljs-built_in\x22\x3eassert\x3c\/span\x3e.visible(\x3cspan class=\x22hljs-string\x22\x3e\x27input[type=text]\x27\x3c\/span\x3e)\n      .setValue(\x3cspan class=\x22hljs-string\x22\x3e\x27input[type=text]\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27rembrandt van rijn\x27\x3c\/span\x3e)\n      .waitForElementVisible(\x3cspan class=\x22hljs-string\x22\x3e\x27button[name=btnG]\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1000\x3c\/span\x3e)\n      .click(\x3cspan class=\x22hljs-string\x22\x3e\x27button[name=btnG]\x27\x3c\/span\x3e)\n      .pause(\x3cspan class=\x22hljs-number\x22\x3e1000\x3c\/span\x3e)\n      .\x3cspan class=\x22hljs-built_in\x22\x3eassert\x3c\/span\x3e.containsText(\x3cspan class=\x22hljs-string\x22\x3e\x27ol#rso li:first-child\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-string\x22\x3e\x27Rembrandt - Wikipedia\x27\x3c\/span\x3e)\n      .\x3cspan class=\x22hljs-keyword\x22\x3eend\x3c\/span\x3e()\n  }\n}\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e\x3cstrong\x3e接下来只要运行Nightwatch程序本身就行了！\x3c\/strong\x3e关于这一步，我建议在\x3ccode\x3epackage.json\x3c\/code\x3e的脚本部分加一段新脚本：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs xquery\x22\x3e\x3cspan class=\x22hljs-string\x22\x3e\x22scripts\x22\x3c\/span\x3e: {\n  \x3cspan class=\x22hljs-string\x22\x3e\x22test-e2e\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22nightwatch\x22\x3c\/span\x3e\n}\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e最后一步要做的就是用这个命令运行测试：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs dockerfile\x22\x3e`npm \x3cspan class=\x22hljs-keyword\x22\x3erun\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e \x3cspan class=\x22hljs-built_in\x22\x3etest\x3c\/span\x3e-e2e`\n\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e如果一切顺利，测试就会打开Chrome浏览器，然后访问Google和维基。\x3c\/p\x3e\n\x3ch3\x3e项目中的Nightwatch.js\x3c\/h3\x3e\n\x3cp\x3e既然已经明白了端到端测试是什么，也懂得如何设置Nightwatch了，那就该开始把它加到项目里去了。\x3c\/p\x3e\n\x3cp\x3e为了做到这一点，还有一些问题要考虑，但请记住，没有万能的方法。\x3cstrong\x3e根据企业需求不同，以下问题的答案可能也会不同：\x3c\/strong\x3e\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e在哪里运行测试？是在产品发布前？还是在产品发布后？什么时候生成测试用的容器？\x3c\/p\x3e\n\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e要测试什么情景？\x3c\/p\x3e\n\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e什么时候由谁来写端到端测试？\x3c\/p\x3e\n\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch3\x3e总结与预告\x3c\/h3\x3e\n\x3cp\x3e在这一章的Node.js at Scale里我们学习了：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e如何设置Nightwatch；\x3c\/p\x3e\n\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e如何设置Nightwatch来使用独立Selenium服务器；\x3c\/p\x3e\n\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e如何编写基本端到端测试。\x3c\/p\x3e\n\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e\x3cstrong\x3e在下一章里，我们要探究如何\x3ca href=\x22https:\/\/blog.risingstack.com\/monitoring-nodejs-applications-nodejs-at-scale\/\x22\x3e监控用于产品发布的Node.js平台基础结构。\x3c\/a\x3e\x3c\/strong\x3e\x3c\/p\x3e\n\n          \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>摘自RisingStack：用Nightwatch.js做Node.js平台端到端测试</p><h2 id="原文链接">原文链接</h2><p><a href="https://www.zcfy.cc/article/node-js-end-to-end-testing-with-nightwatch-js-risingstack">https://www.zcfy.cc/article/node-js-end-to-end-testing-with-nightwatch-js-risingstack</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/j51wgb2aor/" target="_blank">https://alili.tech/archive/j51wgb2aor/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>