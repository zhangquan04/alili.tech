<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="ES6 &#43; Webpack &#43; React &#43; Babel 如何在低版本浏览器上愉快的玩耍（上）"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>ES6 &#43; Webpack &#43; React &#43; Babel 如何在低版本浏览器上愉快的玩耍（上） | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/sj57jxyoook/",
				"appid": "1613049289050283", 
				"title": "ES6 &#43; Webpack &#43; React &#43; Babel 如何在低版本浏览器上愉快的玩耍（上） | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-03T02:30:40"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/qsw902j95k/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/5tn3ayuid97/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fsj57jxyoook%2f&text=ES6%20%2b%20Webpack%20%2b%20React%20%2b%20Babel%20%e5%a6%82%e4%bd%95%e5%9c%a8%e4%bd%8e%e7%89%88%e6%9c%ac%e6%b5%8f%e8%a7%88%e5%99%a8%e4%b8%8a%e6%84%89%e5%bf%ab%e7%9a%84%e7%8e%a9%e8%80%8d%ef%bc%88%e4%b8%8a%ef%bc%89"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fsj57jxyoook%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fsj57jxyoook%2f&text=ES6%20%2b%20Webpack%20%2b%20React%20%2b%20Babel%20%e5%a6%82%e4%bd%95%e5%9c%a8%e4%bd%8e%e7%89%88%e6%9c%ac%e6%b5%8f%e8%a7%88%e5%99%a8%e4%b8%8a%e6%84%89%e5%bf%ab%e7%9a%84%e7%8e%a9%e8%80%8d%ef%bc%88%e4%b8%8a%ef%bc%89"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fsj57jxyoook%2f&title=ES6%20%2b%20Webpack%20%2b%20React%20%2b%20Babel%20%e5%a6%82%e4%bd%95%e5%9c%a8%e4%bd%8e%e7%89%88%e6%9c%ac%e6%b5%8f%e8%a7%88%e5%99%a8%e4%b8%8a%e6%84%89%e5%bf%ab%e7%9a%84%e7%8e%a9%e8%80%8d%ef%bc%88%e4%b8%8a%ef%bc%89"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fsj57jxyoook%2f&is_video=false&description=ES6%20%2b%20Webpack%20%2b%20React%20%2b%20Babel%20%e5%a6%82%e4%bd%95%e5%9c%a8%e4%bd%8e%e7%89%88%e6%9c%ac%e6%b5%8f%e8%a7%88%e5%99%a8%e4%b8%8a%e6%84%89%e5%bf%ab%e7%9a%84%e7%8e%a9%e8%80%8d%ef%bc%88%e4%b8%8a%ef%bc%89"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=ES6%20%2b%20Webpack%20%2b%20React%20%2b%20Babel%20%e5%a6%82%e4%bd%95%e5%9c%a8%e4%bd%8e%e7%89%88%e6%9c%ac%e6%b5%8f%e8%a7%88%e5%99%a8%e4%b8%8a%e6%84%89%e5%bf%ab%e7%9a%84%e7%8e%a9%e8%80%8d%ef%bc%88%e4%b8%8a%ef%bc%89&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fsj57jxyoook%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fsj57jxyoook%2f&title=ES6%20%2b%20Webpack%20%2b%20React%20%2b%20Babel%20%e5%a6%82%e4%bd%95%e5%9c%a8%e4%bd%8e%e7%89%88%e6%9c%ac%e6%b5%8f%e8%a7%88%e5%99%a8%e4%b8%8a%e6%84%89%e5%bf%ab%e7%9a%84%e7%8e%a9%e8%80%8d%ef%bc%88%e4%b8%8a%ef%bc%89"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fsj57jxyoook%2f&title=ES6%20%2b%20Webpack%20%2b%20React%20%2b%20Babel%20%e5%a6%82%e4%bd%95%e5%9c%a8%e4%bd%8e%e7%89%88%e6%9c%ac%e6%b5%8f%e8%a7%88%e5%99%a8%e4%b8%8a%e6%84%89%e5%bf%ab%e7%9a%84%e7%8e%a9%e8%80%8d%ef%bc%88%e4%b8%8a%ef%bc%89"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fsj57jxyoook%2f&title=ES6%20%2b%20Webpack%20%2b%20React%20%2b%20Babel%20%e5%a6%82%e4%bd%95%e5%9c%a8%e4%bd%8e%e7%89%88%e6%9c%ac%e6%b5%8f%e8%a7%88%e5%99%a8%e4%b8%8a%e6%84%89%e5%bf%ab%e7%9a%84%e7%8e%a9%e8%80%8d%ef%bc%88%e4%b8%8a%ef%bc%89"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fsj57jxyoook%2f&title=ES6%20%2b%20Webpack%20%2b%20React%20%2b%20Babel%20%e5%a6%82%e4%bd%95%e5%9c%a8%e4%bd%8e%e7%89%88%e6%9c%ac%e6%b5%8f%e8%a7%88%e5%99%a8%e4%b8%8a%e6%84%89%e5%bf%ab%e7%9a%84%e7%8e%a9%e8%80%8d%ef%bc%88%e4%b8%8a%ef%bc%89"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">ES6 &#43; Webpack &#43; React &#43; Babel 如何在低版本浏览器上愉快的玩耍（上）</h1><div class="meta"><div class="postdate"><time datetime="2019-02-03" itemprop="datePublished">2019-02-03</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3e起因\x3c\/h2\x3e\n\x3cp\x3e某天，某测试说：“这个页面在 IE8 下白屏，9也白。。”\x3c\/p\x3e\n\x3cp\x3e某前端开发: 吭哧吭哧。。。一上午的时间就过去了，搞定了。\x3c\/p\x3e\n\x3cp\x3e第二天，某测试说：“IE 又白了。。”\x3c\/p\x3e\n\x3cp\x3e某前端开发: 吭哧吭哧。。。谁用的 \x3ccode\x3eObject.assign\x3c\/code\x3e，出来我保证削不屎你。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000006929964?w=458\x26amp;h=231\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000006929964?w=458\x26amp;h=231\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e原谅我不禁又黑了一把 IE。\x3c\/p\x3e\n\x3cp\x3e有人可能会想，都要淘汰了，还有什么好讲的？\x3c\/p\x3e\n\x3cp\x3e也许几年后，确实没用了，但目前我们的系统还是要对 ie8\x2b 做兼容，因为确实还有个别用户，尽管他没朋友。。。\x3c\/p\x3e\n\x3cp\x3e记录下本次在 IE 下踩得坑，让后面的同学能够不再在这上面浪费时间了。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e经过\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e测试\x3c\/h3\x3e\n\x3cp\x3e首先，看下面代码(以下测试在 IE9)\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22class Test extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  render() {\n    return \x3cdiv\x3e{this.props.content}\x3c\/div\x3e;\n  }\n}\n\nmodule.exports = Test;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eTest\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eReact\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e(props) {\n    \x3cspan class=\x22hljs-keyword\x22\x3esuper\x3c\/span\x3e(props);\n  }\n  render() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e{this.props.content}\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e;\n  }\n}\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = Test;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这段代码跑的妥妥的，没什么问题。\x3c\/p\x3e\n\x3cp\x3e一般来说，babel 在转换继承时，可能会出现兼容问题，那么，再看这一段\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22class Test extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  test() {\n      console.log(\x27test\x27);\n  }\n  render() {\n    return \x3cdiv\x3e{this.props.content}\x3c\/div\x3e;\n  }\n}\n\nTest.defaultProps = {\n  content: \x26quot;测试\x26quot;\n};\n\nclass Test2 extends Test {\n  constructor(props) {\n    super(props);\n    this.test();\n  }\n}\n\nTest2.displayName = \x27Test2\x27;\n\nmodule.exports = Test2;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eTest\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eReact\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e(props) {\n    \x3cspan class=\x22hljs-keyword\x22\x3esuper\x3c\/span\x3e(props);\n  }\n  test() {\n      \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27test\x27\x3c\/span\x3e);\n  }\n  render() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e{this.props.content}\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e;\n  }\n}\n\nTest.defaultProps = {\n  \x3cspan class=\x22hljs-attr\x22\x3econtent\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22测试\x22\x3c\/span\x3e\n};\n\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eTest2\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eTest\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e(props) {\n    \x3cspan class=\x22hljs-keyword\x22\x3esuper\x3c\/span\x3e(props);\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.test();\n  }\n}\n\nTest2.displayName = \x3cspan class=\x22hljs-string\x22\x3e\x27Test2\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = Test2;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这段代码同样也可以正常运行\x3c\/p\x3e\n\x3cp\x3e也就是说在上述这两种情况下，不做任何处理（前提是已经加载了 es5-shim\/es5-sham），在 IE9 下都可以正常运行。\x3c\/p\x3e\n\x3cp\x3e然后我们再看下会跑挂的代码\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22class Test extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      test: 1,\n    };\n  }\n  test() {\n      console.log(this.state.value);\n  }\n  render() {\n    return \x3cdiv\x3e{this.props.content}\x3c\/div\x3e;\n  }\n}\n\nTest.defaultProps = {\n  content: \x26quot;测试\x26quot;\n};\n\nclass Test2 extends Test {\n  constructor(props) {\n    super(props);\n    \/\/ SCRIPT5007: 无法获取属性 \x26quot;value\x26quot; 的值，对象为 null 或未定义\n    this.test();\n    \n    \/\/ SCRIPT5007: 无法获取属性 \x26quot;b\x26quot; 的值，对象为 null 或未定义\n    this.a = this.props.b;\n  }\n}\n\/\/ undefined\nconsole.log(Test2.defaultProps);\n\nTest2.displayName = \x27Test2\x27;\n\nmodule.exports = Test2;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eTest\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eReact\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e(props) {\n    \x3cspan class=\x22hljs-keyword\x22\x3esuper\x3c\/span\x3e(props);\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state = {\n      \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\n    };\n  }\n  test() {\n      \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state.value);\n  }\n  render() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e{this.props.content}\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e;\n  }\n}\n\nTest.defaultProps = {\n  \x3cspan class=\x22hljs-attr\x22\x3econtent\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22测试\x22\x3c\/span\x3e\n};\n\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eTest2\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eTest\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e(props) {\n    \x3cspan class=\x22hljs-keyword\x22\x3esuper\x3c\/span\x3e(props);\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ SCRIPT5007: 无法获取属性 \x22value\x22 的值，对象为 null 或未定义\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.test();\n    \n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ SCRIPT5007: 无法获取属性 \x22b\x22 的值，对象为 null 或未定义\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.a = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.b;\n  }\n}\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ undefined\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(Test2.defaultProps);\n\nTest2.displayName = \x3cspan class=\x22hljs-string\x22\x3e\x27Test2\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = Test2;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这段代码在高级浏览器中是没问题的，在 IE9 中会出现注释所描述的问题\x3c\/p\x3e\n\x3cp\x3e从这些问题分析，可得出3个结论\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e在构造函数里的定义的属性无法被继承\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e在构造函数里不能使用 \x3ccode\x3ethis.props.xx\x3c\/code\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e类属性或方法是无法被继承的\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e也就是说，只要规避了这三个条件的话，不做任何处理（前提是已经加载了 es5-shim\/es5-sham），在 IE9 下都可以正常运行。\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3cp\x3e第二点，是完全可以避免的，切记在 \x3ccode\x3econstructor\x3c\/code\x3e 直接使用 \x3ccode\x3eprops.xxx\x3c\/code\x3e, 不要再用 \x3ccode\x3ethis.props.xxx\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e第三点，也是可以完全避免的，因为从理论上来说，类属性就不该被继承，如果想使用父类的类属性可以直接\x3ccode\x3eTest2.defaultProps = Test.defaultProps;\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e第一点，可避免，但无法完全避免\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e原因\x3c\/h3\x3e\n\x3cp\x3e第一点，有时是无法完全避免的，那么就要查询原因，才能找到解决方案\x3c\/p\x3e\n\x3cp\x3e我们把 babel 转义后的代码放出来就能查出原因了\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x27use strict\x27;\n\nvar _createClass = function () {\n  ...\n}();\n\nfunction _classCallCheck(instance, Constructor) { \n  ...\n}\n\nfunction _possibleConstructorReturn(self, call) { \n  ...\n  \/\/ 这个方法只是做了下判断，返回第一个或第二参数\n  return call \x26amp;\x26amp; (typeof call === \x26quot;object\x26quot; || typeof call === \x26quot;function\x26quot;) ? call : self; }\n\nfunction _inherits(subClass, superClass) { \n  ...; \n  \/\/ 这里的 _inherits 是通过将子类的原型[[prototype]]指向了父类，所以如果在高级浏览器下，子类的可以继承到类属性\n  \/\/ 根本问题也是出在这里，IE9 下既没有 `setPrototypeOf` 也没有 `__proto__`\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; \n}\n\nvar Test = function (_React$Component) {\n  ...\n  return Test;\n}(React.Component);\n\nTest.defaultProps = {\n  content: \x26quot;测试\x26quot;\n};\n\nvar Test2 = function (_Test) {\n  _inherits(Test2, _Test);\n\n  function Test2(props) {\n    _classCallCheck(this, Test2);\n     \/\/ 这里的 this 会通过 _possibleConstructorReturn，来获取父类构造函数里定义的属性\n     \/\/ _possibleConstructorReturn 只是做了下判断，如果第二个参数得到了正确执行，则返回执行结果，否则返回第一个参数，也就是子类的 this\n     \/\/ 也就是说问题出在 Object.getPrototypeOf \n     \/\/ 在 _inherits 中将子类的原型指向了父类， 这里通过 getPrototypeOf 来获取父类，其实就是 _Test\n     \/\/ Object.getPrototypeOf 不能正确的执行，导致了子类无法继承到在构造函数里定义的属性或方法，也无法继承到类属性或方法\n    var _this2 = _possibleConstructorReturn(this, Object.getPrototypeOf(Test2).call(this, props));\n\n    _this2.test();\n    console.log(_this2.props.children);\n    return _this2;\n  }\n\n  return Test2;\n}(Test);\n\nconsole.log(Test2.defaultProps);\n\nTest2.displayName = \x27Test\x27;\n\nmodule.exports = Test2;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x27use strict\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e _createClass = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  ...\n}();\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3e_classCallCheck\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3einstance, Constructor\x3c\/span\x3e) \x3c\/span\x3e{ \n  ...\n}\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3e_possibleConstructorReturn\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eself, call\x3c\/span\x3e) \x3c\/span\x3e{ \n  ...\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 这个方法只是做了下判断，返回第一个或第二参数\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e call \x26amp;\x26amp; (\x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e call === \x3cspan class=\x22hljs-string\x22\x3e\x22object\x22\x3c\/span\x3e || \x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e call === \x3cspan class=\x22hljs-string\x22\x3e\x22function\x22\x3c\/span\x3e) ? call : self; }\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3e_inherits\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3esubClass, superClass\x3c\/span\x3e) \x3c\/span\x3e{ \n  ...; \n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 这里的 _inherits 是通过将子类的原型[[prototype]]指向了父类，所以如果在高级浏览器下，子类的可以继承到类属性\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 根本问题也是出在这里，IE9 下既没有 `setPrototypeOf` 也没有 `__proto__`\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (superClass) \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.setPrototypeOf ? \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; \n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e Test = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e_React$Component\x3c\/span\x3e) \x3c\/span\x3e{\n  ...\n  return Test;\n}(React.Component);\n\nTest.defaultProps = {\n  \x3cspan class=\x22hljs-attr\x22\x3econtent\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22测试\x22\x3c\/span\x3e\n};\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e Test2 = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e_Test\x3c\/span\x3e) \x3c\/span\x3e{\n  _inherits(Test2, _Test);\n\n  \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eTest2\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eprops\x3c\/span\x3e) \x3c\/span\x3e{\n    _classCallCheck(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e, Test2);\n     \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 这里的 this 会通过 _possibleConstructorReturn，来获取父类构造函数里定义的属性\x3c\/span\x3e\n     \x3cspan class=\x22hljs-comment\x22\x3e\/\/ _possibleConstructorReturn 只是做了下判断，如果第二个参数得到了正确执行，则返回执行结果，否则返回第一个参数，也就是子类的 this\x3c\/span\x3e\n     \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 也就是说问题出在 Object.getPrototypeOf \x3c\/span\x3e\n     \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 在 _inherits 中将子类的原型指向了父类， 这里通过 getPrototypeOf 来获取父类，其实就是 _Test\x3c\/span\x3e\n     \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Object.getPrototypeOf 不能正确的执行，导致了子类无法继承到在构造函数里定义的属性或方法，也无法继承到类属性或方法\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e _this2 = _possibleConstructorReturn(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.getPrototypeOf(Test2).call(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e, props));\n\n    _this2.test();\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(_this2.props.children);\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e _this2;\n  }\n\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e Test2;\n}(Test);\n\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(Test2.defaultProps);\n\nTest2.displayName = \x3cspan class=\x22hljs-string\x22\x3e\x27Test\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = Test2;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e通过上述的代码注释，可以得出有两处问题需要解决\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e正确的获取父类（解决无法继承到在构造函数里定义的属性或方法）\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e正确的将子类的原型指向了父类（解决无法继承到类属性或方法）\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e解决方案\x3c\/h3\x3e\n\x3cp\x3e通过文档的查询，发现只要开启 es2015-classes 的 loose 模式即可解决第一个问题\x3c\/p\x3e\n\x3ch4\x3eloose 模式\x3c\/h4\x3e\n\x3cblockquote\x3e\n\x3cp\x3eBabel have two modes:\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3eA normal mode follows the semantics of ECMAScript 6 as closely as possible.\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eA loose mode produces simpler ES5 code.\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3eBabel 有两种模式：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e尽可能符合 ES6 语义的 normal 模式。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e提供更简单 ES5 代码的 loose 模式。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e尽管官方是更推荐使用 normal 模式，但为了兼容 IE，我们目前也只能开启 loose 模式。\x3c\/p\x3e\n\x3cp\x3e在 babel6 中，主要是通过 babel-preset-2015 这个插件，来进行转义的\x3cbr\x3e我们看下 babel-preset-2015\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 plugins: [\n    require(\x26quot;babel-plugin-transform-es2015-template-literals\x26quot;),\n    require(\x26quot;babel-plugin-transform-es2015-literals\x26quot;),\n    require(\x26quot;babel-plugin-transform-es2015-function-name\x26quot;),\n    ...\n    require(\x26quot;babel-plugin-transform-es2015-classes\x26quot;),\n    ...\n    require(\x26quot;babel-plugin-transform-es2015-typeof-symbol\x26quot;),\n    require(\x26quot;babel-plugin-transform-es2015-modules-commonjs\x26quot;),\n    [require(\x26quot;babel-plugin-transform-regenerator\x26quot;), { async: false, asyncGenerators: false }],\n  ]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e plugins: [\n    \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22babel-plugin-transform-es2015-template-literals\x22\x3c\/span\x3e),\n    \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22babel-plugin-transform-es2015-literals\x22\x3c\/span\x3e),\n    \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22babel-plugin-transform-es2015-function-name\x22\x3c\/span\x3e),\n    ...\n    require(\x3cspan class=\x22hljs-string\x22\x3e\x22babel-plugin-transform-es2015-classes\x22\x3c\/span\x3e),\n    ...\n    require(\x3cspan class=\x22hljs-string\x22\x3e\x22babel-plugin-transform-es2015-typeof-symbol\x22\x3c\/span\x3e),\n    \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22babel-plugin-transform-es2015-modules-commonjs\x22\x3c\/span\x3e),\n    [\x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22babel-plugin-transform-regenerator\x22\x3c\/span\x3e), { \x3cspan class=\x22hljs-attr\x22\x3easync\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3easyncGenerators\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e }],\n  ]\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e是一堆对应转义的插件，从命名上也可看出了大概，比如 babel-plugin-transform-es2015-classes 就是做类的转义的，也就是我们只需把它开启 loose 模式，即可解决我们的一个问题\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22[require(\x27babel-plugin-transform-es2015-classes\x27), {loose: true}],\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e[\x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27babel-plugin-transform-es2015-classes\x27\x3c\/span\x3e), {\x3cspan class=\x22hljs-attr\x22\x3eloose\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e}],\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e看下开启了 loose 模式的代码，你会发现它的确更接近 ES5\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var Test = function (_React$Component) {\n  ...\n  \/\/ 这里是 ES5 的写法\n  Test.prototype.test = function test() {\n    console.log(this.state.value);\n  };\n  \/* normal 模式是这样的\n  {\n    key: \x27test\x27,\n    value: function test() {\n      console.log(this.state.value);\n    }\n  }\n  *\/\n  return Test;\n}(React.Component);\n\nvar Test2 = function (_Test) {\n  _inherits(Test2, _Test);\n\n  function Test2(props) {\n    _classCallCheck(this, Test2);\n    \/\/ 这里直接拿到了父类 _Test, 即解决了无法继承到在构造函数里定义的属性或方法\n    var _this2 = _possibleConstructorReturn(this, _Test.call(this, props));\n\n    _this2.test();\n    return _this2;\n  }\n\n  return Test2;\n}(Test);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e Test = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e_React$Component\x3c\/span\x3e) \x3c\/span\x3e{\n  ...\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 这里是 ES5 的写法\x3c\/span\x3e\n  Test.prototype.test = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3etest\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state.value);\n  };\n  \x3cspan class=\x22hljs-comment\x22\x3e\/* normal 模式是这样的\n  {\n    key: \x27test\x27,\n    value: function test() {\n      console.log(this.state.value);\n    }\n  }\n  *\/\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e Test;\n}(React.Component);\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e Test2 = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e_Test\x3c\/span\x3e) \x3c\/span\x3e{\n  _inherits(Test2, _Test);\n\n  \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eTest2\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eprops\x3c\/span\x3e) \x3c\/span\x3e{\n    _classCallCheck(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e, Test2);\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 这里直接拿到了父类 _Test, 即解决了无法继承到在构造函数里定义的属性或方法\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e _this2 = _possibleConstructorReturn(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e, _Test.call(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e, props));\n\n    _this2.test();\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e _this2;\n  }\n\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e Test2;\n}(Test);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们可以通过去安装 \x3ca href=\x22https:\/\/github.com\/bkonkle\/babel-preset-es2015-loose\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ebabel-preset-es2015-loose\x3c\/a\x3e, 这个插件来开启 loose 模式。\x3c\/p\x3e\n\x3cp\x3e但从我们团队的 \x3cstrong\x3e老司机\x3c\/strong\x3e 口中\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000006929965\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000006929965\x22 alt=\x22image\x22 title=\x22image\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e得到了一个更好插件\x3ca href=\x22https:\/\/github.com\/jmcriffey\/babel-preset-es2015-ie\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ebabel-preset-es2015-ie\x3c\/a\x3e，看下这个插件的代码，发现它和原来的 babel-preset-2015 只有两行区别\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22[\n  [require(\x27babel-plugin-transform-es2015-classes\x27), {loose: true}],\n  require(\x27babel-plugin-transform-proto-to-assign\x27),\n]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e[\n  [\x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27babel-plugin-transform-es2015-classes\x27\x3c\/span\x3e), {\x3cspan class=\x22hljs-attr\x22\x3eloose\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e}],\n  \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27babel-plugin-transform-proto-to-assign\x27\x3c\/span\x3e),\n]\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e刚好解决我们上述碰到的两个问题\x3c\/p\x3e\n\x3cp\x3e这个 \x3ccode\x3ebabel-plugin-transform-proto-to-assign\x3c\/code\x3e 插件会生成一个 _defaults 方法来处理原型\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function _inherits(subClass, superClass) { \n  ...; \n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : _defaults(subClass, superClass);\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3e_inherits\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3esubClass, superClass\x3c\/span\x3e) \x3c\/span\x3e{ \n  ...; \n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (superClass) \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.setPrototypeOf ? \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.setPrototypeOf(subClass, superClass) : _defaults(subClass, superClass);\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function _defaults(obj, defaults) {\n var keys = Object.getOwnPropertyNames(defaults);\n  for (var i = 0; i \x3c keys.length; i\x2b\x2b) {\n   var key = keys[i]; \n   var value = Object.getOwnPropertyDescriptor(defaults, key);\n    if (value \x26amp;\x26amp; value.configurable \x26amp;\x26amp; obj[key] === undefined) {\n     Object.defineProperty(obj, key, value); \n     } \n   }\n  return obj;\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3e_defaults\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eobj, defaults\x3c\/span\x3e) \x3c\/span\x3e{\n \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e keys = \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.getOwnPropertyNames(defaults);\n  \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; keys.length; i\x2b\x2b) {\n   \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e key = keys[i]; \n   \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e value = \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.getOwnPropertyDescriptor(defaults, key);\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (value \x26amp;\x26amp; value.configurable \x26amp;\x26amp; obj[key] === \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e) {\n     \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.defineProperty(obj, key, value); \n     } \n   }\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e obj;\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cblockquote\x3e\x3cp\x3e这个插件正确的将子类的原型指向了父类（解决无法继承到类属性或方法）\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e总结\x3c\/h2\x3e\n\x3cp\x3e本文讲述低版本浏览器报错的原因和解决方案\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e一方面是提示下在构造函数里不要使用 \x3ccode\x3ethis.props.xx\x3c\/code\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e另一方面也对继承的机制有了更好的理解\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e在这次项目中发现在低版本浏览器跑不起来的两点主要原因：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3eSCRIPT5007: 无法获取属性 xxx 的值，对象为 null 或未定义\x3c\/code\x3e，这种情况一般是组件继承后，无法继承到在构造函数里定义的属性或方法，同样类属性或方法也同样无法继承\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3eSCRIPT438: 对象不支持 xxx 属性或方法\x3c\/code\x3e，这种情况一般是使用了 es6、es7 的高级语法，\x3ccode\x3eObject.assgin\x3c\/code\x3e \x3ccode\x3eObject.keys\x3c\/code\x3e 等，这种情况在移动端的一些 ‘神机’ 也一样会挂。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e第一点本文已经分析，预知第二点讲解请见下篇。\x3c\/p\x3e\n\x3cp\x3e备注：下篇会主要介绍下如何让 用了 \x3ccode\x3eObject.assign\x3c\/code\x3e 的那位同学可以继续用，又不会被削。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>ES6 + Webpack + React + Babel 如何在低版本浏览器上愉快的玩耍（上）</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000006929961">https://segmentfault.com/a/1190000006929961</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/sj57jxyoook/" target="_blank">https://alili.tech/archive/sj57jxyoook/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>