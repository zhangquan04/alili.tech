<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="从零到一：用Phaser.js写意地开发小游戏（Chapter 5 - 游戏大功告成）"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>从零到一：用Phaser.js写意地开发小游戏（Chapter 5 - 游戏大功告成） | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/ez9frc5ms0f/",
				"appid": "1613049289050283", 
				"title": "从零到一：用Phaser.js写意地开发小游戏（Chapter 5 - 游戏大功告成） | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-15T02:30:12"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/1euyieiqp8d/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/5r7uyl81wkj/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fez9frc5ms0f%2f&text=%e4%bb%8e%e9%9b%b6%e5%88%b0%e4%b8%80%ef%bc%9a%e7%94%a8Phaser.js%e5%86%99%e6%84%8f%e5%9c%b0%e5%bc%80%e5%8f%91%e5%b0%8f%e6%b8%b8%e6%88%8f%ef%bc%88Chapter%205%20-%20%e6%b8%b8%e6%88%8f%e5%a4%a7%e5%8a%9f%e5%91%8a%e6%88%90%ef%bc%89"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fez9frc5ms0f%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fez9frc5ms0f%2f&text=%e4%bb%8e%e9%9b%b6%e5%88%b0%e4%b8%80%ef%bc%9a%e7%94%a8Phaser.js%e5%86%99%e6%84%8f%e5%9c%b0%e5%bc%80%e5%8f%91%e5%b0%8f%e6%b8%b8%e6%88%8f%ef%bc%88Chapter%205%20-%20%e6%b8%b8%e6%88%8f%e5%a4%a7%e5%8a%9f%e5%91%8a%e6%88%90%ef%bc%89"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fez9frc5ms0f%2f&title=%e4%bb%8e%e9%9b%b6%e5%88%b0%e4%b8%80%ef%bc%9a%e7%94%a8Phaser.js%e5%86%99%e6%84%8f%e5%9c%b0%e5%bc%80%e5%8f%91%e5%b0%8f%e6%b8%b8%e6%88%8f%ef%bc%88Chapter%205%20-%20%e6%b8%b8%e6%88%8f%e5%a4%a7%e5%8a%9f%e5%91%8a%e6%88%90%ef%bc%89"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fez9frc5ms0f%2f&is_video=false&description=%e4%bb%8e%e9%9b%b6%e5%88%b0%e4%b8%80%ef%bc%9a%e7%94%a8Phaser.js%e5%86%99%e6%84%8f%e5%9c%b0%e5%bc%80%e5%8f%91%e5%b0%8f%e6%b8%b8%e6%88%8f%ef%bc%88Chapter%205%20-%20%e6%b8%b8%e6%88%8f%e5%a4%a7%e5%8a%9f%e5%91%8a%e6%88%90%ef%bc%89"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e4%bb%8e%e9%9b%b6%e5%88%b0%e4%b8%80%ef%bc%9a%e7%94%a8Phaser.js%e5%86%99%e6%84%8f%e5%9c%b0%e5%bc%80%e5%8f%91%e5%b0%8f%e6%b8%b8%e6%88%8f%ef%bc%88Chapter%205%20-%20%e6%b8%b8%e6%88%8f%e5%a4%a7%e5%8a%9f%e5%91%8a%e6%88%90%ef%bc%89&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fez9frc5ms0f%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fez9frc5ms0f%2f&title=%e4%bb%8e%e9%9b%b6%e5%88%b0%e4%b8%80%ef%bc%9a%e7%94%a8Phaser.js%e5%86%99%e6%84%8f%e5%9c%b0%e5%bc%80%e5%8f%91%e5%b0%8f%e6%b8%b8%e6%88%8f%ef%bc%88Chapter%205%20-%20%e6%b8%b8%e6%88%8f%e5%a4%a7%e5%8a%9f%e5%91%8a%e6%88%90%ef%bc%89"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fez9frc5ms0f%2f&title=%e4%bb%8e%e9%9b%b6%e5%88%b0%e4%b8%80%ef%bc%9a%e7%94%a8Phaser.js%e5%86%99%e6%84%8f%e5%9c%b0%e5%bc%80%e5%8f%91%e5%b0%8f%e6%b8%b8%e6%88%8f%ef%bc%88Chapter%205%20-%20%e6%b8%b8%e6%88%8f%e5%a4%a7%e5%8a%9f%e5%91%8a%e6%88%90%ef%bc%89"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fez9frc5ms0f%2f&title=%e4%bb%8e%e9%9b%b6%e5%88%b0%e4%b8%80%ef%bc%9a%e7%94%a8Phaser.js%e5%86%99%e6%84%8f%e5%9c%b0%e5%bc%80%e5%8f%91%e5%b0%8f%e6%b8%b8%e6%88%8f%ef%bc%88Chapter%205%20-%20%e6%b8%b8%e6%88%8f%e5%a4%a7%e5%8a%9f%e5%91%8a%e6%88%90%ef%bc%89"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fez9frc5ms0f%2f&title=%e4%bb%8e%e9%9b%b6%e5%88%b0%e4%b8%80%ef%bc%9a%e7%94%a8Phaser.js%e5%86%99%e6%84%8f%e5%9c%b0%e5%bc%80%e5%8f%91%e5%b0%8f%e6%b8%b8%e6%88%8f%ef%bc%88Chapter%205%20-%20%e6%b8%b8%e6%88%8f%e5%a4%a7%e5%8a%9f%e5%91%8a%e6%88%90%ef%bc%89"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">从零到一：用Phaser.js写意地开发小游戏（Chapter 5 - 游戏大功告成）</h1><div class="meta"><div class="postdate"><time datetime="2019-01-15" itemprop="datePublished">2019-01-15</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVNawu?w=900\x26amp;h=500\x22 src=\x22https:\/\/static.alili.tech\/img\/bVNawu?w=900\x26amp;h=500\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch4\x3e回顾\x3c\/h4\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000009282734\x22\x3e上一节\x3c\/a\x3e我们完成了游戏核心场景play的大部分工作，能操控主角，能随机掉落苹果了。那么这一节我们来完成游戏剩余的部分，主要是计算分数、如何结束游戏等等。\x3c\/p\x3e\n\x3ch4\x3e正式开始\x3c\/h4\x3e\n\x3ch5\x3e第一步：接住苹果得分\x3c\/h5\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e主角加入物理运动\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e检测接触事件\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e接到苹果后，让苹果消失，并加分\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e对主角的修改：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22game.physics.enable(man); \/\/ 加入物理运动\nman.body.allowGravity = false; \/\/ 清除重力影响\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs d\x22\x3e\x3ccode\x3egame.physics.enable(man); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 加入物理运动\x3c\/span\x3e\nman.\x3cspan class=\x22hljs-keyword\x22\x3ebody\x3c\/span\x3e.allowGravity = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 清除重力影响\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e检测接触事件要写在play场景的update生命周期内，意思为每次更新视图都会去检测主角和苹果是否有接触，有的话，则执行pickApple方法。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22this.update = function() {\n    \/\/ 监听接触事件\n    game.physics.arcade.overlap(man, apples, pickApple, null, this);\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.update = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 监听接触事件\x3c\/span\x3e\n    game.physics.arcade.overlap(man, apples, pickApple, \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e);\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e接触事件则非常简单，调用apple的kill方法，则可以让苹果从场景中清除。同时，我们更新一下分数。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 接触事件\nfunction pickApple(man, apple) {\n    apple.kill();\n    title.text = \x2b\x2bscore;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs openscad\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 接触事件\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3epickApple\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(man, apple)\x3c\/span\x3e {\x3c\/span\x3e\n    apple.kill();\n    title.\x3cspan class=\x22hljs-built_in\x22\x3etext\x3c\/span\x3e = \x2b\x2bscore;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e示例代码：\x3ca href=\x22https:\/\/jsfiddle.net\/Vincent_Pat\/h7o4cqdp\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/jsfiddle.net\/Vincent_...\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22Vincent_Pat\/h7o4cqdp\/\x22 data-typeid=\x220\x22\x3e点击预览\x3c\/button\x3e\x3c\/p\x3e\n\x3chr\x3e\n\x3ch5\x3e第二步：苹果掉地上，游戏结束\x3c\/h5\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e检测苹果与场景边缘的接触\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e一旦接触，则游戏结束，跳转到结束场景\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e布置结束场景，并显示分数\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e为结束场景添加点击事件，点击后再玩一次\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3eonWorldBounds属性可设置为一个Phaser.Signal对象，当开启了collideWorldBounds并且接触到场景边缘时，将触发Signal的事件。另外，这个特殊的Signal提供了上下左右四个值来让我们判断物体到底接触的是哪条边，考虑到有些苹果会接触到左右两边，我们只在和下边界接触的时候才结束游戏。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 设置苹果与游戏边缘碰撞，\napple.body.collideWorldBounds = true;\napple.body.onWorldBounds = new Phaser.Signal();\napple.body.onWorldBounds.add(function(apple, up, down, left, right) {\n    if (down) {\n        apple.kill();\n        game.state.start(\x27over\x27, true, false, score);\n    }\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 设置苹果与游戏边缘碰撞，\x3c\/span\x3e\napple.body.collideWorldBounds = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\napple.body.onWorldBounds = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Phaser.Signal();\napple.body.onWorldBounds.add(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(apple, up, down, left, right)\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (down) {\n        apple.kill();\n        game.state.start(\x3cspan class=\x22hljs-string\x22\x3e\x27over\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e, \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e, score);\n    }\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e布置结束场景，和之前布置其他场景一样，添加背景、文本等等。不同的是这次多了init这个生命周期，主要是由于在play场景中跳转到这个场景时会带上score，这个score会传入init这个生命周期的方法中。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 结束场景\nover: function() {\n    var score = 0;\n    this.init = function() {\n        score = arguments[0];\n    }\n    this.create = function() {\n        \/\/ 添加背景\n        var bg = game.add.image(0, 0, \x27bg\x27);\n        bg.width = game.world.width;\n        bg.height = game.world.height;\n        \/\/ 添加文本\n        var title = game.add.text(game.world.centerX, game.world.height * 0.25, \x27游戏结束\x27, {\n            fontSize: \x2740px\x27,\n            fontWeight: \x27bold\x27,\n            fill: \x27#f2bb15\x27\n        });\n        title.anchor.setTo(0.5, 0.5);\n        var scoreStr = \x27你的得分是：\x27\x2bscore\x2b\x27分\x27;\n        var scoreText = game.add.text(game.world.centerX, game.world.height * 0.4, scoreStr, {\n            fontSize: \x2730px\x27,\n            fontWeight: \x27bold\x27,\n            fill: \x27#f2bb15\x27\n        });\n        scoreText.anchor.setTo(0.5, 0.5);\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 结束场景\x3c\/span\x3e\nover: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e score = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.init = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        score = \x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e];\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.create = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 添加背景\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e bg = game.add.image(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27bg\x27\x3c\/span\x3e);\n        bg.width = game.world.width;\n        bg.height = game.world.height;\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 添加文本\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e title = game.add.text(game.world.centerX, game.world.height * \x3cspan class=\x22hljs-number\x22\x3e0.25\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27游戏结束\x27\x3c\/span\x3e, {\n            \x3cspan class=\x22hljs-attr\x22\x3efontSize\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x2740px\x27\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3efontWeight\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27bold\x27\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3efill\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27#f2bb15\x27\x3c\/span\x3e\n        });\n        title.anchor.setTo(\x3cspan class=\x22hljs-number\x22\x3e0.5\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0.5\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e scoreStr = \x3cspan class=\x22hljs-string\x22\x3e\x27你的得分是：\x27\x3c\/span\x3e\x2bscore\x2b\x3cspan class=\x22hljs-string\x22\x3e\x27分\x27\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e scoreText = game.add.text(game.world.centerX, game.world.height * \x3cspan class=\x22hljs-number\x22\x3e0.4\x3c\/span\x3e, scoreStr, {\n            \x3cspan class=\x22hljs-attr\x22\x3efontSize\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x2730px\x27\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3efontWeight\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27bold\x27\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3efill\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27#f2bb15\x27\x3c\/span\x3e\n        });\n        scoreText.anchor.setTo(\x3cspan class=\x22hljs-number\x22\x3e0.5\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0.5\x3c\/span\x3e);\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e最后我们在结束场景添加一个点击事件，点击后跳转到play场景，再玩一次。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var remind = game.add.text(game.world.centerX, game.world.height * 0.6, \x27点击任意位置再玩一次\x27, {\n    fontSize: \x2720px\x27,\n    fontWeight: \x27bold\x27,\n    fill: \x27#f2bb15\x27\n});\nremind.anchor.setTo(0.5, 0.5);\n\/\/ 添加点击事件\ngame.input.onTap.add(function() {\n    game.state.start(\x27play\x27);\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs pf\x22\x3e\x3ccode\x3evar remind = game.add.text(game.world.centerX, game.world.height * \x3cspan class=\x22hljs-number\x22\x3e0.6\x3c\/span\x3e, \x27点击任意位置再玩一次\x27, {\n    fontSize: \x27\x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3epx\x27,\n    fontWeight: \x27bold\x27,\n    fill: \x27\x3cspan class=\x22hljs-comment\x22\x3e#f2bb15\x27\x3c\/span\x3e\n});\nremind.\x3cspan class=\x22hljs-built_in\x22\x3eanchor\x3c\/span\x3e.\x3cspan class=\x22hljs-built_in\x22\x3eset\x3c\/span\x3eTo(\x3cspan class=\x22hljs-number\x22\x3e0.5\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0.5\x3c\/span\x3e);\n\/\/ 添加点击事件\ngame.input.\x3cspan class=\x22hljs-keyword\x22\x3eon\x3c\/span\x3eTap.add(function() {\n    game.\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.start(\x27play\x27);\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e示例代码：\x3ca href=\x22https:\/\/jsfiddle.net\/Vincent_Pat\/m2q3z3uo\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/jsfiddle.net\/Vincent_...\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22Vincent_Pat\/m2q3z3uo\/\x22 data-typeid=\x220\x22\x3e点击预览\x3c\/button\x3e\x3c\/p\x3e\n\x3chr\x3e\n\x3ch5\x3e第三步：添加得分效果\x3c\/h5\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e为不同苹果设置不同的得分\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e接到苹果时添加对应的得分图片到场景中\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e为得分图片添加过渡效果\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e先来介绍一下Phaser的过渡：\x3c\/p\x3e\n\x3cp\x3e要使用过渡，首先要创建过渡对象，传入的是要应用过渡效果的对象，例如apple。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 创建过渡对象\ngame.add.tween(obj);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs cs\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 创建过渡对象\x3c\/span\x3e\ngame.\x3cspan class=\x22hljs-keyword\x22\x3eadd\x3c\/span\x3e.tween(obj);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后使用得最多的是Tween的to方法，也就是过渡到指定状态的方法。可以指定过渡时间曲线，延迟、是否重复、过渡时间等等参数，使用Tween已经可以实现大部分的动画效果。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVNdMv?w=1686\x26amp;h=1280\x22 src=\x22https:\/\/static.alili.tech\/img\/bVNdMv?w=1686\x26amp;h=1280\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e于是我们修改之前的pickApple方法，也就是接到苹果后的方法。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function pickApple(man, apple) {\n    var point = 1;\n    var img = \x27one\x27;\n    if (apple.type === \x27red\x27) {\n        point = 3;\n        img = \x27three\x27;\n    } else if (apple.type === \x27yellow\x27) {\n        point = 5;\n        img = \x27five\x27;\n    }\n    \/\/ 添加得分图片\n    var goal = game.add.image(apple.x, apple.y, img);\n    var goalImg = game.cache.getImage(img);\n    goal.width = apple.width;\n    goal.height = goal.width \/ (goalImg.width \/ goalImg.height);\n    goal.alpha = 0;\n    \/\/ 添加过渡效果\n    var showTween = game.add.tween(goal).to({\n        alpha: 1,\n        y: goal.y - 20\n    }, 100, Phaser.Easing.Linear.None, true, 0, 0, false);\n    showTween.onComplete.add(function() {\n        var hideTween = game.add.tween(goal).to({\n            alpha: 0,\n            y: goal.y - 20\n        }, 100, Phaser.Easing.Linear.None, true, 200, 0, false);\n        hideTween.onComplete.add(function() {\n            goal.kill();\n        });\n    });\n    \/\/ 更新分数\n    score \x2b= point;\n    title.text = score;\n    \/\/ 清除苹果\n    apple.kill();\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs processing\x22\x3e\x3ccode\x3efunction pickApple(man, apple) {\n    var \x3cspan class=\x22hljs-built_in\x22\x3epoint\x3c\/span\x3e = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n    var img = \x3cspan class=\x22hljs-string\x22\x3e\x27one\x27\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (apple.type === \x3cspan class=\x22hljs-string\x22\x3e\x27red\x27\x3c\/span\x3e) {\n        \x3cspan class=\x22hljs-built_in\x22\x3epoint\x3c\/span\x3e = \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e;\n        img = \x3cspan class=\x22hljs-string\x22\x3e\x27three\x27\x3c\/span\x3e;\n    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (apple.type === \x3cspan class=\x22hljs-string\x22\x3e\x27yellow\x27\x3c\/span\x3e) {\n        \x3cspan class=\x22hljs-built_in\x22\x3epoint\x3c\/span\x3e = \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e;\n        img = \x3cspan class=\x22hljs-string\x22\x3e\x27five\x27\x3c\/span\x3e;\n    }\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 添加得分图片\x3c\/span\x3e\n    var goal = game.\x3cspan class=\x22hljs-built_in\x22\x3eadd\x3c\/span\x3e.\x3cspan class=\x22hljs-built_in\x22\x3eimage\x3c\/span\x3e(apple.x, apple.y, img);\n    var goalImg = game.cache.getImage(img);\n    goal.\x3cspan class=\x22hljs-built_in\x22\x3ewidth\x3c\/span\x3e = apple.\x3cspan class=\x22hljs-built_in\x22\x3ewidth\x3c\/span\x3e;\n    goal.\x3cspan class=\x22hljs-built_in\x22\x3eheight\x3c\/span\x3e = goal.\x3cspan class=\x22hljs-built_in\x22\x3ewidth\x3c\/span\x3e \/ (goalImg.\x3cspan class=\x22hljs-built_in\x22\x3ewidth\x3c\/span\x3e \/ goalImg.\x3cspan class=\x22hljs-built_in\x22\x3eheight\x3c\/span\x3e);\n    goal.\x3cspan class=\x22hljs-built_in\x22\x3ealpha\x3c\/span\x3e = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 添加过渡效果\x3c\/span\x3e\n    var showTween = game.\x3cspan class=\x22hljs-built_in\x22\x3eadd\x3c\/span\x3e.tween(goal).to({\n        \x3cspan class=\x22hljs-built_in\x22\x3ealpha\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\n        y: goal.y - \x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e\n    }, \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e, Phaser.Easing.Linear.None, \x3cspan class=\x22hljs-keyword\x22\x3etrue\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3efalse\x3c\/span\x3e);\n    showTween.onComplete.\x3cspan class=\x22hljs-built_in\x22\x3eadd\x3c\/span\x3e(function() {\n        var hideTween = game.\x3cspan class=\x22hljs-built_in\x22\x3eadd\x3c\/span\x3e.tween(goal).to({\n            \x3cspan class=\x22hljs-built_in\x22\x3ealpha\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n            y: goal.y - \x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e\n        }, \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e, Phaser.Easing.Linear.None, \x3cspan class=\x22hljs-keyword\x22\x3etrue\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3efalse\x3c\/span\x3e);\n        hideTween.onComplete.\x3cspan class=\x22hljs-built_in\x22\x3eadd\x3c\/span\x3e(function() {\n            goal.kill();\n        });\n    });\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 更新分数\x3c\/span\x3e\n    score \x2b= \x3cspan class=\x22hljs-built_in\x22\x3epoint\x3c\/span\x3e;\n    title.\x3cspan class=\x22hljs-built_in\x22\x3etext\x3c\/span\x3e = score;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 清除苹果\x3c\/span\x3e\n    apple.kill();\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e示例代码：\x3ca href=\x22https:\/\/jsfiddle.net\/Vincent_Pat\/t8d99pxc\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/jsfiddle.net\/Vincent_...\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22Vincent_Pat\/t8d99pxc\/\x22 data-typeid=\x220\x22\x3e点击预览\x3c\/button\x3e\x3c\/p\x3e\n\x3chr\x3e\n\x3ch5\x3e第四步：加入炸弹，丰富音效\x3c\/h5\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e随机掉落炸弹\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e加入接到苹果或炸弹的音效\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e接到炸弹后游戏结束\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e要想随机掉落炸弹非常简单，只需要在之前的appleTypes里面加入bomb即可，同时如果有其他东西（例如梨子）要加入的话也可以这样。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var appleTypes = [\x27green\x27, \x27red\x27, \x27yellow\x27, \x27bomb\x27];\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs ebnf\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-attribute\x22\x3evar appleTypes\x3c\/span\x3e = [\x3cspan class=\x22hljs-string\x22\x3e\x27green\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27red\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27yellow\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27bomb\x27\x3c\/span\x3e];\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e同时，由于我们不接炸弹，因此炸弹掉到地上也不会导致游戏结束，因此修改一下代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22apple.body.onWorldBounds.add(function(apple, up, down, left, right) {\n    if (down) {\n        apple.kill();\n        if (apple.type !== \x27bomb\x27) game.state.start(\x27over\x27, true, false, score);\n    }\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs ada\x22\x3e\x3ccode\x3eapple.\x3cspan class=\x22hljs-keyword\x22\x3ebody\x3c\/span\x3e.onWorldBounds.add(\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(apple, up, down, left, right) {\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (down) {\n        apple.kill();\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (apple.\x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3e!== \x3c\/span\x3e\x3cspan class=\x22hljs-symbol\x22\x3e\x27bomb\x3c\/span\x3e\x27) game.state.start(\x3cspan class=\x22hljs-symbol\x22\x3e\x27over\x3c\/span\x3e\x27, \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e, \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e, score);\n    }\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e接到苹果和炸弹时播放音效，这个很简单，直接调用音频对象的\x3ccode\x3eplay\x3c\/code\x3e方法即可。接到炸弹后结束和苹果掉地上的调用方式是一样的。我们继续来修改pickApple方法：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function pickApple(man, apple) {\n    if (apple.type === \x27bomb\x27) {\n        \/\/ 播放音效\n        bombMusic.play();\n        game.state.start(\x27over\x27, true, false, score);\n    } else {\n        var point = 1;\n        var img = \x27one\x27;\n        if (apple.type === \x27red\x27) {\n            point = 3;\n            img = \x27three\x27;\n        } else if (apple.type === \x27yellow\x27) {\n            point = 5;\n            img = \x27five\x27;\n        }\n        \/\/ 添加得分图片\n        var goal = game.add.image(apple.x, apple.y, img);\n        var goalImg = game.cache.getImage(img);\n        goal.width = apple.width;\n        goal.height = goal.width \/ (goalImg.width \/ goalImg.height);\n        goal.alpha = 0;\n        \/\/ 添加过渡效果\n        var showTween = game.add.tween(goal).to({\n            alpha: 1,\n            y: goal.y - 20\n        }, 100, Phaser.Easing.Linear.None, true, 0, 0, false);\n        showTween.onComplete.add(function() {\n            var hideTween = game.add.tween(goal).to({\n                alpha: 0,\n                y: goal.y - 20\n            }, 100, Phaser.Easing.Linear.None, true, 200, 0, false);\n            hideTween.onComplete.add(function() {\n                goal.kill();\n            });\n        });\n        \/\/ 更新分数\n        score \x2b= point;\n        title.text = score;\n        \/\/ 清除苹果\n        apple.kill();\n        \/\/ 播放音效\n        scoreMusic.play();\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs processing\x22\x3e\x3ccode\x3efunction pickApple(man, apple) {\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (apple.type === \x3cspan class=\x22hljs-string\x22\x3e\x27bomb\x27\x3c\/span\x3e) {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 播放音效\x3c\/span\x3e\n        bombMusic.play();\n        game.state.start(\x3cspan class=\x22hljs-string\x22\x3e\x27over\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3etrue\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3efalse\x3c\/span\x3e, score);\n    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n        var \x3cspan class=\x22hljs-built_in\x22\x3epoint\x3c\/span\x3e = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n        var img = \x3cspan class=\x22hljs-string\x22\x3e\x27one\x27\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (apple.type === \x3cspan class=\x22hljs-string\x22\x3e\x27red\x27\x3c\/span\x3e) {\n            \x3cspan class=\x22hljs-built_in\x22\x3epoint\x3c\/span\x3e = \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e;\n            img = \x3cspan class=\x22hljs-string\x22\x3e\x27three\x27\x3c\/span\x3e;\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (apple.type === \x3cspan class=\x22hljs-string\x22\x3e\x27yellow\x27\x3c\/span\x3e) {\n            \x3cspan class=\x22hljs-built_in\x22\x3epoint\x3c\/span\x3e = \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e;\n            img = \x3cspan class=\x22hljs-string\x22\x3e\x27five\x27\x3c\/span\x3e;\n        }\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 添加得分图片\x3c\/span\x3e\n        var goal = game.\x3cspan class=\x22hljs-built_in\x22\x3eadd\x3c\/span\x3e.\x3cspan class=\x22hljs-built_in\x22\x3eimage\x3c\/span\x3e(apple.x, apple.y, img);\n        var goalImg = game.cache.getImage(img);\n        goal.\x3cspan class=\x22hljs-built_in\x22\x3ewidth\x3c\/span\x3e = apple.\x3cspan class=\x22hljs-built_in\x22\x3ewidth\x3c\/span\x3e;\n        goal.\x3cspan class=\x22hljs-built_in\x22\x3eheight\x3c\/span\x3e = goal.\x3cspan class=\x22hljs-built_in\x22\x3ewidth\x3c\/span\x3e \/ (goalImg.\x3cspan class=\x22hljs-built_in\x22\x3ewidth\x3c\/span\x3e \/ goalImg.\x3cspan class=\x22hljs-built_in\x22\x3eheight\x3c\/span\x3e);\n        goal.\x3cspan class=\x22hljs-built_in\x22\x3ealpha\x3c\/span\x3e = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 添加过渡效果\x3c\/span\x3e\n        var showTween = game.\x3cspan class=\x22hljs-built_in\x22\x3eadd\x3c\/span\x3e.tween(goal).to({\n            \x3cspan class=\x22hljs-built_in\x22\x3ealpha\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\n            y: goal.y - \x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e\n        }, \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e, Phaser.Easing.Linear.None, \x3cspan class=\x22hljs-keyword\x22\x3etrue\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3efalse\x3c\/span\x3e);\n        showTween.onComplete.\x3cspan class=\x22hljs-built_in\x22\x3eadd\x3c\/span\x3e(function() {\n            var hideTween = game.\x3cspan class=\x22hljs-built_in\x22\x3eadd\x3c\/span\x3e.tween(goal).to({\n                \x3cspan class=\x22hljs-built_in\x22\x3ealpha\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n                y: goal.y - \x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e\n            }, \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e, Phaser.Easing.Linear.None, \x3cspan class=\x22hljs-keyword\x22\x3etrue\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3efalse\x3c\/span\x3e);\n            hideTween.onComplete.\x3cspan class=\x22hljs-built_in\x22\x3eadd\x3c\/span\x3e(function() {\n                goal.kill();\n            });\n        });\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 更新分数\x3c\/span\x3e\n        score \x2b= \x3cspan class=\x22hljs-built_in\x22\x3epoint\x3c\/span\x3e;\n        title.\x3cspan class=\x22hljs-built_in\x22\x3etext\x3c\/span\x3e = score;\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 清除苹果\x3c\/span\x3e\n        apple.kill();\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 播放音效\x3c\/span\x3e\n        scoreMusic.play();\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e示例代码：\x3ca href=\x22https:\/\/jsfiddle.net\/Vincent_Pat\/3ck4vom5\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/jsfiddle.net\/Vincent_...\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22Vincent_Pat\/3ck4vom5\/\x22 data-typeid=\x220\x22\x3e点击预览\x3c\/button\x3e\x3c\/p\x3e\n\x3chr\x3e\n\x3ch4\x3e大功告成\x3c\/h4\x3e\n\x3cp\x3e游戏终于完成了它的逻辑，算是一个完整的游戏了。当然了，效果远未达到理想，要说的话，游戏水非常深，这个系列的教程只是从零到一，引导大家接触并上手Phaser.js。\x3c\/p\x3e\n\x3cp\x3e这里可以抛出一些优化的方向，大家也可以当做Phaser的练习题目去做：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e游戏中字体的更换\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e地面应该和小恐龙底部持平，而非屏幕底部，如何实现？\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e现在三种苹果和炸弹的出现概率是随机的，如何调整它们各自的出现概率？\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e现在苹果和炸弹出现的时间间隔是固定的，如何随着游戏进行加快节奏？\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e如何调整游戏难度梯度？\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e现在炸弹和苹果有可能会相邻出现，导致很难接到苹果而不碰到炸弹，如何避免？\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e……\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e本来没想写这么多点的，一不小心。可见游戏优化的空间还是很大的，希望大家能继续发掘Phaser.js的潜力，做出更多的优秀的小游戏~\x3c\/p\x3e\n\x3cp\x3eGithub地址：\x3ca href=\x22https:\/\/github.com\/VincentPat\/Phaser-PickApple\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/VincentPat...\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e扫描下面二维码的话也可以用手机查看效果了：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVNdPR?w=386\x26amp;h=382\x22 src=\x22https:\/\/static.alili.tech\/img\/bVNdPR?w=386\x26amp;h=382\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch4\x3e未完待续...？\x3c\/h4\x3e\n\x3ch5\x3e回顾：\x3c\/h5\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000009212221\x22\x3eChapter 1 - 认识Phaser.js\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000009226335\x22 target=\x22_blank\x22\x3eChapter 2 - 搭建游戏的骨架\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000009252244\x22\x3eChapter 3 - 加载游戏资源\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000009282734\x22 target=\x22_blank\x22\x3eChapter 4 - 游戏即将开始\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e如果接下来有时间整理的话，会补充一篇Phaser.js的实战技巧和注意事项。本系列文章写作纯粹个人喜好，如有写得不严谨或不正确的地方，还请多多包涵。第一次花这么长时间写技术分享，还是用那句话勉励自己：\x3c\/p\x3e\n\x3ch5\x3e希望我是真的喜欢编程，由始至终。\x3c\/h5\x3e\n\x3cp\x3e如果你喜欢这几篇文章，或者说\x3ca href=\x22https:\/\/segmentfault.com\/blog\/zero2one\x22\x3e从零到一\x3c\/a\x3e这个系列，给我点个赞，我就心满意足了。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>从零到一：用Phaser.js写意地开发小游戏（Chapter 5 - 游戏大功告成）</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000009309167">https://segmentfault.com/a/1190000009309167</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/ez9frc5ms0f/" target="_blank">https://alili.tech/archive/ez9frc5ms0f/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>