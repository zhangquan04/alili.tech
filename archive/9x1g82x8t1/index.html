<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="在 VueJS应用中管理用户权限"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>在 VueJS应用中管理用户权限 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/9x1g82x8t1/",
				"appid": "1613049289050283", 
				"title": "在 VueJS应用中管理用户权限 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-24T02:30:11"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/ez5nxuevfjg/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/witof9hdksk/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f9x1g82x8t1%2f&text=%e5%9c%a8%20VueJS%e5%ba%94%e7%94%a8%e4%b8%ad%e7%ae%a1%e7%90%86%e7%94%a8%e6%88%b7%e6%9d%83%e9%99%90"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f9x1g82x8t1%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f9x1g82x8t1%2f&text=%e5%9c%a8%20VueJS%e5%ba%94%e7%94%a8%e4%b8%ad%e7%ae%a1%e7%90%86%e7%94%a8%e6%88%b7%e6%9d%83%e9%99%90"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f9x1g82x8t1%2f&title=%e5%9c%a8%20VueJS%e5%ba%94%e7%94%a8%e4%b8%ad%e7%ae%a1%e7%90%86%e7%94%a8%e6%88%b7%e6%9d%83%e9%99%90"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f9x1g82x8t1%2f&is_video=false&description=%e5%9c%a8%20VueJS%e5%ba%94%e7%94%a8%e4%b8%ad%e7%ae%a1%e7%90%86%e7%94%a8%e6%88%b7%e6%9d%83%e9%99%90"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%9c%a8%20VueJS%e5%ba%94%e7%94%a8%e4%b8%ad%e7%ae%a1%e7%90%86%e7%94%a8%e6%88%b7%e6%9d%83%e9%99%90&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f9x1g82x8t1%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f9x1g82x8t1%2f&title=%e5%9c%a8%20VueJS%e5%ba%94%e7%94%a8%e4%b8%ad%e7%ae%a1%e7%90%86%e7%94%a8%e6%88%b7%e6%9d%83%e9%99%90"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f9x1g82x8t1%2f&title=%e5%9c%a8%20VueJS%e5%ba%94%e7%94%a8%e4%b8%ad%e7%ae%a1%e7%90%86%e7%94%a8%e6%88%b7%e6%9d%83%e9%99%90"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f9x1g82x8t1%2f&title=%e5%9c%a8%20VueJS%e5%ba%94%e7%94%a8%e4%b8%ad%e7%ae%a1%e7%90%86%e7%94%a8%e6%88%b7%e6%9d%83%e9%99%90"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f9x1g82x8t1%2f&title=%e5%9c%a8%20VueJS%e5%ba%94%e7%94%a8%e4%b8%ad%e7%ae%a1%e7%90%86%e7%94%a8%e6%88%b7%e6%9d%83%e9%99%90"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">在 VueJS应用中管理用户权限</h1><div class="meta"><div class="postdate"><time datetime="2019-01-24" itemprop="datePublished">2019-01-24</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n            \x3ch1\x3e在 VueJS应用中管理用户权限\x3c\/h1\x3e\n\x3cp\x3eAnthony Gore 2018 年 1 月 8 日\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/twitter.com\/intent\/tweet?text=Managing%20User%20Permissions%20in%20a%20VueJS%20App\x26amp;url=https:\/\/vuejsdevelopers.com\/2018\/01\/08\/vue-js-roles-permissions-casl\/\x26amp;hashtags=vuejs\x26amp;via=vuejsdevelopers\x22\x3eTwitter\x3c\/a\x3e \x3ca href=\x22https:\/\/www.facebook.com\/sharer\/sharer.php?u=https:\/\/vuejsdevelopers.com\/2018\/01\/08\/vue-js-roles-permissions-casl\/\x26amp;t=Managing%20User%20Permissions%20in%20a%20VueJS%20App\x22\x3eFacebook\x3c\/a\x3e \x3ca href=\x22http:\/\/plus.google.com\/share?url=https:\/\/vuejsdevelopers.com\/2018\/01\/08\/vue-js-roles-permissions-casl\/\x22\x3eGoogle\x2b\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e在需要身份验证的前端应用里，我们经常想通过用户角色来决定哪些内容可见。比如，游客身份可以阅读文章，但注册用户或管理员才能看到编辑按钮。\x3c\/p\x3e\n\x3cp\x3e在前端中管理权限可能会有点麻烦。你之前可能写过这样的代码：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs jboss-cli\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e \x3cspan class=\x22hljs-params\x22\x3e(user.\x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e === ADMIN || user.auth \x26amp;\x26amp; post.\x3cspan class=\x22hljs-attr\x22\x3eowner\x3c\/span\x3e === user.id )\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-string\x22\x3e...\x3c\/span\x3e\n}\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e作为代替方案，一个简洁轻量的库——CASL——可以让管理用户权限变得非常简单。只要你用CASL定义了权限，并设置了当前用户，就可以把上面的代码改为这样：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs clean\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (abilities.can(\x3cspan class=\x22hljs-string\x22\x3e\x27update\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27Post\x27\x3c\/span\x3e)) {\n  ...\n}\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e在这篇文章里，我会展示如何在前端应用里使用Vue.js和CASL来管理权限。\x3c\/p\x3e\n\x3cp\x3e \x3cimg src=\x22https:\/\/d33wubrfki0l68.cloudfront.net\/fbdd8e6b18ca7b5fba3a5256184728269ea4ca18\/964c7\/images\/posts\/vue_casl.gif\x22 alt=\x22demo\x22\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cem\x3e注：你没有使用过CASL也可以继续阅读\x3c\/em\x3e\x3c\/p\x3e\n\x3ch2\x3eCASL 速成课程\x3c\/h2\x3e\n\x3cp\x3eCASL可以让你定义一系列规则来限制哪些资源对用户可见。\x3c\/p\x3e\n\x3cp\x3e比如，CASL规则能够\x3cstrong\x3e标明\x3c\/strong\x3e用户可以对给定的资源和实例（帖子、文章、评论等）进行哪些CRUD（Create, Read, Update和Delete）操作。\x3c\/p\x3e\n\x3cp\x3e假设我们有分类广告网站。最显而易见的规则就是：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e游客可以浏览所有帖子\x3c\/li\x3e\n\x3cli\x3e管理员可以浏览所有帖子，并且可以更新或删除\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e使用CASL，我们用\x3ccode\x3eAbilityBuilder\x3c\/code\x3e来定义规则。调用\x3ccode\x3ecan\x3c\/code\x3e来定义一条新规则。例如：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs typescript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e { AbilityBuilder } = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27casl\x27\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  AbilityBuilder.define(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3ecan\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3eswitch\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e) {\n      \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27guest\x27\x3c\/span\x3e:\n        can(\x3cspan class=\x22hljs-string\x22\x3e\x27read\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27Post\x27\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-keyword\x22\x3ebreak\x3c\/span\x3e;\n      \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27admin\x27\x3c\/span\x3e:\n        can(\x3cspan class=\x22hljs-string\x22\x3e\x27read\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27Post\x27\x3c\/span\x3e);\n        can([\x3cspan class=\x22hljs-string\x22\x3e\x27update\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27delete\x27\x3c\/span\x3e], \x3cspan class=\x22hljs-string\x22\x3e\x27Post\x27\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-keyword\x22\x3ebreak\x3c\/span\x3e;\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Add more roles here\x3c\/span\x3e\n    }\n  }\n};\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e现在，就可以用定义的规则来检查应用权限了。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs nimrod\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e defineAbilitiesFor \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x27.\/abilities\x27;\n\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e currentUser = {\n  id: \x3cspan class=\x22hljs-number\x22\x3e999\x3c\/span\x3e,\n  name: \x3cspan class=\x22hljs-string\x22\x3e\x22Julie\x22\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22registered\x22\x3c\/span\x3e,\n};\n\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e abilities = defineAbilitiesFor(currentUser.\x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-type\x22\x3eVue\x3c\/span\x3e.component({\n  \x3cspan class=\x22hljs-keyword\x22\x3etemplate\x3c\/span\x3e: `\x26lt;\x3cspan class=\x22hljs-keyword\x22\x3ediv\x3c\/span\x3e\x26gt;\x26lt;\x3cspan class=\x22hljs-keyword\x22\x3ediv\x3c\/span\x3e\x26gt;\n             \x26lt;\x3cspan class=\x22hljs-keyword\x22\x3ediv\x3c\/span\x3e\x26gt;\x3cspan class=\x22hljs-type\x22\x3ePlease\x3c\/span\x3e log \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e\x26lt;\/\x3cspan class=\x22hljs-keyword\x22\x3ediv\x3c\/span\x3e\x26gt;\n            `,\n  props: [ \x27post\x27 ],\n  computed: {\n    showPost() {\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e abilities.can(\x27read\x27, \x27\x3cspan class=\x22hljs-type\x22\x3ePost\x3c\/span\x3e\x27);\n    }\n  }\n});\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e查阅\x3ca href=\x22https:\/\/stalniy.github.io\/casl\/\x22\x3e官方文档\x3c\/a\x3e，了解更多CASL详情。\x3c\/p\x3e\n\x3ch2\x3eDemo 课程\x3c\/h2\x3e\n\x3cp\x3e作为演示，我做了一个用来展示分类广告帖子的服务器\/客户端应用。这个应用的规则是：用户能够阅读帖子或发帖，但是只能更新或删除自己的帖子。\x3c\/p\x3e\n\x3cp\x3e我用Vue.js和CASL来方便地运行和扩展这些规则，即使以后添加新的操作或实例也将很方便。\x3c\/p\x3e\n\x3cp\x3e现在我就带你一步步搭建这个应用。如果你想一睹为快，请戳\x3ca href=\x22https:\/\/github.com\/anthonygore\/vue-casl-demo\x22\x3e这个Github repo\x3c\/a\x3e。\x3c\/p\x3e\n\x3ch2\x3e定义用户权限\x3c\/h2\x3e\n\x3cp\x3e我们在 \x3cem\x3eresources\/ability.js\x3c\/em\x3e中定义用户权限。CASL的一个优点是与环境无关，也就是说它既能在Node中运行，也能在浏览器中运行。\x3c\/p\x3e\n\x3cp\x3e我们会把权限定义写到一个CommonJS模块里来保证Node的兼容性（Webpack能让这个模块用在客户端）。\x3c\/p\x3e\n\x3cp\x3e\x3cem\x3eresources\/ability.js\x3c\/em\x3e\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs typescript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e casl = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27casl\x27\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edefineAbilitiesFor\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3euser\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e casl.AbilityBuilder.define(\n    { subjectName: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eitem\x3c\/span\x3e =\x26gt;\x3c\/span\x3e item.type }, \n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3ecan\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n      can([\x3cspan class=\x22hljs-string\x22\x3e\x27read\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27create\x27\x3c\/span\x3e], \x3cspan class=\x22hljs-string\x22\x3e\x27Post\x27\x3c\/span\x3e);\n      can([\x3cspan class=\x22hljs-string\x22\x3e\x27update\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27delete\x27\x3c\/span\x3e], \x3cspan class=\x22hljs-string\x22\x3e\x27Post\x27\x3c\/span\x3e, { user: user });\n    }\n  );\n};\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e下面我们来剖析这段代码。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3edefine\x3c\/code\x3e方法的第二个参数，我们通过调用\x3ccode\x3ecan\x3c\/code\x3e来定义了权限规则。这个方法的第一个参数是你要允许的CRUD操作，第二个是资源或实例，在这个例子中是\x3ccode\x3ePost\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e注意第二个\x3ccode\x3ecan\x3c\/code\x3e的调用，我们传了一个对象作为第三个参数。这个对象是用来测试\x3ccode\x3euser\x3c\/code\x3e属性是否匹配我们提供的\x3ccode\x3euser\x3c\/code\x3e对象。如果我们不这么做，那不光创建者可以删帖，谁都可以随便删了。\x3c\/p\x3e\n\x3cp\x3e\x3cem\x3eresources\/ability.js\x3c\/em\x3e\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs less\x22\x3e...\n\x3cspan class=\x22hljs-selector-tag\x22\x3ecasl\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.AbilityBuilder\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.define\x3c\/span\x3e(\n  ...\n  can =\x26gt; {\n    \x3cspan class=\x22hljs-selector-tag\x22\x3ecan\x3c\/span\x3e([\x3cspan class=\x22hljs-string\x22\x3e\x27read\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27create\x27\x3c\/span\x3e], \x3cspan class=\x22hljs-string\x22\x3e\x27Post\x27\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-selector-tag\x22\x3ecan\x3c\/span\x3e([\x3cspan class=\x22hljs-string\x22\x3e\x27update\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27delete\x27\x3c\/span\x3e], \x3cspan class=\x22hljs-string\x22\x3e\x27Post\x27\x3c\/span\x3e, { \x3cspan class=\x22hljs-attribute\x22\x3euser\x3c\/span\x3e: user });\n  }\n);\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3eCASL检查实例来分配权限时，需要知道实例的\x3ccode\x3etype\x3c\/code\x3e。一种解决方式是把具有\x3ccode\x3esubjectName\x3c\/code\x3e方法的对象，作为\x3ccode\x3edefine\x3c\/code\x3e方法的第一个参数，\x3ccode\x3esubjectName\x3c\/code\x3e方法会返回实例的类型。\x3c\/p\x3e\n\x3cp\x3e我们通过在实例中返回\x3ccode\x3etype\x3c\/code\x3e来达成目的。我们需要保证，在定义\x3ccode\x3ePost\x3c\/code\x3e对象时，这个属性是存在的。\x3c\/p\x3e\n\x3cp\x3e\x3cem\x3eresources\/ability.js\x3c\/em\x3e\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs css\x22\x3e...\n\x3cspan class=\x22hljs-selector-tag\x22\x3ecasl\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.AbilityBuilder\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.define\x3c\/span\x3e(\n  { \x3cspan class=\x22hljs-attribute\x22\x3esubjectName\x3c\/span\x3e: item =\x26gt; item.type }, \n  ...\n);\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e最后，我们把我们的权限定义封装到一个函数里，这样我们就可以在需要测试权限的时候直接传进一个user对象。在下面的函数中会更易理解。\x3c\/p\x3e\n\x3cp\x3e\x3cem\x3eresources\/ability.js\x3c\/em\x3e\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e casl = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27casl\x27\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edefineAbilitiesFor\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3euser\x3c\/span\x3e) \x3c\/span\x3e{\n  ...\n};\n\x3c\/code\x3e\x3c\/pre\x3e\x3ch2\x3eVue 中的访问权限规则\x3c\/h2\x3e\n\x3cp\x3e现在我们想在前端应用中检查一个对象中，用户具有哪些CRUD权限。我们需要在Vue组件中访问CASL规则。这是方法：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e引入Vue和 \x3cem\x3eabilities plugin\x3c\/em\x3e。这个插件会把CASL加到Vue的原型上，这样我们就能在组件内调用了。\x3c\/li\x3e\n\x3cli\x3e在Vue 应用内引入我们的规则（例： \x3cem\x3eresources\/abilities.js\x3c\/em\x3e）。\x3c\/li\x3e\n\x3cli\x3e定义当前用户。实战中，我们是通过服务器来获取用户数据的，在这个例子中，我们简单地硬编码到到项目里。\x3c\/li\x3e\n\x3cli\x3e牢记，abilities模块export一个函数，我们把它称为\x3ccode\x3edefineAbilitiesFor\x3c\/code\x3e。我们会向这个函数传入用户对象。现在，无论何时，我们可以通过检测一个对象来得出\x3cem\x3e当前用户\x3c\/em\x3e拥有何种权限。\x3c\/li\x3e\n\x3cli\x3e添加abilities插件，这样我们就可以在组件中像这样来进行测试了：\x3ccode\x3ethis.$can(...)\x3c\/code\x3e。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e\x3cem\x3esrc\/main.js\x3c\/em\x3e\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Vue \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27vue\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e abilitiesPlugin \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/ability-plugin\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e defineAbilitiesFor = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27..\/resources\/ability\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e user = { \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27George\x27\x3c\/span\x3e };\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e ability = defineAbilitiesFor(user.id);\nVue.use(abilitiesPlugin, ability);\n\x3c\/code\x3e\x3c\/pre\x3e\x3ch2\x3ePost 实例\x3c\/h2\x3e\n\x3cp\x3e我们的应用会使用分类广告的帖子。这些表述帖子的对象会从数据库中检索，然后被服务器传给前端。比如：\x3c\/p\x3e\n\x3cp\x3e我们的\x3ccode\x3ePost\x3c\/code\x3e实例中有两个属性是必须的：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3ccode\x3etype\x3c\/code\x3e属性。CASL会使用 \x3cem\x3eabilities.js\x3c\/em\x3e中的\x3ccode\x3esubjectName\x3c\/code\x3e回调来检查正在测试的是哪种实例。\x3c\/li\x3e\n\x3cli\x3e\x3ccode\x3euser\x3c\/code\x3e属性。这是发帖者。记住，用户只能更新和删除他们_发布_的帖子。在 \x3cem\x3emain.js\x3c\/em\x3e中我们通过\x3ccode\x3edefineAbilitiesFor(user.id)\x3c\/code\x3e已经告诉了CASL当前用户是谁。CASL要做的就是检查用户的ID和\x3ccode\x3euser\x3c\/code\x3e属性是否匹配。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs scala\x22\x3elet posts = [\n  {\n    \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e\x3c\/span\x3e: \x3cspan class=\x22hljs-symbol\x22\x3e\x27Pos\x3c\/span\x3et\x27,\n    user: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\n    content: \x3cspan class=\x22hljs-symbol\x22\x3e\x271\x3c\/span\x3e used cat, good condition\x27\n  },\n  {\n    \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e\x3c\/span\x3e: \x3cspan class=\x22hljs-symbol\x22\x3e\x27Pos\x3c\/span\x3et\x27,\n    user: \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\n    content: \x3cspan class=\x22hljs-symbol\x22\x3e\x27Second\x3c\/span\x3e-hand bathroom wallpaper\x27\n  }\n];\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e这两个post对象中，ID为1的George，拥有第一个帖子的更新删除权限，但没有第二个的。\x3c\/p\x3e\n\x3ch2\x3e在对象中测试用户权限\x3c\/h2\x3e\n\x3cp\x3e帖子通过\x3cem\x3ePost\x3c\/em\x3e组件在应用中展示。先看一下代码，下面我会讲解：\x3c\/p\x3e\n\x3cp\x3e\x3cem\x3esrc\/components\/Post.vue\x3c\/em\x3e\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebr\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3esmall\x3c\/span\x3e\x26gt;\x3c\/span\x3eposted by \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3esmall\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e @\x3cspan class=\x22hljs-attr\x22\x3eclick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22del\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3eDelete\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e axios \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27axios\x27\x3c\/span\x3e;\n\n  \x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-attr\x22\x3eprops\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x27post\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27username\x27\x3c\/span\x3e],\n    \x3cspan class=\x22hljs-attr\x22\x3emethods\x3c\/span\x3e: {\n      del() {\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$can(\x3cspan class=\x22hljs-string\x22\x3e\x27delete\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.post)) {\n          ...\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$emit(\x3cspan class=\x22hljs-string\x22\x3e\x27err\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27Only the owner of a post can delete it!\x27\x3c\/span\x3e);\n        }\n      }\n    }\n  }\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3elang\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22scss\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e...\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e点击\x3cem\x3eDelete\x3c\/em\x3e按钮，捕获到点击事件，会调用\x3ccode\x3edel\x3c\/code\x3e处理函数。\x3c\/p\x3e\n\x3cp\x3e我们通过\x3ccode\x3ethis.$can(\x27delete\x27, post)\x3c\/code\x3e来使用CASL检查当前用户是否具有操作权限。如果有权限，就进一步操作，如果没有，就给出错误提示“只有发布者可以删除！”\x3c\/p\x3e\n\x3ch2\x3e服务器端测试\x3c\/h2\x3e\n\x3cp\x3e在真实项目里，用户在前端删除后，我们会通过 Ajax发送删除指令到接口，比如：\x3c\/p\x3e\n\x3cp\x3e\x3cem\x3esrc\/components\/Post.vue\x3c\/em\x3e\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$can(\x3cspan class=\x22hljs-string\x22\x3e\x27delete\x27\x3c\/span\x3e, post)) {\n  axios.get(\x3cspan class=\x22hljs-string\x22\x3e`\/delete\/\x3cspan class=\x22hljs-subst\x22\x3e${post.id}\x3c\/span\x3e`\x3c\/span\x3e, ).then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eres\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n    ...  \n  });\n}\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e服务器不应信任客户端的CRUD操作，那我们把CASL测试逻辑放到服务器：\x3c\/p\x3e\n\x3cp\x3e\x3cem\x3eserver.js\x3c\/em\x3e\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs typescript\x22\x3eapp.get(\x3cspan class=\x22hljs-string\x22\x3e\x22\/delete\/:id\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3ereq, res\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e postId = \x3cspan class=\x22hljs-built_in\x22\x3eparseInt\x3c\/span\x3e(req.params.id);\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e post = posts.find(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3epost\x3c\/span\x3e =\x26gt;\x3c\/span\x3e post.id === postId);\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (ability.can(\x3cspan class=\x22hljs-string\x22\x3e\x27delete\x27\x3c\/span\x3e, post)) {\n    posts = posts.filter(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3ecur\x3c\/span\x3e =\x26gt;\x3c\/span\x3e cur !== post);\n    res.json({ success: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e });\n  } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n    res.json({ success: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e });\n  }\n});\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3eCASL是同构（isomorphic）的，服务器上的\x3ccode\x3eability\x3c\/code\x3e对象就可以从\x3cem\x3eabilities.js\x3c\/em\x3e中引入，这样我们就不必复制任何代码了！\x3c\/p\x3e\n\x3ch2\x3e封装\x3c\/h2\x3e\n\x3cp\x3e此时，在简单的Vue应用里，我们就有非常好的方式管理用户权限了。\x3c\/p\x3e\n\x3cp\x3e我认为\x3ccode\x3ethis.$can(\x27delete\x27, post)\x3c\/code\x3e 比下面这样优雅得多：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs stata\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (user.id === \x3cspan class=\x22hljs-keyword\x22\x3epost\x3c\/span\x3e.user \x26amp;\x26amp; \x3cspan class=\x22hljs-keyword\x22\x3epost\x3c\/span\x3e.\x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e === \x27\x3cspan class=\x22hljs-keyword\x22\x3ePost\x3c\/span\x3e\x27) {\n  ...\n}\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3eThis is not only more difficult to read, but also, there’s an implicit rule here i.e. that a post can be deleted by a user. This rule will undoubtedly be used elsewhere in our app, and should really be abstracted. This is what CASL can do for us.\x3c\/p\x3e\n\x3cp\x3e这不光可读性差，还暗含规则，即用户可以删除帖子。这条规则无疑可以在应用的其它地方使用，应该被抽离出来。这就是CASL为我们所做的。\x3c\/p\x3e\n\x3cp\x3e\x3cem\x3e感谢\x3ca href=\x22https:\/\/github.com\/stalniy\/casl\x22\x3eCASL\x3c\/a\x3e的作者\x3ca href=\x22https:\/\/github.com\/stalniy\x22\x3eSergii Stotskyi\x3c\/a\x3e对本文的帮助。\x3c\/em\x3e\x3c\/p\x3e\n\n          \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>在 VueJS应用中管理用户权限</p><h2 id="原文链接">原文链接</h2><p><a href="https://www.zcfy.cc/article/managing-user-permissions-in-a-vuejs-app">https://www.zcfy.cc/article/managing-user-permissions-in-a-vuejs-app</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/9x1g82x8t1/" target="_blank">https://alili.tech/archive/9x1g82x8t1/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>