<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="React.js 常见问题小结"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>React.js 常见问题小结 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/cn12ljx6gfu/",
				"appid": "1613049289050283", 
				"title": "React.js 常见问题小结 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-24T02:30:11"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/vsanezs6nk/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/sagyq7dhx/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fcn12ljx6gfu%2f&text=React.js%20%e5%b8%b8%e8%a7%81%e9%97%ae%e9%a2%98%e5%b0%8f%e7%bb%93"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fcn12ljx6gfu%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fcn12ljx6gfu%2f&text=React.js%20%e5%b8%b8%e8%a7%81%e9%97%ae%e9%a2%98%e5%b0%8f%e7%bb%93"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fcn12ljx6gfu%2f&title=React.js%20%e5%b8%b8%e8%a7%81%e9%97%ae%e9%a2%98%e5%b0%8f%e7%bb%93"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fcn12ljx6gfu%2f&is_video=false&description=React.js%20%e5%b8%b8%e8%a7%81%e9%97%ae%e9%a2%98%e5%b0%8f%e7%bb%93"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=React.js%20%e5%b8%b8%e8%a7%81%e9%97%ae%e9%a2%98%e5%b0%8f%e7%bb%93&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fcn12ljx6gfu%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fcn12ljx6gfu%2f&title=React.js%20%e5%b8%b8%e8%a7%81%e9%97%ae%e9%a2%98%e5%b0%8f%e7%bb%93"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fcn12ljx6gfu%2f&title=React.js%20%e5%b8%b8%e8%a7%81%e9%97%ae%e9%a2%98%e5%b0%8f%e7%bb%93"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fcn12ljx6gfu%2f&title=React.js%20%e5%b8%b8%e8%a7%81%e9%97%ae%e9%a2%98%e5%b0%8f%e7%bb%93"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fcn12ljx6gfu%2f&title=React.js%20%e5%b8%b8%e8%a7%81%e9%97%ae%e9%a2%98%e5%b0%8f%e7%bb%93"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">React.js 常见问题小结</h1><div class="meta"><div class="postdate"><time datetime="2019-01-24" itemprop="datePublished">2019-01-24</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n            \x3ch4\x3e1 —— 组件名没有用大写字母开头\x3c\/h4\x3e\n\x3cp\x3eReact组件名必须大写字母开头。\x3c\/p\x3e\n\x3cp\x3e如果组件名不以大写字母开头，组件会被当作是_内置_元素，像是\x3ccode\x3ediv\x3c\/code\x3e 或 \x3ccode\x3espan\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e例如：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs scala\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3egreeting\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eReact\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{   \n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ...  \x3c\/span\x3e\n}\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e如果你要渲染\x3ccode\x3e\x26lt;greeting \/\x26gt;\x3c\/code\x3e，React会忽略上面内容，你也会收到警告：\x3c\/p\x3e\n\x3cp\x3eWarning: The tag \x26lt;greeting\x26gt; is unrecognized in this browser. If you meant to render a React component, start its name with an uppercase letter.\x3c\/p\x3e\n\x3cp\x3e这里更大的问题是当你决定命名你的\x3ccode\x3ebutton\x3c\/code\x3e 或者 \x3ccode\x3eimg\x3c\/code\x3e组件时。React会忽略你的组件，并且只渲染原生的HTML \x3ccode\x3ebutton\x3c\/code\x3e 或者 \x3ccode\x3eimg\x3c\/code\x3e标签。\x3c\/p\x3e\n\x3cp\x3e\x3cimg src=\x22https:\/\/cdn-images-1.medium.com\/max\/2000\/1*1DVD4DOgHfqAYXhQX1YYSw.png\x22\x3e\x3c\/p\x3e\n\x3cp\x3e注意上面的“My Awesome Button”并没有渲染，React只渲染了一个空的HTML button元素。这种情况下React不会警告你。\x3c\/p\x3e\n\x3ch4\x3e2——使用单引号而不是反撇号\x3c\/h4\x3e\n\x3cp\x3e用反撇号(\x3ccode\x3e`...`\x3c\/code\x3e) 创建的字符串和用单引号(\x3ccode\x3e\x27...\x27\x3c\/code\x3e)创建的不一样。\x3c\/p\x3e\n\x3cp\x3e\x3cem\x3e在大部分键盘上，反撇号 (\x3c\/em\x3e\x3ccode\x3e_`_\x3c\/code\x3e\x3cem\x3e)字符可以用\x3c\/em\x3e \x3ccode\x3e_tab_\x3c\/code\x3e \x3cem\x3e上的那个键输入。\x3c\/em\x3e\x3c\/p\x3e\n\x3cp\x3e当我们需要在字符串里面包含动态表达式的时候（这样就不需要要字符串拼接），我们会创建一个反撇号的字符串。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs clean\x22\x3e`这个字符串模板可以包含表达式`\n\x3cspan class=\x22hljs-string\x22\x3e\x27这只是字符串，这里你不能包含表达式\x27\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e一起看下如果需要一个不间断显示当前时间的字符串：\n\x3ccode\x3e“Time is ...”\x3c\/code\x3e\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs gauss\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 当前时间字符串\x3c\/span\x3e\nconst \x3cspan class=\x22hljs-built_in\x22\x3etime\x3c\/span\x3e = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e().toLocaleTimeString();\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 使用一般的字符串（单引或者双引号）时，\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/你需要使用字符串拼接\x3c\/span\x3e\n\x27\x3cspan class=\x22hljs-built_in\x22\x3eTime\x3c\/span\x3e is \x27 \x2b \x3cspan class=\x22hljs-built_in\x22\x3etime\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/当使用反撇号时，\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/你可以使用${}把时间注入到字符串中\x3c\/span\x3e\n`\x3cspan class=\x22hljs-built_in\x22\x3eTime\x3c\/span\x3e is ${\x3cspan class=\x22hljs-built_in\x22\x3etime\x3c\/span\x3e}`\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e当然，在使用字符串时（通过反撇号），你可以创建一个分为多行的字符串：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs d\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3etemplate\x3c\/span\x3e = \x3cspan class=\x22hljs-string\x22\x3e`I\n\nCAN\n\nSPAN\n\nMultiple Lines`\x3c\/span\x3e;\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e用普通字符串可做不到。\x3c\/p\x3e\n\x3chr\x3e\n\x3ch4\x3e3——使用React.PropTypes\x3c\/h4\x3e\n\x3cp\x3e\x3ccode\x3ePropTypes\x3c\/code\x3e对象从React里移除了。其过去是以\x3ccode\x3eReact.PropTypes\x3c\/code\x3e的形式被使用，但是再也用不了了。\x3c\/p\x3e\n\x3cp\x3e相应的，你需要：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e把新的\x3cstrong\x3eprop-types\x3c\/strong\x3e包加到你的项目中：\x3ccode\x3enpm install prop-types\x3c\/code\x3e\x3c\/li\x3e\n\x3cli\x3e引入它：\x3ccode\x3eimport PropTypes from \x27prop-types\x27\x3c\/code\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e然后你就可以用它了。例如：\x3ccode\x3ePropTypes.string\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e如果你错误地使用了\x3ccode\x3eReact.PropTypes\x3c\/code\x3e，你会得到这样的错误提示：\x3c\/p\x3e\n\x3cp\x3eTypeError: Cannot read property \x27string\x27 of undefined\x3c\/p\x3e\n\x3chr\x3e\n\x3ch4\x3e4 ——不使用那些指南里面用的版本\x3c\/h4\x3e\n\x3cp\x3e当看或读代码的内容，以及使用指南里的例子时，确保你使用的是内容里工具的版本。通常，使用工具的最新版本是最安全的方式，但是如果内容过时的话，你可能会遇到一些弃用提醒。\x3c\/p\x3e\n\x3cp\x3e为了确保安全，使用相关工具的主干版本。例如，如果指南用的是React 16，不要去用React 15。\x3c\/p\x3e\n\x3cp\x3e这点对于Node.js也很重要。如果使用旧版的Node，你会遇到一系列问题。例如，如果你正在看一些指南，这些指南使用了\x3ccode\x3eObject.values\x3c\/code\x3e而你在用Node 6.x，那个版本此方法是不存在的。你需要Node 7.x或更高的版本。\x3c\/p\x3e\n\x3chr\x3e\n\x3ch4\x3e5——把函数和类搞混了\x3c\/h4\x3e\n\x3cp\x3e你能看出来下面的代码出了什么问题吗？\nclass Numbers extends React.Component {\x3cbr\x3e  const arrayOfNumbers = _.range(1, 10);\x3c\/p\x3e\n\x3cp\x3e  \/\/ ...\x3cbr\x3e}\x3c\/p\x3e\n\x3cp\x3e上面的代码之所以无效，是因为在JavaScript类体里你不可以乱写。你只能使用规定的语法定义方法和属性。\x3c\/p\x3e\n\x3cp\x3e\x3cem\x3e这让人有点混乱因为类语法里的\x3c\/em\x3e{}_很像常见的块级作用域，但并不是。 _\n在一个由函数构成的组件里，你就可以想怎么搞就怎么搞：\n\/\/ 这样完全没问题：\x3c\/p\x3e\n\x3cp\x3econst Number = (props) =\x26gt; {\x3cbr\x3e  const arrayOfNumbers = _.range(1, 10);\x3c\/p\x3e\n\x3cp\x3e  \/\/ ...\x3cbr\x3e};\x3c\/p\x3e\n\x3chr\x3e\n\x3ch4\x3e6 ——将数字作为字符串传递\x3c\/h4\x3e\n\x3cp\x3e你可以用一个字符串传递属性值\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs applescript\x22\x3e\x26lt;Greeting \x3cspan class=\x22hljs-built_in\x22\x3ename\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22World\x22\x3c\/span\x3e \/\x26gt;\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e如果你需要传递数字类型的值，不要使用字符串：\n\/\/ 不要这么做\x3c\/p\x3e\n\x26lt;Greeting counter=\x227\x22 \/\x26gt;\n\n取而代之，使用花括号传递实际数值：\n\/\/ 用这个替代\n\x26lt;Greeting counter={7} \/\x26gt;\n\n在 \x3ccode\x3eGreeting\x3c\/code\x3e 组件里面使用\x3ccode\x3e{7}\x3c\/code\x3e，\x3ccode\x3ethis.props.counter\x3c\/code\x3e会被赋值\x3ccode\x3e7\x3c\/code\x3e，并且对其进行数学运算也不会有问题。如果你传了\x3ccode\x3e“7”\x3c\/code\x3e还把它当成数字，你可能会运行出意想不到的结果。\n\n\x3cem\x3e \x3c\/em\x3e \x3cem\x3e\n\n\n#### 7 ——忘记了另外一个app在用同样的端口\n\n为了运行web服务器，你需要使用host（像是127.0.0.1）和端口（像是8080）来让服务器监听有效http地址的请求。\n\n一旦成功运行，web服务器就占据了那个端口。你就不能让这个端口它用。端口会被占用。\n\n如果你在另外一个终端运行同样的服务器，你会得到一个端口被占用的错误提示。\n像是这样：\nError: listen EADDRINUSE 127.0.0.1:8080\n\n注意有时候web服务器会运行在 _后台_或者在分开的屏幕\/tumux session。你看不见，但是它一直占据着端口。为了重启服务器，你需要“杀死”正在运行的那个。\n为了鉴别正在使用特定端口的进程，你可以使用像\x3ccode\x3eps\x3c\/code\x3e （ \x3ccode\x3egrep\x3c\/code\x3e 一些关于app的相关信息）的命令，或者如果知道端口号你也可以使用\x3ccode\x3elsof\x3c\/code\x3e命令：\n\nlsof -i :8080\n\n\x3c\/em\x3e \x3cem\x3e \x3c\/em\x3e\n\n#### 8 ——忘了创建环境变量\n\n一些项目要依赖shell环境变量才能运行。如果你在没有所需环境变量的情况下运行这些项目，它们会复制undefined，这样会给你带来潜在的未知错误。\n\n例如，如果项目连到像MongoDB的数据库，有可能它使用了像\x3ccode\x3eprocess.env.MONGO_URI\x3c\/code\x3e 的环境变量来连接。这就允许项目在不同的环境和不同的MongoDB实例一起使用。\n\n为了本地运行连接到MongoDB的项目，你必须先导出\x3ccode\x3eMONGO_URI\x3c\/code\x3e的环境变量。例如，如果你有一个运行在端口\x3ccode\x3e27017\x3c\/code\x3e的本地MongoDB，你需要在运行项目前做这些：\n\nexport MONGO_URI = \x22mongodb:\/\/localhost:27017\/mydb\x22\n\n你可以\x3cem\x3egrep\x3c\/em\x3e项目源代码，找到\x3ccode\x3eprocess.env\x3c\/code\x3e来查清楚其运行正常所需要的环境变量。\n\n#### 9——把花括号{}和圆括号()搞混\n不要用：\nreturn {\x3cbr\x3e  something();\x3cbr\x3e};\n\n这样用：\nreturn (\x3cbr\x3e  something();\x3cbr\x3e);\n\n第一段代码尝试（并且会失败）返回一个对象，然后第二段代码会正确地调用\x3ccode\x3esomething()\x3c\/code\x3e函数，并且返回函数返回的内容。\n\n由于JSX里的任何\x3ccode\x3e\x26lt;tag\x26gt;\x3c\/code\x3e会被解析成函数调用，当返回任何JSX时这个问题也会出现。\n\n这个问题在箭头函数的缩写语法中也很常见。\n\n不要用：\nconst Greeting = () =\x26gt; {\x3cbr\x3e  \x3cdiv\x3e\x3cbr\x3e    Hello World\x3cbr\x3e  \x3c\/div\x3e\x3cbr\x3e};\n\n这样用：\nconst Greeting = () =\x26gt; (\x3cbr\x3e  \x3cdiv\x3e\x3cbr\x3e    Hello World\x3cbr\x3e  \x3c\/div\x3e\x3cbr\x3e);\n\n当你使用带有箭头函数的中括号时，你就新起了一个函数的作用域。箭头函数的缩写语法不用中括号。\n\n\x3cem\x3e \x3c\/em\x3e \x3cem\x3e\n\n#### 10——不要用圆括号包裹对象\n\n当你想创建一个返回普通对象的短箭头函数时，上面中括号和圆括号的问题同样会让人困扰。\n\n不要用：\nconst myAction = () =\x26gt; { type: \x27DO_THIS\x27 };\n\n这样用：\nconst myAction = () =\x26gt; ({ type: \x27DO_THIS\x27});\n\n如果没有把对象包裹在圆括号里，你就不能使用缩写语法。实际上你会给字符串定义一个标签。\n\n这在\x3ccode\x3esetState\x3c\/code\x3e方法中的\x3cem\x3eupdater\x3c\/em\x3e函数里很常见，因为其需要返回一个对象。如果想使用短箭头函数语法，你需要用圆括号包裹对象。\n\n不要用：\nthis.setState(prevState =\x26gt; { answer: 42 });\n\n这样用：\nthis.setState(prevState =\x26gt; ({ answer: 42 }));\n\n\x3c\/em\x3e \x3cem\x3e \x3c\/em\x3e\n\n#### 11 ——没有正确使用API元素和属性的大小写\n是\x3ccode\x3eReact.Component\x3c\/code\x3e，而不是\x3ccode\x3eReact.component\x3c\/code\x3e。是\x3ccode\x3ecomponentDidMount\x3c\/code\x3e，而不是\x3ccode\x3eComponentDidMount\x3c\/code\x3e。_通常_是\x3ccode\x3eReactDOM\x3c\/code\x3e，而不是\x3ccode\x3eReactDom\x3c\/code\x3e。\n\n注意下你需要的API大写情况。如果使用了错误的大写，你得到的错误信息可能不会很明确。\n\n当引用\x3ccode\x3ereact\x3c\/code\x3e 和 \x3ccode\x3ereact-dom\x3c\/code\x3e，确保你引用了正确的名字，以及你使用和你的引用的是完全一样的。ESLint可以帮你指出没有被使用的地方。\n\n\n在处理组件属性时也会遇到这种问题：\n\x3ccode\x3e\x26lt;Greeting userName=\x22Max\x22 \/\x26gt;\n\n\/\/ 组件内部，你需要的话\nprops.userName\x3c\/code\x3e\n如果你没有使用\x3ccode\x3eprops.userName\x3c\/code\x3e，而是\x3ccode\x3eprops.username\x3c\/code\x3e 或 \x3ccode\x3eprops.UserName\x3c\/code\x3e，你会相当于用了一个undefined的值。需要特别留意下这点，当然更好的是配置ESLint，让其也能指出这些问题。\n\n\x3cem\x3e \x3c\/em\x3e \x3cem\x3e\n\n#### 12——把state对象和实例属性搞混了\n在一个类组件里，你可以定义一个本地的\x3ccode\x3estate\x3c\/code\x3e对象，之后可以用\x3ccode\x3ethis\x3c\/code\x3e获取之：\n\x3ccode\x3eclass Greeting extends React.Component {  \n  **state** = {  \n    name: \x22World\x22,  \n  };\n\n  render() {  \n    return `Hello ${**this.state**.name}`  \n  }  \n}\x3c\/code\x3e\n上面的代码会输出“Hello World”。\n你也可以不用state，定义其他本地实例属性：\n\x3ccode\x3eclass Greeting extends React.Component {  \n  **user** = {  \n    name: \x22World\x22,  \n  };\n\n  render() {  \n    return `Hello ${**this.user**.name}`  \n  }  \n}\x3c\/code\x3e\n上面的代码也会输出“Hello World”。\n\x3ccode\x3estate\x3c\/code\x3e实例属性特殊之处在于React会处理它。你只可以通过\x3ccode\x3esetState\x3c\/code\x3e改变之，当你这样做时React会有相应的反馈。然而，所有其他你定义的实例属性会在渲染算法上没有效果。正如你希望的一样，你可以在上面的例子中改变\x3ccode\x3ethis.user\x3c\/code\x3e，React并不会触发渲染机制。\n\x3c\/em\x3e \x3cem\x3e \x3c\/em\x3e\n\n#### 13——把\x26lt;tag\/\x26gt;和\x26lt;\/tag\x26gt;搞混了\n\n在闭合标签里放错\x3ccode\x3e\/\x3c\/code\x3e字符。不可否认，有时你可以使用\x26lt;tag\/\x26gt;，而其他时间你需要\x26lt;\/tag\x26gt;。\n\n在HTML里面，有个叫“自闭合标签”（非注释标签）的东西。这些标签表示没有任何子节点的元素。例如， \x3ccode\x3eimg\x3c\/code\x3e标签就是一个自闭合元素：\n\x3ccode\x3e\x26lt;img src \/\x26gt;\x3c\/code\x3e\n\/\/ 不要用\x3cimg\x3e\n\x3ccode\x3ediv\x3c\/code\x3e 标签可以有子元素，因此你可以用开始和结束标签：\n\x3ccode\x3e\x26lt;div\x26gt;  \n  Children here...  \n\x26lt;\/div\x26gt;\x3c\/code\x3e\n\n这点对于React组件也有效。如果组件有子内容，其可能看上去像这样：\n\x3ccode\x3e\x26lt;Greeting\x26gt;Hello!\x26lt;\/Greeting\x26gt;\x3c\/code\x3e\n\n\/\/ 注意\/字符的位置。\n如果组件没有子元素，你可以用开始\/结束标签书写，或者就用一个自闭合标签：\n\/\/ 2个有效的方式\n\x3ccode\x3e`\x3c\/code\x3e\n\x26lt;Greeting\x26gt;\x26lt;\/Greeting\x26gt;\n\n\x3cp\x3e\x26lt;Greeting \/\x26gt;\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs http\x22\x3e\n\n\x3cspan class=\x221c\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 注意\/字符基于元素闭合状态是如何移动的\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 是否是自闭合\x3c\/span\x3e\n下面这种用法是无效的：\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 错误\x3c\/span\x3e\n\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e\x26lt;Greeting\x26gt;\x26lt;Greeting \/\x26gt;\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs clean\x22\x3e如果你把`\/`字符放错了，你会得到这样的错误：\n    Syntax error: Unterminated JSX contents\n\n* * *\n\n#### \x3cspan class=\x22hljs-number\x22\x3e14\x3c\/span\x3e——想当然的认为\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e\/\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e可以用\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e\/\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e特性是JavaScript的官方特性（从\x3cspan class=\x22hljs-number\x22\x3e2015\x3c\/span\x3e年开始）。然而，其只是ES2015的特性，并且还没有在流行浏览器和最新版Node里面被完整支持。\n\nReact项目的流行配置是使用Webpack和Babel。这两个都允许使用这一特性，同时把其编译到所有浏览器都可以理解。只有在工作流里存在像Webpack或者Babel的工具时，你才可以使用\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e\/\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e。\n\n然而，在你的React打包应用中有\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e\/\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e并不意味你可以在任何相用的地方使用它们！例如，如果你也在通过最新版Node做服务端渲染，会行不通。你很有可能获得“_unexpected token_”的错误信息。\n\n为了让Node也理解\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e\/\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e（你需要了解它们，如果在前端使用它们，并且也想做SRR的话），你需要有可以编译其的Babel preset（像是_env_ preset），才能在Node端运行。你可以在开发时使用像 _pm2_、 _nodemon_ 和 _babel-watch_的工具做到这点，并且在每次你更改时重启Node。\n\n* * *\n\n#### \x3cspan class=\x22hljs-number\x22\x3e15\x3c\/span\x3e——不绑定句柄方法\n_我把这个留到最后是因为这是个很大同时很普遍的问题。_\n你可以在React组件里定义类方法，然后在组件的 `render`里使用它们。例如：\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3eclass Greeting extends React.Component {\x3cbr\x3e  \x3cstrong\x3ewhoIsThis\x3c\/strong\x3e() {\x3cbr\x3e    console.dir(this); \/\/ \x22this\x22 is the \x3cem\x3ecaller\x3c\/em\x3e of whoIsThis\x3cbr\x3e    return \x22World\x22\x3cbr\x3e  }\x3c\/p\x3e\n\x3cp\x3e  render() {\x3cbr\x3e    return \x3ccode\x3eHello ${**this.whoIsThis()**}\x3c\/code\x3e\x3cbr\x3e  }\x3cbr\x3e}\x3c\/p\x3e\n\x3cp\x3eReactDOM.render(\x26lt;Greeting \/\x26gt;, mountNode);\n\x3ccode\x3e`\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e我在\x3ccode\x3erender\x3c\/code\x3e 里以\x3ccode\x3ethis.whoIsThis\x3c\/code\x3e的方式使用\x3ccode\x3ewhoIsThis\x3c\/code\x3e方法，因为在\x3ccode\x3erender\x3c\/code\x3e里，\x3ccode\x3ethis\x3c\/code\x3e关键字指向的是和DOM元素相关联的组件实例，而这个DOM元素也代表了组件。\x3c\/p\x3e\n\x3cp\x3eReact内部实现确保了类方法里的“\x3ccode\x3ethis\x3c\/code\x3e”指向实例。然而，当你使用 \x3ccode\x3ewhoIsThis\x3c\/code\x3e 方法的_引用_时， JavaScript没有自动绑定实例。\x3c\/p\x3e\n\x3cp\x3e在\x3ccode\x3ewhoIsThis\x3c\/code\x3e里的\x3ccode\x3econsole.dir\x3c\/code\x3e那行会正确显示组件实例，因为方法是\x3ccode\x3erender\x3c\/code\x3e方法里用一个_显式_调用对象(\x3ccode\x3ethis\x3c\/code\x3e)来调用的。当你执行上面代码时，你可以看下console里的\x3ccode\x3eGreeting\x3c\/code\x3e对象。\n\x3cimg src=\x22https:\/\/cdn-images-1.medium.com\/max\/2000\/1*kaoe2WU6rYWm2M5pTNfdlg.png\x22 alt=\x22\x22\x3e\x3c\/p\x3e\n\x3cp\x3e然而，当你在\x3cem\x3e延迟执行\x3c\/em\x3e通道，例如\x3cem\x3e事件处理\x3c\/em\x3e里执行同样方法时，调用对象将不再是显性的，\x3ccode\x3econsole.dir\x3c\/code\x3e那样也不会显示对象实例。\n查看代码和下面的（点击后的）输出\n\x3cimg src=\x22https:\/\/cdn-images-1.medium.com\/max\/2000\/1*0A_QcuHnHG3IjMTiTySFaA.png\x22 alt=\x22\x22\x3e\x3c\/p\x3e\n\x3cp\x3e上面的代码中，当你点击字符串时React会调用\x3ccode\x3ewhoIsThis\x3c\/code\x3e方法，但是在方法内部，其不会让你获取到组件实例。这就是当我们点击字符串时，你得到\x3ccode\x3eundefined\x3c\/code\x3e的原因。如果你的类方法需要使用像\x3ccode\x3ethis.props\x3c\/code\x3e 和 \x3ccode\x3ethis.state\x3c\/code\x3e这样的方法，这就会是个大问题。它就是不会生效。\n这个问题有很多解决方案。你可以把方法放在一个内联函数里，或者使用\x3ccode\x3e.bind\x3c\/code\x3e调用来强制方法记住它的调用者。这两点对于不频繁更新的组件都是可以的。你也可以通过在类的\x3cem\x3econstructor\x3c\/em\x3e里优化bind方法，而不是在render方法里。然后，对于这个方法最好的解决方案是通过Babel来使用ECMAScript类域特性（目前还是stage-3），这样对于处理程序只需使用箭头函数就可以了：\x3c\/p\x3e\n\x3cp\x3eclass Greeting extends React.Component {\x3cbr\x3e  \x3cstrong\x3ewhoIsThis = () =\x26gt; {\x3cbr\x3e    console.dir(this);\x3cbr\x3e  }\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e  render() {\x3cbr\x3e    return (\x3cbr\x3e     \x3c\/p\x3e\x3cdiv\x3e\x3cbr\x3e        Hello World\x3cbr\x3e      \x3c\/div\x3e\x3cbr\x3e    );\x3cbr\x3e  }\x3cbr\x3e}\x3cp\x3e\x3c\/p\x3e\n\x3cp\x3e这样会和预期一样执行：\n\x3cimg src=\x22https:\/\/cdn-images-1.medium.com\/freeze\/max\/60\/1*yXSginjJHz7jZsCG_-K6Mw.png?q=20\x22 alt=\x22\x22\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cimg src=\x22https:\/\/cdn-images-1.medium.com\/max\/2000\/1*yXSginjJHz7jZsCG_-K6Mw.png\x22\x3e\x3c\/p\x3e\n\x3cp\x3e这就是本文所有内容了。感谢阅读。\x3c\/p\x3e\n\x3chr\x3e\n\n          \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>React.js 常见问题小结</p><h2 id="原文链接">原文链接</h2><p><a href="https://www.zcfy.cc/article/react-js-frequently-faced-problems-samer-buna-medium">https://www.zcfy.cc/article/react-js-frequently-faced-problems-samer-buna-medium</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/cn12ljx6gfu/" target="_blank">https://alili.tech/archive/cn12ljx6gfu/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>