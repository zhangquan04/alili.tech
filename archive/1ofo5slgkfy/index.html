<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="有趣的6种图片灰度转换算法"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>有趣的6种图片灰度转换算法 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/1ofo5slgkfy/",
				"appid": "1613049289050283", 
				"title": "有趣的6种图片灰度转换算法 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-17T02:30:25"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/brbah5n9jpp/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/cyzvez51uqg/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f1ofo5slgkfy%2f&text=%e6%9c%89%e8%b6%a3%e7%9a%846%e7%a7%8d%e5%9b%be%e7%89%87%e7%81%b0%e5%ba%a6%e8%bd%ac%e6%8d%a2%e7%ae%97%e6%b3%95"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f1ofo5slgkfy%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f1ofo5slgkfy%2f&text=%e6%9c%89%e8%b6%a3%e7%9a%846%e7%a7%8d%e5%9b%be%e7%89%87%e7%81%b0%e5%ba%a6%e8%bd%ac%e6%8d%a2%e7%ae%97%e6%b3%95"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f1ofo5slgkfy%2f&title=%e6%9c%89%e8%b6%a3%e7%9a%846%e7%a7%8d%e5%9b%be%e7%89%87%e7%81%b0%e5%ba%a6%e8%bd%ac%e6%8d%a2%e7%ae%97%e6%b3%95"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f1ofo5slgkfy%2f&is_video=false&description=%e6%9c%89%e8%b6%a3%e7%9a%846%e7%a7%8d%e5%9b%be%e7%89%87%e7%81%b0%e5%ba%a6%e8%bd%ac%e6%8d%a2%e7%ae%97%e6%b3%95"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e6%9c%89%e8%b6%a3%e7%9a%846%e7%a7%8d%e5%9b%be%e7%89%87%e7%81%b0%e5%ba%a6%e8%bd%ac%e6%8d%a2%e7%ae%97%e6%b3%95&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f1ofo5slgkfy%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f1ofo5slgkfy%2f&title=%e6%9c%89%e8%b6%a3%e7%9a%846%e7%a7%8d%e5%9b%be%e7%89%87%e7%81%b0%e5%ba%a6%e8%bd%ac%e6%8d%a2%e7%ae%97%e6%b3%95"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f1ofo5slgkfy%2f&title=%e6%9c%89%e8%b6%a3%e7%9a%846%e7%a7%8d%e5%9b%be%e7%89%87%e7%81%b0%e5%ba%a6%e8%bd%ac%e6%8d%a2%e7%ae%97%e6%b3%95"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f1ofo5slgkfy%2f&title=%e6%9c%89%e8%b6%a3%e7%9a%846%e7%a7%8d%e5%9b%be%e7%89%87%e7%81%b0%e5%ba%a6%e8%bd%ac%e6%8d%a2%e7%ae%97%e6%b3%95"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f1ofo5slgkfy%2f&title=%e6%9c%89%e8%b6%a3%e7%9a%846%e7%a7%8d%e5%9b%be%e7%89%87%e7%81%b0%e5%ba%a6%e8%bd%ac%e6%8d%a2%e7%ae%97%e6%b3%95"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">有趣的6种图片灰度转换算法</h1><div class="meta"><div class="postdate"><time datetime="2019-01-17" itemprop="datePublished">2019-01-17</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e\x3cstrong\x3e本文转载自\x3ca href=\x22https:\/\/github.com\/aooy\/blog\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eblog\x3c\/a\x3e\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e转载请注明出处\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVLVwo?w=960\x26amp;h=638\x22 src=\x22https:\/\/static.alili.tech\/img\/bVLVwo?w=960\x26amp;h=638\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader0\x22\x3e前言\x3c\/h1\x3e\n\x3cp\x3e黑白照片的时代虽然已经过去，但现在看到以前的照片，是不是有一种回到过去的感觉，很cool有木有~\x3cbr\x3e看完这篇文章，就可以把彩色照片变成各种各样的黑白的照片啦。\x3c\/p\x3e\n\x3cp\x3e本文完整的在线例子\x3ca href=\x22https:\/\/aooy.github.io\/blog\/issues4\/index.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e图片灰度算法例子\x3c\/a\x3e，例子的图片有点多，可能有些慢。\x3c\/p\x3e\n\x3cp\x3e例子的源码位于\x3ca href=\x22https:\/\/github.com\/aooy\/blog\/tree\/master\/demo\/issues4\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eblog\/demo\x3c\/a\x3e里\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader1\x22\x3e三原色与灰度\x3c\/h1\x3e\n\x3cp\x3e\x3cstrong\x3e原色\x3c\/strong\x3e是指不能透过其他颜色的混合调配而得出的“基本色”。一般来说叠加型的三原色是\x3cstrong\x3e红色\x3c\/strong\x3e、\x3cstrong\x3e绿色\x3c\/strong\x3e、\x3cstrong\x3e蓝色\x3c\/strong\x3e，以不同比例将原色混合，可以产生出其他的新颜色。这套原色系统常被称为“RGB色彩空间”，亦即由红（R）绿（G）蓝（B）所组合出的色彩系统。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e当这三种原色以等比例叠加在一起时，会变成灰色；若将此三原色的强度均调至最大并且等量重叠时，则会呈现白色。灰度就是没有色彩，RGB色彩分量全部相等。\x3c\/strong\x3e\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader2\x22\x3e获取图片的像素数据\x3c\/h1\x3e\n\x3cp\x3e算法不区分语言，这里以前端举例。可以使用\x3ccode\x3ecanvas\x3c\/code\x3e取得图片某个区域的像素数据\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/伪代码\nvar img = new Image();\nimg.src = \x27xxx.jpg\x27;\nvar myCanvas = document.querySelector(canvasId);\nvar canvasCtx = myCanvas.getContext(\x26quot;2d\x26quot;);\ncanvasCtx.drawImage(img, 0, 0, img.width, img.height);\n\/\/图片的像素数据\nvar data = canvasCtx.getImageData(0, 0, img.width, img.height);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/伪代码\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e img = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Image();\nimg.src = \x3cspan class=\x22hljs-string\x22\x3e\x27xxx.jpg\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e myCanvas = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.querySelector(canvasId);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e canvasCtx = myCanvas.getContext(\x3cspan class=\x22hljs-string\x22\x3e\x222d\x22\x3c\/span\x3e);\ncanvasCtx.drawImage(img, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, img.width, img.height);\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/图片的像素数据\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e data = canvasCtx.getImageData(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, img.width, img.height);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e使用\x3ccode\x3egetImageData()\x3c\/code\x3e返回一个\x3ca href=\x22https:\/\/developer.mozilla.org\/zh-CN\/docs\/Web\/API\/ImageData\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eImageData\x3c\/a\x3e对象，此对象有个\x3ccode\x3edata\x3c\/code\x3e属性就是我们要的数据了，数据是以Uint8ClampedArray 描述的一个一维数组，包含以 RGBA 顺序的数据，数据使用  0 至 255（包含）的整数表示。 所以，一个像素会有4个数据（RGBA）,RGB是红绿蓝，A指的是透明度。\x3c\/p\x3e\n\x3cp\x3e举个例子：本文720\x3cem\x3e480的水果图片，一共有720 \x3c\/em\x3e 480 = 259200像素，每个像素又有4个数据，所以数据数组的总长度为259200 * 4 = 1036800。\x3c\/p\x3e\n\x3cp\x3e可以看到图片的数据很长，如果一次性处理很多图片的时候，计算量相当可观，所以例子中会使用\x3ca href=\x22https:\/\/developer.mozilla.org\/zh-CN\/docs\/Web\/API\/Worker\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eworker\x3c\/a\x3e，把繁重的计算任务交给后台线程。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader3\x22\x3e算法的基本步骤\x3c\/h1\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e取得每一个像素的red，green，blue值。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e使用灰度算法，算出一个灰度值。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e用这个灰度值代替像素原始的red，green，blue值。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e比如我们的灰度算法是：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22Gray = (Red \x2b Green \x2b Blue) \/ 3\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs mathematica\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eGray\x3c\/span\x3e = (\x3cspan class=\x22hljs-keyword\x22\x3eRed\x3c\/span\x3e \x2b \x3cspan class=\x22hljs-keyword\x22\x3eGreen\x3c\/span\x3e \x2b \x3cspan class=\x22hljs-keyword\x22\x3eBlue\x3c\/span\x3e) \/ \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e计算过程：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/伪代码\nfor(var Pixel in Image){\n  var Red = Image[Pixel].Red\n  var Green = Image[Pixel].Green\n  var Blue = Image[Pixel].Blue\n\n  var Gray = (Red \x2b Green \x2b Blue) \/ 3\n\n  Image[Pixel].Red = Gray\n  Image[Pixel].Green = Gray\n  Image[Pixel].Blue = Gray\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/伪代码\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e Pixel \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e Image){\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e Red = Image[Pixel].Red\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e Green = Image[Pixel].Green\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e Blue = Image[Pixel].Blue\n\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e Gray = (Red \x2b Green \x2b Blue) \/ \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e\n\n  Image[Pixel].Red = Gray\n  Image[Pixel].Green = Gray\n  Image[Pixel].Blue = Gray\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e很简单对吧。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e 很多好吃的鲜艳水果，但是它们马上要变灰了！！\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008999651?w=720\x26amp;h=480\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008999651?w=720\x26amp;h=480\x22 alt=\x22fruits\x22 title=\x22fruits\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader4\x22\x3e算法1 - 平均法\x3c\/h1\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e\x3cstrong\x3e使用算法1：\x3c\/strong\x3e\x3c\/h3\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008999652?w=1928\x26amp;h=1288\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008999652?w=1928\x26amp;h=1288\x22 alt=\x22算法1\x22 title=\x22算法1\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e这是最常见的灰度算法，简单暴力，把它放到第一位。公式是：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 Gray = (Red \x2b Green \x2b Blue) \/ 3\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e Gray = (Red \x2b Green \x2b Blue) \/ \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这个算法可以生成不错灰度值，因为公式简单，所以易于维护和优化。然而它也不是没有缺点，因为简单快速，从人眼的感知角度看，图片的灰度阴影和亮度方面做的还不够好。所以，我们需要更复杂的运算。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader6\x22\x3e算法2 - 基于人眼感知\x3c\/h1\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e\x3cstrong\x3e使用算法2：\x3c\/strong\x3e\x3c\/h3\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008999653?w=1916\x26amp;h=1280\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008999653?w=1916\x26amp;h=1280\x22 alt=\x22算法2\x22 title=\x22算法2\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e算法1与算法2生成的图片似乎没太大差别，所以增加一个例子，将图片上半部分用算法1，下半部分用算法2。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader8\x22\x3e\x3cstrong\x3e上半部分是算法1，下半部分是算法2：\x3c\/strong\x3e\x3c\/h3\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008999654?w=1924\x26amp;h=1276\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008999654?w=1924\x26amp;h=1276\x22 alt=\x22算法1\x2b算法2\x22 title=\x22算法1\x2b算法2\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e仔细看的话，中间有一根黑线。上半部分（算法1）比下半部分（算法2）更苍白一些。如果还是看不出来，注意\x3cstrong\x3e最右边的柠檬\x3c\/strong\x3e，算法1的柠檬反光更强烈，算法2的柠檬更柔和。\x3c\/p\x3e\n\x3cp\x3e第二种算法考虑到了人眼对不同光感知程度不同。人的眼睛内有几种辨别颜色的锥形感光细胞，分别对黄绿色、绿色和蓝紫色的光最敏感。虽然眼球中的椎状细胞并非对红、绿、蓝三色的感受度最强，但是由肉眼的椎状细胞所能感受的光的带宽很大，红、绿、蓝也能够独立刺激这三种颜色的受光体。\x3c\/p\x3e\n\x3cp\x3e人类对红绿蓝三色的感知程度依次是： 绿\x26gt;红\x26gt;蓝，所以平均算法从这个角度看是不科学的。应该按照人类对光的感知程度为每个颜色设定一个权重，它们的之间的地位不应该是平等的。\x3c\/p\x3e\n\x3cp\x3e一个图像处理通用的公式是：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22Gray = (Red * 0.3 \x2b Green * 0.59 \x2b Blue * 0.11)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3eGray = (Red * \x3cspan class=\x22hljs-number\x22\x3e0.3\x3c\/span\x3e \x2b Green * \x3cspan class=\x22hljs-number\x22\x3e0.59\x3c\/span\x3e \x2b Blue * \x3cspan class=\x22hljs-number\x22\x3e0.11\x3c\/span\x3e)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e可以看到，每个颜色的系数相差很大。\x3c\/p\x3e\n\x3cp\x3e现在对图像灰度处理的最佳公式还存在争议，有一些类似的公式：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22Gray = (Red * 0.2126 \x2b Green * 0.7152 \x2b Blue * 0.0722)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3eGray = (Red * \x3cspan class=\x22hljs-number\x22\x3e0.2126\x3c\/span\x3e \x2b Green * \x3cspan class=\x22hljs-number\x22\x3e0.7152\x3c\/span\x3e \x2b Blue * \x3cspan class=\x22hljs-number\x22\x3e0.0722\x3c\/span\x3e)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eor\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22Gray = (Red * 0.299 \x2b Green * 0.587 \x2b Blue * 0.114)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3eGray = (Red * \x3cspan class=\x22hljs-number\x22\x3e0.299\x3c\/span\x3e \x2b Green * \x3cspan class=\x22hljs-number\x22\x3e0.587\x3c\/span\x3e \x2b Blue * \x3cspan class=\x22hljs-number\x22\x3e0.114\x3c\/span\x3e)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e它们只是在系数上存在一些偏差，大体的比值差不多。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader9\x22\x3e算法3 - 去饱和\x3c\/h1\x3e\n\x3ch3 id=\x22articleHeader10\x22\x3e\x3cstrong\x3e使用算法3：\x3c\/strong\x3e\x3c\/h3\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008999655?w=1924\x26amp;h=1280\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008999655?w=1924\x26amp;h=1280\x22 alt=\x22算法3\x22 title=\x22算法3\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e在说这个算法之前，先说说RGB，大多数程序员都使用RGB模型，每一种颜色都可以由红绿蓝组成，RGB对计算机来说可以很好的描述颜色，但对于人类而言就很难理解了。如果升国旗的时候说，“五星红旗多么RGB(255, 0, 42)”，可能会被暴打一顿。但我说鲜红的五星红旗，老师可能会点头称赞。\x3c\/p\x3e\n\x3cp\x3e所以为了更通俗易懂，有时我们选择HLS模型描述颜色，这三个字母分别表示Hue(色调)、Saturation(饱和度)、Lightness(亮度)。\x3cstrong\x3e色调\x3c\/strong\x3e，取值为：0 - 360，0(或360)表示红色，120表示绿色，240表示蓝色，也可取其他数值来指定颜色。\x3cstrong\x3e饱和度\x3c\/strong\x3e，取值为：0.0% - 100.0%，它通常指颜色的鲜艳程度。\x3cstrong\x3e亮度\x3c\/strong\x3e，取值为：0.0% - 100.0%，黑色的亮度为0。\x3c\/p\x3e\n\x3cp\x3e去饱和的过程就是把RGB转换为HLS，然后将饱和度设为0。因此，我们需要取一种颜色，转换它为最不饱和的值。这个数学公式比本文介绍的更复杂，这里提供一个简单的公式，一个像素可以被去饱和通过计算RGB中的最大值和最小值的中间值：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22Gray = ( Math.max(Red, Green, Blue) \x2b Math.min(Red, Green, Blue) ) \/ 2\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JS\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3eGray = ( \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.max(Red, Green, Blue) \x2b \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.min(Red, Green, Blue) ) \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e去饱和后，图片立体感减弱，但是更柔和。对比算法2，可以很明显的看出差异，从效果上看，可能大多数人都喜欢算法2，算法3是目前为止，处理的图片立体感最弱，最黑暗的。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader11\x22\x3e算法4 - 分解\x3c\/h1\x3e\n\x3ch3 id=\x22articleHeader12\x22\x3e\x3cstrong\x3e取最大值\x3c\/strong\x3e\x3c\/h3\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008999656?w=1924\x26amp;h=1276\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008999656?w=1924\x26amp;h=1276\x22 alt=\x22算法4max\x22 title=\x22算法4max\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader13\x22\x3e\x3cstrong\x3e取最小值\x3c\/strong\x3e\x3c\/h3\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008999657?w=1916\x26amp;h=1272\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008999657?w=1916\x26amp;h=1272\x22 alt=\x22算法4min\x22 title=\x22算法4min\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e分解算法可以认为是去饱和更简单一种的方式。分解是基于每一个像素的，只取RGB的最大值或者最小值。\x3c\/p\x3e\n\x3cp\x3e最大值分解：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22Gray = Math.max(Red, Green, Blue)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3eGray = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.max(Red, Green, Blue)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e最小值分解：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22Gray = Math.min(Red, Green, Blue)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3eGray = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.min(Red, Green, Blue)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e正如上面展现的，最大值分解提供了更明亮的图，而最小值分解提供了更黑暗的图。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader14\x22\x3e算法5 - 单一通道\x3c\/h1\x3e\n\x3ch3 id=\x22articleHeader15\x22\x3e\x3cstrong\x3e取红色通道\x3c\/strong\x3e\x3c\/h3\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008999658?w=1924\x26amp;h=1280\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008999658?w=1924\x26amp;h=1280\x22 alt=\x22算法5red\x22 title=\x22算法5red\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader16\x22\x3e\x3cstrong\x3e取绿色通道\x3c\/strong\x3e\x3c\/h3\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008999659?w=1920\x26amp;h=1280\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008999659?w=1920\x26amp;h=1280\x22 alt=\x22算法5green\x22 title=\x22算法5green\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader17\x22\x3e\x3cstrong\x3e取蓝色通道\x3c\/strong\x3e\x3c\/h3\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008999660?w=1920\x26amp;h=1272\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008999660?w=1920\x26amp;h=1272\x22 alt=\x22算法5blue\x22 title=\x22算法5blue\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e图片变灰更快捷的方法，这个方法不用做任何计算，取一个通道的值直接作为灰度值。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22Gray = Red\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3eGray = Red\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eor\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22Gray = Green\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3eGray = Green\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eor\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22Gray = Blue\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3eGray = Blue\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e不管相不相信，大多数数码相机都用这个算法生成灰度图片。很难预测这种转换的结果，所以这种算法多用于艺术效果。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader18\x22\x3e算法6 - 自定义灰度阴影\x3c\/h1\x3e\n\x3ch3 id=\x22articleHeader19\x22\x3e\x3cstrong\x3eNumberOfShades = 4\x3c\/strong\x3e\x3c\/h3\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008999661?w=1920\x26amp;h=1272\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008999661?w=1920\x26amp;h=1272\x22 alt=\x22算法6a\x22 title=\x22算法6a\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e这是到目前为止最有趣的算法，允许用户提供一个灰色阴影值，值的范围在2-256。2的结果是一张全白的图片，256的结果和算法1一样。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader20\x22\x3e\x3cstrong\x3eNumberOfShades = 16\x3c\/strong\x3e\x3c\/h3\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008999662?w=1924\x26amp;h=1276\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008999662?w=1924\x26amp;h=1276\x22 alt=\x22算法6b\x22 title=\x22算法6b\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e该算法通过选择阴影值来工作，它的公式有点复杂\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ConversionFactor = 255 \/ (NumberOfShades - 1)\nAverageValue = (Red \x2b Green \x2b Blue) \/ 3\nGray = Math.round((AverageValue \/ ConversionFactor) \x2b 0.5) * ConversionFactor\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3eConversionFactor = \x3cspan class=\x22hljs-number\x22\x3e255\x3c\/span\x3e \/ (NumberOfShades - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e)\nAverageValue = (Red \x2b Green \x2b Blue) \/ \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e\nGray = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.round((AverageValue \/ ConversionFactor) \x2b \x3cspan class=\x22hljs-number\x22\x3e0.5\x3c\/span\x3e) * ConversionFactor\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3eNumberOfShades 的范围在2-256。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e从技术上说，任何灰度算法都可以计算AverageValue，它仅仅提供一个初始灰度的估计值。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e“\x2b 0.5” 是一个可选参数，用于模拟四舍五入。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch1 id=\x22articleHeader21\x22\x3e小节\x3c\/h1\x3e\n\x3cp\x3e这是一篇很有趣的文章，不仅仅是介绍灰度算法，对了解图片的处理过程也很有帮助。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader22\x22\x3eReferences\x3c\/h1\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/www.tannerhelland.com\/3643\/grayscale-image-algorithm-vb6\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eSeven grayscale conversion algorithms (with pseudocode and VB6 source code)\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>有趣的6种图片灰度转换算法</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000009000216">https://segmentfault.com/a/1190000009000216</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/1ofo5slgkfy/" target="_blank">https://alili.tech/archive/1ofo5slgkfy/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>