<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="聊聊 node.js 中各种 dependency"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>聊聊 node.js 中各种 dependency | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/0j58in6148/",
				"appid": "1613049289050283", 
				"title": "聊聊 node.js 中各种 dependency | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-26T02:30:18"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/2bc86gel3ek/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/qjr1nljjpvm/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f0j58in6148%2f&text=%e8%81%8a%e8%81%8a%20node.js%20%e4%b8%ad%e5%90%84%e7%a7%8d%20dependency"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f0j58in6148%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f0j58in6148%2f&text=%e8%81%8a%e8%81%8a%20node.js%20%e4%b8%ad%e5%90%84%e7%a7%8d%20dependency"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f0j58in6148%2f&title=%e8%81%8a%e8%81%8a%20node.js%20%e4%b8%ad%e5%90%84%e7%a7%8d%20dependency"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f0j58in6148%2f&is_video=false&description=%e8%81%8a%e8%81%8a%20node.js%20%e4%b8%ad%e5%90%84%e7%a7%8d%20dependency"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e8%81%8a%e8%81%8a%20node.js%20%e4%b8%ad%e5%90%84%e7%a7%8d%20dependency&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f0j58in6148%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f0j58in6148%2f&title=%e8%81%8a%e8%81%8a%20node.js%20%e4%b8%ad%e5%90%84%e7%a7%8d%20dependency"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f0j58in6148%2f&title=%e8%81%8a%e8%81%8a%20node.js%20%e4%b8%ad%e5%90%84%e7%a7%8d%20dependency"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f0j58in6148%2f&title=%e8%81%8a%e8%81%8a%20node.js%20%e4%b8%ad%e5%90%84%e7%a7%8d%20dependency"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f0j58in6148%2f&title=%e8%81%8a%e8%81%8a%20node.js%20%e4%b8%ad%e5%90%84%e7%a7%8d%20dependency"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">聊聊 node.js 中各种 dependency</h1><div class="meta"><div class="postdate"><time datetime="2019-01-26" itemprop="datePublished">2019-01-26</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008398822?w=600\x26amp;h=340\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008398822?w=600\x26amp;h=340\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3enode 项目中常见 \x3ccode\x3edependency\x3c\/code\x3e，\x3ccode\x3edevDependency\x3c\/code\x3e，\x3ccode\x3epeerDependency\x3c\/code\x3e，平时开发的时候总是遇到，但就是没细了解过它们之间的异同，今天简单深入一下，记录下来。\x3c\/p\x3e\n\x3cp\x3e首先看下方的图，project-main 的 dependency 是 package-a，package-a 的 \x3cem\x3edevDependency\x3c\/em\x3e 是 package-a-1，此外，project-main 也有一个 \x3cem\x3edevDependency\x3c\/em\x3e 是 package-b：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22├── project-main\n    ├── package-a (dependency)\n    │   └── package-a-1 (devDependency)\n    └── package-b (devDependency)\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22\x3e├── project-main\n    ├── package\x3cspan class=\x22hljs-_\x22\x3e-a\x3c\/span\x3e (dependency)\n    │   └── package\x3cspan class=\x22hljs-_\x22\x3e-a\x3c\/span\x3e-1 (devDependency)\n    └── package-b (devDependency)\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ package.json\n{\n  \x26quot;name\x26quot;: \x26quot;project-main\x26quot;,\n  \x26quot;dependencies\x26quot;: {\n    \x26quot;package-a\x26quot;: \x26quot;^1.0.0\x26quot;\n  },\n  \x26quot;devDependencies\x26quot;: {\n    \x26quot;package-b\x26quot;: \x26quot;^1.0.0\x26quot;\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ package.json\x3c\/span\x3e\n{\n  \x3cspan class=\x22hljs-string\x22\x3e\x22name\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22project-main\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-string\x22\x3e\x22dependencies\x22\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-string\x22\x3e\x22package-a\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22^1.0.0\x22\x3c\/span\x3e\n  },\n  \x3cspan class=\x22hljs-string\x22\x3e\x22devDependencies\x22\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-string\x22\x3e\x22package-b\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22^1.0.0\x22\x3c\/span\x3e\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在 project-main 下执行 \x3ccode\x3enpm install\x3c\/code\x3e 之后，package-a 和 package-b 都会被安装，但 package-a-1 不会被安装，所以你在 project-main 的 node_modules 文件夹下找不到 package-c。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader0\x22\x3edependency 与 devDependency 的异同\x3c\/h3\x3e\n\x3cp\x3e这是 \x3ccode\x3edependency\x3c\/code\x3e 与 \x3ccode\x3edevDependency\x3c\/code\x3e 的不同点之一。项目依赖的 package 的 devDependency \x3cem\x3e不会\x3c\/em\x3e被安装，但自身的 devDependency 会被安装，而所有的 dependency 都会被安装。如果不想安装自身的 devDependency 就使用 \x3ccode\x3enpm install --production\x3c\/code\x3e 这个指令来，这样的话 对于 project-main 来说，它的 devDependency 也不会被安装了。\x3c\/p\x3e\n\x3cp\x3e所以，在开发一个 node 包时，要注意区分什么时候用 dependencies 什么时候用 devDependencies，一般做测试、打包、ES6转ES5此类的工作所依赖的库就使用 devDependencies，而正常功能所依赖的包就使用 dependencies 声明。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3e npm install react --save  \/\/ 做为 dependencies 安装\n\x3e npm install eslint --save-dev \/\/ 做为 devDependencies 安装\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs q\x22\x3e\x3ccode class=\x22shell\x22\x3e\x26gt; npm install react --\x3cspan class=\x22hljs-built_in\x22\x3esave\x3c\/span\x3e  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 做为 dependencies 安装\x3c\/span\x3e\n\x26gt; npm install eslint --\x3cspan class=\x22hljs-built_in\x22\x3esave\x3c\/span\x3e-\x3cspan class=\x22hljs-built_in\x22\x3edev\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 做为 devDependencies 安装\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3epeerDependencies\x3c\/h3\x3e\n\x3cp\x3e还是拿上面的例子来说，假如 project-main 依赖的 package-a 的 package.json 中声明了 peerDependency 是 \x3ccode\x3epackage-apeer@^1.0.0\x3c\/code\x3e，而 project-main 中没有任何 package-apeer 的配置，此时在 project-main 下使用 \x3ccode\x3enpm3\x3c\/code\x3e 执行 \x3ccode\x3enpm install\x3c\/code\x3e，控制台就会告警 \x3ccode\x3eUNMET PEER DEPENDENCY package-apeer@^1.0.0\x3c\/code\x3e，意思就是说使用到 package-a 的项目必须安装同时安装 \x3ccode\x3epackage-apeer@^1.0.0\x3c\/code\x3e ，否则程序就可能会有异常，而在 \x3ccode\x3enpm@1\x3c\/code\x3e 和 \x3ccode\x3enpm@2\x3c\/code\x3e 下，就不会报错而是自动把 \x3ccode\x3epackage-apeer@^1.0.0\x3c\/code\x3e 安装上，因为很多用户反应这样很困惑，我没声明这个包，你为什么要给我安装呢？所以在 \x3ccode\x3enpm@3\x3c\/code\x3e 中这个 peerDependencies 如果没装就变成了控制台告警。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e其它的 dependency\x3c\/h2\x3e\n\x3cp\x3e其实 node 还有另外两种 dependency 配置。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3ebundleDependencies\x3c\/h3\x3e\n\x3cp\x3e它还有一个别名，bundledDependencies，这个配置的作用如下：\x3c\/p\x3e\n\x3cp\x3e对于下面这个包 package-a\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n  \x26quot;name\x26quot;: \x26quot;package-a\x26quot;,\n  \x26quot;dependencies\x26quot;: {\n    \x26quot;react\x26quot;: \x26quot;^15.0.0\x26quot;,\n    \x26quot;core-js\x26quot;: \x26quot;^2.0.0\x26quot;,\n    \x26quot;lodash\x26quot;: \x26quot;^4.0.0\x26quot;\n  },\n  \x26quot;bundleDependencies\x26quot;: [\n    \x26quot;react\x26quot;,\n    \x26quot;core-js\x26quot;\n  ]\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e{\n  \x3cspan class=\x22hljs-string\x22\x3e\x22name\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22package-a\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-string\x22\x3e\x22dependencies\x22\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-string\x22\x3e\x22react\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22^15.0.0\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22core-js\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22^2.0.0\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22lodash\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22^4.0.0\x22\x3c\/span\x3e\n  },\n  \x3cspan class=\x22hljs-string\x22\x3e\x22bundleDependencies\x22\x3c\/span\x3e: [\n    \x3cspan class=\x22hljs-string\x22\x3e\x22react\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22core-js\x22\x3c\/span\x3e\n  ]\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在你的项目中使用 \x3ccode\x3enpm@3\x3c\/code\x3e 安装 package-a 之后，项目的 node_modules 的文件结构：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22├── node_modules\n    ├── package-a\n    │   └── react\n    │   └── core-js\n    └── loadsh\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode class=\x22shell\x22\x3e├── node_modules\n    ├── package-\x3cspan class=\x22hljs-selector-tag\x22\x3ea\x3c\/span\x3e\n    │   └── react\n    │   └── core-js\n    └── loadsh\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3ebundleDependencies 的作用就是在用户安装了 package-a 之后，将 package-a 所声明的依赖包汇总到 package-a 自身的 node_modules 下，便于用户管理，如果 package-a 中没有配置 bundleDepencies，在安装了 package-a 的项目下 node_modules 就会长这样：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22├── node_modules\n    ├── package-a\n    ├── react\n    ├── core-js\n    └── loadsh\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode class=\x22shell\x22\x3e├── node_modules\n    ├── package-\x3cspan class=\x22hljs-selector-tag\x22\x3ea\x3c\/span\x3e\n    ├── react\n    ├── core-js\n    └── loadsh\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3eoptionalDependencies\x3c\/h3\x3e\n\x3cp\x3e如果你的node项目依赖了一个包 package-optional，假如这个 package-optional 没有安装，你仍然想让程序正常执行，这个时候 optionalDependencies 就非常适合你这个需求，optionalDependencies 跟 dependencies 声明方式完全一致，而且一个依赖如果同时在 dependencies 和 optionalDependencies 中声明，option 还会\x3cem\x3e覆盖\x3c\/em\x3e dependency 的声明。如果 package-optional 这个包是可选的，在代码中就可以这样写了：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22try {\n    var pkgOpt = require(\x27package-optional\x27);\n} catch (e) {\n    pkgOpt = null;\n}\nconsole.log(pkgOpt);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3etry\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e pkgOpt = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27package-optional\x27\x3c\/span\x3e);\n} \x3cspan class=\x22hljs-keyword\x22\x3ecatch\x3c\/span\x3e (e) {\n    pkgOpt = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n}\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(pkgOpt);\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e结语\x3c\/h2\x3e\n\x3cp\x3enode package 的依赖管理在如今的前端工程化时代背景下变得尤为重要，构建优雅可维护的 node_modules 结构是值得探讨的一个话题，希望今天本文能对你有所帮助和启发。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>聊聊 node.js 中各种 dependency</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000008398819">https://segmentfault.com/a/1190000008398819</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/0j58in6148/" target="_blank">https://alili.tech/archive/0j58in6148/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>