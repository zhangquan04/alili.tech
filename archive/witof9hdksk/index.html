<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="在 Ubuntu 中用 UFW 配置防火墙"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>在 Ubuntu 中用 UFW 配置防火墙 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/witof9hdksk/",
				"appid": "1613049289050283", 
				"title": "在 Ubuntu 中用 UFW 配置防火墙 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-24T02:30:11"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/9x1g82x8t1/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/6637i94gfh3/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fwitof9hdksk%2f&text=%e5%9c%a8%20Ubuntu%20%e4%b8%ad%e7%94%a8%20UFW%20%e9%85%8d%e7%bd%ae%e9%98%b2%e7%81%ab%e5%a2%99"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fwitof9hdksk%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fwitof9hdksk%2f&text=%e5%9c%a8%20Ubuntu%20%e4%b8%ad%e7%94%a8%20UFW%20%e9%85%8d%e7%bd%ae%e9%98%b2%e7%81%ab%e5%a2%99"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fwitof9hdksk%2f&title=%e5%9c%a8%20Ubuntu%20%e4%b8%ad%e7%94%a8%20UFW%20%e9%85%8d%e7%bd%ae%e9%98%b2%e7%81%ab%e5%a2%99"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fwitof9hdksk%2f&is_video=false&description=%e5%9c%a8%20Ubuntu%20%e4%b8%ad%e7%94%a8%20UFW%20%e9%85%8d%e7%bd%ae%e9%98%b2%e7%81%ab%e5%a2%99"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%9c%a8%20Ubuntu%20%e4%b8%ad%e7%94%a8%20UFW%20%e9%85%8d%e7%bd%ae%e9%98%b2%e7%81%ab%e5%a2%99&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fwitof9hdksk%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fwitof9hdksk%2f&title=%e5%9c%a8%20Ubuntu%20%e4%b8%ad%e7%94%a8%20UFW%20%e9%85%8d%e7%bd%ae%e9%98%b2%e7%81%ab%e5%a2%99"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fwitof9hdksk%2f&title=%e5%9c%a8%20Ubuntu%20%e4%b8%ad%e7%94%a8%20UFW%20%e9%85%8d%e7%bd%ae%e9%98%b2%e7%81%ab%e5%a2%99"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fwitof9hdksk%2f&title=%e5%9c%a8%20Ubuntu%20%e4%b8%ad%e7%94%a8%20UFW%20%e9%85%8d%e7%bd%ae%e9%98%b2%e7%81%ab%e5%a2%99"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fwitof9hdksk%2f&title=%e5%9c%a8%20Ubuntu%20%e4%b8%ad%e7%94%a8%20UFW%20%e9%85%8d%e7%bd%ae%e9%98%b2%e7%81%ab%e5%a2%99"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">在 Ubuntu 中用 UFW 配置防火墙</h1><div class="meta"><div class="postdate"><time datetime="2019-01-24" itemprop="datePublished">2019-01-24</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n            \x3ch1\x3e\x3ca href=\x22#在-ubuntu-中用-ufw-配置防火墙\x22\x3e\x3c\/a\x3e在 Ubuntu 中用 UFW 配置防火墙\x3c\/h1\x3e\n\x3cp\x3eUFW，即简单防火墙（uncomplicated firewall），是一个 Arch Linux、Debian 或 Ubuntu 中管理防火墙规则的前端。 UFW 通过命令行使用（尽管它有可用的 GUI），它的目的是使防火墙配置简单（即不复杂（uncomplicated））。\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/camo.githubusercontent.com\/1d2cde63b145a80432b06787dcf0eb6f605e93d6\/68747470733a2f2f7777772e6c696e6f64652e636f6d2f646f63732f6173736574732f7566775f74672e706e67\x22\x3e\x3cimg src=\x22https:\/\/camo.githubusercontent.com\/1d2cde63b145a80432b06787dcf0eb6f605e93d6\/68747470733a2f2f7777772e6c696e6f64652e636f6d2f646f63732f6173736574732f7566775f74672e706e67\x22 alt=\x22How to Configure a Firewall with UFW\x22 title=\x22How to Configure a Firewall with UFW\x22\x3e\x3c\/a\x3e\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#开始之前\x22\x3e\x3c\/a\x3e开始之前\x3c\/h3\x3e\n\x3cp\x3e1、 熟悉我们的\x3ca href=\x22https:\/\/www.linode.com\/docs\/getting-started\x22\x3e入门\x3c\/a\x3e指南，并完成设置服务器主机名和时区的步骤。\x3c\/p\x3e\n\x3cp\x3e2、 本指南将尽可能使用 \x3ccode\x3esudo\x3c\/code\x3e。 在完成\x3ca href=\x22https:\/\/www.linode.com\/docs\/security\/securing-your-server\x22\x3e保护你的服务器\x3c\/a\x3e指南的章节，创建一个标准用户帐户，强化 SSH 访问和移除不必要的网络服务。 \x3cstrong\x3e但不要\x3c\/strong\x3e跟着创建防火墙部分 - 本指南是介绍使用 UFW 的，它对于 iptables 而言是另外一种控制防火墙的方法。\x3c\/p\x3e\n\x3cp\x3e3、 更新系统\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3eArch Linux\x3c\/strong\x3e\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs ebnf\x22\x3e\x3cspan class=\x22hljs-attribute\x22\x3esudo pacman -Syu\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e\x3cstrong\x3eDebian \/ Ubuntu\x3c\/strong\x3e\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs routeros\x22\x3esudo apt-\x3cspan class=\x22hljs-builtin-name\x22\x3eget\x3c\/span\x3e update \x26amp;\x26amp; sudo apt-\x3cspan class=\x22hljs-builtin-name\x22\x3eget\x3c\/span\x3e\x3cspan class=\x22hljs-built_in\x22\x3e upgrade\n\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\x3ch3\x3e\x3ca href=\x22#安装-ufw\x22\x3e\x3c\/a\x3e安装 UFW\x3c\/h3\x3e\n\x3cp\x3eUFW 默认包含在 Ubuntu 中，但在 Arch 和 Debian 中需要安装。 Debian 将自动启用 UFW 的 systemd 单元，并使其在重新启动时启动，但 Arch 不会。 这与告诉 UFW 启用防火墙规则不同，因为使用 systemd 或者 upstart 启用 UFW 仅仅是告知 init 系统打开 UFW 守护程序。\x3c\/p\x3e\n\x3cp\x3e默认情况下，UFW 的规则集为空，因此即使守护程序正在运行，也不会强制执行任何防火墙规则。 强制执行防火墙规则集的部分\x3ca href=\x22http:\/\/localhost:4567\/docs\/security\/firewalls\/configure-firewall-with-ufw#enable-the-firewall\x22\x3e在下面\x3c\/a\x3e。\x3c\/p\x3e\n\x3ch4\x3e\x3ca href=\x22#arch-linux\x22\x3e\x3c\/a\x3eArch Linux\x3c\/h4\x3e\n\x3cp\x3e1、 安装 UFW：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs ebnf\x22\x3e\x3cspan class=\x22hljs-attribute\x22\x3esudo pacman -S ufw\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e2、 启动并启用 UFW 的 systemd 单元：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs routeros\x22\x3esudo systemctl start ufw\nsudo systemctl \x3cspan class=\x22hljs-builtin-name\x22\x3eenable\x3c\/span\x3e ufw\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3ch4\x3e\x3ca href=\x22#debian--ubuntu\x22\x3e\x3c\/a\x3eDebian \/ Ubuntu\x3c\/h4\x3e\n\x3cp\x3e1、 安装 UFW\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs routeros\x22\x3esudo apt-\x3cspan class=\x22hljs-builtin-name\x22\x3eget\x3c\/span\x3e install ufw\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3ch3\x3e\x3ca href=\x22#使用-ufw-管理防火墙规则\x22\x3e\x3c\/a\x3e使用 UFW 管理防火墙规则\x3c\/h3\x3e\n\x3ch4\x3e\x3ca href=\x22#设置默认规则\x22\x3e\x3c\/a\x3e设置默认规则\x3c\/h4\x3e\n\x3cp\x3e大多数系统只需要打开少量的端口接受传入连接，并且关闭所有剩余的端口。 从一个简单的规则基础开始，\x3ccode\x3eufw default\x3c\/code\x3e命令可以用于设置对传入和传出连接的默认响应动作。 要拒绝所有传入并允许所有传出连接，那么运行：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs routeros\x22\x3esudo ufw\x3cspan class=\x22hljs-built_in\x22\x3e default \x3c\/span\x3eallow outgoing\nsudo ufw\x3cspan class=\x22hljs-built_in\x22\x3e default \x3c\/span\x3edeny\x3cspan class=\x22hljs-built_in\x22\x3e incoming\n\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e\x3ccode\x3eufw default\x3c\/code\x3e 也允许使用 \x3ccode\x3ereject\x3c\/code\x3e 参数。\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3cp\x3e警告：\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cblockquote\x3e\n\x3cp\x3e除非明确设置允许规则，否则配置默认 \x3ccode\x3edeny\x3c\/code\x3e 或 \x3ccode\x3ereject\x3c\/code\x3e 规则会锁定你的服务器。确保在应用默认 \x3ccode\x3edeny\x3c\/code\x3e 或 \x3ccode\x3ereject\x3c\/code\x3e 规则之前，已按照下面的部分配置了 SSH 和其他关键服务的允许规则。\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3ch4\x3e\x3ca href=\x22#添加规则\x22\x3e\x3c\/a\x3e添加规则\x3c\/h4\x3e\n\x3cp\x3e可以有两种方式添加规则：用\x3cstrong\x3e端口号\x3c\/strong\x3e或者\x3cstrong\x3e服务名\x3c\/strong\x3e表示。\x3c\/p\x3e\n\x3cp\x3e要允许 SSH 的 22 端口的传入和传出连接，你可以运行：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs ebnf\x22\x3e\x3cspan class=\x22hljs-attribute\x22\x3esudo ufw allow ssh\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e你也可以运行：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs lsl\x22\x3esudo ufw allow \x3cspan class=\x22hljs-number\x22\x3e22\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e相似的，要在特定端口（比如 111）上 \x3ccode\x3edeny\x3c\/code\x3e 流量，你需要运行：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs crmsh\x22\x3esudo ufw \x3cspan class=\x22hljs-keyword\x22\x3edeny\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e111\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e为了更好地调整你的规则，你也可以允许基于 TCP 或者 UDP 的包。下面例子会允许 80 端口的 TCP 包：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs livecodeserver\x22\x3esudo ufw allow \x3cspan class=\x22hljs-number\x22\x3e80\x3c\/span\x3e\/tcp\nsudo ufw allow \x3cspan class=\x22hljs-keyword\x22\x3ehttp\x3c\/span\x3e\/tcp\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e这个会允许 1725 端口上的 UDP 包：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs lsl\x22\x3esudo ufw allow \x3cspan class=\x22hljs-number\x22\x3e1725\x3c\/span\x3e\/udp\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3ch4\x3e\x3ca href=\x22#高级规则\x22\x3e\x3c\/a\x3e高级规则\x3c\/h4\x3e\n\x3cp\x3e除了基于端口的允许或阻止，UFW 还允许您按照 IP 地址、子网和 IP 地址\/子网\/端口的组合来允许\/阻止。\x3c\/p\x3e\n\x3cp\x3e允许从一个 IP 地址连接：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs css\x22\x3e\x3cspan class=\x22hljs-selector-tag\x22\x3esudo\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3eufw\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3eallow\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3efrom\x3c\/span\x3e 123\x3cspan class=\x22hljs-selector-class\x22\x3e.45\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.67\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.89\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e允许特定子网的连接：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs lsl\x22\x3esudo ufw allow from \x3cspan class=\x22hljs-number\x22\x3e123.45\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e.67\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e.89\x3c\/span\x3e\/\x3cspan class=\x22hljs-number\x22\x3e24\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e允许特定 IP\/ 端口的组合：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs routeros\x22\x3esudo ufw allow \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e 123.45.67.89 \x3cspan class=\x22hljs-keyword\x22\x3eto\x3c\/span\x3e any\x3cspan class=\x22hljs-built_in\x22\x3e port \x3c\/span\x3e22 proto tcp\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e\x3ccode\x3eproto tcp\x3c\/code\x3e 可以删除或者根据你的需求改成 \x3ccode\x3eproto udp\x3c\/code\x3e，所有例子的 \x3ccode\x3eallow\x3c\/code\x3e 都可以根据需要变成 \x3ccode\x3edeny\x3c\/code\x3e。\x3c\/p\x3e\n\x3ch4\x3e\x3ca href=\x22#删除规则\x22\x3e\x3c\/a\x3e删除规则\x3c\/h4\x3e\n\x3cp\x3e要删除一条规则，在规则的前面加上 \x3ccode\x3edelete\x3c\/code\x3e。如果你希望不再允许 HTTP 流量，你可以运行：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs sql\x22\x3esudo ufw \x3cspan class=\x22hljs-keyword\x22\x3edelete\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eallow\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e80\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e删除规则同样可以使用服务名。\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#编辑-ufw-的配置文件\x22\x3e\x3c\/a\x3e编辑 UFW 的配置文件\x3c\/h3\x3e\n\x3cp\x3e虽然可以通过命令行添加简单的规则，但仍有可能需要添加或删除更高级或特定的规则。 在运行通过终端输入的规则之前，UFW 将运行一个文件 \x3ccode\x3ebefore.rules\x3c\/code\x3e，它允许回环接口、ping 和 DHCP 等服务。要添加或改变这些规则，编辑 \x3ccode\x3e\/etc\/ufw\/before.rules\x3c\/code\x3e 这个文件。 同一目录中的 \x3ccode\x3ebefore6.rules\x3c\/code\x3e 文件用于 IPv6 。\x3c\/p\x3e\n\x3cp\x3e还存在一个 \x3ccode\x3eafter.rule\x3c\/code\x3e 和 \x3ccode\x3eafter6.rule\x3c\/code\x3e 文件，用于添加在 UFW 运行你通过命令行输入的规则之后需要添加的任何规则。\x3c\/p\x3e\n\x3cp\x3e还有一个配置文件位于 \x3ccode\x3e\/etc\/default\/ufw\x3c\/code\x3e。 从此处可以禁用或启用 IPv6，可以设置默认规则，并可以设置 UFW 以管理内置防火墙链。\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#ufw-状态\x22\x3e\x3c\/a\x3eUFW 状态\x3c\/h3\x3e\n\x3cp\x3e你可以在任何时候使用命令：\x3ccode\x3esudo ufw status\x3c\/code\x3e 查看 UFW 的状态。这会显示所有规则列表，以及 UFW 是否处于激活状态：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs http\x22\x3e\x3cspan class=\x22hljs-attribute\x22\x3eStatus\x3c\/span\x3e: active\n\n\x3cspan class=\x22lisp\x22\x3eTo                         Action      From\n--                         ------      ----\n\x3cspan class=\x22hljs-number\x22\x3e22\x3c\/span\x3e                         ALLOW       Anywhere\n\x3cspan class=\x22hljs-number\x22\x3e80\x3c\/span\x3e\/tcp                     ALLOW       Anywhere\n\x3cspan class=\x22hljs-number\x22\x3e443\x3c\/span\x3e                        ALLOW       Anywhere\n\x3cspan class=\x22hljs-number\x22\x3e22\x3c\/span\x3e (\x3cspan class=\x22hljs-name\x22\x3ev6\x3c\/span\x3e)                    ALLOW       Anywhere (\x3cspan class=\x22hljs-name\x22\x3ev6\x3c\/span\x3e)\n\x3cspan class=\x22hljs-number\x22\x3e80\x3c\/span\x3e\/tcp (\x3cspan class=\x22hljs-name\x22\x3ev6\x3c\/span\x3e)                ALLOW       Anywhere (\x3cspan class=\x22hljs-name\x22\x3ev6\x3c\/span\x3e)\n\x3cspan class=\x22hljs-number\x22\x3e443\x3c\/span\x3e (\x3cspan class=\x22hljs-name\x22\x3ev6\x3c\/span\x3e)                   ALLOW       Anywhere (\x3cspan class=\x22hljs-name\x22\x3ev6\x3c\/span\x3e)\n\n\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\x3ch3\x3e\x3ca href=\x22#启用防火墙\x22\x3e\x3c\/a\x3e启用防火墙\x3c\/h3\x3e\n\x3cp\x3e随着你选择规则完成，你初始运行 \x3ccode\x3eufw status\x3c\/code\x3e 可能会输出 \x3ccode\x3eStatus: inactive\x3c\/code\x3e。 启用 UFW 并强制执行防火墙规则：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs routeros\x22\x3esudo ufw \x3cspan class=\x22hljs-builtin-name\x22\x3eenable\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e相似地，禁用 UFW 规则：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs routeros\x22\x3esudo ufw \x3cspan class=\x22hljs-builtin-name\x22\x3edisable\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cblockquote\x3e\n\x3cp\x3eUFW 会继续运行，并且在下次启动时会再次启动。\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3ch3\x3e\x3ca href=\x22#日志记录\x22\x3e\x3c\/a\x3e日志记录\x3c\/h3\x3e\n\x3cp\x3e你可以用下面的命令启动日志记录：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs routeros\x22\x3esudo ufw\x3cspan class=\x22hljs-built_in\x22\x3e logging \x3c\/span\x3eon\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e可以通过运行 \x3ccode\x3esudo ufw logging low|medium|high\x3c\/code\x3e 设计日志级别，可以选择 \x3ccode\x3elow\x3c\/code\x3e、 \x3ccode\x3emedium\x3c\/code\x3e 或者 \x3ccode\x3ehigh\x3c\/code\x3e。默认级别是 \x3ccode\x3elow\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e常规日志类似于下面这样，位于 \x3ccode\x3e\/var\/logs\/ufw\x3c\/code\x3e：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs routeros\x22\x3eSep 16 15:08:14 \x26lt;hostname\x26gt; kernel: [UFW BLOCK] \x3cspan class=\x22hljs-attribute\x22\x3eIN\x3c\/span\x3e=eth0 OUT= \x3cspan class=\x22hljs-attribute\x22\x3eMAC\x3c\/span\x3e=00:00:00:00:00:00:00:00:00:00:00:00:00:00 \x3cspan class=\x22hljs-attribute\x22\x3eSRC\x3c\/span\x3e=123.45.67.89 \x3cspan class=\x22hljs-attribute\x22\x3eDST\x3c\/span\x3e=987.65.43.21 \x3cspan class=\x22hljs-attribute\x22\x3eLEN\x3c\/span\x3e=40 \x3cspan class=\x22hljs-attribute\x22\x3eTOS\x3c\/span\x3e=0x00 \x3cspan class=\x22hljs-attribute\x22\x3ePREC\x3c\/span\x3e=0x00 \x3cspan class=\x22hljs-attribute\x22\x3eTTL\x3c\/span\x3e=249 \x3cspan class=\x22hljs-attribute\x22\x3eID\x3c\/span\x3e=8475 \x3cspan class=\x22hljs-attribute\x22\x3ePROTO\x3c\/span\x3e=TCP \x3cspan class=\x22hljs-attribute\x22\x3eSPT\x3c\/span\x3e=48247 \x3cspan class=\x22hljs-attribute\x22\x3eDPT\x3c\/span\x3e=22 \x3cspan class=\x22hljs-attribute\x22\x3eWINDOW\x3c\/span\x3e=1024 \x3cspan class=\x22hljs-attribute\x22\x3eRES\x3c\/span\x3e=0x00 SYN \x3cspan class=\x22hljs-attribute\x22\x3eURGP\x3c\/span\x3e=0\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e前面的值列出了你的服务器的日期、时间、主机名。剩下的重要信息包括：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cstrong\x3e[UFW BLOCK]\x3c\/strong\x3e：这是记录事件的描述开始的位置。在此例中，它表示阻止了连接。\x3c\/li\x3e\n\x3cli\x3e\x3cstrong\x3eIN\x3c\/strong\x3e：如果它包含一个值，那么代表该事件是传入事件\x3c\/li\x3e\n\x3cli\x3e\x3cstrong\x3eOUT\x3c\/strong\x3e：如果它包含一个值，那么代表事件是传出事件\x3c\/li\x3e\n\x3cli\x3e\x3cstrong\x3eMAC\x3c\/strong\x3e：目的地和源 MAC 地址的组合\x3c\/li\x3e\n\x3cli\x3e\x3cstrong\x3eSRC\x3c\/strong\x3e：包源的 IP\x3c\/li\x3e\n\x3cli\x3e\x3cstrong\x3eDST\x3c\/strong\x3e：包目的地的 IP\x3c\/li\x3e\n\x3cli\x3e\x3cstrong\x3eLEN\x3c\/strong\x3e：数据包长度\x3c\/li\x3e\n\x3cli\x3e\x3cstrong\x3eTTL\x3c\/strong\x3e：数据包 TTL，或称为 time to live。 在找到目的地之前，它将在路由器之间跳跃，直到它过期。\x3c\/li\x3e\n\x3cli\x3e\x3cstrong\x3ePROTO\x3c\/strong\x3e：数据包的协议\x3c\/li\x3e\n\x3cli\x3e\x3cstrong\x3eSPT\x3c\/strong\x3e：包的源端口\x3c\/li\x3e\n\x3cli\x3e\x3cstrong\x3eDPT\x3c\/strong\x3e：包的目标端口\x3c\/li\x3e\n\x3cli\x3e\x3cstrong\x3eWINDOW\x3c\/strong\x3e：发送方可以接收的数据包的大小\x3c\/li\x3e\n\x3cli\x3e\x3cstrong\x3eSYN URGP\x3c\/strong\x3e：指示是否需要三次握手。 \x3ccode\x3e0\x3c\/code\x3e 表示不需要。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3chr\x3e\n\x3cp\x3evia: \x3ca href=\x22https:\/\/www.linode.com\/docs\/security\/firewalls\/configure-firewall-with-ufw\x22\x3ehttps:\/\/www.linode.com\/docs\/security\/firewalls\/configure-firewall-with-ufw\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e作者：\x3ca href=\x22https:\/\/www.linode.com\/docs\/security\/firewalls\/configure-firewall-with-ufw\x22\x3eLinode\x3c\/a\x3e 译者：\x3ca href=\x22https:\/\/github.com\/geekpi\x22\x3egeekpi\x3c\/a\x3e 校对：\x3ca href=\x22https:\/\/github.com\/wxy\x22\x3ewxy\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e本文由 \x3ca href=\x22https:\/\/github.com\/LCTT\/TranslateProject\x22\x3eLCTT\x3c\/a\x3e 原创编译，\x3ca href=\x22https:\/\/linux.cn\/\x22\x3eLinux中国\x3c\/a\x3e 荣誉推出\x3c\/p\x3e\n\n          \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>在 Ubuntu 中用 UFW 配置防火墙</p><h2 id="原文链接">原文链接</h2><p><a href="https://www.zcfy.cc/article/how-to-configure-a-firewall-with-ufw">https://www.zcfy.cc/article/how-to-configure-a-firewall-with-ufw</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/witof9hdksk/" target="_blank">https://alili.tech/archive/witof9hdksk/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>