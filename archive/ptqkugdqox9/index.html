<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="JavaScript深入之从ECMAScript规范解读this"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>JavaScript深入之从ECMAScript规范解读this | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/ptqkugdqox9/",
				"appid": "1613049289050283", 
				"title": "JavaScript深入之从ECMAScript规范解读this | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-16T02:30:08"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/rpgyy3qiqc9/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/9xxcznrq047/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fptqkugdqox9%2f&text=JavaScript%e6%b7%b1%e5%85%a5%e4%b9%8b%e4%bb%8eECMAScript%e8%a7%84%e8%8c%83%e8%a7%a3%e8%af%bbthis"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fptqkugdqox9%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fptqkugdqox9%2f&text=JavaScript%e6%b7%b1%e5%85%a5%e4%b9%8b%e4%bb%8eECMAScript%e8%a7%84%e8%8c%83%e8%a7%a3%e8%af%bbthis"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fptqkugdqox9%2f&title=JavaScript%e6%b7%b1%e5%85%a5%e4%b9%8b%e4%bb%8eECMAScript%e8%a7%84%e8%8c%83%e8%a7%a3%e8%af%bbthis"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fptqkugdqox9%2f&is_video=false&description=JavaScript%e6%b7%b1%e5%85%a5%e4%b9%8b%e4%bb%8eECMAScript%e8%a7%84%e8%8c%83%e8%a7%a3%e8%af%bbthis"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=JavaScript%e6%b7%b1%e5%85%a5%e4%b9%8b%e4%bb%8eECMAScript%e8%a7%84%e8%8c%83%e8%a7%a3%e8%af%bbthis&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fptqkugdqox9%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fptqkugdqox9%2f&title=JavaScript%e6%b7%b1%e5%85%a5%e4%b9%8b%e4%bb%8eECMAScript%e8%a7%84%e8%8c%83%e8%a7%a3%e8%af%bbthis"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fptqkugdqox9%2f&title=JavaScript%e6%b7%b1%e5%85%a5%e4%b9%8b%e4%bb%8eECMAScript%e8%a7%84%e8%8c%83%e8%a7%a3%e8%af%bbthis"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fptqkugdqox9%2f&title=JavaScript%e6%b7%b1%e5%85%a5%e4%b9%8b%e4%bb%8eECMAScript%e8%a7%84%e8%8c%83%e8%a7%a3%e8%af%bbthis"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fptqkugdqox9%2f&title=JavaScript%e6%b7%b1%e5%85%a5%e4%b9%8b%e4%bb%8eECMAScript%e8%a7%84%e8%8c%83%e8%a7%a3%e8%af%bbthis"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">JavaScript深入之从ECMAScript规范解读this</h1><div class="meta"><div class="postdate"><time datetime="2019-01-16" itemprop="datePublished">2019-01-16</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e\x3cp\x3eJavaScript深入系列第六篇，本篇我们追根溯源，从 ECMAScript5 规范解读 this 在函数调用时到底是如何确定的。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e前言\x3c\/h2\x3e\n\x3cp\x3e在\x3ca href=\x22https:\/\/github.com\/mqyqingfeng\/Blog\/issues\/4\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e《JavaScript深入之执行上下文栈》\x3c\/a\x3e中讲到，当JavaScript代码执行一段可执行代码(executable code)时，会创建对应的执行上下文(execution context)。\x3c\/p\x3e\n\x3cp\x3e对于每个执行上下文，都有三个重要属性\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e变量对象(Variable object，VO)\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e作用域链(Scope chain)\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3ethis\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e今天重点讲讲 this，然而不好讲。\x3c\/p\x3e\n\x3cp\x3e……\x3c\/p\x3e\n\x3cp\x3e因为我们要从 ECMASciript5 规范开始讲起。\x3c\/p\x3e\n\x3cp\x3e先奉上 ECMAScript 5.1 规范地址：\x3c\/p\x3e\n\x3cp\x3e英文版：\x3ca href=\x22http:\/\/es5.github.io\/#x15.1\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/es5.github.io\/#x15.1\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e中文版：\x3ca href=\x22http:\/\/yanhaijing.com\/es5\/#115\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/yanhaijing.com\/es5\/#115\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e让我们开始了解规范吧！\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3eTypes\x3c\/h2\x3e\n\x3cp\x3e首先是第 8 章 Types：\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3cp\x3eTypes are further subclassified into ECMAScript language types and specification types.\x3c\/p\x3e\n\x3cp\x3eAn ECMAScript language type corresponds to values that are directly manipulated by an ECMAScript programmer using the ECMAScript language. The ECMAScript language types are Undefined, Null, Boolean, String, Number, and Object.\x3c\/p\x3e\n\x3cp\x3eA specification type corresponds to meta-values that are used within algorithms to describe the semantics of ECMAScript language constructs and ECMAScript language types. The specification types are Reference, List, Completion, Property Descriptor, Property Identifier, Lexical Environment, and Environment Record.\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e我们简单的翻译一下：\x3c\/p\x3e\n\x3cp\x3eECMAScript 的类型分为语言类型和规范类型。\x3c\/p\x3e\n\x3cp\x3eECMAScript 语言类型是开发者直接使用 ECMAScript 可以操作的。其实就是我们常说的Undefined, Null, Boolean, String, Number, 和 Object。\x3c\/p\x3e\n\x3cp\x3e而规范类型相当于 meta-values，是用来用算法描述 ECMAScript 语言结构和 ECMAScript 语言类型的。规范类型包括：Reference, List, Completion, Property Descriptor, Property Identifier, Lexical Environment, 和 Environment Record。\x3c\/p\x3e\n\x3cp\x3e没懂？没关系，我们只要知道在 ECMAScript 规范中还有一种只存在于规范中的类型，它们的作用是用来描述语言底层行为逻辑。\x3c\/p\x3e\n\x3cp\x3e今天我们要讲的重点是便是其中的 Reference 类型。它与 this 的指向有着密切的关联。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3eReference\x3c\/h2\x3e\n\x3cp\x3e那什么又是 Reference ？\x3c\/p\x3e\n\x3cp\x3e让我们看 8.7 章 The Reference Specification Type：\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3eThe Reference type is used to explain the behaviour of such operators as delete, typeof, and the assignment operators.\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e所以 Reference 类型就是用来解释诸如 delete、typeof 以及赋值等操作行为的。\x3c\/p\x3e\n\x3cp\x3e抄袭尤雨溪大大的话，就是：\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e这里的 Reference 是一个 Specification Type，也就是 “只存在于规范里的抽象类型”。它们是为了更好地描述语言的底层行为逻辑才存在的，但并不存在于实际的 js 代码中。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e再看接下来的这段具体介绍 Reference 的内容：\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3cp\x3eA Reference is a resolved name binding. \x3c\/p\x3e\n\x3cp\x3eA Reference consists of three components, the base value, the referenced name and the Boolean valued strict reference flag. \x3c\/p\x3e\n\x3cp\x3eThe base value is either undefined, an Object, a Boolean, a String, a Number, or an environment record (10.2.1). \x3c\/p\x3e\n\x3cp\x3eA base value of undefined indicates that the reference could not be resolved to a binding. The referenced name is a String.\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e这段讲述了 Reference 的构成，由三个组成部分，分别是：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3ebase value\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3ereferenced name\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3estrict reference\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e可是这些到底是什么呢？\x3c\/p\x3e\n\x3cp\x3e我们简单的理解的话：\x3c\/p\x3e\n\x3cp\x3ebase value 就是属性所在的对象或者就是 EnvironmentRecord，它的值只可能是 undefined, an Object, a Boolean, a String, a Number, or an environment record 其中的一种。\x3c\/p\x3e\n\x3cp\x3ereferenced name 就是属性的名称。\x3c\/p\x3e\n\x3cp\x3e举个例子：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var foo = 1;\n\n\/\/ 对应的Reference是：\nvar fooReference = {\n    base: EnvironmentRecord,\n    name: \x27foo\x27,\n    strict: false\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e foo = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 对应的Reference是：\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e fooReference = {\n    \x3cspan class=\x22hljs-attr\x22\x3ebase\x3c\/span\x3e: EnvironmentRecord,\n    \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27foo\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3estrict\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e再举个例子：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var foo = {\n    bar: function () {\n        return this;\n    }\n};\n \nfoo.bar(); \/\/ foo\n\n\/\/ bar对应的Reference是：\nvar BarReference = {\n    base: foo,\n    propertyName: \x27bar\x27,\n    strict: false\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e foo = {\n    \x3cspan class=\x22hljs-attr\x22\x3ebar\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n    }\n};\n \nfoo.bar(); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ foo\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ bar对应的Reference是：\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e BarReference = {\n    \x3cspan class=\x22hljs-attr\x22\x3ebase\x3c\/span\x3e: foo,\n    \x3cspan class=\x22hljs-attr\x22\x3epropertyName\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27bar\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3estrict\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e而且规范中还提供了获取 Reference 组成部分的方法，比如 GetBase 和 IsPropertyReference。\x3c\/p\x3e\n\x3cp\x3e这两个方法很简单，简单看一看：\x3c\/p\x3e\n\x3cp\x3e1.GetBase\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3eGetBase(V). Returns the base value component of the reference V.\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e返回 reference 的 base value。\x3c\/p\x3e\n\x3cp\x3e2.IsPropertyReference\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3eIsPropertyReference(V). Returns true if either the base value is an object or HasPrimitiveBase(V) is true; otherwise returns false.\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e简单的理解：如果 base value 是一个对象，就返回true。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3eGetValue\x3c\/h2\x3e\n\x3cp\x3e除此之外，紧接着在 8.7.1 章规范中就讲了一个用于从 Reference 类型获取对应值的方法： GetValue。\x3c\/p\x3e\n\x3cp\x3e简单模拟 GetValue 的使用：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var foo = 1;\n\nvar fooReference = {\n    base: EnvironmentRecord,\n    name: \x27foo\x27,\n    strict: false\n};\n\nGetValue(fooReference) \/\/ 1;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e foo = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e fooReference = {\n    \x3cspan class=\x22hljs-attr\x22\x3ebase\x3c\/span\x3e: EnvironmentRecord,\n    \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27foo\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3estrict\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n};\n\nGetValue(fooReference) \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 1;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eGetValue 返回对象属性真正的值，但是要注意：\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e调用 GetValue，返回的将是具体的值，而不再是一个 Reference\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e这个很重要，这个很重要，这个很重要。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e如何确定this的值\x3c\/h2\x3e\n\x3cp\x3e关于 Reference 讲了那么多，为什么要讲 Reference 呢？到底 Reference 跟本文的主题 this 有哪些关联呢？如果你能耐心看完之前的内容，以下开始进入高能阶段：\x3c\/p\x3e\n\x3cp\x3e看规范 11.2.3 Function Calls：\x3c\/p\x3e\n\x3cp\x3e这里讲了当函数调用的时候，如何确定 this 的取值。\x3c\/p\x3e\n\x3cp\x3e只看第一步、第六步、第七步：\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3cp\x3e1.Let \x3cem\x3eref\x3c\/em\x3e be the result of evaluating MemberExpression.\x3c\/p\x3e\n\x3cp\x3e6.If Type(\x3cem\x3eref\x3c\/em\x3e) is Reference, then\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22  a.If IsPropertyReference(ref) is true, then\n\n      i.Let thisValue be GetBase(ref).\n\n  b.Else, the base of ref is an Environment Record\n\n      i.Let thisValue be the result of calling the ImplicitThisValue concrete method of GetBase(ref).\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs oxygene\x22\x3e\x3ccode\x3e  a.If IsPropertyReference(ref) \x3cspan class=\x22hljs-keyword\x22\x3eis\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3etrue\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3ethen\x3c\/span\x3e\n\n      i.Let thisValue be GetBase(ref).\n\n  b.Else, the base \x3cspan class=\x22hljs-keyword\x22\x3eof\x3c\/span\x3e ref \x3cspan class=\x22hljs-keyword\x22\x3eis\x3c\/span\x3e an Environment \x3cspan class=\x22hljs-keyword\x22\x3eRecord\x3c\/span\x3e\n\n      i.Let thisValue be the \x3cspan class=\x22hljs-keyword\x22\x3eresult\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eof\x3c\/span\x3e calling the ImplicitThisValue concrete \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3emethod\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eof\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eGetBase\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(ref)\x3c\/span\x3e.\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e7.Else, Type(\x3cem\x3eref\x3c\/em\x3e) is not Reference.\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22  a. Let thisValue be undefined.\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e  \x3cspan class=\x22hljs-selector-tag\x22\x3ea\x3c\/span\x3e. Let thisValue be undefined.\x3c\/code\x3e\x3c\/pre\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e让我们描述一下：\x3c\/p\x3e\n\x3cp\x3e1.计算 MemberExpression 的结果赋值给 ref\x3c\/p\x3e\n\x3cp\x3e2.判断 ref 是不是一个 Reference 类型\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x222.1 如果 ref 是 Reference，并且 IsPropertyReference(ref) 是 true, 那么 this 的值为 GetBase(ref)\n\n2.2 如果 ref 是 Reference，并且 base value 值是 Environment Record, 那么this的值为 ImplicitThisValue(ref)\n\n2.3 如果 ref 不是 Reference，那么 this 的值为 undefined\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs cs\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-number\x22\x3e2.1\x3c\/span\x3e 如果 \x3cspan class=\x22hljs-keyword\x22\x3eref\x3c\/span\x3e 是 Reference，并且 IsPropertyReference(\x3cspan class=\x22hljs-keyword\x22\x3eref\x3c\/span\x3e) 是 \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e, 那么 \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e 的值为 GetBase(\x3cspan class=\x22hljs-keyword\x22\x3eref\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-number\x22\x3e2.2\x3c\/span\x3e 如果 \x3cspan class=\x22hljs-keyword\x22\x3eref\x3c\/span\x3e 是 Reference，并且 \x3cspan class=\x22hljs-keyword\x22\x3ebase\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3evalue\x3c\/span\x3e 值是 Environment Record, 那么\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e的值为 ImplicitThisValue(\x3cspan class=\x22hljs-keyword\x22\x3eref\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-number\x22\x3e2.3\x3c\/span\x3e 如果 \x3cspan class=\x22hljs-keyword\x22\x3eref\x3c\/span\x3e 不是 Reference，那么 \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e 的值为 undefined\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e具体分析\x3c\/h2\x3e\n\x3cp\x3e让我们一步一步看：\x3c\/p\x3e\n\x3col\x3e\x3cli\x3e\x3cp\x3e计算 MemberExpression 的结果赋值给 ref\x3c\/p\x3e\x3c\/li\x3e\x3c\/ol\x3e\n\x3cp\x3e什么是 MemberExpression？看规范 11.2 Left-Hand-Side Expressions：\x3c\/p\x3e\n\x3cp\x3eMemberExpression :\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3ePrimaryExpression \/\/ 原始表达式 可以参见《JavaScript权威指南第四章》\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eFunctionExpression    \/\/ 函数定义表达式\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eMemberExpression [ Expression ] \/\/ 属性访问表达式\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eMemberExpression . IdentifierName \/\/ 属性访问表达式\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3enew MemberExpression Arguments    \/\/ 对象创建表达式\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e举个例子：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function foo() {\n    console.log(this)\n}\n\nfoo(); \/\/ MemberExpression 是 foo\n\nfunction foo() {\n    return function() {\n        console.log(this)\n    }\n}\n\nfoo()(); \/\/ MemberExpression 是 foo()\n\nvar foo = {\n    bar: function () {\n        return this;\n    }\n}\n\nfoo.bar(); \/\/ MemberExpression 是 foo.bar\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3efoo\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e)\n}\n\nfoo(); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ MemberExpression 是 foo\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3efoo\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e)\n    }\n}\n\nfoo()(); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ MemberExpression 是 foo()\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e foo = {\n    \x3cspan class=\x22hljs-attr\x22\x3ebar\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n    }\n}\n\nfoo.bar(); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ MemberExpression 是 foo.bar\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e所以简单理解 MemberExpression 其实就是()左边的部分。\x3c\/p\x3e\n\x3cp\x3e2.判断 ref 是不是一个 Reference 类型。\x3c\/p\x3e\n\x3cp\x3e关键就在于看规范是如何处理各种 MemberExpression，返回的结果是不是一个Reference类型。\x3c\/p\x3e\n\x3cp\x3e举最后一个例子：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var value = 1;\n\nvar foo = {\n  value: 2,\n  bar: function () {\n    return this.value;\n  }\n}\n\n\/\/示例1\nconsole.log(foo.bar());\n\/\/示例2\nconsole.log((foo.bar)());\n\/\/示例3\nconsole.log((foo.bar = foo.bar)());\n\/\/示例4\nconsole.log((false || foo.bar)());\n\/\/示例5\nconsole.log((foo.bar, foo.bar)());\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e value = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e foo = {\n  \x3cspan class=\x22hljs-attr\x22\x3evalue\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3ebar\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.value;\n  }\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/示例1\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(foo.bar());\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/示例2\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log((foo.bar)());\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/示例3\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log((foo.bar = foo.bar)());\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/示例4\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log((\x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e || foo.bar)());\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/示例5\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log((foo.bar, foo.bar)());\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3efoo.bar()\x3c\/h3\x3e\n\x3cp\x3e在示例 1 中，MemberExpression 计算的结果是 foo.bar，那么 foo.bar 是不是一个 Reference 呢？\x3c\/p\x3e\n\x3cp\x3e查看规范 11.2.1 Property Accessors，这里展示了一个计算的过程，什么都不管了，就看最后一步：\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3eReturn a value of type Reference whose base value is baseValue and whose referenced name is propertyNameString, and whose strict mode flag is strict.\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e我们得知该表达式返回了一个 Reference 类型！\x3c\/p\x3e\n\x3cp\x3e根据之前的内容，我们知道该值为：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var Reference = {\n  base: foo,\n  name: \x27bar\x27,\n  strict: false\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e Reference = {\n  \x3cspan class=\x22hljs-attr\x22\x3ebase\x3c\/span\x3e: foo,\n  \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27bar\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3estrict\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e接下来按照 2.1 的判断流程走：\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e2.1 如果 ref 是 Reference，并且 IsPropertyReference(ref) 是 true, 那么 this 的值为 GetBase(ref)\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e该值是 Reference 类型，那么 IsPropertyReference(ref) 的结果是多少呢？\x3c\/p\x3e\n\x3cp\x3e前面我们已经铺垫了 IsPropertyReference 方法，如果 base value 是一个对象，结果返回 true。\x3c\/p\x3e\n\x3cp\x3ebase value 为 foo，是一个对象，所以 IsPropertyReference(ref) 结果为 true。\x3c\/p\x3e\n\x3cp\x3e这个时候我们就可以确定 this 的值了：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22this = GetBase(ref)，\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e = GetBase(ref)，\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eGetBase 也已经铺垫了，获得 base value 值，这个例子中就是foo，所以 this 的值就是 foo ，示例1的结果就是 2！\x3c\/p\x3e\n\x3cp\x3e唉呀妈呀，为了证明 this 指向foo，真是累死我了！但是知道了原理，剩下的就更快了。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e(foo.bar)()\x3c\/h3\x3e\n\x3cp\x3e看示例2：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22console.log((foo.bar)());\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log((foo.bar)());\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3efoo.bar 被 () 包住，查看规范 11.1.6 The Grouping Operator \x3c\/p\x3e\n\x3cp\x3e直接看结果部分：\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3cp\x3eReturn the result of evaluating Expression. This may be of type Reference.\x3c\/p\x3e\n\x3cp\x3eNOTE This algorithm does not apply GetValue to the result of evaluating Expression.\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e实际上 () 并没有对 MemberExpression 进行计算，所以其实跟示例 1 的结果是一样的。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader8\x22\x3e(foo.bar = foo.bar)()\x3c\/h3\x3e\n\x3cp\x3e看示例3，有赋值操作符，查看规范 11.13.1 Simple Assignment ( = ): \x3c\/p\x3e\n\x3cp\x3e计算的第三步：\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e3.Let rval be GetValue(rref).\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e因为使用了 GetValue，所以返回的值不是 Reference 类型，\x3c\/p\x3e\n\x3cp\x3e按照之前讲的判断逻辑：\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e2.3 如果 ref 不是Reference，那么 this 的值为 undefined\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3ethis 为 undefined，非严格模式下，this 的值为 undefined 的时候，其值会被隐式转换为全局对象。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader9\x22\x3e(false || foo.bar)()\x3c\/h3\x3e\n\x3cp\x3e看示例4，逻辑与算法，查看规范 11.11 Binary Logical Operators：\x3c\/p\x3e\n\x3cp\x3e计算第二步：\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e2.Let lval be GetValue(lref).\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e因为使用了 GetValue，所以返回的不是 Reference 类型，this 为 undefined\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader10\x22\x3e(foo.bar, foo.bar)()\x3c\/h3\x3e\n\x3cp\x3e看示例5，逗号操作符，查看规范11.14 Comma Operator ( , )\x3c\/p\x3e\n\x3cp\x3e计算第二步：\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e2.Call GetValue(lref).\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e因为使用了 GetValue，所以返回的不是 Reference 类型，this 为 undefined\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader11\x22\x3e揭晓结果\x3c\/h3\x3e\n\x3cp\x3e所以最后一个例子的结果是：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\nvar value = 1;\n\nvar foo = {\n  value: 2,\n  bar: function () {\n    return this.value;\n  }\n}\n\n\/\/示例1\nconsole.log(foo.bar()); \/\/ 2\n\/\/示例2\nconsole.log((foo.bar)()); \/\/ 2\n\/\/示例3\nconsole.log((foo.bar = foo.bar)()); \/\/ 1\n\/\/示例4\nconsole.log((false || foo.bar)()); \/\/ 1\n\/\/示例5\nconsole.log((foo.bar, foo.bar)()); \/\/ 1\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e value = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e foo = {\n  \x3cspan class=\x22hljs-attr\x22\x3evalue\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3ebar\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.value;\n  }\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/示例1\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(foo.bar()); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 2\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/示例2\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log((foo.bar)()); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 2\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/示例3\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log((foo.bar = foo.bar)()); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 1\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/示例4\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log((\x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e || foo.bar)()); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 1\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/示例5\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log((foo.bar, foo.bar)()); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 1\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e注意：以上是在非严格模式下的结果，严格模式下因为 this 返回 undefined，所以示例 3 会报错。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader12\x22\x3e补充\x3c\/h3\x3e\n\x3cp\x3e最最后，忘记了一个最最普通的情况：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function foo() {\n    console.log(this)\n}\n\nfoo(); \x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3efoo\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e)\n}\n\nfoo(); \x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eMemberExpression 是 foo，解析标识符，查看规范 10.3.1 Identifier Resolution，会返回一个 Reference 类型的值：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var fooReference = {\n    base: EnvironmentRecord,\n    name: \x27foo\x27,\n    strict: false\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e fooReference = {\n    \x3cspan class=\x22hljs-attr\x22\x3ebase\x3c\/span\x3e: EnvironmentRecord,\n    \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27foo\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3estrict\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e接下来进行判断：\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e2.1 如果 ref 是 Reference，并且 IsPropertyReference(ref) 是 true, 那么 this 的值为 GetBase(ref)\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e因为 base value 是 EnvironmentRecord，并不是一个 Object 类型，还记得前面讲过的 base value 的取值可能吗？ 只可能是 undefined, an Object, a Boolean, a String, a Number, 和 an environment record 中的一种。\x3c\/p\x3e\n\x3cp\x3eIsPropertyReference(ref) 的结果为 false，进入下个判断：\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e2.2 如果 ref 是 Reference，并且 base value 值是 Environment Record, 那么this的值为 ImplicitThisValue(ref)\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3ebase value 正是 Environment Record，所以会调用 ImplicitThisValue(ref)\x3c\/p\x3e\n\x3cp\x3e查看规范 10.2.1.1.6，ImplicitThisValue 方法的介绍：该函数始终返回 undefined。\x3c\/p\x3e\n\x3cp\x3e所以最后 this 的值就是 undefined。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader13\x22\x3e多说一句\x3c\/h2\x3e\n\x3cp\x3e尽管我们可以简单的理解 this 为调用函数的对象，如果是这样的话，如何解释下面这个例子呢？\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var value = 1;\n\nvar foo = {\n  value: 2,\n  bar: function () {\n    return this.value;\n  }\n}\nconsole.log((false || foo.bar)()); \/\/ 1\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e value = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e foo = {\n  \x3cspan class=\x22hljs-attr\x22\x3evalue\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3ebar\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.value;\n  }\n}\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log((\x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e || foo.bar)()); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 1\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e此外，又如何确定调用函数的对象是谁呢？在写文章之初，我就面临着这些问题，最后还是放弃从多个情形下给大家讲解 this 指向的思路，而是追根溯源的从 ECMASciript 规范讲解 this 的指向，尽管从这个角度写起来和读起来都比较吃力，但是一旦多读几遍，明白原理，绝对会给你一个全新的视角看待 this 。而你也就能明白，尽管 foo() 和 (foo.bar = foo.bar)() 最后结果都指向了 undefined，但是两者从规范的角度上却有着本质的区别。\x3c\/p\x3e\n\x3cp\x3e此篇讲解执行上下文的 this，即便不是很理解此篇的内容，依然不影响大家了解执行上下文这个主题下其他的内容。所以，依然可以安心的看下一篇文章。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader14\x22\x3e下一篇文章\x3c\/h2\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/mqyqingfeng\/Blog\/issues\/8\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e《JavaScript深入之执行上下文》\x3c\/a\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader15\x22\x3e深入系列\x3c\/h2\x3e\n\x3cp\x3eJavaScript深入系列目录地址：\x3ca href=\x22https:\/\/github.com\/mqyqingfeng\/Blog\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/mqyqingfeng\/Blog\x3c\/a\x3e。\x3c\/p\x3e\n\x3cp\x3eJavaScript深入系列预计写十五篇左右，旨在帮大家捋顺JavaScript底层知识，重点讲解如原型、作用域、执行上下文、变量对象、this、闭包、按值传递、call、apply、bind、new、继承等难点概念。\x3c\/p\x3e\n\x3cp\x3e如果有错误或者不严谨的地方，请务必给予指正，十分感谢。如果喜欢或者有所启发，欢迎star，对作者也是一种鼓励。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>JavaScript深入之从ECMAScript规范解读this</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000009048715">https://segmentfault.com/a/1190000009048715</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/ptqkugdqox9/" target="_blank">https://alili.tech/archive/ptqkugdqox9/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>