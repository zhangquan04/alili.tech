<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="深入理解JavaScript执行上下文、函数堆栈、提升的概念"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>深入理解JavaScript执行上下文、函数堆栈、提升的概念 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/brbah5n9jpp/",
				"appid": "1613049289050283", 
				"title": "深入理解JavaScript执行上下文、函数堆栈、提升的概念 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-17T02:30:25"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/iuqi9p06vbg/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/1ofo5slgkfy/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fbrbah5n9jpp%2f&text=%e6%b7%b1%e5%85%a5%e7%90%86%e8%a7%a3JavaScript%e6%89%a7%e8%a1%8c%e4%b8%8a%e4%b8%8b%e6%96%87%e3%80%81%e5%87%bd%e6%95%b0%e5%a0%86%e6%a0%88%e3%80%81%e6%8f%90%e5%8d%87%e7%9a%84%e6%a6%82%e5%bf%b5"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fbrbah5n9jpp%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fbrbah5n9jpp%2f&text=%e6%b7%b1%e5%85%a5%e7%90%86%e8%a7%a3JavaScript%e6%89%a7%e8%a1%8c%e4%b8%8a%e4%b8%8b%e6%96%87%e3%80%81%e5%87%bd%e6%95%b0%e5%a0%86%e6%a0%88%e3%80%81%e6%8f%90%e5%8d%87%e7%9a%84%e6%a6%82%e5%bf%b5"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fbrbah5n9jpp%2f&title=%e6%b7%b1%e5%85%a5%e7%90%86%e8%a7%a3JavaScript%e6%89%a7%e8%a1%8c%e4%b8%8a%e4%b8%8b%e6%96%87%e3%80%81%e5%87%bd%e6%95%b0%e5%a0%86%e6%a0%88%e3%80%81%e6%8f%90%e5%8d%87%e7%9a%84%e6%a6%82%e5%bf%b5"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fbrbah5n9jpp%2f&is_video=false&description=%e6%b7%b1%e5%85%a5%e7%90%86%e8%a7%a3JavaScript%e6%89%a7%e8%a1%8c%e4%b8%8a%e4%b8%8b%e6%96%87%e3%80%81%e5%87%bd%e6%95%b0%e5%a0%86%e6%a0%88%e3%80%81%e6%8f%90%e5%8d%87%e7%9a%84%e6%a6%82%e5%bf%b5"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e6%b7%b1%e5%85%a5%e7%90%86%e8%a7%a3JavaScript%e6%89%a7%e8%a1%8c%e4%b8%8a%e4%b8%8b%e6%96%87%e3%80%81%e5%87%bd%e6%95%b0%e5%a0%86%e6%a0%88%e3%80%81%e6%8f%90%e5%8d%87%e7%9a%84%e6%a6%82%e5%bf%b5&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fbrbah5n9jpp%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fbrbah5n9jpp%2f&title=%e6%b7%b1%e5%85%a5%e7%90%86%e8%a7%a3JavaScript%e6%89%a7%e8%a1%8c%e4%b8%8a%e4%b8%8b%e6%96%87%e3%80%81%e5%87%bd%e6%95%b0%e5%a0%86%e6%a0%88%e3%80%81%e6%8f%90%e5%8d%87%e7%9a%84%e6%a6%82%e5%bf%b5"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fbrbah5n9jpp%2f&title=%e6%b7%b1%e5%85%a5%e7%90%86%e8%a7%a3JavaScript%e6%89%a7%e8%a1%8c%e4%b8%8a%e4%b8%8b%e6%96%87%e3%80%81%e5%87%bd%e6%95%b0%e5%a0%86%e6%a0%88%e3%80%81%e6%8f%90%e5%8d%87%e7%9a%84%e6%a6%82%e5%bf%b5"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fbrbah5n9jpp%2f&title=%e6%b7%b1%e5%85%a5%e7%90%86%e8%a7%a3JavaScript%e6%89%a7%e8%a1%8c%e4%b8%8a%e4%b8%8b%e6%96%87%e3%80%81%e5%87%bd%e6%95%b0%e5%a0%86%e6%a0%88%e3%80%81%e6%8f%90%e5%8d%87%e7%9a%84%e6%a6%82%e5%bf%b5"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fbrbah5n9jpp%2f&title=%e6%b7%b1%e5%85%a5%e7%90%86%e8%a7%a3JavaScript%e6%89%a7%e8%a1%8c%e4%b8%8a%e4%b8%8b%e6%96%87%e3%80%81%e5%87%bd%e6%95%b0%e5%a0%86%e6%a0%88%e3%80%81%e6%8f%90%e5%8d%87%e7%9a%84%e6%a6%82%e5%bf%b5"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">深入理解JavaScript执行上下文、函数堆栈、提升的概念</h1><div class="meta"><div class="postdate"><time datetime="2019-01-17" itemprop="datePublished">2019-01-17</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e首先明确几个概念：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3eEC\x3c\/code\x3e：函数执行环境（或执行上下文），Execution Context\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3eECS\x3c\/code\x3e：执行环境栈，Execution Context Stack\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3eVO\x3c\/code\x3e：变量对象，Variable Object\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3eAO\x3c\/code\x3e：活动对象，Active Object\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3escope chain\x3c\/code\x3e：作用域链\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e想当初自己看到这几个概念的时候是一(m)脸(d)懵(z)逼(z)，但是不得不说这几个概念对以后深入学习JS有很大的帮助。来不及解释了，赶紧上车~\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader0\x22\x3eEC（执行上下文）\x3c\/h3\x3e\n\x3cblockquote\x3e\x3cp\x3e每次当控制器转到ECMAScript可执行代码的时候，就会进入到一个执行上下文。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e那什么是可执行代码呢？\x3c\/p\x3e\n\x3ch4\x3e可执行代码的类型\x3c\/h4\x3e\n\x3ch5\x3e全局代码（\x3ccode\x3eGlobal code\x3c\/code\x3e）\x3c\/h5\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e这种类型的代码是在\x22程序\x22级处理的：例如加载外部的js文件或者本地\x3ccode\x3e\x26lt;script\x26gt;\x26lt;\/script\x26gt;\x3c\/code\x3e标签内的代码。\x3cstrong\x3e全局代码不包括任何function体内的代码\x3c\/strong\x3e。 这个是默认的代码运行环境，一旦代码被载入，引擎最先进入的就是这个环境。\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3ch5\x3e函数代码（\x3ccode\x3eFunction code\x3c\/code\x3e）\x3c\/h5\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e任何一个函数体内的代码，但是需要注意的是，\x3cstrong\x3e具体的函数体内的代码是不包括内部函数的代码\x3c\/strong\x3e。\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3ch5\x3eEval代码（\x3ccode\x3eEval code\x3c\/code\x3e）\x3c\/h5\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3eeval内部的代码\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e这里仅仅引入EC这个概念，后面还有关于EC建立细节的介绍。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3eECS（执行环境栈）\x3c\/h3\x3e\n\x3cp\x3e我们用MDN上的一个例子来引入函数执行栈的概念\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function foo(i) {\n  if (i \x3c 0) return;\n  console.log(\x27begin:\x27 \x2b i);\n  foo(i - 1);\n  console.log(\x27end:\x27 \x2b i);\n}\nfoo(2);\n\n\/\/ 输出:\n\n\/\/ begin:2\n\/\/ begin:1\n\/\/ begin:0\n\/\/ end:0\n\/\/ end:1\n\/\/ end:2\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3efoo\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ei\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (i \x26lt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27begin:\x27\x3c\/span\x3e \x2b i);\n  foo(i - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e);\n  \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27end:\x27\x3c\/span\x3e \x2b i);\n}\nfoo(\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 输出:\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ begin:2\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ begin:1\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ begin:0\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ end:0\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ end:1\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ end:2\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这里先不关心执行结果。磨刀不误砍柴功，先了解一下函数执行上下文堆栈的概念。相信弄明白了下面的概念，一切也就水落石出了\x3c\/p\x3e\n\x3cp\x3e我们都知道，浏览器中的JS解释器被实现为单线程，这也就意味着同一时间只能发生一件事情，其他的行为或事件将会被放在叫做执行栈里面排队。下面的图是单线程栈的抽象视图：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000009041011\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000009041011\x22 alt=\x22执行堆栈\x22 title=\x22执行堆栈\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3cp\x3e当浏览器首次载入你的脚本，它将\x3cstrong\x3e默认进入全局执行上下文\x3c\/strong\x3e。如果，你在你的全局代码中调用一个函数，你程序的时序将进入被调用的函数，并创建一个新的执行上下文，并将新创建的上下文压入执行栈的顶部。\x3c\/p\x3e\n\x3cp\x3e如果你调用当前函数内部的其他函数，相同的事情会在此上演。\x3cstrong\x3e代码的执行流程进入内部函数，创建一个新的执行上下文并把它压入执行栈的顶部。浏览器总会执行位于栈顶的执行上下文，一旦当前上下文函数执行结束，它将被从栈顶弹出，并将上下文控制权交给当前的栈\x3c\/strong\x3e。这样，堆栈中的上下文就会被依次执行并且弹出堆栈，直到回到全局的上下文。\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e看到这里，想必大家都已经深谙上述例子输出结果的原因了，这里我大概绘了一个流程图来帮助理解。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVL57j?w=2118\x26amp;h=1336\x22 src=\x22https:\/\/static.alili.tech\/img\/bVL57j?w=2118\x26amp;h=1336\x22 alt=\x22![Alt text](.\/屏幕快照 2017-04-11 下午7.29.55.png)\x22 title=\x22![Alt text](.\/屏幕快照 2017-04-11 下午7.29.55.png)\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3eVO（变量对象）\/AO（活动对象）\x3c\/h3\x3e\n\x3cp\x3e这里为什么要用一个\x3ccode\x3e\/\x3c\/code\x3e呢？按照字面理解，AO其实就是被激活的VO，两个其实是一个东西。下面引用知乎上的一段话，帮助理解一下。\x3ca href=\x22https:\/\/www.zhihu.com\/question\/36393048\/answer\/71869653\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e原文链接\x3c\/a\x3e\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3cp\x3e\x3cstrong\x3e变量对象\x3c\/strong\x3e\x3ccode\x3e（Variable object）\x3c\/code\x3e是说JS的执行上下文中都有个对象用来存放执行上下文中可被访问但是不能被\x3ccode\x3edelete\x3c\/code\x3e的\x3cem\x3e函数标示符\x3c\/em\x3e、\x3cem\x3e形参\x3c\/em\x3e、\x3cem\x3e变量声明\x3c\/em\x3e等。它们会被挂在这个对象上，对象的属性对应它们的名字对象属性的值对应它们的值但这个对象是规范上或者说是引擎实现上的不可在JS环境中访问到活动对象\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e激活对象\x3c\/strong\x3e\x3ccode\x3e（Activation object）\x3c\/code\x3e有了变量对象存每个上下文中的东西，但是它什么时候能被访问到呢？就是每进入一个执行上下文时，这个执行上下文儿中的变量对象就被激活，也就是该上下文中的函数标示符、形参、变量声明等就可以被访问到了\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3ch4\x3e\n\x3ccode\x3eEC\x3c\/code\x3e建立的细节\x3c\/h4\x3e\n\x3ch5\x3e1、创建阶段【当函数被调用，但未执行任何其内部代码之前】\x3c\/h5\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e创建作用域链（Scope Chain）\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e创建变量，函数和参数。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e求”this“的值\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch5\x3e2、执行阶段\x3c\/h5\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e初始化变量的值和函数的引用，解释\/执行代码。\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e\x3cstrong\x3e我们可以将每个执行上下文抽象为一个对象，这个对象具有三个属性\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ECObj: {\n    scopeChain: { \/* 变量对象（variableObject）\x2b 所有父级执行上下文的变量对象*\/ }, \n    variableObject: { \/*函数 arguments\/参数，内部变量和函数声明 *\/ }, \n    this: {} \n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs css\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-selector-tag\x22\x3eECObj\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attribute\x22\x3escopeChain\x3c\/span\x3e: { \x3cspan class=\x22hljs-comment\x22\x3e\/* 变量对象（variableObject）\x2b 所有父级执行上下文的变量对象*\/\x3c\/span\x3e }, \n    \x3cspan class=\x22hljs-selector-tag\x22\x3evariableObject\x3c\/span\x3e: { \x3cspan class=\x22hljs-comment\x22\x3e\/*函数 arguments\/参数，内部变量和函数声明 *\/\x3c\/span\x3e }, \n    \x3cspan class=\x22hljs-selector-tag\x22\x3ethis\x3c\/span\x3e: {} \n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e解释器执行代码的伪逻辑\x3c\/h4\x3e\n\x3cp\x3e1、查找调用函数的代码。\x3c\/p\x3e\n\x3cp\x3e2、执行代码之前，先进入创建上下文阶段：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e初始化作用域链\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3e创建变量对象：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e\x3cstrong\x3e创建arguments对象\x3c\/strong\x3e，检查上下文，初始化参数名称和值并创建引用的复制。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3e\x3cstrong\x3e扫描上下文的函数声明（而非函数表达式）\x3c\/strong\x3e：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e为发现的每一个函数，在变量对象上创建一个属性——确切的说是函数的名字——其有一个指向函数在内存中的引用。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e如果函数的名字已经存在，引用指针将被重写。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3e\x3cstrong\x3e扫描上下文的变量声明\x3c\/strong\x3e：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e为发现的每个变量声明，在变量对象上创建一个属性——就是变量的名字，并且将变量的值初始化为undefined\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e如果变量的名字已经在变量对象里存在，将不会进行任何操作并继续扫描。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3cstrong\x3e求出上下文内部“this”的值\x3c\/strong\x3e。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e3、激活\/代码执行阶段：\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e在当前上下文上运行\/解释函数代码，并随着代码一行行执行指派变量的值。\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3ch5\x3e\x3cstrong\x3eVO --- 对应上述第二个阶段\x3c\/strong\x3e\x3c\/h5\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\n        function foo(i){\n            var a = \x27hello\x27\n            var b = function(){}\n            function c(){}\n        }\n        foo(22)\n        \x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e\n        \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3efoo\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(i)\x3c\/span\x3e\x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e a = \x3cspan class=\x22hljs-string\x22\x3e\x27hello\x27\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e b = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{}\n            \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ec\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{}\n        }\n        foo(\x3cspan class=\x22hljs-number\x22\x3e22\x3c\/span\x3e)\n        \x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e当我们调用\x3ccode\x3efoo(22)\x3c\/code\x3e时，整个创建阶段是下面这样的\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    ECObj = {\n        scopChain： {...},\n         variableObject: {\n            arguments: {\n                0: 22,\n                length: 1\n            },\n            i: 22,\n            c: pointer to function c()\n            a: undefined,\n            b: undefined\n        },\n        this: { ... }\n    }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs nimrod\x22\x3e\x3ccode\x3e    \x3cspan class=\x22hljs-type\x22\x3eECObj\x3c\/span\x3e = {\n        scopChain： \x3cspan class=\x22hljs-meta\x22\x3e{...}\x3c\/span\x3e,\n         variableObject: {\n            arguments: {\n                \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e22\x3c\/span\x3e,\n                length: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\n            },\n            i: \x3cspan class=\x22hljs-number\x22\x3e22\x3c\/span\x3e,\n            c: \x3cspan class=\x22hljs-built_in\x22\x3epointer\x3c\/span\x3e to function c()\n            a: undefined,\n            b: undefined\n        },\n        this: { ... }\n    }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e正如我们看到的，在上下文创建阶段，VO的初始化过程如下（\x3cstrong\x3e该过程是有先后顺序的：函数的形参==\x26gt;\x26gt;函数声明==\x26gt;\x26gt;变量声明\x3c\/strong\x3e）：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e\x3cstrong\x3e函数的形参\x3c\/strong\x3e（当进入函数执行上下文时） —— 变量对象的一个属性，其属性名就是形参的名字，其值就是实参的值；对于没有传递的参数，其值为undefined\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3cstrong\x3e函数声明\x3c\/strong\x3e（FunctionDeclaration, FD） —— 变量对象的一个属性，其属性名和值都是函数对象创建出来的；\x3cem\x3e如果变量对象已经包含了相同名字的属性，则替换它的值\x3c\/em\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3cstrong\x3e变量声明\x3c\/strong\x3e（var，VariableDeclaration） —— 变量对象的一个属性，其属性名即为变量名，其值为undefined;\x3cem\x3e如果变量名和已经声明的函数名或者函数的参数名相同，则不会影响已经存在的属性。\x3c\/em\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e对于函数的形参没有什么可说的，主要看一下函数的声明以及变量的声明两个部分。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e1、如何理解函数声明过程中\x3ccode\x3e如果变量对象已经包含了相同名字的属性，则替换它的值\x3c\/code\x3e这句话？\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e看如下这段代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    \nfunction foo1(a){\n    console.log(a)\n    function a(){} \n}\nfoo1(20)\/\/\x27function a(){}\x27\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e    \n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3efoo1\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ea\x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(a)\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ea\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{} \n}\nfoo1(\x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e)\x3cspan class=\x22hljs-comment\x22\x3e\/\/\x27function a(){}\x27\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e根据上面的介绍，我们知道VO创建过程中，函数形参的优先级是高于函数的声明的，结果是函数体内部声明的\x3ccode\x3efunction a(){}\x3c\/code\x3e覆盖了函数形参\x3ccode\x3ea\x3c\/code\x3e的声明，因此最后输出\x3ccode\x3ea\x3c\/code\x3e是一个\x3ccode\x3efunction\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e2、如何理解变量声明过程中\x3ccode\x3e如果变量名和已经声明的函数名或者函数的参数名相同，则不会影响已经存在的属性\x3c\/code\x3e这句话？\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/情景一：与参数名相同\nfunction foo2(a){\n    console.log(a)\n    var a = 10\n}\nfoo2(20) \/\/\x2720\x27\n\n\/\/情景二：与函数名相同\n\nfunction foo2(){\n    console.log(a)\n    var a = 10\n    function a(){}\n}\nfoo2() \/\/\x27function a(){}\x27\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/情景一：与参数名相同\x3c\/span\x3e\nfunction foo2(a){\n    console.log(a)\n    \x3cspan class=\x22hljs-selector-tag\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3ea\x3c\/span\x3e = \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e\n}\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-title\x22\x3efoo2\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(\x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e)\x3c\/span\x3e\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/\x2720\x27\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/情景二：与函数名相同\x3c\/span\x3e\n\nfunction foo2(){\n    console.log(a)\n    \x3cspan class=\x22hljs-selector-tag\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3ea\x3c\/span\x3e = \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e\n    function a(){}\n}\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-title\x22\x3efoo2\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/\x27function a(){}\x27\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e下面是几个比较有趣的例子，当做加餐小菜，大家细细品味。这里给出一句话当做参考：\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3cp\x3e\x3cstrong\x3e函数的声明比变量优先级要高，并且定义过程不会被变量覆盖，除非是赋值\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function foo3(a){\n    var a = 10\n    function a(){}\n    console.log(a)\n}\nfoo3(20) \/\/\x2710\x27\n\nfunction foo3(a){\n    var a \n    function a(){}\n    console.log(a)\n}\nfoo3(20) \/\/\x27function a(){}\x27\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3efoo3\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ea\x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e a = \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ea\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{}\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(a)\n}\nfoo3(\x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e) \x3cspan class=\x22hljs-comment\x22\x3e\/\/\x2710\x27\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3efoo3\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ea\x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e a \n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ea\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{}\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(a)\n}\nfoo3(\x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e) \x3cspan class=\x22hljs-comment\x22\x3e\/\/\x27function a(){}\x27\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3c\/blockquote\x3e\n\x3ch5\x3e\x3cstrong\x3eAO --- 对应第三个阶段\x3c\/strong\x3e\x3c\/h5\x3e\n\x3cp\x3e正如我们看到的，创建的过程仅负责处理定义属性的名字，而并不为他们指派具体的值，当然还有对形参\/实参的处理。一旦创建阶段完成，执行流进入函数并且激活\/代码执行阶段，看下函数执行完成后的样子：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ECObj = {\n    scopeChain: { ... },\n    variableObject: {\n        arguments: {\n            0: 22,\n            length: 1\n        },\n        i: 22,\n        c: pointer to function c()\n        a: \x27hello\x27,\n        b: pointer to function privateB()\n    },\n    this: { ... }\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs vim\x22\x3e\x3ccode\x3eECObj = {\n    scopeChain: { ... },\n    variableObjec\x3cspan class=\x22hljs-variable\x22\x3et:\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3eargument\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3es:\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e22\x3c\/span\x3e,\n            length: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\n        },\n        i: \x3cspan class=\x22hljs-number\x22\x3e22\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-keyword\x22\x3ec\x3c\/span\x3e: pointer \x3cspan class=\x22hljs-keyword\x22\x3eto\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ec\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e\n        \x3cspan class=\x22hljs-variable\x22\x3ea:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27hello\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-variable\x22\x3eb:\x3c\/span\x3e pointer \x3cspan class=\x22hljs-keyword\x22\x3eto\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eprivateB\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e\n    },\n    thi\x3cspan class=\x22hljs-variable\x22\x3es:\x3c\/span\x3e { ... }\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e提升（Hoisting）\x3c\/h3\x3e\n\x3cp\x3e对于下面的代码，相信很多人都能一眼看出输出结果，但是却很少有人能给出为什么会产生这种输出结果的解释。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22(function() {\n    console.log(typeof foo); \/\/ 函数指针\n    console.log(typeof bar); \/\/ undefined\n\n    var foo = \x27hello\x27,\n        bar = function() {\n            return \x27world\x27;\n        };\n        \n    function foo() {\n        return \x27hello\x27;\n    }\n}());\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e foo); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 函数指针\x3c\/span\x3e\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e bar); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ undefined\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e foo = \x3cspan class=\x22hljs-string\x22\x3e\x27hello\x27\x3c\/span\x3e,\n        bar = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27world\x27\x3c\/span\x3e;\n        };\n        \n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3efoo\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27hello\x27\x3c\/span\x3e;\n    }\n}());\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e1、为什么我们能在foo声明之前访问它？\x3c\/strong\x3e\x3cbr\x3e回想在\x3ccode\x3eVO\x3c\/code\x3e的创建阶段，我们知道函数在该阶段就已经被创建在变量对象中。所以在函数开始执行之前，foo已经被定义了。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e2、Foo被声明了两次，为什么foo显示为函数而不是undefined或字符串？\x3c\/strong\x3e\x3cbr\x3e我们知道，在创建阶段，函数声明是优先于变量被创建的。而且在变量的创建过程中，如果发现\x3ccode\x3eVO\x3c\/code\x3e中已经存在相同名称的属性，则不会影响已经存在的属性。\x3cbr\x3e因此，对\x3ccode\x3efoo()\x3c\/code\x3e函数的引用首先被创建在活动对象里，并且当我们解释到var foo时，我们看见\x3ccode\x3efoo\x3c\/code\x3e属性名已经存在，所以代码什么都不做并继续执行。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e3、为什么bar的值是undefined？\x3c\/strong\x3e\x3cbr\x3e\x3ccode\x3ebar\x3c\/code\x3e采用的是函数表达式的方式来定义的，所以\x3ccode\x3ebar\x3c\/code\x3e实际上是一个变量，但变量的值是函数，并且我们知道变量在创建阶段被创建但他们被初始化为\x3ccode\x3eundefined\x3c\/code\x3e，这也是为什么函数表达式不会被提升的原因。\x3c\/p\x3e\n\x3ch4\x3e总结：\x3c\/h4\x3e\n\x3cp\x3e1、\x3ccode\x3eEC\x3c\/code\x3e分为两个阶段，创建执行上下文和执行代码。\x3cbr\x3e2、每个\x3ccode\x3eEC\x3c\/code\x3e可以抽象为一个对象，这个对象具有三个属性，分别为：作用域链\x3ccode\x3eScope\x3c\/code\x3e，\x3ccode\x3eVO|AO\x3c\/code\x3e（\x3ccode\x3eAO\x3c\/code\x3e，\x3ccode\x3eVO\x3c\/code\x3e只能有一个）以及\x3ccode\x3ethis\x3c\/code\x3e。\x3cbr\x3e3、函数\x3ccode\x3eEC\x3c\/code\x3e中的\x3ccode\x3eAO\x3c\/code\x3e在进入函数\x3ccode\x3eEC\x3c\/code\x3e时，确定了Arguments对象的属性；在执行函数\x3ccode\x3eEC\x3c\/code\x3e时，其它变量属性具体化。\x3cbr\x3e4、\x3ccode\x3eEC\x3c\/code\x3e创建的过程是由先后顺序的：参数声明 \x3ccode\x3e\x26gt;\x3c\/code\x3e 函数声明 \x3ccode\x3e\x26gt;\x3c\/code\x3e 变量声明\x3c\/p\x3e\n\x3ch4\x3e参考\x3c\/h4\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000000533094\x22\x3ejavascript 执行环境，变量对象，作用域链\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22http:\/\/davidshariff.com\/blog\/what-is-the-execution-context-in-javascript\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eWhat is the Execution Context \x26amp; Stack in JavaScript?\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22https:\/\/developer.mozilla.org\/zh-CN\/docs\/Web\/JavaScript\/Guide\/Functions#%E9%97%AD%E5%8C%85%28Closures%29\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e函数MDN\x3c\/a\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>深入理解JavaScript执行上下文、函数堆栈、提升的概念</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000009041008">https://segmentfault.com/a/1190000009041008</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/brbah5n9jpp/" target="_blank">https://alili.tech/archive/brbah5n9jpp/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>