<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="IndexedDB使用与出坑指南"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>IndexedDB使用与出坑指南 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/nnpmjlot58j/",
				"appid": "1613049289050283", 
				"title": "IndexedDB使用与出坑指南 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-03T02:30:40"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/alvlbas9oai/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/qsw902j95k/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fnnpmjlot58j%2f&text=IndexedDB%e4%bd%bf%e7%94%a8%e4%b8%8e%e5%87%ba%e5%9d%91%e6%8c%87%e5%8d%97"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fnnpmjlot58j%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fnnpmjlot58j%2f&text=IndexedDB%e4%bd%bf%e7%94%a8%e4%b8%8e%e5%87%ba%e5%9d%91%e6%8c%87%e5%8d%97"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fnnpmjlot58j%2f&title=IndexedDB%e4%bd%bf%e7%94%a8%e4%b8%8e%e5%87%ba%e5%9d%91%e6%8c%87%e5%8d%97"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fnnpmjlot58j%2f&is_video=false&description=IndexedDB%e4%bd%bf%e7%94%a8%e4%b8%8e%e5%87%ba%e5%9d%91%e6%8c%87%e5%8d%97"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=IndexedDB%e4%bd%bf%e7%94%a8%e4%b8%8e%e5%87%ba%e5%9d%91%e6%8c%87%e5%8d%97&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fnnpmjlot58j%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fnnpmjlot58j%2f&title=IndexedDB%e4%bd%bf%e7%94%a8%e4%b8%8e%e5%87%ba%e5%9d%91%e6%8c%87%e5%8d%97"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fnnpmjlot58j%2f&title=IndexedDB%e4%bd%bf%e7%94%a8%e4%b8%8e%e5%87%ba%e5%9d%91%e6%8c%87%e5%8d%97"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fnnpmjlot58j%2f&title=IndexedDB%e4%bd%bf%e7%94%a8%e4%b8%8e%e5%87%ba%e5%9d%91%e6%8c%87%e5%8d%97"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fnnpmjlot58j%2f&title=IndexedDB%e4%bd%bf%e7%94%a8%e4%b8%8e%e5%87%ba%e5%9d%91%e6%8c%87%e5%8d%97"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">IndexedDB使用与出坑指南</h1><div class="meta"><div class="postdate"><time datetime="2019-02-03" itemprop="datePublished">2019-02-03</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch1 id=\x22articleHeader0\x22\x3e概述\x3c\/h1\x3e\n\x3cp\x3e本文通过对\x3ccode\x3eIndexedDB\x3c\/code\x3e的使用方法和使用场景进行相关介绍，对常见的问题进行解答。\x3c\/p\x3e\n\x3cp\x3e同时，因为MDN中的相关文档缺乏相关逻辑性，所以不容易理解。本文将通过项目中常见的数据存储和操作需求来进行内容组织。\x3c\/p\x3e\n\x3cp\x3e读者能够通过本文学会在项目中正确的使用\x3ccode\x3eIndexedDB\x3c\/code\x3e，给应用带来的本地存储能力，并且避免一些常见的问题。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader1\x22\x3e原因：开发者需要在本地进行永久存储\x3c\/h1\x3e\n\x3cp\x3e当我们进行一些较大的SPA页面开发时，我们会需要进行一些数据的本地存储。\x3c\/p\x3e\n\x3cp\x3e当数据量不大时，我们可以通过SessionStorage或者LocalStorage来进行存储，但是当数据量较大，或符合一定的规范时，我们可以使用数据库来进行数据的存储。\x3c\/p\x3e\n\x3cp\x3e在浏览器提供的数据库中，共有\x3ccode\x3eweb sql\x3c\/code\x3e和\x3ccode\x3eIndexedDB\x3c\/code\x3e两种。相较于HTML5已经废弃的\x3ccode\x3eweb sql\x3c\/code\x3e来说，更推荐大家使用\x3ccode\x3eIndexedDB\x3c\/code\x3e。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader2\x22\x3e结构\x3c\/h1\x3e\n\x3cp\x3e下面，我们通过一张图来了解下，IndexedDB整体的结构。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22https:\/\/segmentfault.com\/img\/bV4R5H\x22 src=\x22https:\/\/static.alili.techhttps:\/\/segmentfault.com\/img\/bV4R5H\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e类比\x3ccode\x3esql\x3c\/code\x3e型数据库，\x3ccode\x3eIndexedDB\x3c\/code\x3e中的DB（数据库）就是\x3ccode\x3esql\x3c\/code\x3e中的DB，而\x3ccode\x3eObject Store(存储空间)\x3c\/code\x3e则是\x3ccode\x3e数据表\x3c\/code\x3e,\x3ccode\x3eItem\x3c\/code\x3e则等于表中的一条\x3ccode\x3e记录\x3c\/code\x3e。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader3\x22\x3e使用IndexedDB\x3c\/h1\x3e\n\x3cp\x3e现在，我们将其根据\x3ccode\x3eIndexedDB\x3c\/code\x3e的结构来对其操作进行介绍，能让大家对这个存储空间有一个初步的了解。我们主要介绍：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e数据库操作\x3c\/li\x3e\n\x3cli\x3e数据表操作\x3c\/li\x3e\n\x3cli\x3e数据操作\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e数据库操作\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e创建或打开数据库\x3c\/h3\x3e\n\x3cp\x3e使用\x3ccode\x3eIndexedDB\x3c\/code\x3e第一步，就是创建或打开一个数据库。我们使用\x3ccode\x3ewindow.indexedDB.open(DBName)\x3c\/code\x3e这个API来打进行操作。具体示例如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const request = window.indexedDB.open(\x27test\x27);\n\nrequest.onupgradeneeded = function (event) {\n    \n}\n\nrequest.onsuccess = function(event) {\n    \/\/request === event.target;\n}\nrequest.onerror = function(event) {}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e request = \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.indexedDB.open(\x3cspan class=\x22hljs-string\x22\x3e\x27test\x27\x3c\/span\x3e);\n\nrequest.onupgradeneeded = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eevent\x3c\/span\x3e) \x3c\/span\x3e{\n    \n}\n\nrequest.onsuccess = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eevent\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/request === event.target;\x3c\/span\x3e\n}\nrequest.onerror = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eevent\x3c\/span\x3e) \x3c\/span\x3e{}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e调用此接口时，如果当前数据库不存在，则会创建一个新的数据库。\x3c\/p\x3e\n\x3cp\x3e当数据库建立连接时，会返回一个\x3ccode\x3eIDBOpenDBRequest\x3c\/code\x3e对象。\x3c\/p\x3e\n\x3cp\x3e在连接建立成功时，会触发\x3ccode\x3eonsuccess\x3c\/code\x3e事件，其中函数参数\x3ccode\x3eevent\x3c\/code\x3e的\x3ccode\x3etarget\x3c\/code\x3e属性就是\x3ccode\x3erequest\x3c\/code\x3e对象。\x3c\/p\x3e\n\x3cp\x3e而在数据库创建或者版本更新时，会触发\x3ccode\x3eonupgradeneeded\x3c\/code\x3e事件。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e更新数据库版本号\x3c\/h3\x3e\n\x3cp\x3e\x3ccode\x3ewindow.indexedDB.open\x3c\/code\x3e的第二个参数即为版本号。在不指定的情况下，默认版本号为1。具体示例如下:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const request = window.indexedDB.open(\x27test\x27, 2);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e request = \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.indexedDB.open(\x3cspan class=\x22hljs-string\x22\x3e\x27test\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在需要更新数据库的\x3ccode\x3eschema(模式)\x3c\/code\x3e时，需要更新版本号。此时我们指定一个高于之前版本的版本号，就会触发\x3ccode\x3eonupgradeneeded\x3c\/code\x3e事件。类似的，当此数据库不存在时，也会触发此事件并且将版本更新到置顶版本。\x3c\/p\x3e\n\x3cp\x3e我们需要注意的是，版本号是一个\x3ccode\x3eUnsigned long long\x3c\/code\x3e数字，这意味着它可以是一个非常大的整数。但是，它不能是一个小数，否则它将会被转为最近的整数，同时有可能导致\x3ccode\x3eonUpgradeneeded\x3c\/code\x3e事件不触发(bug)。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3e存储空间操作\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader8\x22\x3e创建存储空间\x3c\/h3\x3e\n\x3cp\x3e我们使用\x3ccode\x3ecreateObjectStore\x3c\/code\x3e来创建一个存储空间。同时，使用\x3ccode\x3ecreateIndex\x3c\/code\x3e来创建它的索引。具体示例如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var request = window.indexedDB.open(\x27test\x27, 1);\n\nrequest.onupgradeneeded = function (event) {\n    var db = event.target.result;\n    var objectStore = db.createObjectStore(\x27table1\x27, {keyPath: \x27id\x27, autoIncrement: true});\n\n    objectStore.createIndex(\x27name\x27, \x27name\x27, {unique: false});\n}\n\nrequest.onerror = function (event) {\n    alert(\x26quot;Why didn\x27t you allow my web app to use IndexedDB?!\x26quot;);\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e request = \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.indexedDB.open(\x3cspan class=\x22hljs-string\x22\x3e\x27test\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e);\n\nrequest.onupgradeneeded = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eevent\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e db = event.target.result;\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e objectStore = db.createObjectStore(\x3cspan class=\x22hljs-string\x22\x3e\x27table1\x27\x3c\/span\x3e, {\x3cspan class=\x22hljs-attr\x22\x3ekeyPath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27id\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3eautoIncrement\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e});\n\n    objectStore.createIndex(\x3cspan class=\x22hljs-string\x22\x3e\x27name\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27name\x27\x3c\/span\x3e, {\x3cspan class=\x22hljs-attr\x22\x3eunique\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e});\n}\n\nrequest.onerror = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eevent\x3c\/span\x3e) \x3c\/span\x3e{\n    alert(\x3cspan class=\x22hljs-string\x22\x3e\x22Why didn\x27t you allow my web app to use IndexedDB?!\x22\x3c\/span\x3e);\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e注：只能在\x3ccode\x3eonupgradeneeded\x3c\/code\x3e回调函数中创建存储空间，而不能在数据库打开后的\x3ccode\x3esuccess\x3c\/code\x3e回调函数中创建。\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e通过\x3ccode\x3ecreateObjectStore\x3c\/code\x3e能够创建一个存储空间。接受两个参数：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e第一个参数，存储空间的名称，即我们上面的\x3ccode\x3ecustomers\x3c\/code\x3e。\x3c\/li\x3e\n\x3cli\x3e第二个参数，指定存储的\x3ccode\x3ekeyPath\x3c\/code\x3e值为存储对象的某个属性，这个属性能够在获取存储空间数据的时候当做key值使用。\x3ccode\x3eautoIncrement\x3c\/code\x3e指定了\x3ccode\x3ekey\x3c\/code\x3e值是否自增（当key值为默认的从1开始到2^53的整数时）。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e而\x3ccode\x3ecreateIndex\x3c\/code\x3e能够给当前的存储空间设置一个索引。它接受三个参数：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e第一个参数，索引的名称。\x3c\/li\x3e\n\x3cli\x3e第二个参数，指定根据存储数据的哪一个属性来构建索引。\x3c\/li\x3e\n\x3cli\x3e第三个属性， options对象，其中属性\x3ccode\x3eunique\x3c\/code\x3e的值为\x3ccode\x3etrue\x3c\/code\x3e表示不允许索引值相等。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch2 id=\x22articleHeader9\x22\x3e数据操作\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader10\x22\x3e事务\x3c\/h3\x3e\n\x3cp\x3e在\x3ccode\x3eIndexedDB\x3c\/code\x3e中，我们也能够使用事务来进行数据库的操作。事务有三个模式（常量已经弃用）：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3ccode\x3ereadOnly\x3c\/code\x3e，只读。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3ereadwrite\x3c\/code\x3e，读写。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eversionchange\x3c\/code\x3e，数据库版本变化。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e我们创建一个事务时，需要从上面选择一种模式，如果不指定的话，则默认为只读模式。具体示例如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const transaction = db.transaction([\x27customers\x27], \x27readwrite\x27);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e transaction = db.transaction([\x3cspan class=\x22hljs-string\x22\x3e\x27customers\x27\x3c\/span\x3e], \x3cspan class=\x22hljs-string\x22\x3e\x27readwrite\x27\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e事务函数\x3ccode\x3etransaction\x3c\/code\x3e的第一个参数为需要关联的存储空间，第二个可选参数为事务模式。与上面类似，事务成功时也会触发\x3ccode\x3eonsuccess\x3c\/code\x3e函数，失败时触发\x3ccode\x3eonerror\x3c\/code\x3e函数。\x3c\/p\x3e\n\x3cp\x3e事务的操作都是原子性的。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader11\x22\x3e增加数据\x3c\/h3\x3e\n\x3cp\x3e当存储空间初始化完成后，我们可以把数据放入存储空间中。直接调用\x3ccode\x3eadd\x3c\/code\x3e方法就可以将数据放入存储空间内，具体示例如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var request = window.indexedDB.open(\x27test\x27, 1);\n\nrequest.onsuccess = function (event) {\n    var db = event.target.result;\n\n    var transaction = db.transaction([\x27table1\x27], \x27readwrite\x27);\n\n    var objectStore = transaction.objectStore(\x27table1\x27);\n\n    var index = objectStore.index(\x27name\x27);\n\n    objectStore.add({name: \x27a\x27, age: 10});\n    objectStore.add({name: \x27b\x27, age: 20});\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e request = \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.indexedDB.open(\x3cspan class=\x22hljs-string\x22\x3e\x27test\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e);\n\nrequest.onsuccess = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eevent\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e db = event.target.result;\n\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e transaction = db.transaction([\x3cspan class=\x22hljs-string\x22\x3e\x27table1\x27\x3c\/span\x3e], \x3cspan class=\x22hljs-string\x22\x3e\x27readwrite\x27\x3c\/span\x3e);\n\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e objectStore = transaction.objectStore(\x3cspan class=\x22hljs-string\x22\x3e\x27table1\x27\x3c\/span\x3e);\n\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e index = objectStore.index(\x3cspan class=\x22hljs-string\x22\x3e\x27name\x27\x3c\/span\x3e);\n\n    objectStore.add({\x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27a\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3eage\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e});\n    objectStore.add({\x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27b\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3eage\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e});\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e注：\x3ccode\x3eadd\x3c\/code\x3e方法中的第二个参数key值是指定存储空间中的\x3ccode\x3ekeyPath\x3c\/code\x3e值，如果\x3ccode\x3edata\x3c\/code\x3e中包含\x3ccode\x3ekeyPath\x3c\/code\x3e值或者此值为自增值，那么可以略去此参数。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader12\x22\x3e查找数据\x3c\/h3\x3e\n\x3ch4\x3e通过特定值获取数据\x3c\/h4\x3e\n\x3cp\x3e当我们需要从存储空间获取数据时，我们可以通过以下的方法：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var request = window.indexedDB.open(\x27test\x27, 1);\n\nrequest.onsuccess = function (event) {\n    var db = event.target.result;\n\n    var transaction = db.transaction([\x27table1\x27], \x27readwrite\x27);\n\n    var objectStore = transaction.objectStore(\x27table1\x27);\n\n    var request = objectStore.get(1);\n\n    request.onsuccess = function (event) {\n        \/\/ 对 request.result 做些操作！\n        console.log(request.result);\n    };\n\n    request.onerror = function (event) {\n        \/\/ 错误处理!\n    };\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e request = \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.indexedDB.open(\x3cspan class=\x22hljs-string\x22\x3e\x27test\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e);\n\nrequest.onsuccess = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eevent\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e db = event.target.result;\n\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e transaction = db.transaction([\x3cspan class=\x22hljs-string\x22\x3e\x27table1\x27\x3c\/span\x3e], \x3cspan class=\x22hljs-string\x22\x3e\x27readwrite\x27\x3c\/span\x3e);\n\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e objectStore = transaction.objectStore(\x3cspan class=\x22hljs-string\x22\x3e\x27table1\x27\x3c\/span\x3e);\n\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e request = objectStore.get(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e);\n\n    request.onsuccess = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eevent\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 对 request.result 做些操作！\x3c\/span\x3e\n        \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(request.result);\n    };\n\n    request.onerror = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eevent\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 错误处理!\x3c\/span\x3e\n    };\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e通过游标获取数据\x3c\/h4\x3e\n\x3cp\x3e当你需要便利整个存储空间中的数据时，你就需要使用到游标。游标使用方法如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var request = window.indexedDB.open(\x27test\x27, 1);\n\nrequest.onsuccess = function (event) {\n    var db = event.target.result;\n\n    var transaction = db.transaction([\x27table1\x27], \x27readwrite\x27);\n\n    var objectStore = transaction.objectStore(\x27table1\x27);\n\n    var request = objectStore.openCursor();\n\n    request.onsuccess = function (event) {\n        var cursor = event.target.result;\n        if (cursor) {\n            \/\/ 使用Object.assign方法是为了避免控制台打印时出错\n            console.log(Object.assign(cursor.value));\n            cursor.continue();\n        }\n    };\n\n    request.onerror = function (event) {\n        \/\/ 错误处理!\n    };\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e request = \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.indexedDB.open(\x3cspan class=\x22hljs-string\x22\x3e\x27test\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e);\n\nrequest.onsuccess = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eevent\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e db = event.target.result;\n\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e transaction = db.transaction([\x3cspan class=\x22hljs-string\x22\x3e\x27table1\x27\x3c\/span\x3e], \x3cspan class=\x22hljs-string\x22\x3e\x27readwrite\x27\x3c\/span\x3e);\n\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e objectStore = transaction.objectStore(\x3cspan class=\x22hljs-string\x22\x3e\x27table1\x27\x3c\/span\x3e);\n\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e request = objectStore.openCursor();\n\n    request.onsuccess = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eevent\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e cursor = event.target.result;\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (cursor) {\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 使用Object.assign方法是为了避免控制台打印时出错\x3c\/span\x3e\n            \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.assign(cursor.value));\n            cursor.continue();\n        }\n    };\n\n    request.onerror = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eevent\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 错误处理!\x3c\/span\x3e\n    };\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e使用游标时有一个需要注意的地方，当游标便利整个存储空间但是并未找到给定条件的值时，仍然会触发\x3ccode\x3eonsuccess\x3c\/code\x3e函数。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3eopenCursor\x3c\/code\x3e和\x3ccode\x3eopenKeyCursor\x3c\/code\x3e有两个参数：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\n\x3cp\x3e第一个参数，遍历范围，指定游标的访问范围。该范围通过一个\x3ccode\x3eIDBKeyRange\x3c\/code\x3e参数的方法来获取。\x3c\/p\x3e\n\x3cp\x3e遍历范围参数具体示例如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 匹配值 key === 1\nconst singleKeyRange = IDBKeyRange.only(1);\n\n\/\/ 匹配值 key \x3e= 1\nconst lowerBoundKeyRange = IDBKeyRange.lowerBound(1);\n\n\/\/ 匹配值 key \x3e 1\nconst lowerBoundOpenKeyRange = IDBKeyRange.lowerBound(1, true);\n\n\/\/ 匹配值 key \x3c 2\nconst upperBoundOpenKeyRange = IDBKeyRange.upperBound(2, true);\n\n\/\/ 匹配值 key \x3e= 1 \x26amp;\x26amp; key \x3c 2\nconst boundKeyRange = IDBKeyRange.bound(1, 2, false, true);\n\nindex.openCursor(boundKeyRange).onsuccess = function(event) {\n  const cursor = event.target.result;\n  if (cursor) {\n    \/\/ Do something with the matches.\n    cursor.continue();\n  }\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 匹配值 key === 1\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e singleKeyRange = IDBKeyRange.only(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 匹配值 key \x26gt;= 1\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e lowerBoundKeyRange = IDBKeyRange.lowerBound(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 匹配值 key \x26gt; 1\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e lowerBoundOpenKeyRange = IDBKeyRange.lowerBound(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 匹配值 key \x26lt; 2\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e upperBoundOpenKeyRange = IDBKeyRange.upperBound(\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e, \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 匹配值 key \x26gt;= 1 \x26amp;\x26amp; key \x26lt; 2\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e boundKeyRange = IDBKeyRange.bound(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e, \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e, \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e);\n\nindex.openCursor(boundKeyRange).onsuccess = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eevent\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e cursor = event.target.result;\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (cursor) {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Do something with the matches.\x3c\/span\x3e\n    cursor.continue();\n  }\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e​\x3c\/p\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3e第二个参数，便利顺序，指定游标便利时的顺序和处理相同id（keyPath属性指定字段）重复时的处理方法。改范围通过特定的字符串（\x3ccode\x3eIDBCursor\x3c\/code\x3e的常量已经弃用）来获取。其中：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3ccode\x3enext\x3c\/code\x3e，从前往后获取所有数据（包括重复数据）\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eprev\x3c\/code\x3e，从后往前获取所有数据（包括重复数据）\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3enextunique\x3c\/code\x3e，从前往后获取数据（重复数据只取第一条，索引重复即认为重复，下同）\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eprevunique\x3c\/code\x3e，从后往前获取数据（重复数据只取第一条）\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e遍历顺序参数具体示例如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var request = window.indexedDB.open(\x27test\x27, 1);\n\nrequest.onsuccess = function (event) {\n    var db = event.target.result;\n\n    var transaction = db.transaction([\x27table1\x27], \x27readwrite\x27);\n\n    var objectStore = transaction.objectStore(\x27table1\x27);\n\n    var lowerBoundOpenKeyRange = IDBKeyRange.lowerBound(1, false);\n    var request = objectStore.openCursor(lowerBoundOpenKeyRange, IDBCursor.PREV);\n\n    request.onsuccess = function (event) {\n        var cursor = event.target.result;\n        if (cursor) {\n            \/\/ 使用Object.assign方法是为了避免控制台打印时出错\n            console.log(Object.assign(cursor.value));\n            cursor.continue();\n        }\n    };\n\n    request.onerror = function (event) {\n        \/\/ 错误处理!\n    };\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e request = \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.indexedDB.open(\x3cspan class=\x22hljs-string\x22\x3e\x27test\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e);\n\nrequest.onsuccess = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eevent\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e db = event.target.result;\n\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e transaction = db.transaction([\x3cspan class=\x22hljs-string\x22\x3e\x27table1\x27\x3c\/span\x3e], \x3cspan class=\x22hljs-string\x22\x3e\x27readwrite\x27\x3c\/span\x3e);\n\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e objectStore = transaction.objectStore(\x3cspan class=\x22hljs-string\x22\x3e\x27table1\x27\x3c\/span\x3e);\n\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e lowerBoundOpenKeyRange = IDBKeyRange.lowerBound(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e request = objectStore.openCursor(lowerBoundOpenKeyRange, IDBCursor.PREV);\n\n    request.onsuccess = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eevent\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e cursor = event.target.result;\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (cursor) {\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 使用Object.assign方法是为了避免控制台打印时出错\x3c\/span\x3e\n            \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.assign(cursor.value));\n            cursor.continue();\n        }\n    };\n\n    request.onerror = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eevent\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 错误处理!\x3c\/span\x3e\n    };\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e使用索引\x3c\/h4\x3e\n\x3cp\x3e在前面构建数据库时，我们创建了两个索引。现在我们也可以通过索引来进行数据检索。他的本质还是通过之前获取数据的API来进行，只是将原来使用的\x3ccode\x3ekeyPath\x3c\/code\x3e属性转换成为了索引指定的属性。具体示例如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var request = window.indexedDB.open(\x27test\x27, 1);\n\nrequest.onsuccess = function (event) {\n    var db = event.target.result;\n\n    var transaction = db.transaction([\x27table1\x27], \x27readwrite\x27);\n\n    var objectStore = transaction.objectStore(\x27table1\x27);\n\n    var index = objectStore.index(\x27name\x27);\n\n    \/\/ 第一种，get方法\n    index.get(\x27a\x27).onsuccess = function (event) {\n        console.log(event.target.result);\n    }\n\n    \/\/ 第二种，普通游标方法\n    index.openCursor().onsuccess = function (event) {\n        console.log(\x27openCursor:\x27, event.target.result.value);\n    }\n\n    \/\/ 第三种，键游标方法，该方法与第二种的差别为：普通游标带有value值表示获取的数据，而键游标没有\n    index.openKeyCursor().onsuccess = function (event) {\n        console.log(\x27openKeyCursor:\x27, event.target.result);\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e request = \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.indexedDB.open(\x3cspan class=\x22hljs-string\x22\x3e\x27test\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e);\n\nrequest.onsuccess = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eevent\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e db = event.target.result;\n\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e transaction = db.transaction([\x3cspan class=\x22hljs-string\x22\x3e\x27table1\x27\x3c\/span\x3e], \x3cspan class=\x22hljs-string\x22\x3e\x27readwrite\x27\x3c\/span\x3e);\n\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e objectStore = transaction.objectStore(\x3cspan class=\x22hljs-string\x22\x3e\x27table1\x27\x3c\/span\x3e);\n\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e index = objectStore.index(\x3cspan class=\x22hljs-string\x22\x3e\x27name\x27\x3c\/span\x3e);\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 第一种，get方法\x3c\/span\x3e\n    index.get(\x3cspan class=\x22hljs-string\x22\x3e\x27a\x27\x3c\/span\x3e).onsuccess = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eevent\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(event.target.result);\n    }\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 第二种，普通游标方法\x3c\/span\x3e\n    index.openCursor().onsuccess = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eevent\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27openCursor:\x27\x3c\/span\x3e, event.target.result.value);\n    }\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 第三种，键游标方法，该方法与第二种的差别为：普通游标带有value值表示获取的数据，而键游标没有\x3c\/span\x3e\n    index.openKeyCursor().onsuccess = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eevent\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27openKeyCursor:\x27\x3c\/span\x3e, event.target.result);\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader13\x22\x3e修改数据\x3c\/h3\x3e\n\x3cp\x3e当需要修改存储空间中的数据时，我们可以使用以下的API：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var objectStore = transaction.objectStore(\x26quot;customers\x26quot;);\n\nvar request = objectStore.put(data);\n\nrequest.onsuccess = function (event) {\n    \n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e objectStore = transaction.objectStore(\x3cspan class=\x22hljs-string\x22\x3e\x22customers\x22\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e request = objectStore.put(data);\n\nrequest.onsuccess = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eevent\x3c\/span\x3e) \x3c\/span\x3e{\n    \n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e注：\x3ccode\x3eput\x3c\/code\x3e方法不仅能够修改现有数据，也能够往存储空间中增加新的数据。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader14\x22\x3e删除数据\x3c\/h3\x3e\n\x3cp\x3e当我们需要删除已经无用的数据时，我们可以通过以下方法：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var objectStore = transaction.objectStore(\x26quot;customers\x26quot;);\n\nvar request = objectStore.delete(name);\n\nrequest.onsuccess = function (event) {\n    \n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e objectStore = transaction.objectStore(\x3cspan class=\x22hljs-string\x22\x3e\x22customers\x22\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e request = objectStore.delete(name);\n\nrequest.onsuccess = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eevent\x3c\/span\x3e) \x3c\/span\x3e{\n    \n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader15\x22\x3e异常处理\x3c\/h2\x3e\n\x3cp\x3e在浏览器有如下操作的情况下，indexedDB可能会出现异常：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e用户清除浏览器缓存\x3c\/li\x3e\n\x3cli\x3e存储空间超过大小限制\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e此时，需要对错误进行捕获，并且对用户进行提示。此章节不是本文重点，再此略过。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader16\x22\x3e扩展须知\x3c\/h1\x3e\n\x3ch2 id=\x22articleHeader17\x22\x3e取值相关\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader18\x22\x3ekey值能够接受的数据类型\x3c\/h3\x3e\n\x3cp\x3e在\x3ccode\x3eIndexedDB\x3c\/code\x3e中，键值对中的\x3ccode\x3ekey\x3c\/code\x3e值可以接受以下几种类型的值：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3enumber\x3c\/li\x3e\n\x3cli\x3edata\x3c\/li\x3e\n\x3cli\x3estring\x3c\/li\x3e\n\x3cli\x3ebinary\x3c\/li\x3e\n\x3cli\x3earray\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e具体说明可以见文档\x3ca href=\x22https:\/\/w3c.github.io\/IndexedDB\/#key-construct\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e此处\x3c\/a\x3e。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader19\x22\x3ekey path能够接受的数据类型\x3c\/h3\x3e\n\x3cp\x3e当一个\x3ccode\x3ekey\x3c\/code\x3e值变为主键，即\x3ccode\x3ekeyPath\x3c\/code\x3e时，它的值就只能是以下几种：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3eBlob\x3c\/li\x3e\n\x3cli\x3eFile\x3c\/li\x3e\n\x3cli\x3eArray\x3c\/li\x3e\n\x3cli\x3eString\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e\x3cstrong\x3e注：空格不能出现在key path中\x3c\/strong\x3e。\x3c\/p\x3e\n\x3cp\x3e具体说明可以见文档\x3ca href=\x22https:\/\/w3c.github.io\/IndexedDB\/#key-path-construct\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e此处\x3c\/a\x3e。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader20\x22\x3evalue能够接受的数据类型\x3c\/h3\x3e\n\x3cp\x3e在\x3ccode\x3eIndexedDB\x3c\/code\x3e中，value能够接受ECMA-262中所有的类型的值，例如String，Date，ImageDate等。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader21\x22\x3e事务相关\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader22\x22\x3e事务中断后，会不会影响key值的自增\x3c\/h3\x3e\n\x3cp\x3e\x3ccode\x3eIndexedDB\x3c\/code\x3e在没有指定key值的时候就会采用自增的key值。如果一个事务在中途中断，那么key值的自增将会从中断的事务开始前的key开始。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader23\x22\x3e安全相关\x3c\/h2\x3e\n\x3cp\x3e\x3ccode\x3eIndexedDB\x3c\/code\x3e也受到浏览器\x3ca href=\x22https:\/\/developer.mozilla.org\/zh-CN\/docs\/Web\/Security\/Same-origin_policy\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e同源策略\x3c\/a\x3e的限制。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader24\x22\x3e用户相关\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader25\x22\x3e清空缓存\x3c\/h3\x3e\n\x3cp\x3e用户在清除浏览器缓存时，可能会清除\x3ccode\x3eIndexedDB\x3c\/code\x3e中相关的数据。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader26\x22\x3e访问权限\x3c\/h3\x3e\n\x3cp\x3e部分浏览器如Safari手机版隐私模式在访问\x3ccode\x3eIndexedDB\x3c\/code\x3e时，可能会出现由于没有权限而导致的异常（LocalStorage也会），需要进行异常处理。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader27\x22\x3e总结\x3c\/h1\x3e\n\x3cp\x3e\x3ccode\x3eIndexedDB\x3c\/code\x3e在本地存储中有着无可替代的作用，是替代关系型数据库\x3ccode\x3eweb sql\x3c\/code\x3e的产品，能够对大量数据进行存储。在许多需要运用离线存储的场景下，它能够给我们提供有效的支撑。\x3c\/p\x3e\n\x3cp\x3e但是，\x3ccode\x3eIndexedDB\x3c\/code\x3e在使用过程中仍然需要避免可能会出现的一些问题，或者对可能导致的不利影响有一定的容错处理。这样才不会对应用产生重大影响。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader28\x22\x3e参考文献\x3c\/h1\x3e\n\x3cul\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/developer.mozilla.org\/zh-CN\/docs\/Web\/Security\/Same-origin_policy\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e浏览器的同源策略\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/developer.mozilla.org\/zh-CN\/docs\/Web\/API\/IndexedDB_API\/Using_IndexedDB\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e使用indexedDB MDN入门\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/developer.mozilla.org\/zh-CN\/docs\/Web\/API\/IndexedDB_API\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eIndexedDB API参考\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/w3c.github.io\/IndexedDB\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eW3C IndexedDB 2.0规范\x3c\/a\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>IndexedDB使用与出坑指南</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000006924681">https://segmentfault.com/a/1190000006924681</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/nnpmjlot58j/" target="_blank">https://alili.tech/archive/nnpmjlot58j/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>