<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="从重绘重排角度讲解transform的动画性能"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>从重绘重排角度讲解transform的动画性能 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/smaveyss8/",
				"appid": "1613049289050283", 
				"title": "从重绘重排角度讲解transform的动画性能 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-19T02:30:09"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/125vtbcpp02p/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/13mm6u7dsvn/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fsmaveyss8%2f&text=%e4%bb%8e%e9%87%8d%e7%bb%98%e9%87%8d%e6%8e%92%e8%a7%92%e5%ba%a6%e8%ae%b2%e8%a7%a3transform%e7%9a%84%e5%8a%a8%e7%94%bb%e6%80%a7%e8%83%bd"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fsmaveyss8%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fsmaveyss8%2f&text=%e4%bb%8e%e9%87%8d%e7%bb%98%e9%87%8d%e6%8e%92%e8%a7%92%e5%ba%a6%e8%ae%b2%e8%a7%a3transform%e7%9a%84%e5%8a%a8%e7%94%bb%e6%80%a7%e8%83%bd"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fsmaveyss8%2f&title=%e4%bb%8e%e9%87%8d%e7%bb%98%e9%87%8d%e6%8e%92%e8%a7%92%e5%ba%a6%e8%ae%b2%e8%a7%a3transform%e7%9a%84%e5%8a%a8%e7%94%bb%e6%80%a7%e8%83%bd"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fsmaveyss8%2f&is_video=false&description=%e4%bb%8e%e9%87%8d%e7%bb%98%e9%87%8d%e6%8e%92%e8%a7%92%e5%ba%a6%e8%ae%b2%e8%a7%a3transform%e7%9a%84%e5%8a%a8%e7%94%bb%e6%80%a7%e8%83%bd"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e4%bb%8e%e9%87%8d%e7%bb%98%e9%87%8d%e6%8e%92%e8%a7%92%e5%ba%a6%e8%ae%b2%e8%a7%a3transform%e7%9a%84%e5%8a%a8%e7%94%bb%e6%80%a7%e8%83%bd&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fsmaveyss8%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fsmaveyss8%2f&title=%e4%bb%8e%e9%87%8d%e7%bb%98%e9%87%8d%e6%8e%92%e8%a7%92%e5%ba%a6%e8%ae%b2%e8%a7%a3transform%e7%9a%84%e5%8a%a8%e7%94%bb%e6%80%a7%e8%83%bd"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fsmaveyss8%2f&title=%e4%bb%8e%e9%87%8d%e7%bb%98%e9%87%8d%e6%8e%92%e8%a7%92%e5%ba%a6%e8%ae%b2%e8%a7%a3transform%e7%9a%84%e5%8a%a8%e7%94%bb%e6%80%a7%e8%83%bd"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fsmaveyss8%2f&title=%e4%bb%8e%e9%87%8d%e7%bb%98%e9%87%8d%e6%8e%92%e8%a7%92%e5%ba%a6%e8%ae%b2%e8%a7%a3transform%e7%9a%84%e5%8a%a8%e7%94%bb%e6%80%a7%e8%83%bd"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fsmaveyss8%2f&title=%e4%bb%8e%e9%87%8d%e7%bb%98%e9%87%8d%e6%8e%92%e8%a7%92%e5%ba%a6%e8%ae%b2%e8%a7%a3transform%e7%9a%84%e5%8a%a8%e7%94%bb%e6%80%a7%e8%83%bd"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">从重绘重排角度讲解transform的动画性能</h1><div class="meta"><div class="postdate"><time datetime="2019-01-19" itemprop="datePublished">2019-01-19</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch3 id=\x22articleHeader0\x22\x3erender树的构建\x3c\/h3\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000006908155?w=630\x26amp;h=292\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000006908155?w=630\x26amp;h=292\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e浏览器取回代码后，首先会构造DOM树，根据HTML标签，构造DOM树。\x3c\/p\x3e\n\x3cp\x3e之后会解析CSS样式，解析的顺序是\x3ccode\x3e浏览器的样式\x3c\/code\x3e -\x26gt; \x3ccode\x3e用户自定义的样式\x3c\/code\x3e -\x26gt; \x3ccode\x3e页面的link标签等引进来的样式\x3c\/code\x3e -\x26gt; \x3ccode\x3e写在style标签里面的内联样式\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e最后根据DOM树以及解析的CSS样式，构造RENDER树，在RENDER树中，会把DOM树中没有的元素给去除，比如head标签以及里面的内容，以及\x3ccode\x3edisplay:none\x3c\/code\x3e的元素也会被去除。\x3c\/p\x3e\n\x3cp\x3e一旦RENDER树构建完成，浏览器会把树里面的内容绘制在屏幕上。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3chtml\x3e\n\x3chead\x3e\n  \x3ctitle\x3eBeautiful page\x3c\/title\x3e\n\x3c\/head\x3e\n\x3cbody\x3e\n    \n  \x3cp\x3e\n    Once upon a time there was \n    a looong paragraph...\n  \x3c\/p\x3e\n  \n  \x3cdiv style=\x26quot;display: none\x26quot;\x3e\n    Secret message\n  \x3c\/div\x3e\n  \n  \x3cdiv\x3e\x3cimg src=\x26quot;...\x26quot; \/\x3e\x3c\/div\x3e\n  ...\n \n\x3c\/body\x3e\n\x3c\/html\x3e\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etitle\x3c\/span\x3e\x26gt;\x3c\/span\x3eBeautiful page\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etitle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    Once upon a time there was \n    a looong paragraph...\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3estyle\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22display: none\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    Secret message\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eimg\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22...\x22\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  ...\n \n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e构造的DOM树如下\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22documentElement (html)\n    head\n        title\n    body\n        p\n            [text node]\n        \n        div \n            [text node]\n        \n        div\n            img\n        \n        ...\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3edocumentElement (html)\n    head\n        title\n    \x3cspan class=\x22hljs-selector-tag\x22\x3ebody\x3c\/span\x3e\n        \x3cspan class=\x22hljs-selector-tag\x22\x3ep\x3c\/span\x3e\n            [text node]\n        \n        \x3cspan class=\x22hljs-selector-tag\x22\x3ediv\x3c\/span\x3e \n            [text node]\n        \n        \x3cspan class=\x22hljs-selector-tag\x22\x3ediv\x3c\/span\x3e\n            \x3cspan class=\x22hljs-selector-tag\x22\x3eimg\x3c\/span\x3e\n        \n        ...\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eRENDER树如下\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22root (RenderView)\n    body\n        p\n            line 1\n        line 2\n        line 3\n        ...\n        \n    div\n        img\n        \n    ...\n    \x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3eroot (RenderView)\n    \x3cspan class=\x22hljs-selector-tag\x22\x3ebody\x3c\/span\x3e\n        \x3cspan class=\x22hljs-selector-tag\x22\x3ep\x3c\/span\x3e\n            line \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\n        line \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e\n        line \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e\n        ...\n        \n    \x3cspan class=\x22hljs-selector-tag\x22\x3ediv\x3c\/span\x3e\n        \x3cspan class=\x22hljs-selector-tag\x22\x3eimg\x3c\/span\x3e\n        \n    ...\n    \x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e重绘(repaint)和重排(reflow)\x3c\/h3\x3e\n\x3cp\x3e当DOM的变化影响了元素的几何属性（宽或高），浏览器需要重新计算元素的几何属性，同样其他元素的几何属性和位置也会因此受到影响。浏览器会使渲染树中受到影响的部分失效，并重新构造渲染树。这个过程称为重排。完成重排后，浏览器会重新绘制受影响的部分到屏幕，该过程称为重绘。并不是所有的DOM变化都会影响几何属性，比如改变一个元素的背景色并不会影响元素的宽和高，这种情况下只会发生重绘。\x3c\/p\x3e\n\x3cp\x3e重排必然导致重绘，所以重排更加恶心。其实我们一直研究的应该是怎么避免触发多次重排。\x3c\/p\x3e\n\x3ch4\x3e重排何时发生\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22添加或者删除可见的DOM元素\n元素位置改变\n元素尺寸改变\n元素内容改变（例如：一个文本被另一个不同尺寸的图片替代）\n页面渲染初始化（这个无法避免）\n浏览器窗口尺寸改变\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs\x22\x3e\x3ccode\x3e添加或者删除可见的DOM元素\n元素位置改变\n元素尺寸改变\n元素内容改变（例如：一个文本被另一个不同尺寸的图片替代）\n页面渲染初始化（这个无法避免）\n浏览器窗口尺寸改变\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e浏览器的自动优化\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var ele = document.getElementById(\x27myDiv\x27);\nele.style.borderLeft = \x271px\x27;\nele.style.borderRight = \x272px\x27;\nele.style.padding = \x275px\x27;\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dart\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ele = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27myDiv\x27\x3c\/span\x3e);\nele.style.borderLeft = \x3cspan class=\x22hljs-string\x22\x3e\x271px\x27\x3c\/span\x3e;\nele.style.borderRight = \x3cspan class=\x22hljs-string\x22\x3e\x272px\x27\x3c\/span\x3e;\nele.style.padding = \x3cspan class=\x22hljs-string\x22\x3e\x275px\x27\x3c\/span\x3e;\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e乍一想，元素的样式改变了三次，每次改变都会引起重排和重绘，所以总共有三次重排重绘过程，但是浏览器并不会这么笨，它会把三次修改“保存”起来（大多数浏览器通过队列化修改并批量执行来优化重排过程），一次完成！但是，有些时候你可能会（经常是不知不觉）强制刷新队列并要求计划任务立即执行。获取布局信息的操作会导致队列刷新，比如：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22offsetTop, offsetLeft, offsetWidth, offsetHeight\nscrollTop, scrollLeft, scrollWidth, scrollHeight\nclientTop, clientLeft, clientWidth, clientHeight\ngetComputedStyle() (currentStyle in IE)\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs mipsasm\x22\x3e\x3ccode\x3eoffsetTop, offsetLeft, offsetWidth, offsetHeight\n\x3cspan class=\x22hljs-keyword\x22\x3escrollTop, \x3c\/span\x3e\x3cspan class=\x22hljs-keyword\x22\x3escrollLeft, \x3c\/span\x3e\x3cspan class=\x22hljs-keyword\x22\x3escrollWidth, \x3c\/span\x3e\x3cspan class=\x22hljs-keyword\x22\x3escrollHeight\n\x3c\/span\x3eclientTop, clientLeft, clientWidth, clientHeight\ngetComputedStyle() (currentStyle in IE)\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e因此，尽量不要在修改样式或者布局信息时查询样式，因为查询的时候会强制重排，导致浏览器无法优化多次重排。\x3c\/p\x3e\n\x3chr\x3e\n\x3cp\x3e使用绝对位置定位页面上的动画元素，将其脱离文档流，可以有效的防止重排。比如有时候做动画特效时，我们通过设置\x3ccode\x3eposition:absolute\x3c\/code\x3e可以有效的减少重排。这让我想到，以前做动画的时候通过修改\x3ccode\x3emargin-left\x3c\/code\x3e属性而不是\x3ccode\x3eleft\x3c\/code\x3e属性绝对是一个很不好的做法。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3etransform是否可以避免重排重绘问题\x3c\/h3\x3e\n\x3cp\x3e那么使用CSS3的\x3ccode\x3etransform\x3c\/code\x3e来实现动画是否可以避免重排问题？或者说浏览器针对这一部分做了其他优化？\x3c\/p\x3e\n\x3cp\x3e经过一番查找，答案如下：\x3c\/p\x3e\n\x3cp\x3eCSS的最终表现分为以下四步：\x3ccode\x3eRecalculate Style\x3c\/code\x3e -\x26gt; \x3ccode\x3eLayout\x3c\/code\x3e -\x26gt; \x3ccode\x3ePaint Setup and Paint\x3c\/code\x3e -\x26gt; \x3ccode\x3eComposite Layers\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e按照中文的意思大致是 查找并计算样式 -\x26gt; 排布 -\x26gt; 绘制 -\x26gt; 组合层\x3c\/p\x3e\n\x3cp\x3e这上面的几个步骤有点类似于上文说到的重排必定导致重绘，而查询属性会强制发生重排。所以上文提到的重排重绘内容可以结合这里进行理解。\x3c\/p\x3e\n\x3cp\x3e由于\x3ccode\x3etransform\x3c\/code\x3e是位于\x3ccode\x3eComposite Layers\x3c\/code\x3e层，而\x3ccode\x3ewidth\x3c\/code\x3e、\x3ccode\x3eleft\x3c\/code\x3e、\x3ccode\x3emargin\x3c\/code\x3e等则是位于\x3ccode\x3eLayout\x3c\/code\x3e层，在\x3ccode\x3eLayout\x3c\/code\x3e层发生的改变必定导致\x3ccode\x3ePaint Setup and Paint\x3c\/code\x3e -\x26gt; \x3ccode\x3eComposite Layers\x3c\/code\x3e，所以相对而言使用\x3ccode\x3etransform\x3c\/code\x3e实现的动画效果肯定比\x3ccode\x3eleft\x3c\/code\x3e这些更加流畅。\x3c\/p\x3e\n\x3cp\x3e而且就算抛开这一角度，在另一方面浏览器也会针对\x3ccode\x3etransform\x3c\/code\x3e等开启GPU加速。\x3c\/p\x3e\n\x3cp\x3e参考文章\x3c\/p\x3e\n\x3cblockquote\x3e\x3cblockquote\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/www.html5rocks.com\/en\/tutorials\/speed\/high-performance-animations\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/www.html5rocks.com\/en...\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22http:\/\/www.phpied.com\/rendering-repaint-reflowrelayout-restyle\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/www.phpied.com\/renderi...\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22http:\/\/www.cnblogs.com\/zichi\/p\/4720000.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/www.cnblogs.com\/zichi\/...\x3c\/a\x3e\x3c\/p\x3e\n\x3c\/blockquote\x3e\x3c\/blockquote\x3e\n\x3cp\x3e写完文章后又重新查了一下关于CSS3动画性能方面的文章，发现大漠老师写的这篇很不错，而且跟自己理解的观点有部分相似，先放上来，之后再认真看。\x3c\/p\x3e\n\x3cblockquote\x3e\x3cblockquote\x3e\x3cp\x3e\x3ca href=\x22https:\/\/www.w3cplus.com\/animation\/animation-performance.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/www.w3cplus.com\/anima...\x3c\/a\x3e\x3c\/p\x3e\x3c\/blockquote\x3e\x3c\/blockquote\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>从重绘重排角度讲解transform的动画性能</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000008650975">https://segmentfault.com/a/1190000008650975</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/smaveyss8/" target="_blank">https://alili.tech/archive/smaveyss8/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>