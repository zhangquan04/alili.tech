<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="React系列——react 15.5&#43; 使用CSSTransitionGroup实现路由过渡动画"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>React系列——react 15.5&#43; 使用CSSTransitionGroup实现路由过渡动画 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/2bd3gfrgiw6/",
				"appid": "1613049289050283", 
				"title": "React系列——react 15.5&#43; 使用CSSTransitionGroup实现路由过渡动画 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-13T02:30:11"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/oeq31lcjme/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/cspxm3gudku/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f2bd3gfrgiw6%2f&text=React%e7%b3%bb%e5%88%97%e2%80%94%e2%80%94react%2015.5%2b%20%e4%bd%bf%e7%94%a8CSSTransitionGroup%e5%ae%9e%e7%8e%b0%e8%b7%af%e7%94%b1%e8%bf%87%e6%b8%a1%e5%8a%a8%e7%94%bb"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f2bd3gfrgiw6%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f2bd3gfrgiw6%2f&text=React%e7%b3%bb%e5%88%97%e2%80%94%e2%80%94react%2015.5%2b%20%e4%bd%bf%e7%94%a8CSSTransitionGroup%e5%ae%9e%e7%8e%b0%e8%b7%af%e7%94%b1%e8%bf%87%e6%b8%a1%e5%8a%a8%e7%94%bb"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f2bd3gfrgiw6%2f&title=React%e7%b3%bb%e5%88%97%e2%80%94%e2%80%94react%2015.5%2b%20%e4%bd%bf%e7%94%a8CSSTransitionGroup%e5%ae%9e%e7%8e%b0%e8%b7%af%e7%94%b1%e8%bf%87%e6%b8%a1%e5%8a%a8%e7%94%bb"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f2bd3gfrgiw6%2f&is_video=false&description=React%e7%b3%bb%e5%88%97%e2%80%94%e2%80%94react%2015.5%2b%20%e4%bd%bf%e7%94%a8CSSTransitionGroup%e5%ae%9e%e7%8e%b0%e8%b7%af%e7%94%b1%e8%bf%87%e6%b8%a1%e5%8a%a8%e7%94%bb"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=React%e7%b3%bb%e5%88%97%e2%80%94%e2%80%94react%2015.5%2b%20%e4%bd%bf%e7%94%a8CSSTransitionGroup%e5%ae%9e%e7%8e%b0%e8%b7%af%e7%94%b1%e8%bf%87%e6%b8%a1%e5%8a%a8%e7%94%bb&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f2bd3gfrgiw6%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f2bd3gfrgiw6%2f&title=React%e7%b3%bb%e5%88%97%e2%80%94%e2%80%94react%2015.5%2b%20%e4%bd%bf%e7%94%a8CSSTransitionGroup%e5%ae%9e%e7%8e%b0%e8%b7%af%e7%94%b1%e8%bf%87%e6%b8%a1%e5%8a%a8%e7%94%bb"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f2bd3gfrgiw6%2f&title=React%e7%b3%bb%e5%88%97%e2%80%94%e2%80%94react%2015.5%2b%20%e4%bd%bf%e7%94%a8CSSTransitionGroup%e5%ae%9e%e7%8e%b0%e8%b7%af%e7%94%b1%e8%bf%87%e6%b8%a1%e5%8a%a8%e7%94%bb"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f2bd3gfrgiw6%2f&title=React%e7%b3%bb%e5%88%97%e2%80%94%e2%80%94react%2015.5%2b%20%e4%bd%bf%e7%94%a8CSSTransitionGroup%e5%ae%9e%e7%8e%b0%e8%b7%af%e7%94%b1%e8%bf%87%e6%b8%a1%e5%8a%a8%e7%94%bb"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f2bd3gfrgiw6%2f&title=React%e7%b3%bb%e5%88%97%e2%80%94%e2%80%94react%2015.5%2b%20%e4%bd%bf%e7%94%a8CSSTransitionGroup%e5%ae%9e%e7%8e%b0%e8%b7%af%e7%94%b1%e8%bf%87%e6%b8%a1%e5%8a%a8%e7%94%bb"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">React系列——react 15.5&#43; 使用CSSTransitionGroup实现路由过渡动画</h1><div class="meta"><div class="postdate"><time datetime="2019-01-13" itemprop="datePublished">2019-01-13</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e在做react项目过程中，有时候想实现app的那种上下左右切换路由的特效，但是一直没有找到合适的教程，要么说的不清楚，没有demo，要么就是版本太老，过时了，要抓狂啦?。\x3c\/p\x3e\n\x3cp\x3e根据网上搜到的资料，以前实现react动画有这么几种方式：  \x3c\/p\x3e\n\x3cp\x3e1、ReactCSSTransitionGroup\x3c\/p\x3e\n\x3cp\x3e2、react-router-transition\x3c\/p\x3e\n\x3cp\x3e3、还有的就是根据这2个库做了二次封装的一些动画插件。\x3c\/p\x3e\n\x3cp\x3e但是，在这里我要分享的是 \x3ca href=\x22https:\/\/github.com\/reactjs\/react-transition-group\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e\x3cstrong\x3ereact-transition-group\x3c\/strong\x3e\x3c\/a\x3e，为什么是这个，而不是上面2个，因为这个动画插件兼容react15.4\x2b版本，而且也是官方推荐的，上面2个插件只适合react老版本的动画。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader0\x22\x3e注意，该教程只对react-transition-group的V1.1.1版本有效。对V2无效。V2的API被作者改了。\x3c\/h3\x3e\n\x3cp\x3e你可以先浏览，觉得可以再看下面的内容：\x3ca href=\x22https:\/\/hyy1115.github.io\/huangyongyue\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ereact过渡动画线上效果\x3c\/a\x3e（请点击右上角的搜索按钮查看动画）\x3c\/p\x3e\n\x3ch4\x3e安装 react-transition-group\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22npm install react-transition-group --save\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs crmsh\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3enpm install react-transition-\x3cspan class=\x22hljs-keyword\x22\x3egroup\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3e--save\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e在react中使用 react-transition-group\x3c\/h4\x3e\n\x3cp\x3e我使用的版本是 \x3cstrong\x3ereact15.5 \x2b react-router4 \x2b redux3.6\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e为什么要提到这3个插件？\x3c\/p\x3e\n\x3cp\x3e答：非常关键，如果你的项目没有使用redux，那么请寻找其他动画方案。\x3c\/p\x3e\n\x3cp\x3e原理：在路由外层使用 react-transition-group ，配置动画样式、同时你还需要一个唯一的key表示子节点。\x3c\/p\x3e\n\x3cp\x3e我们知道，react-router4被设计成了组件，可以在react组件中任意位置使用，常常你在入口处需要用到react-router，因为你希望一打开首页，就要加载首页路由，还有可以从首页跳往其他页面的路由组件。\x3c\/p\x3e\n\x3cp\x3e在 App.js中，关键代码\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import CSSTransitionGroup from \x27react-transition-group\/CSSTransitionGroup\x27\nimport createHistory from \x27history\/createHashHistory\x27\nconst history = createHistory()\n\nexport default class App extends React.Component {\n    render() {\n        const { animateCls } = this.props.global\n        return (\n            \x3cRouter history={history}\x3e\n              \x3cRoute render={({ location }) =\x3e {\n                  return(\n                      \x3cCSSTransitionGroup\n                          transitionName={animateCls}\n                          transitionEnter={true}\n                          transitionLeave={true}\n                          transitionEnterTimeout={400}\n                          transitionLeaveTimeout={400}\n                      \x3e\n                          \x3cdiv key={location.pathname}\x3e\n                              \x3cRoute location={location} exact path=\x26quot;\/\x26quot; component={Home} \/\x3e\n                              \x3cRoute location={location} path=\x26quot;\/search\x26quot; component={Search} \/\x3e\n                          \x3c\/div\x3e\n                      \x3c\/CSSTransitionGroup\x3e\n                  )\n              \x22}}\x22\/\x3e\n          \x3c\/Router\x3e\n        )\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs scala\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eCSSTransitionGroup\x3c\/span\x3e from \x3cspan class=\x22hljs-symbol\x22\x3e\x27react\x3c\/span\x3e-transition-group\/\x3cspan class=\x22hljs-type\x22\x3eCSSTransitionGroup\x3c\/span\x3e\x27\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e createHistory from \x3cspan class=\x22hljs-symbol\x22\x3e\x27history\x3c\/span\x3e\/createHashHistory\x27\nconst history = createHistory()\n\nexport \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eApp\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eReact\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n    render() {\n        const { animateCls } = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.global\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n            \x26lt;\x3cspan class=\x22hljs-type\x22\x3eRouter\x3c\/span\x3e history={history}\x26gt;\n              \x26lt;\x3cspan class=\x22hljs-type\x22\x3eRoute\x3c\/span\x3e render={({ location }) =\x26gt; {\n                  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e(\n                      \x26lt;\x3cspan class=\x22hljs-type\x22\x3eCSSTransitionGroup\x3c\/span\x3e\n                          transitionName={animateCls}\n                          transitionEnter={\x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e}\n                          transitionLeave={\x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e}\n                          transitionEnterTimeout={\x3cspan class=\x22hljs-number\x22\x3e400\x3c\/span\x3e}\n                          transitionLeaveTimeout={\x3cspan class=\x22hljs-number\x22\x3e400\x3c\/span\x3e}\n                      \x26gt;\n                          \x26lt;div key={location.pathname}\x26gt;\n                              \x26lt;\x3cspan class=\x22hljs-type\x22\x3eRoute\x3c\/span\x3e location={location} exact path=\x3cspan class=\x22hljs-string\x22\x3e\x22\/\x22\x3c\/span\x3e component={\x3cspan class=\x22hljs-type\x22\x3eHome\x3c\/span\x3e} \/\x26gt;\n                              \x26lt;\x3cspan class=\x22hljs-type\x22\x3eRoute\x3c\/span\x3e location={location} path=\x3cspan class=\x22hljs-string\x22\x3e\x22\/search\x22\x3c\/span\x3e component={\x3cspan class=\x22hljs-type\x22\x3eSearch\x3c\/span\x3e} \/\x26gt;\n                          \x26lt;\/div\x26gt;\n                      \x26lt;\/\x3cspan class=\x22hljs-type\x22\x3eCSSTransitionGroup\x3c\/span\x3e\x26gt;\n                  )\n              \x22}}\x22\/\x26gt;\n          \x26lt;\/\x3cspan class=\x22hljs-type\x22\x3eRouter\x3c\/span\x3e\x26gt;\n        )\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e你应该关注这段代码的下面几个部分，或许你在github上都能看到官方文档，但是官方文档没有教我们如何控制不同页面的动画动态展示。\x3c\/p\x3e\n\x3cp\x3e1、const { animateCls } = this.props.global\x3c\/p\x3e\n\x3cp\x3eanimateCls是存储在store中的变量，他用来表示动画的transitionName，也就是动画样式，store是什么？是redux中的数据存储核心，我们需要实现在不同状态下面，transitionName的动画样式会按照我们的需求而改变，比如从首页切换到二级页面，然后从2级页面返回到首页，这2个过程执行的动画是相反的，这时候我们不能把transitionName写死。\x3c\/p\x3e\n\x3cp\x3e我写了一个action，来控制animateCls值的变化。这个action很简单，就是传入一个样式参数，当不同的状态的时候，传入不同的参数就能实现动画的定制了。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22export const currentAnimate = (cls) =\x3e ({\n    type: \x27CURRENT_ANIMATE\x27,\n    cls\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs typescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e currentAnimate = \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3ecls\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e ({\n    \x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27CURRENT_ANIMATE\x27\x3c\/span\x3e,\n    cls\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e熟悉redux的你，就会知道还需要写reducer。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const initState = {\n    animateCls: \x27normal\x27, \/\/过渡动画样式\n}\n\nexport const global = (state = initState, action) =\x3e {\n    switch (action.type) {\n        case \x26quot;CURRENT_ANIMATE\x26quot;:\n            return {\n                ...state,\n                animateCls: action.cls\n            }\n        default:\n            return state\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs pf\x22\x3e\x3ccode\x3econst initState = {\n    animateCls: \x27normal\x27, \/\/过渡动画样式\n}\n\nexport const \x3cspan class=\x22hljs-keyword\x22\x3eglobal\x3c\/span\x3e = (\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e = initState, action) =\x26gt; {\n    switch (action.type) {\n        case \x3cspan class=\x22hljs-string\x22\x3e\x22CURRENT_ANIMATE\x22\x3c\/span\x3e:\n            return {\n                ...\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e,\n                animateCls: action.cls\n            }\n        \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e:\n            return \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e接着我们就回到了一开始的那一步，在组件中读取 const { animateCls } = this.props.global。\x3c\/p\x3e\n\x3cp\x3e然后，我写了2个动画样式，一个是往左边移动、一个是往右边移动。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/*路由切换动画——左移动*\/\n.left-enter {\n    position: absolute;\n    top: 0;\n    background: #fff;\n    z-index: 10000;\n    opacity: 1;\n    transform: translateX(100%);\n}\n\n.left-enter.left-enter-active {\n    opacity: 1;\n    transform: translateX(0);\n    transition: all 0.4s ease-out;\n}\n\n.left-leave {\n    opacity: 1;\n    transform: translateX(0);\n}\n\n.left-leave.left-leave-active {\n    opacity: 1;\n    transform: translateX(-100%);\n    transition: all 0.4s ease-out;\n}\n\n\/*路由切换动画——右移动*\/\n.right-enter {\n    transform: translateX(-100%);\n}\n\n.right-enter.right-enter-active {\n    transform: translateX(0);\n    transition: all 0.4s ease-out;\n}\n\n.right-leave {\n    position: absolute;\n    top: 0;\n    background: #fff;\n    z-index: 10000;\n    opacity: 1;\n    transform: translateX(0);\n}\n\n.right-leave.right-leave-active {\n    opacity: 1;\n    transform: translateX(100%);\n    transition: all 0.4s ease-out;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs css\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/*路由切换动画——左移动*\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-selector-class\x22\x3e.left-enter\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-attribute\x22\x3eposition\x3c\/span\x3e: absolute;\n    \x3cspan class=\x22hljs-attribute\x22\x3etop\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-attribute\x22\x3ebackground\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e#fff\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-attribute\x22\x3ez-index\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e10000\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-attribute\x22\x3eopacity\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-attribute\x22\x3etransform\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3etranslateX\x3c\/span\x3e(100%);\n}\n\n\x3cspan class=\x22hljs-selector-class\x22\x3e.left-enter\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.left-enter-active\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-attribute\x22\x3eopacity\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-attribute\x22\x3etransform\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3etranslateX\x3c\/span\x3e(0);\n    \x3cspan class=\x22hljs-attribute\x22\x3etransition\x3c\/span\x3e: all \x3cspan class=\x22hljs-number\x22\x3e0.4s\x3c\/span\x3e ease-out;\n}\n\n\x3cspan class=\x22hljs-selector-class\x22\x3e.left-leave\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-attribute\x22\x3eopacity\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-attribute\x22\x3etransform\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3etranslateX\x3c\/span\x3e(0);\n}\n\n\x3cspan class=\x22hljs-selector-class\x22\x3e.left-leave\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.left-leave-active\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-attribute\x22\x3eopacity\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-attribute\x22\x3etransform\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3etranslateX\x3c\/span\x3e(-100%);\n    \x3cspan class=\x22hljs-attribute\x22\x3etransition\x3c\/span\x3e: all \x3cspan class=\x22hljs-number\x22\x3e0.4s\x3c\/span\x3e ease-out;\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/*路由切换动画——右移动*\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-selector-class\x22\x3e.right-enter\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-attribute\x22\x3etransform\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3etranslateX\x3c\/span\x3e(-100%);\n}\n\n\x3cspan class=\x22hljs-selector-class\x22\x3e.right-enter\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.right-enter-active\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-attribute\x22\x3etransform\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3etranslateX\x3c\/span\x3e(0);\n    \x3cspan class=\x22hljs-attribute\x22\x3etransition\x3c\/span\x3e: all \x3cspan class=\x22hljs-number\x22\x3e0.4s\x3c\/span\x3e ease-out;\n}\n\n\x3cspan class=\x22hljs-selector-class\x22\x3e.right-leave\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-attribute\x22\x3eposition\x3c\/span\x3e: absolute;\n    \x3cspan class=\x22hljs-attribute\x22\x3etop\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-attribute\x22\x3ebackground\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e#fff\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-attribute\x22\x3ez-index\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e10000\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-attribute\x22\x3eopacity\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-attribute\x22\x3etransform\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3etranslateX\x3c\/span\x3e(0);\n}\n\n\x3cspan class=\x22hljs-selector-class\x22\x3e.right-leave\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.right-leave-active\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-attribute\x22\x3eopacity\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-attribute\x22\x3etransform\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3etranslateX\x3c\/span\x3e(100%);\n    \x3cspan class=\x22hljs-attribute\x22\x3etransition\x3c\/span\x3e: all \x3cspan class=\x22hljs-number\x22\x3e0.4s\x3c\/span\x3e ease-out;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e关于CSS3的知识，我就不解释了，以右移样式为例子，对每个参数做一下说明。\x3c\/p\x3e\n\x3cp\x3e一个动画完整流程，满足下面4个样式\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22.right-enter {}\n\n.right-enter.right-enter-active {}\n\n.right-leave {}\n\n.right-leave.right-leave-active {}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs css\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.right-enter\x3c\/span\x3e {}\n\n\x3cspan class=\x22hljs-selector-class\x22\x3e.right-enter\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.right-enter-active\x3c\/span\x3e {}\n\n\x3cspan class=\x22hljs-selector-class\x22\x3e.right-leave\x3c\/span\x3e {}\n\n\x3cspan class=\x22hljs-selector-class\x22\x3e.right-leave\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.right-leave-active\x3c\/span\x3e {}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eright表示的是 animateCls，也就是我们要动态设置的值，react动画分为进入和离开，很多人可能不太理解进入和离开到底指什么。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3eenter：新路由进入的动画。\x3c\/strong\x3e\x3cbr\x3e\x3cstrong\x3eleave：旧路由离开的动画。\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e比如，从二级页面返回首页，当你点击返回按钮后，二级页面执行的是leave的动画，首页执行的是enter的动画，2个动画执行是同时进行的。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e因为animateCls默认是normal，要让他改成right，只需要在当前组件中监听返回按钮的onClick事件，然后执行dispatch action，传入参数“right”。\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e但是这样做不是很完善，因为浏览器和app不同，浏览器有自己的返回按钮，所以你还需要监听浏览器的返回按钮。这一步我还没有完善好，相信对于熟悉监听事件的你来说，是个很容易完善的功能?，如果是做react-native，那么可以省去监听浏览器返回按钮的步骤。\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e比如我只监听了网页中的返回按钮onCLick事件。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cLink to=\x26quot;\/\x26quot; className=\x26quot;style_a\x26quot; onClick={() =\x3e handleClick(\x27right\x27)}\x3e返回首页\x3c\/Link\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lasso\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e\x26lt;\x3cspan class=\x22hljs-keyword\x22\x3eLink\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eto\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22\/\x22\x3c\/span\x3e className=\x3cspan class=\x22hljs-string\x22\x3e\x22style_a\x22\x3c\/span\x3e onClick={() =\x26gt; handleClick(\x3cspan class=\x22hljs-string\x22\x3e\x27right\x27\x3c\/span\x3e)}\x26gt;返回首页\x26lt;\/\x3cspan class=\x22hljs-keyword\x22\x3eLink\x3c\/span\x3e\x26gt;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e2、别忘了设置一个唯一的key，如果你的组件是一个列表，那么需要在map的时候设置一个key。\x3c\/p\x3e\n\x3cp\x3e整体实现方案就这么多，喜欢使用react过渡动画的上吧。\x3c\/p\x3e\n\x3cp\x3e如果你想看具体代码，在这里：\x3ca href=\x22https:\/\/github.com\/hyy1115\/react-redux-webpack2\/blob\/master\/src\/App.js\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ereact路由动画关键代码\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e如果文章对你有帮助，请点击一下推荐。\x3c\/strong\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>React系列——react 15.5+ 使用CSSTransitionGroup实现路由过渡动画</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000009687861">https://segmentfault.com/a/1190000009687861</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/2bd3gfrgiw6/" target="_blank">https://alili.tech/archive/2bd3gfrgiw6/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>