<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="关于购物车添加按钮的动画"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>关于购物车添加按钮的动画 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/ywp09abol4/",
				"appid": "1613049289050283", 
				"title": "关于购物车添加按钮的动画 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-15T02:30:12"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/t29f7wohlc/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/xu7b71hriwd/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fywp09abol4%2f&text=%e5%85%b3%e4%ba%8e%e8%b4%ad%e7%89%a9%e8%bd%a6%e6%b7%bb%e5%8a%a0%e6%8c%89%e9%92%ae%e7%9a%84%e5%8a%a8%e7%94%bb"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fywp09abol4%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fywp09abol4%2f&text=%e5%85%b3%e4%ba%8e%e8%b4%ad%e7%89%a9%e8%bd%a6%e6%b7%bb%e5%8a%a0%e6%8c%89%e9%92%ae%e7%9a%84%e5%8a%a8%e7%94%bb"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fywp09abol4%2f&title=%e5%85%b3%e4%ba%8e%e8%b4%ad%e7%89%a9%e8%bd%a6%e6%b7%bb%e5%8a%a0%e6%8c%89%e9%92%ae%e7%9a%84%e5%8a%a8%e7%94%bb"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fywp09abol4%2f&is_video=false&description=%e5%85%b3%e4%ba%8e%e8%b4%ad%e7%89%a9%e8%bd%a6%e6%b7%bb%e5%8a%a0%e6%8c%89%e9%92%ae%e7%9a%84%e5%8a%a8%e7%94%bb"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%85%b3%e4%ba%8e%e8%b4%ad%e7%89%a9%e8%bd%a6%e6%b7%bb%e5%8a%a0%e6%8c%89%e9%92%ae%e7%9a%84%e5%8a%a8%e7%94%bb&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fywp09abol4%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fywp09abol4%2f&title=%e5%85%b3%e4%ba%8e%e8%b4%ad%e7%89%a9%e8%bd%a6%e6%b7%bb%e5%8a%a0%e6%8c%89%e9%92%ae%e7%9a%84%e5%8a%a8%e7%94%bb"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fywp09abol4%2f&title=%e5%85%b3%e4%ba%8e%e8%b4%ad%e7%89%a9%e8%bd%a6%e6%b7%bb%e5%8a%a0%e6%8c%89%e9%92%ae%e7%9a%84%e5%8a%a8%e7%94%bb"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fywp09abol4%2f&title=%e5%85%b3%e4%ba%8e%e8%b4%ad%e7%89%a9%e8%bd%a6%e6%b7%bb%e5%8a%a0%e6%8c%89%e9%92%ae%e7%9a%84%e5%8a%a8%e7%94%bb"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fywp09abol4%2f&title=%e5%85%b3%e4%ba%8e%e8%b4%ad%e7%89%a9%e8%bd%a6%e6%b7%bb%e5%8a%a0%e6%8c%89%e9%92%ae%e7%9a%84%e5%8a%a8%e7%94%bb"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">关于购物车添加按钮的动画</h1><div class="meta"><div class="postdate"><time datetime="2019-01-15" itemprop="datePublished">2019-01-15</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3ehtml代码\x3c\/h2\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e生成一个动画小球的div,并且生成五个小球,五个是为了生成一定数量的小球来作为操作使用,按照小球动画的速度,一般来说五个也可以保证有足够的小球数量来运行动画\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e动画的内容分别是外层和内层,外层控制动画小球的轨道和方向,内层控制动画小球的运行状态\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e动画使用\x3ca href=\x22http:\/\/cn.vuejs.org\/v2\/guide\/transitions.html#JavaScript-\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3evue的js钩子实现\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e因为小球动画只有一个方向(只执行单方向从上到下滚落),所以只用了before-enter,enter,after-enter\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e用v-show控制小球的可见性,在动画执行期间可见,其余时候隐藏\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    \x3cdiv class=\x26quot;ball-container\x26quot;\x3e\n      \x3cdiv v-for=\x26quot;ball in balls\x26quot;\x3e\n      \/\/用了两种方式的动画,css和js钩子\n        \x3ctransition name=\x26quot;drop\x26quot; @before-enter=\x26quot;beforeDrop\x26quot; @enter=\x26quot;dropping\x26quot; @after-enter=\x26quot;afterDrop\x26quot;\x3e\n        \/\/外层动画\n          \x3cdiv class=\x26quot;ball\x26quot; v-show=\x26quot;ball.show\x26quot;\x3e\n          \/\/内层动画\n            \x3cdiv class=\x26quot;inner inner-hook\x26quot;\x3e\x3c\/div\x3e\n          \x3c\/div\x3e\n        \x3c\/transition\x3e\n      \x3c\/div\x3e\n    \x3c\/div\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e    \x26lt;div \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22ball-container\x22\x3c\/span\x3e\x26gt;\n      \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ev-for\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22ball in balls\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \/\/用了两种方式的动画,css和js钩子\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etransition\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22drop\x22\x3c\/span\x3e @\x3cspan class=\x22hljs-attr\x22\x3ebefore-enter\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22beforeDrop\x22\x3c\/span\x3e @\x3cspan class=\x22hljs-attr\x22\x3eenter\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22dropping\x22\x3c\/span\x3e @\x3cspan class=\x22hljs-attr\x22\x3eafter-enter\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22afterDrop\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \/\/外层动画\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22ball\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ev-show\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22ball.show\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n          \/\/内层动画\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22inner inner-hook\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etransition\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n    \x26lt;\x3cspan class=\x22hljs-regexp\x22\x3e\/div\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3ejs代码\x3c\/h2\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e设置了balls数组来代表五个小球\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e设置了dropBalls数组正在运行的小球\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 data(){\n      return {\n        balls: [\n          {show: false},\n          {show: false},\n          {show: false},\n          {show: false},\n          {show: false}\n        ],\n        dropBalls: []\n      }\n    },\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e data(){\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attr\x22\x3eballs\x3c\/span\x3e: [\n          {\x3cspan class=\x22hljs-attr\x22\x3eshow\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e},\n          {\x3cspan class=\x22hljs-attr\x22\x3eshow\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e},\n          {\x3cspan class=\x22hljs-attr\x22\x3eshow\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e},\n          {\x3cspan class=\x22hljs-attr\x22\x3eshow\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e},\n          {\x3cspan class=\x22hljs-attr\x22\x3eshow\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e}\n        ],\n        \x3cspan class=\x22hljs-attr\x22\x3edropBalls\x3c\/span\x3e: []\n      }\n    },\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3cp\x3e只要触发了drop事件,不止是drop事件里面的代码会执行,另外几个vue的js监听钩子也会一起按顺序执行\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e触发了drop事件\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3ebeforeDrop开始执行\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3edropping开始执行\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eafterDrop开始执行\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3edrop事件的触发可以通过点击cartcontrol组件的添加小球按钮addCart事件触发使用\x3ccode\x3e$emit\x3c\/code\x3e,也可以父组件\x3ccode\x3e this.$refs.shopcart.drop(target);\x3c\/code\x3e直接触发\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e这么做的目的是实现,在子组件cartcontrol点击之后,可以将该dom传给父组件goods然后再传给子组件shopcart,(因为目前他们之间的通道就是这样,shopcart子组件并没有导入cartcontrol子组件,所以没有直接通讯)这样就实现了多个组件之间的通讯,从而可以实现需求,例如这里就是实现点击子组件cartcontrol后添加一个动画,将小球滑落到另外一个组件shopcart\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/cn.vuejs.org\/v2\/api\/#vm-emit\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e$emit\x3c\/a\x3e是触发当前实例上的事件。附加参数都会传给监听器回调。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22methods: {\n      drop(el) { \n      \/\/触发一次事件就会将所有小球进行遍历\n        for (let i = 0; i \x3c this.balls.length; i\x2b\x2b) {\n          let ball = this.balls[i];\n          if (!ball.show) { \/\/将false的小球放到dropBalls\n            ball.show = true;\n            ball.el = el; \/\/设置小球的el属性为一个dom对象\n            this.dropBalls.push(ball); \n            return;\n          }\n        }\n      },\n\n      beforeDrop(el){ \/\/这个方法的执行是因为这是一个vue的监听事件\n        let count = this.balls.length;\n        while (count--) {\n          let ball = this.balls[count];\n          if (ball.show) {\n            let rect = ball.el.getBoundingClientRect(); \/\/获取小球的相对于视口的位移(小球高度)\n            let x = rect.left - 32;\n            let y = -(window.innerHeight - rect.top - 22); \/\/负数,因为是从左上角往下的的方向\n            el.style.display = \x27\x27; \/\/清空display\n            el.style.webkitTransform = `translate3d(0,${y}px,0)`; \n            el.style.transform = `translate3d(0,${y}px,0)`;\n            \/\/处理内层动画\n            let inner = el.getElementsByClassName(\x27inner-hook\x27)[0]; \/\/使用inner-hook类来单纯被js操作\n            inner.style.webkitTransform = `translate3d(${x}px,0,0)`;\n            inner.style.transform = `translate3d(${x}px,0,0)`;\n          }\n        }\n      },\n\n      dropping(el, done) { \/\/这个方法的执行是因为这是一个vue的监听事件\n        \/* eslint-disable no-unused-vars *\/\n        let rf = el.offsetHeight; \/\/触发重绘html\n        this.$nextTick(() =\x3e { \/\/让动画效果异步执行,提高性能\n          el.style.webkitTransform = \x27translate3d(0,0,0)\x27;\n          el.style.transform = \x27translate3d(0,0,0)\x27;\n          \/\/处理内层动画\n          let inner = el.getElementsByClassName(\x27inner-hook\x27)[0]; \/\/使用inner-hook类来单纯被js操作\n          inner.style.webkitTransform = \x27translate3d(0,0,0)\x27;\n          inner.style.transform = \x27translate3d(0,0,0)\x27;\n          el.addEventListener(\x27transitionend\x27, done); \/\/Vue为了知道过渡的完成，必须设置相应的事件监听器。\n        });\n      },\n\n      afterDrop(el) { \/\/这个方法的执行是因为这是一个vue的监听事件\n        let ball = this.dropBalls.shift(); \/\/完成一次动画就删除一个dropBalls的小球\n        if (ball) {\n          ball.show = false;\n          el.style.display = \x27none\x27; \/\/隐藏小球\n        }\n      }\n    }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3emethods: {\n      drop(el) { \n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/触发一次事件就会将所有小球进行遍历\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.balls.length; i\x2b\x2b) {\n          \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e ball = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.balls[i];\n          \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!ball.show) { \x3cspan class=\x22hljs-comment\x22\x3e\/\/将false的小球放到dropBalls\x3c\/span\x3e\n            ball.show = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n            ball.el = el; \x3cspan class=\x22hljs-comment\x22\x3e\/\/设置小球的el属性为一个dom对象\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.dropBalls.push(ball); \n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n          }\n        }\n      },\n\n      beforeDrop(el){ \x3cspan class=\x22hljs-comment\x22\x3e\/\/这个方法的执行是因为这是一个vue的监听事件\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e count = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.balls.length;\n        \x3cspan class=\x22hljs-keyword\x22\x3ewhile\x3c\/span\x3e (count--) {\n          \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e ball = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.balls[count];\n          \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (ball.show) {\n            \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e rect = ball.el.getBoundingClientRect(); \x3cspan class=\x22hljs-comment\x22\x3e\/\/获取小球的相对于视口的位移(小球高度)\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e x = rect.left - \x3cspan class=\x22hljs-number\x22\x3e32\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e y = -(\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.innerHeight - rect.top - \x3cspan class=\x22hljs-number\x22\x3e22\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/负数,因为是从左上角往下的的方向\x3c\/span\x3e\n            el.style.display = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/清空display\x3c\/span\x3e\n            el.style.webkitTransform = \x3cspan class=\x22hljs-string\x22\x3e`translate3d(0,\x3cspan class=\x22hljs-subst\x22\x3e${y}\x3c\/span\x3epx,0)`\x3c\/span\x3e; \n            el.style.transform = \x3cspan class=\x22hljs-string\x22\x3e`translate3d(0,\x3cspan class=\x22hljs-subst\x22\x3e${y}\x3c\/span\x3epx,0)`\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/处理内层动画\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e inner = el.getElementsByClassName(\x3cspan class=\x22hljs-string\x22\x3e\x27inner-hook\x27\x3c\/span\x3e)[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e]; \x3cspan class=\x22hljs-comment\x22\x3e\/\/使用inner-hook类来单纯被js操作\x3c\/span\x3e\n            inner.style.webkitTransform = \x3cspan class=\x22hljs-string\x22\x3e`translate3d(\x3cspan class=\x22hljs-subst\x22\x3e${x}\x3c\/span\x3epx,0,0)`\x3c\/span\x3e;\n            inner.style.transform = \x3cspan class=\x22hljs-string\x22\x3e`translate3d(\x3cspan class=\x22hljs-subst\x22\x3e${x}\x3c\/span\x3epx,0,0)`\x3c\/span\x3e;\n          }\n        }\n      },\n\n      dropping(el, done) { \x3cspan class=\x22hljs-comment\x22\x3e\/\/这个方法的执行是因为这是一个vue的监听事件\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/* eslint-disable no-unused-vars *\/\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e rf = el.offsetHeight; \x3cspan class=\x22hljs-comment\x22\x3e\/\/触发重绘html\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$nextTick(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e { \x3cspan class=\x22hljs-comment\x22\x3e\/\/让动画效果异步执行,提高性能\x3c\/span\x3e\n          el.style.webkitTransform = \x3cspan class=\x22hljs-string\x22\x3e\x27translate3d(0,0,0)\x27\x3c\/span\x3e;\n          el.style.transform = \x3cspan class=\x22hljs-string\x22\x3e\x27translate3d(0,0,0)\x27\x3c\/span\x3e;\n          \x3cspan class=\x22hljs-comment\x22\x3e\/\/处理内层动画\x3c\/span\x3e\n          \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e inner = el.getElementsByClassName(\x3cspan class=\x22hljs-string\x22\x3e\x27inner-hook\x27\x3c\/span\x3e)[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e]; \x3cspan class=\x22hljs-comment\x22\x3e\/\/使用inner-hook类来单纯被js操作\x3c\/span\x3e\n          inner.style.webkitTransform = \x3cspan class=\x22hljs-string\x22\x3e\x27translate3d(0,0,0)\x27\x3c\/span\x3e;\n          inner.style.transform = \x3cspan class=\x22hljs-string\x22\x3e\x27translate3d(0,0,0)\x27\x3c\/span\x3e;\n          el.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27transitionend\x27\x3c\/span\x3e, done); \x3cspan class=\x22hljs-comment\x22\x3e\/\/Vue为了知道过渡的完成，必须设置相应的事件监听器。\x3c\/span\x3e\n        });\n      },\n\n      afterDrop(el) { \x3cspan class=\x22hljs-comment\x22\x3e\/\/这个方法的执行是因为这是一个vue的监听事件\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e ball = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.dropBalls.shift(); \x3cspan class=\x22hljs-comment\x22\x3e\/\/完成一次动画就删除一个dropBalls的小球\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (ball) {\n          ball.show = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e;\n          el.style.display = \x3cspan class=\x22hljs-string\x22\x3e\x27none\x27\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/隐藏小球\x3c\/span\x3e\n        }\n      }\n    }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/cn.vuejs.org\/v2\/guide\/transitions.html#\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e关于transitionend\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e关于drop方法,是实现每一个ball的show属性和el属性处理,并且点击一次会自动将一个小球放到dropBalls数组里面,放到里面就代表的是一个小球已经被开始执行动画,但是由于动画是异步的,所以先主动设置.\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3e关于getBoundingClientRect(位移的计算是从左上角开始)\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e使用getBoundingClientRect获取到当前元素的坐标,然后需要位移的left减去元素的宽获取真正的最终位移x坐标\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e使用getBoundingClientRect获取到当前元素的坐标,然后需要当前屏幕的高度减去元素的top再减去元素本身的高度获取到真正的最终位移y坐标,并且这个是负数,因为是从左上角往下的方向\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3e关于html重绘\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e因为浏览器对于重绘是有要求并且是有队列完成的,这是主要为了性能,虽然动画隐藏了小球\x3ccode\x3edisplay none\x3c\/code\x3e,但没有触发html重绘,或者说没有立即触发html重绘,所以需要手动\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3elet rf = el.offsetHeight;\x3c\/code\x3e 这是一个手动触发html重绘的方法\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/www.ruanyifeng.com\/blog\/2015\/09\/web-page-performance-in-depth.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e网页性能管理详解\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/www.cnblogs.com\/zichi\/p\/4720000.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e高性能JavaScript 重排与重绘\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3ecss代码\x3c\/h2\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    .ball-container\n      .ball\n        position: fixed \/\/小球动画必须脱离html布局流\n        left: 32px\n        bottom: 22px\n        z-index: 200 \n        transition: all 0.4s cubic-bezier(0.49, -0.29, 0.75, 0.41)\n        .inner\n          width: 16px\n          height: 16px\n          border-radius: 50%\n          background: rgb(0, 160, 220)\n          transition: all 0.4s linear\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e    .ball-container\n      .ball\n        position: fixed \x3cspan class=\x22hljs-comment\x22\x3e\/\/小球动画必须脱离html布局流\x3c\/span\x3e\n        left: \x3cspan class=\x22hljs-number\x22\x3e32\x3c\/span\x3epx\n        bottom: \x3cspan class=\x22hljs-number\x22\x3e22\x3c\/span\x3epx\n        z-index: \x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e \n        transition: all \x3cspan class=\x22hljs-number\x22\x3e0.4\x3c\/span\x3es cubic-bezier(\x3cspan class=\x22hljs-number\x22\x3e0.49\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e-0.29\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0.75\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0.41\x3c\/span\x3e)\n        .inner\n          width: \x3cspan class=\x22hljs-number\x22\x3e16\x3c\/span\x3epx\n          height: \x3cspan class=\x22hljs-number\x22\x3e16\x3c\/span\x3epx\n          border-radius: \x3cspan class=\x22hljs-number\x22\x3e50\x3c\/span\x3e%\n          background: rgb(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e160\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e220\x3c\/span\x3e)\n          transition: all \x3cspan class=\x22hljs-number\x22\x3e0.4\x3c\/span\x3es linear\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e关于\x3ccode\x3ecubic-bezier(0.49, -0.29, 0.75, 0.41)\x3c\/code\x3e,是动画抛物曲线(贝塞尔曲线)的配置,基于css3实现,\x3ca href=\x22http:\/\/cubic-bezier.com\/#.17,.67,.83,.67\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/cubic-bezier.com\/#.17,.67,.83,.67\x3c\/a\x3e,参考\x3ca href=\x22http:\/\/www.zhangxinxu.com\/wordpress\/2013\/08\/%E8%B4%9D%E5%A1%9E%E5%B0%94%E6%9B%B2%E7%BA%BF-cubic-bezier-css3%E5%8A%A8%E7%94%BB-svg-canvas\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e贝塞尔曲线与CSS3动画、SVG和canvas的基情\x3c\/a\x3e ,至于抛物线放在外层就是为了控制内层的元素的轨道和方向的.\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>关于购物车添加按钮的动画</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000009294321">https://segmentfault.com/a/1190000009294321</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/ywp09abol4/" target="_blank">https://alili.tech/archive/ywp09abol4/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>