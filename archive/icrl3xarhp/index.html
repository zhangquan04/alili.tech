<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="使用immutable优化React"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>使用immutable优化React | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/icrl3xarhp/",
				"appid": "1613049289050283", 
				"title": "使用immutable优化React | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-06T02:30:10"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/9chukt8reg/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/qnkq2h1jixj/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2ficrl3xarhp%2f&text=%e4%bd%bf%e7%94%a8immutable%e4%bc%98%e5%8c%96React"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2ficrl3xarhp%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2ficrl3xarhp%2f&text=%e4%bd%bf%e7%94%a8immutable%e4%bc%98%e5%8c%96React"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2ficrl3xarhp%2f&title=%e4%bd%bf%e7%94%a8immutable%e4%bc%98%e5%8c%96React"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2ficrl3xarhp%2f&is_video=false&description=%e4%bd%bf%e7%94%a8immutable%e4%bc%98%e5%8c%96React"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e4%bd%bf%e7%94%a8immutable%e4%bc%98%e5%8c%96React&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2ficrl3xarhp%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2ficrl3xarhp%2f&title=%e4%bd%bf%e7%94%a8immutable%e4%bc%98%e5%8c%96React"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2ficrl3xarhp%2f&title=%e4%bd%bf%e7%94%a8immutable%e4%bc%98%e5%8c%96React"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2ficrl3xarhp%2f&title=%e4%bd%bf%e7%94%a8immutable%e4%bc%98%e5%8c%96React"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2ficrl3xarhp%2f&title=%e4%bd%bf%e7%94%a8immutable%e4%bc%98%e5%8c%96React"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">使用immutable优化React</h1><div class="meta"><div class="postdate"><time datetime="2019-01-06" itemprop="datePublished">2019-01-06</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e\x3cp\x3e文章同步于Github \x3ca href=\x22https:\/\/github.com\/Pines-Cheng\/blog\/issues\/13\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ePines-Cheng\/blog\x3c\/a\x3e\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3eReact在减少重复渲染方面确实是有一套独特的处理办法，那就是虚拟DOM，但显然在首次渲染的时候React绝无可能超越原生的速度，或者一定能将其它的框架比下去。尤其是在优化前的React，每次数据变动都会执行render，大大影响了性能，特别是在移动端。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3eReact 默认的渲染行为\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e初始化渲染\x3c\/h3\x3e\n\x3cp\x3e在初始化渲染时，我们需要渲染整个应用 \x3cbr\x3e（绿色 ＝ 已渲染节点）\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010438092\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010438092\x22 alt=\x22image\x22 title=\x22image\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e提出改变\x3c\/h3\x3e\n\x3cp\x3e我们想更新一部分数据。这些改变只和一个叶子节点相关（绿色的）\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010438093\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010438093\x22 alt=\x22image\x22 title=\x22image\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e理想更新\x3c\/h3\x3e\n\x3cp\x3e我们只想渲染通向叶子节点的关键路径上的这几个节点（绿色的）\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010438094\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010438094\x22 alt=\x22image\x22 title=\x22image\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e默认行为\x3c\/h3\x3e\n\x3cp\x3e如果你不告诉 React 别这样做，它便会如此 \x3cbr\x3e（橘黄色 ＝ 浪费的渲染）\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010438095\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010438095\x22 alt=\x22image\x22 title=\x22image\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e从上图可以看见，组件除了必要渲染的三个节点外，还渲染了其他不必要渲染的节点，这对性能是一个很大的浪费。如果对于复杂的页面，这将导致页面的整体体验效果非常差。因此要提高组件的性能，就应该想尽一切方法减少不必要的渲染。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3eReact的生命周期\x3c\/h2\x3e\n\x3cp\x3eReact的生命周期如下，还没熟悉的同学可以去熟悉一下。\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000005599256\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000005599256\x22 alt=\x22image\x22 title=\x22image\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3eshouldComponentUpdate\x3c\/h2\x3e\n\x3cp\x3e因为其中的 \x3ccode\x3eshouldComponentUpdate\x3c\/code\x3e 是优化的关键。React的重复渲染优化的核心其实就是在shouldComponentUpdate里面做数据比较。在优化之前，\x3ccode\x3eshouldComponentUpdate\x3c\/code\x3e是默认返回true的，这导致任何时候触发任何的数据变化都会使component重新渲染。这必然会导致资源的浪费和性能的低下——你可能会感觉比较原生的响应更慢。\x3c\/p\x3e\n\x3cp\x3eReact性能优化的关键在于\x3ccode\x3eshouldComponentUpdate\x3c\/code\x3e，\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22https:\/\/segmentfault.com\/img\/bVApam?w=555\x26amp;h=371\x22 src=\x22https:\/\/static.alili.techhttps:\/\/segmentfault.com\/img\/bVApam?w=555\x26amp;h=371\x22 alt=\x22image\x22 title=\x22image\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e在上面的示例中，因为 C2 的 \x3ccode\x3eshouldComponentUpdate\x3c\/code\x3e 返回 false，React 就不需要生成新的虚拟 DOM，也就不需要更新 DOM，注意 React 甚至不需要调用 C4 和 C5 的 \x3ccode\x3eshouldComponentUpdate\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3eC1 和 C3 的 \x3ccode\x3eshouldComponentUpdate\x3c\/code\x3e 返回 true，所以 React 需要向下到叶子节点检查它们，C6 返回 true，因为虚拟 DOM 不相等，需要更新 DOM。最后感兴趣的是 C8，对于这个节点，React 需要计算虚拟 DOM，但是因为它和旧的相等，所以不需要更新 DOM。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3eReact.PureComponent\x3c\/h2\x3e\n\x3cp\x3e在传入组件的props和state只有一层时，我们可以直接使用\x3ca href=\x22https:\/\/facebook.github.io\/react\/docs\/react-api.html#react.purecomponent\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e React.PureComponent\x3c\/a\x3e，它会自动帮我们进行浅比较(shallow-compare)，从而控制shouldComponentUpdate的返回值。\x3c\/p\x3e\n\x3cp\x3e但是，当传入props或state不止一层，或者未array和object时，浅比较(\x3ccode\x3eshallow-compare\x3c\/code\x3e)就失效了。当然我们也可以在 \x3ccode\x3eshouldComponentUpdate()\x3c\/code\x3e 中使用使用 \x3ccode\x3edeepCopy\x3c\/code\x3e 和 \x3ccode\x3edeepCompare\x3c\/code\x3e 来避免无必要的 \x3ccode\x3erender()\x3c\/code\x3e，但 \x3ccode\x3edeepCopy\x3c\/code\x3e 和 \x3ccode\x3edeepCompare \x3c\/code\x3e一般都是非常耗性能的。这个时候我们就需要 \x3ccode\x3eImmutable\x3c\/code\x3e。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3eImmutable\x3c\/h2\x3e\n\x3cp\x3eJavaScript 中的对象一般是可变的（Mutable），因为使用了引用赋值，新的对象简单的引用了原始对象，改变新的对象将影响到原始对象。如\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22foo={a: 1}; \nbar=foo; \nbar.a=2\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3efoo={\x3cspan class=\x22hljs-attr\x22\x3ea\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e}; \nbar=foo; \nbar.a=\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e你会发现此时 foo.a 也被改成了 2。虽然这样做可以节约内存，但当应用复杂后，这就造成了非常大的隐患，Mutable 带来的优点变得得不偿失。为了解决这个问题，一般的做法是使用 \x3ccode\x3eshallowCopy\x3c\/code\x3e（浅拷贝）或 \x3ccode\x3edeepCopy\x3c\/code\x3e（深拷贝）来避免被修改，但这样做造成了 CPU 和内存的浪费。\x3c\/p\x3e\n\x3cp\x3e而Immutable 可以很好地解决这些问题。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader9\x22\x3e什么是Immutable Data\x3c\/h3\x3e\n\x3cp\x3e\x3ccode\x3eImmutable Data\x3c\/code\x3e 就是一旦创建，就不能再被更改的数据。对 Immutable 对象的任何修改或添加删除操作都会返回一个新的 Immutable 对象。Immutable 实现的原理是 \x3ccode\x3ePersistent Data Structure\x3c\/code\x3e（持久化数据结构），也就是使用旧数据创建新数据时，要保证旧数据同时可用且不变。同时为了避免 deepCopy 把所有节点都复制一遍带来的性能损耗，Immutable 使用了 \x3ccode\x3eStructural Sharing\x3c\/code\x3e（结构共享），即如果对象树中一个节点发生变化，只修改这个节点和受它影响的父节点，其它节点则进行共享。\x3c\/p\x3e\n\x3cp\x3e可以看看下面这个经典的动画：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000009332820\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000009332820\x22 alt=\x22image\x22 title=\x22image\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader10\x22\x3eimmutable.js\x3c\/h3\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/facebook\/immutable-js\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eImmutable.js\x3c\/a\x3e本质上是一个JavaScript的持久化数据结构的库 ，但是由于同期的React太火，并且和React在性能优化方面天衣无缝的配合，导致大家常常把它们两者绑定在一起。\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/facebook\/immutable-js\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eImmutable.js\x3c\/a\x3e是Facebook 工程师 Lee Byron 花费 3 年时间打造，但没有被默认放到 React 工具集里（React 提供了简化的 Helper）。它内部实现了一套完整的 \x3ccode\x3ePersistent Data Structure\x3c\/code\x3e，且数据结构和方法非常丰富（完全不像JS出身的好不好）。像 Collection、List、Map、Set、Record、Seq。有非常全面的map、filter、groupBy、reduce、find函数式操作方法。同时 API 也尽量与 Object 或 Array 类似。 Immutable.js 压缩后下载有 16K。\x3c\/p\x3e\n\x3cp\x3e其中有 3 种最重要的数据结构说明一下：（Java 程序员应该最熟悉了）\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3eMap\x3c\/code\x3e：键值对集合，对应于 Object，ES6 也有专门的 Map 对象\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3eList\x3c\/code\x3e：有序可重复的列表，对应于 Array\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3eSet\x3c\/code\x3e：无序且不可重复的列表\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e简单示例\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\nimport { Map } from \x26quot;immutable\x26quot;;\nconst map1 = Map({ a: 1, b: 2, c: 3 });\nconst map2 = map1.set(\x27b\x27, 50);\nmap1.get(\x27b\x27); \/\/ 2\nmap2.get(\x27b\x27); \/\/ 50\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e { \x3cspan class=\x22hljs-built_in\x22\x3eMap\x3c\/span\x3e } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22immutable\x22\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e map1 = \x3cspan class=\x22hljs-built_in\x22\x3eMap\x3c\/span\x3e({ \x3cspan class=\x22hljs-attr\x22\x3ea\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3eb\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3ec\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e });\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e map2 = map1.set(\x3cspan class=\x22hljs-string\x22\x3e\x27b\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e50\x3c\/span\x3e);\nmap1.get(\x3cspan class=\x22hljs-string\x22\x3e\x27b\x27\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 2\x3c\/span\x3e\nmap2.get(\x3cspan class=\x22hljs-string\x22\x3e\x27b\x27\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 50\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader11\x22\x3eseamless-immutable\x3c\/h3\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/rtfeldman\/seamless-immutable\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eseamless-immutable\x3c\/a\x3e是另一套持久化数据结构的库，它并没有实现完整的 \x3ccode\x3ePersistent Data Structure\x3c\/code\x3e，而是使用 \x3ccode\x3eObject.defineProperty\x3c\/code\x3e（因此只能在 IE9 及以上使用）扩展了 JavaScript 的 Array 和 Object 对象来实现，只支持 Array 和 Object 两种数据类型，API 基于与 Array 和 Object ，因此许多不用改变自己的使用习惯，对代码的入侵非常小。同时，它的代码库也非常小，压缩后下载只有 2K。\x3c\/p\x3e\n\x3cp\x3e简单示例\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 使用  seamless-immutable.js 后\nimport Immutable from \x27seamless-immutable\x27;\nvar array = Immutable([\x26quot;totally\x26quot;, \x26quot;immutable\x26quot;, {hammer: \x26quot;Can’t Touch This\x26quot;}]);\n\narray[1] = \x26quot;I\x27m going to mutate you!\x26quot;\narray[1] \/\/ \x26quot;immutable\x26quot;\n\narray[2].hammer = \x26quot;hm, surely I can mutate this nested object...\x26quot;\narray[2].hammer \/\/ \x26quot;Can’t Touch This\x26quot;\n\nfor (var index in array) { console.log(array[index]); }\n\/\/ \x26quot;totally\x26quot;\n\/\/ \x26quot;immutable\x26quot;\n\/\/ { hammer: \x27Can’t Touch This\x27 }\n\nJSON.stringify(array) \/\/ \x27[\x26quot;totally\x26quot;,\x26quot;immutable\x26quot;,{\x26quot;hammer\x26quot;:\x26quot;Can’t Touch This\x26quot;}]\x27\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 使用  seamless-immutable.js 后\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Immutable \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27seamless-immutable\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e array = Immutable([\x3cspan class=\x22hljs-string\x22\x3e\x22totally\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22immutable\x22\x3c\/span\x3e, {\x3cspan class=\x22hljs-attr\x22\x3ehammer\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22Can’t Touch This\x22\x3c\/span\x3e}]);\n\narray[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e] = \x3cspan class=\x22hljs-string\x22\x3e\x22I\x27m going to mutate you!\x22\x3c\/span\x3e\narray[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e] \x3cspan class=\x22hljs-comment\x22\x3e\/\/ \x22immutable\x22\x3c\/span\x3e\n\narray[\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e].hammer = \x3cspan class=\x22hljs-string\x22\x3e\x22hm, surely I can mutate this nested object...\x22\x3c\/span\x3e\narray[\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e].hammer \x3cspan class=\x22hljs-comment\x22\x3e\/\/ \x22Can’t Touch This\x22\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e index \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e array) { \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(array[index]); }\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ \x22totally\x22\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ \x22immutable\x22\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ { hammer: \x27Can’t Touch This\x27 }\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-built_in\x22\x3eJSON\x3c\/span\x3e.stringify(array) \x3cspan class=\x22hljs-comment\x22\x3e\/\/ \x27[\x22totally\x22,\x22immutable\x22,{\x22hammer\x22:\x22Can’t Touch This\x22}]\x27\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/rtfeldman\/seamless-immutable\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eseamless-immutable\x3c\/a\x3e的实现依赖于\x3ca href=\x22http:\/\/kangax.github.io\/compat-table\/es5\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eECMAScript 5 \x3c\/a\x3e的一些特性，如\x3ca href=\x22https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/JavaScript\/Reference\/Global_Objects\/Object\/defineProperty\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eObject.defineProperty\x3c\/a\x3e 和 \x3ca href=\x22https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/JavaScript\/Reference\/Global_Objects\/Object\/freeze\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eObject.freeze\x3c\/a\x3e，因此会在浏览器兼容性方面有所欠缺：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010438096\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010438096\x22 alt=\x22image\x22 title=\x22image\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e不过这不是问题啦，可以使用 polyfill \x3ca href=\x22https:\/\/github.com\/es-shims\/es5-shim\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ees-shims\/es5-shim\x3c\/a\x3e 来解决。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader12\x22\x3e对比\x3c\/h2\x3e\n\x3cp\x3e虽然 \x3ccode\x3eImmutable.js\x3c\/code\x3e 尽量尝试把 API 设计的原生对象类似，有的时候还是很难区别到底是 Immutable 对象还是原生对象，容易混淆操作。\x3c\/p\x3e\n\x3cp\x3eImmutable 中的 Map 和 List 虽对应原生 Object 和 Array，但操作非常不同，比如你要用 \x3ccode\x3emap.get(\x27key\x27)\x3c\/code\x3e而不是 \x3ccode\x3emap.key\x3c\/code\x3e，\x3ccode\x3earray.get(0)\x3c\/code\x3e 而不是 \x3ccode\x3earray[0]\x3c\/code\x3e。另外 Immutable 每次修改都会返回新对象，也很容易忘记赋值。\x3c\/p\x3e\n\x3cp\x3e当使用外部库的时候，一般需要使用原生对象，也很容易忘记转换。\x3c\/p\x3e\n\x3cp\x3e当然也有一些办法来避免类似问题发生：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e使用 Flow 或 TypeScript 这类有静态类型检查的工具\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e约定变量命名规则：如所有 Immutable 类型对象以 $$ 开头。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e使用 \x3ccode\x3eImmutable.fromJS\x3c\/code\x3e 而不是 \x3ccode\x3eImmutable.Map\x3c\/code\x3e 或 \x3ccode\x3eImmutable.List\x3c\/code\x3e 来创建对象，这样可以避免 Immutable 和原生对象间的混用。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e但是还有一个致命的问题是，对现有代码的改造，使用 Immutable.js 成本实在太大。\x3c\/p\x3e\n\x3cp\x3e而\x3ccode\x3eseamless-immutable\x3c\/code\x3e虽然数据结构和API不如\x3ccode\x3eImmutable.js\x3c\/code\x3e丰富，但是对于只想使用Immutable Data来对React进行优化以避免重复渲染的我们来说，已经是绰绰有余了。而且Array和Object原生的方法等都可以直接使用，原有项目改动极小。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader13\x22\x3eReact中使用\x3c\/h2\x3e\n\x3cp\x3e由于\x3ca href=\x22https:\/\/github.com\/rtfeldman\/seamless-immutable\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eseamless-immutable\x3c\/a\x3e的实现依赖于\x3ca href=\x22http:\/\/kangax.github.io\/compat-table\/es5\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eECMAScript 5 \x3c\/a\x3e和原生的Array、Object天然的兼容性，导致其在React中的使用非常简单，只要注意三点就可以达到效果:\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader14\x22\x3e初始化state\x3c\/h3\x3e\n\x3cp\x3e初始化state数据的时候，使用Immutable的初始化方式。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import Immutable from \x27seamless-immutable\x27;\n\nstate: {\n    orderList: Immutable([]),\n  }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Immutable \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27seamless-immutable\x27\x3c\/span\x3e;\n\nstate: {\n    \x3cspan class=\x22hljs-attr\x22\x3eorderList\x3c\/span\x3e: Immutable([]),\n  }\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader15\x22\x3e修改state数据\x3c\/h3\x3e\n\x3cp\x3e修改state数据的时候，同样也要注意：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22saveOrderList(state, {payload: items}) {\n      return {...state, orderList: Immutable(items)};\n    }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3esaveOrderList(state, {\x3cspan class=\x22hljs-attr\x22\x3epayload\x3c\/span\x3e: items}) {\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {...state, \x3cspan class=\x22hljs-attr\x22\x3eorderList\x3c\/span\x3e: Immutable(items)};\n    }\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader16\x22\x3eshouldComponentUpdate\x3c\/h3\x3e\n\x3cp\x3e使用\x3ca href=\x22https:\/\/github.com\/felixgirault\/pure-render-decorator\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3epure-render-decorator\x3c\/a\x3e，真是方便、快捷又优雅。当然，由于decorator属于ES7的特性，babel还需要自己配置。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import React from \x27react\x27;\nimport pureRender from \x27pure-render-decorator\x27;\n\n@pureRender\nclass OrderListView extends React.Component {\n  render() {\n    const {orderList} = this.props;\n    return (\n      \x3cdiv\x3e\n        {\n          orderList.map((item) =\x3e {\n            return (\n              \x3cdiv key={item.orderNum}\x3e\n                \x3cdiv\x3e{item.orderNum}\x3c\/div\x3e\n                \x3cdiv\x3e{item.createTime}\x3c\/div\x3e\n                \x3cdiv\x3e{item.contact}\x3c\/div\x3e\n                \x3chr\/\x3e\n              \x3c\/div\x3e\n            );\n          })\n        }\n      \x3c\/div\x3e\n    );\n  }\n}\n\nexport default OrderListView;\n\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e React \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e pureRender \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27pure-render-decorator\x27\x3c\/span\x3e;\n\n@pureRender\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eOrderListView\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eReact\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n  render() {\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e {orderList} = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props;\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n      \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        {\n          orderList.map((item) =\x26gt; {\n            return (\n              \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ekey\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{item.orderNum}\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e{item.orderNum}\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e{item.createTime}\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e{item.contact}\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehr\x3c\/span\x3e\/\x26gt;\x3c\/span\x3e\n              \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            );\n          })\n        }\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n    );\n  }\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e OrderListView;\n\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e怎么样，传说中的React的SCU的优化就是这么简单，赶紧去试试吧。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader17\x22\x3e参考\x3c\/h2\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/medium.com\/@alexandereardon\/performance-optimisations-for-react-applications-b453c597b191#.sy0kchkl8\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ePerformance optimisations for React applications\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/camsong\/blog\/issues\/3\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eImmutable 详解及 React 中实践 \x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/lcxfs1991\/blog\/issues\/8\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eReact移动web极致优化\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>使用immutable优化React</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000010438089">https://segmentfault.com/a/1190000010438089</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/icrl3xarhp/" target="_blank">https://alili.tech/archive/icrl3xarhp/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>