<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="【日常填坑】之ajax请求laravel的api接口"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>【日常填坑】之ajax请求laravel的api接口 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/8q7i5jlm1tl/",
				"appid": "1613049289050283", 
				"title": "【日常填坑】之ajax请求laravel的api接口 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-26T02:30:18"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/xx37hiz31k8/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/4nh0dh6zpy8/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f8q7i5jlm1tl%2f&text=%e3%80%90%e6%97%a5%e5%b8%b8%e5%a1%ab%e5%9d%91%e3%80%91%e4%b9%8bajax%e8%af%b7%e6%b1%82laravel%e7%9a%84api%e6%8e%a5%e5%8f%a3"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f8q7i5jlm1tl%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f8q7i5jlm1tl%2f&text=%e3%80%90%e6%97%a5%e5%b8%b8%e5%a1%ab%e5%9d%91%e3%80%91%e4%b9%8bajax%e8%af%b7%e6%b1%82laravel%e7%9a%84api%e6%8e%a5%e5%8f%a3"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f8q7i5jlm1tl%2f&title=%e3%80%90%e6%97%a5%e5%b8%b8%e5%a1%ab%e5%9d%91%e3%80%91%e4%b9%8bajax%e8%af%b7%e6%b1%82laravel%e7%9a%84api%e6%8e%a5%e5%8f%a3"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f8q7i5jlm1tl%2f&is_video=false&description=%e3%80%90%e6%97%a5%e5%b8%b8%e5%a1%ab%e5%9d%91%e3%80%91%e4%b9%8bajax%e8%af%b7%e6%b1%82laravel%e7%9a%84api%e6%8e%a5%e5%8f%a3"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e3%80%90%e6%97%a5%e5%b8%b8%e5%a1%ab%e5%9d%91%e3%80%91%e4%b9%8bajax%e8%af%b7%e6%b1%82laravel%e7%9a%84api%e6%8e%a5%e5%8f%a3&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f8q7i5jlm1tl%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f8q7i5jlm1tl%2f&title=%e3%80%90%e6%97%a5%e5%b8%b8%e5%a1%ab%e5%9d%91%e3%80%91%e4%b9%8bajax%e8%af%b7%e6%b1%82laravel%e7%9a%84api%e6%8e%a5%e5%8f%a3"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f8q7i5jlm1tl%2f&title=%e3%80%90%e6%97%a5%e5%b8%b8%e5%a1%ab%e5%9d%91%e3%80%91%e4%b9%8bajax%e8%af%b7%e6%b1%82laravel%e7%9a%84api%e6%8e%a5%e5%8f%a3"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f8q7i5jlm1tl%2f&title=%e3%80%90%e6%97%a5%e5%b8%b8%e5%a1%ab%e5%9d%91%e3%80%91%e4%b9%8bajax%e8%af%b7%e6%b1%82laravel%e7%9a%84api%e6%8e%a5%e5%8f%a3"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f8q7i5jlm1tl%2f&title=%e3%80%90%e6%97%a5%e5%b8%b8%e5%a1%ab%e5%9d%91%e3%80%91%e4%b9%8bajax%e8%af%b7%e6%b1%82laravel%e7%9a%84api%e6%8e%a5%e5%8f%a3"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">【日常填坑】之ajax请求laravel的api接口</h1><div class="meta"><div class="postdate"><time datetime="2019-01-26" itemprop="datePublished">2019-01-26</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch3 id=\x22articleHeader0\x22\x3e关于作者\x3c\/h3\x3e\n\x3cblockquote\x3e\n\x3cp\x3e程序开发人员，不拘泥于语言与技术，目前主要从事PHP和前端开发，使用Laravel和VueJs，App端使用Apicloud混合式开发。合适和够用是最完美的追求。\x3c\/p\x3e\n\x3cp\x3e个人网站：\x3ca href=\x22http:\/\/www.linganmin.cn\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/www.linganmin.cn\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e最近刚写了一个手机在线播放的H5电影站：\x3ca href=\x22http:\/\/www.ifilm.ltd\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/www.ifilm.ltd\x3c\/a\x3e\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e日常填坑手记\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e关于Larave扩展\x3ccode\x3elaravel-cors\x3c\/code\x3e使用的\x3c\/h3\x3e\n\x3cp\x3e\x3ccode\x3elaravel-cors\x3c\/code\x3e的作用是用于解决浏览器跨域的问题\x3c\/p\x3e\n\x3col\x3e\x3cli\x3e\x3cp\x3e安装\x3c\/p\x3e\x3c\/li\x3e\x3c\/ol\x3e\n\x3cp\x3e在终端执行安装命令如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22composer require barryvdh\/laravel-cors\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3ecomposer require barryvdh\/laravel-cors\x3c\/code\x3e\x3c\/pre\x3e\n\x3col\x3e\x3cli\x3e\x3cp\x3e添加服务提供商\x3c\/p\x3e\x3c\/li\x3e\x3c\/ol\x3e\n\x3cp\x3e在Laravel配置文件\x3ccode\x3eapp.php\x3c\/code\x3e的\x3ccode\x3eproviders\x3c\/code\x3e数组中添加如下配置：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22Barryvdh\\Cors\\ServiceProvider::class,\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22json hljs\x22\x3e\x3ccode class=\x22json\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3eBarryvdh\\Cors\\ServiceProvider::class,\x3c\/code\x3e\x3c\/pre\x3e\n\x3col\x3e\x3cli\x3e\x3cp\x3e发布配置文件\x3c\/p\x3e\x3c\/li\x3e\x3c\/ol\x3e\n\x3cp\x3e执行在终端执行发布配置文件命令如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22php artisan vendor:publish --provider=\x26quot;Barryvdh\\Cors\\ServiceProvider\x26quot;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs groovy\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3ephp artisan \x3cspan class=\x22hljs-string\x22\x3evendor:\x3c\/span\x3epublish --provider=\x3cspan class=\x22hljs-string\x22\x3e\x22Barryvdh\\Cors\\ServiceProvider\x22\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e执行后会在laravel目录下的config目录中新增\x3ccode\x3ecors.php\x3c\/code\x3e配置文件，如下图\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22http:\/\/ww1.sinaimg.cn\/large\/6aedb651ly1fcz9pr2tn2j208s0cu0sx\x22 src=\x22https:\/\/static.alili.techhttp:\/\/ww1.sinaimg.cn\/large\/6aedb651ly1fcz9pr2tn2j208s0cu0sx\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e至此\x3ccode\x3elaravel-Cors\x3c\/code\x3e安装完成。\x3c\/p\x3e\n\x3ch4\x3e备注\x3c\/h4\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e什么是跨域\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e跨域是指从一个域名的网页去请求另一个域名的资源。比如从www.baidu.com 页面去请求 www.google.com 的资源。跨域的严格一点的定义是：只要 协议，域名，端口有任何一个的不同，就被当作是跨域\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e为什么浏览器要限制跨域访问\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e原因就是安全问题：如果一个网页可以随意地访问另外一个网站的资源，那么就有可能在客户完全不知情的情况下出现安全问题。\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e为什么要跨域\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e既然有安全问题，那为什么又要跨域呢？ 有时公司内部有多个不同的子域，比如一个是b.a.com ,而应用是放在c.a.com , 这时想从b.a.com去访问 location.company.com 的资源就属于跨域。\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e如何解决跨域问题\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e跨域访问需要用到两样东东，一个是JSON，一种基于文本的传输协议；一种是JSONP，一群码农想出来的跨域解决方案。\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e服务端需要做的\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e服务端要检查访问的请求参数，如果没有callback，则可以按照之前的流程走；如果带着callback参数，则需要将返回的结果包装在callback里面。\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e客户端（浏览器）需要做的\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e客户端可以多种方式可以实现JSONP的调用\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3elarave-cors做了什么\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3eCORS是一个W3C标准，全称是\x22跨域资源共享\x22（Cross-origin resource sharing）。\x3cbr\x3e它允许浏览器向跨源服务器，发出XMLHttpRequest请求，从而克服了AJAX只能同源使用的限制。\x3cbr\x3e\x3ccode\x3elaravel-cors\x3c\/code\x3e官方介绍入下：\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3eThe \x3ccode\x3elaravel-cors\x3c\/code\x3e package allows you to send Cross-Origin Resource Sharing headers with ACL-style per-url configuration.\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e也就是说，\x3ccode\x3elaravel-cors\x3c\/code\x3e是在服务端允许了所有带有跨域资源请求的header，并当成正常请求处理，从服务端解决了跨域资源共享的问题。\x3c\/p\x3e\n\x3cp\x3e关于更多的\x3ccode\x3elaravel-cors\x3c\/code\x3e使用配置，请移步 \x3ca href=\x22https:\/\/github.com\/barryvdh\/laravel-cors\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3elarave-cors官方GitHub仓库\x3c\/a\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e填坑\x3c\/h3\x3e\n\x3ch4\x3e入坑之前想说的话\x3c\/h4\x3e\n\x3cp\x3e要说遇到的坑，首先要介绍一下laravel处理的路由模式，官方文档这样说：\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e所有的 Laravel 路由都在 routes 目录中的路由文件中定义，这些文件都由框架自动加载。 routes\/web.php 文件中定义你的 web 页面路由。这些路由都会应用 web 中间件组，其提供了诸如 Session 和 CSRF 保护等特性。定义在 routes\/api.php 中的路由都是无状态的，并且会应用 api 中间件组。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e可以得到的信息如下：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3elaravel中有两个默认路由配置，一个是routes目录下的\x3ccode\x3eweb.php\x3c\/code\x3e，一个是routes目录下的\x3ccode\x3eapi.php\x3c\/code\x3e；\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3eweb.php\x3c\/code\x3e中定义的路由默认使用了Session 和 CSRF 保护等特性，所以可以直接使用会话技术，也就是正常的页面请求处理是默认走的\x3ccode\x3eweb.php\x3c\/code\x3e中定义的路由或路由组\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3eapi.php\x3c\/code\x3e的所有路由都是无状态的，并且没有使用Session 和 CSRF 保护的特性保护，所以里面定义的路由更适合为app提供接口，laravel默认当用户的请求路由前缀为\x3ccode\x3eapi\x3c\/code\x3e时，laravel自动去调用\x3ccode\x3eapi.php\x3c\/code\x3e中所定义的路由或路由组。这是因为，在laravel的\x3ccode\x3e路由服务提供者\x3c\/code\x3e中配置了路由前缀为\x3ccode\x3eapi\x3c\/code\x3e，下图为\x3ccode\x3e路由服务提供者\x3c\/code\x3e所在目录路径\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22http:\/\/ww1.sinaimg.cn\/large\/6aedb651ly1fcze890g10j208506x3yi\x22 src=\x22https:\/\/static.alili.techhttp:\/\/ww1.sinaimg.cn\/large\/6aedb651ly1fcze890g10j208506x3yi\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e下图为无状态路由组\x3ccode\x3eapi.php\x3c\/code\x3e的配置：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22http:\/\/ww1.sinaimg.cn\/large\/6aedb651ly1fczebo8xp1j20ge08lwes\x22 src=\x22https:\/\/static.alili.techhttp:\/\/ww1.sinaimg.cn\/large\/6aedb651ly1fczebo8xp1j20ge08lwes\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e所以当url以类似\x3ccode\x3ewww.xxx.com\/api\/route\x3c\/code\x3e的请求时会自动调用\x3ccode\x3eapi.php\x3c\/code\x3e路由组所定义的路由\x3c\/p\x3e\n\x3ch4\x3e进坑\x3c\/h4\x3e\n\x3cp\x3e上面说到\x3ccode\x3eapi.php\x3c\/code\x3e中定义的路由为无状态的，而且\x3ccode\x3eapi.php\x3c\/code\x3e中更适合提供api接口，所以为了解决跨域我们安装了\x3ccode\x3elaravel-cors\x3c\/code\x3e，而仅仅安装还是不够的，我们需要在会产生跨域的路由组中使用\x3ccode\x3elaravel-cors\x3c\/code\x3e为我们提供的中间件，所以我们可以这样使用\x3ccode\x3elaravel-cors\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 给需要跨域的路由增加cors中间件\nRoute::group([\x27middleware\x27 =\x3e \x27cors\x27], function(Router $router){\n    $router-\x3eget(\x27api\x27, \x27ApiController@index\x27);\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22php hljs\x22\x3e\x3ccode class=\x22php\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 给需要跨域的路由增加cors中间件\x3c\/span\x3e\nRoute::group([\x3cspan class=\x22hljs-string\x22\x3e\x27middleware\x27\x3c\/span\x3e =\x26gt; \x3cspan class=\x22hljs-string\x22\x3e\x27cors\x27\x3c\/span\x3e], \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(Router $router)\x3c\/span\x3e\x3c\/span\x3e{\n    $router-\x26gt;get(\x3cspan class=\x22hljs-string\x22\x3e\x27api\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27ApiController@index\x27\x3c\/span\x3e);\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e当我们整个\x3ccode\x3eapi.php\x3c\/code\x3e路由组全部需要跨域时，我们还可以在laravel框架的appHttpKernel.php文件中配置\x3ccode\x3eapi.php\x3c\/code\x3e路由组中增加\x3ccode\x3ecors\x3c\/code\x3e中间件，如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/**\n     * The application\x27s route middleware groups.\n     *\n     * @var array\n     *\/\n    protected $middlewareGroups = [\n        \x27web\x27 =\x3e [\n            \\App\\Http\\Middleware\\EncryptCookies::class,\n            \\Illuminate\\Cookie\\Middleware\\AddQueuedCookiesToResponse::class,\n            \\Illuminate\\Session\\Middleware\\StartSession::class,\n            \\Illuminate\\View\\Middleware\\ShareErrorsFromSession::class,\n            \\App\\Http\\Middleware\\VerifyCsrfToken::class,\n            \\Illuminate\\Routing\\Middleware\\SubstituteBindings::class,\n        ],\n\n        \x27api\x27 =\x3e [\n            \x27throttle:60,1\x27,\n            \x27bindings\x27,\n            \x27cors\x27\/\/ install laravel-cros 增加cors中间件，解决跨域问题\n        ],\n    ];\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22php hljs\x22\x3e\x3ccode class=\x22php\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/**\n     * The application\x27s route middleware groups.\n     *\n     * \x3cspan class=\x22hljs-doctag\x22\x3e@var\x3c\/span\x3e array\n     *\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eprotected\x3c\/span\x3e $middlewareGroups = [\n        \x3cspan class=\x22hljs-string\x22\x3e\x27web\x27\x3c\/span\x3e =\x26gt; [\n            \\App\\Http\\Middleware\\EncryptCookies::class,\n            \\Illuminate\\Cookie\\Middleware\\AddQueuedCookiesToResponse::class,\n            \\Illuminate\\Session\\Middleware\\StartSession::class,\n            \\Illuminate\\View\\Middleware\\ShareErrorsFromSession::class,\n            \\App\\Http\\Middleware\\VerifyCsrfToken::class,\n            \\Illuminate\\Routing\\Middleware\\SubstituteBindings::class,\n        ],\n\n        \x3cspan class=\x22hljs-string\x22\x3e\x27api\x27\x3c\/span\x3e =\x26gt; [\n            \x3cspan class=\x22hljs-string\x22\x3e\x27throttle:60,1\x27\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-string\x22\x3e\x27bindings\x27\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-string\x22\x3e\x27cors\x27\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ install laravel-cros 增加cors中间件，解决跨域问题\x3c\/span\x3e\n        ],\n    ];\x3c\/code\x3e\x3c\/pre\x3e\n\x3cblockquote\x3e\x3cp\x3e注意，如果安装\x3ccode\x3elaravel-cors\x3c\/code\x3e之后还是出现跨域问题，一定一定不要忘记检查一下是否增加了\x3ccode\x3ecors\x3c\/code\x3e中间件\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e说说laravel的表单验证\x3c\/h3\x3e\n\x3cp\x3e具体的表单验证请查看官方给出的文档（laravel的中文文档像laravel框架一样优雅），附上 \x3ca href=\x22https:\/\/laravel-china.org\/docs\/5.3\/validation\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3elaravel表单验证中文文档地址\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e下面很重要\x3c\/p\x3e\n\x3chr\x3e\n\x3cp\x3e想说的是当ajax请求时，如果表单验证失败，则会产生一次重定向，然后传回一个 HTTP 响应，其中包含了 422 状态码和验证错误的 JSON 数据，但是我们在客户端看到的却有可能是一个关于ajax跨域的错误，这是因为我们在使用jquery或者其他JavaScript包的ajax请求方法请求时，没有指定返回的数据类型为json，而laravel的错误处理默认解析为普通web请求，laravel表单验证规则上面也说到了，当验证失败，会产生一次重定向，而我们会看到的却是一个关于跨域的报错，下面是一个例子：\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e在\x3ccode\x3eapi.php\x3c\/code\x3e路由组中定义了登录路由如下\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    \/\/ 登录路由，使用依赖注入请求验证\n    Route::post(\x27login\x27, function (\\App\\Http\\Requests\\LoginRequest $request) {  \n        \/\/ 获取到通过请求的两个字段\n        $checkInfo = \\Illuminate\\Support\\Facades\\Input::only(\x27mobile\x27, \x27password\x27);\n        try {\n            \/\/ 为该用户验证，验证通过则生成token，失败返回错误提示\n            if (!$token = JWTAuth::attempt($checkInfo)) {\n                return Response::json([\x27error\x27 =\x3e \x27账号或密码错误\x27], 401);\n            }\n            return [\n                \x27user\x27=\x3eJWTAuth::toUser($token),\n                \x27token\x27=\x3e$token\n            ];\n        } catch (\\Tymon\\JWTAuth\\Exceptions\\JWTException $e) {\n            \/\/ 返回捕获的异常\n            return Response::json($e-\x3egetMessage(), 500);\n        }\n    });\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22php hljs\x22\x3e\x3ccode class=\x22php\x22\x3e    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 登录路由，使用依赖注入请求验证\x3c\/span\x3e\n    Route::post(\x3cspan class=\x22hljs-string\x22\x3e\x27login\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-params\x22\x3e(\\App\\Http\\Requests\\LoginRequest $request)\x3c\/span\x3e \x3c\/span\x3e{  \n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 获取到通过请求的两个字段\x3c\/span\x3e\n        $checkInfo = \\Illuminate\\Support\\Facades\\Input::only(\x3cspan class=\x22hljs-string\x22\x3e\x27mobile\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27password\x27\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-keyword\x22\x3etry\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 为该用户验证，验证通过则生成token，失败返回错误提示\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!$token = JWTAuth::attempt($checkInfo)) {\n                \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e Response::json([\x3cspan class=\x22hljs-string\x22\x3e\x27error\x27\x3c\/span\x3e =\x26gt; \x3cspan class=\x22hljs-string\x22\x3e\x27账号或密码错误\x27\x3c\/span\x3e], \x3cspan class=\x22hljs-number\x22\x3e401\x3c\/span\x3e);\n            }\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e [\n                \x3cspan class=\x22hljs-string\x22\x3e\x27user\x27\x3c\/span\x3e=\x26gt;JWTAuth::toUser($token),\n                \x3cspan class=\x22hljs-string\x22\x3e\x27token\x27\x3c\/span\x3e=\x26gt;$token\n            ];\n        } \x3cspan class=\x22hljs-keyword\x22\x3ecatch\x3c\/span\x3e (\\Tymon\\JWTAuth\\Exceptions\\JWTException $e) {\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 返回捕获的异常\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e Response::json($e-\x26gt;getMessage(), \x3cspan class=\x22hljs-number\x22\x3e500\x3c\/span\x3e);\n        }\n    });\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e在\x3ccode\x3eapi.php\x3c\/code\x3e路由组中使用的表单验证类\x3ccode\x3e\\App\\Http\\Requests\\LoginRequest\x3c\/code\x3e定义如下\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c?php\n\nnamespace App\\Http\\Requests;\n\nuse App\\User;\nuse Illuminate\\Foundation\\Http\\FormRequest;\n\nclass LoginRequest extends FormRequest\n{\n    \/**\n     * Determine if the user is authorized to make this request.\n     *\n     * @return bool\n     *\/\n    public function authorize()\n    {\n        return true;\n    }\n\n    \/**\n     * Get the validation rules that apply to the request.\n     *\n     * @return array\n     *\/\n    public function rules()\n    {\n        \/\/ 调用了模型静态属性定义好的验证规则\n        return User::$rules;\n    }\n    public function messages()\n    {\n        \/\/ 调用了模型静态属性定义好的验证规则提示\n        return User::$messages;\n    }\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22php hljs\x22\x3e\x3ccode class=\x22php\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x26lt;?php\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3enamespace\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eApp\x3c\/span\x3e\\\x3cspan class=\x22hljs-title\x22\x3eHttp\x3c\/span\x3e\\\x3cspan class=\x22hljs-title\x22\x3eRequests\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3euse\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eApp\x3c\/span\x3e\\\x3cspan class=\x22hljs-title\x22\x3eUser\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3euse\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eIlluminate\x3c\/span\x3e\\\x3cspan class=\x22hljs-title\x22\x3eFoundation\x3c\/span\x3e\\\x3cspan class=\x22hljs-title\x22\x3eHttp\x3c\/span\x3e\\\x3cspan class=\x22hljs-title\x22\x3eFormRequest\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eLoginRequest\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eFormRequest\x3c\/span\x3e\n\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/**\n     * Determine if the user is authorized to make this request.\n     *\n     * \x3cspan class=\x22hljs-doctag\x22\x3e@return\x3c\/span\x3e bool\n     *\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3epublic\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eauthorize\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\n    \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3etrue\x3c\/span\x3e;\n    }\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/**\n     * Get the validation rules that apply to the request.\n     *\n     * \x3cspan class=\x22hljs-doctag\x22\x3e@return\x3c\/span\x3e array\n     *\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3epublic\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3erules\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\n    \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 调用了模型静态属性定义好的验证规则\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e User::$rules;\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3epublic\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3emessages\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\n    \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 调用了模型静态属性定义好的验证规则提示\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e User::$messages;\n    }\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e在用户模型中定义的验证规则和验证提示如下\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    public static $rules = [\n        \x27mobile\x27=\x3e\x27required\x27,\n        \x27password\x27=\x3e\x27required\x27\n    ];\n\n    public static $messages = [\n        \x27mobile.required\x27=\x3e\x27手机号不能为空\x27,\n        \x27password.required\x27=\x3e\x27密码不能为空\x27\n    ];\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22php hljs\x22\x3e\x3ccode class=\x22php\x22\x3e    \x3cspan class=\x22hljs-keyword\x22\x3epublic\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3estatic\x3c\/span\x3e $rules = [\n        \x3cspan class=\x22hljs-string\x22\x3e\x27mobile\x27\x3c\/span\x3e=\x26gt;\x3cspan class=\x22hljs-string\x22\x3e\x27required\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-string\x22\x3e\x27password\x27\x3c\/span\x3e=\x26gt;\x3cspan class=\x22hljs-string\x22\x3e\x27required\x27\x3c\/span\x3e\n    ];\n\n    \x3cspan class=\x22hljs-keyword\x22\x3epublic\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3estatic\x3c\/span\x3e $messages = [\n        \x3cspan class=\x22hljs-string\x22\x3e\x27mobile.required\x27\x3c\/span\x3e=\x26gt;\x3cspan class=\x22hljs-string\x22\x3e\x27手机号不能为空\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-string\x22\x3e\x27password.required\x27\x3c\/span\x3e=\x26gt;\x3cspan class=\x22hljs-string\x22\x3e\x27密码不能为空\x27\x3c\/span\x3e\n    ];\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e使用jquery的post请求发送ajax请求\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$.post(\x27http:\/\/192.168.1.6:9999\/api\/login\x27,{},function(data){\n    console.log(data)\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e$.post(\x3cspan class=\x22hljs-string\x22\x3e\x27http:\/\/192.168.1.6:9999\/api\/login\x27\x3c\/span\x3e,{},\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edata\x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(data)\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e因为该post请求并未传递任何参数，所以验证可能是未通过，但我们看到的确实一个关于跨域失败的报错，如下图\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22http:\/\/ww1.sinaimg.cn\/large\/6aedb651ly1fd04636bmcj20me0583ys\x22 src=\x22https:\/\/static.alili.techhttp:\/\/ww1.sinaimg.cn\/large\/6aedb651ly1fd04636bmcj20me0583ys\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e产生这个报错是因为我们在发送post请求时没有指定期望返回的数据类型，而laravel框架就将其判断为一个普通的web请求，并返回302跳转到发送请求的页面，在这个过程中产生了跨域，如下图\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22http:\/\/ww1.sinaimg.cn\/large\/6aedb651ly1fd093e0tv0j20ct0f2gmw\x22 src=\x22https:\/\/static.alili.techhttp:\/\/ww1.sinaimg.cn\/large\/6aedb651ly1fd093e0tv0j20ct0f2gmw\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e所以当我们在发送ajax请求时，指定期望的返回类型时，就可以看到laravel为我们返回的422的验证失败的报错了，代码和效果如下图：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22http:\/\/ww1.sinaimg.cn\/large\/6aedb651ly1fd09e8yqovj20o804vjrk\x22 src=\x22https:\/\/static.alili.techhttp:\/\/ww1.sinaimg.cn\/large\/6aedb651ly1fd09e8yqovj20o804vjrk\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e对应报错返回的json数据如下图:\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22http:\/\/ww1.sinaimg.cn\/large\/6aedb651ly1fd09gk1xxhj20ld012wea\x22 src=\x22https:\/\/static.alili.techhttp:\/\/ww1.sinaimg.cn\/large\/6aedb651ly1fd09gk1xxhj20ld012wea\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22http:\/\/ww1.sinaimg.cn\/large\/6aedb651ly1fd09h3gkv5j20jk03ajrg\x22 src=\x22https:\/\/static.alili.techhttp:\/\/ww1.sinaimg.cn\/large\/6aedb651ly1fd09h3gkv5j20jk03ajrg\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e所以，在请求laravel的接口时一定要指定期望的返回数据类型\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3chr\x3e\n\x3cp\x3e\x3ca href=\x22http:\/\/www.linganmin.cn\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e安小下同学\x3c\/a\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>【日常填坑】之ajax请求laravel的api接口</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000008445102">https://segmentfault.com/a/1190000008445102</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/8q7i5jlm1tl/" target="_blank">https://alili.tech/archive/8q7i5jlm1tl/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>