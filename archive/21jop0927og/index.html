<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="2017拼多多前端笔试"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>2017拼多多前端笔试 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/21jop0927og/",
				"appid": "1613049289050283", 
				"title": "2017拼多多前端笔试 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-05T02:30:11"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/6ljl45l4wk5/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/rtayooq1lb/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f21jop0927og%2f&text=2017%e6%8b%bc%e5%a4%9a%e5%a4%9a%e5%89%8d%e7%ab%af%e7%ac%94%e8%af%95"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f21jop0927og%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f21jop0927og%2f&text=2017%e6%8b%bc%e5%a4%9a%e5%a4%9a%e5%89%8d%e7%ab%af%e7%ac%94%e8%af%95"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f21jop0927og%2f&title=2017%e6%8b%bc%e5%a4%9a%e5%a4%9a%e5%89%8d%e7%ab%af%e7%ac%94%e8%af%95"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f21jop0927og%2f&is_video=false&description=2017%e6%8b%bc%e5%a4%9a%e5%a4%9a%e5%89%8d%e7%ab%af%e7%ac%94%e8%af%95"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=2017%e6%8b%bc%e5%a4%9a%e5%a4%9a%e5%89%8d%e7%ab%af%e7%ac%94%e8%af%95&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f21jop0927og%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f21jop0927og%2f&title=2017%e6%8b%bc%e5%a4%9a%e5%a4%9a%e5%89%8d%e7%ab%af%e7%ac%94%e8%af%95"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f21jop0927og%2f&title=2017%e6%8b%bc%e5%a4%9a%e5%a4%9a%e5%89%8d%e7%ab%af%e7%ac%94%e8%af%95"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f21jop0927og%2f&title=2017%e6%8b%bc%e5%a4%9a%e5%a4%9a%e5%89%8d%e7%ab%af%e7%ac%94%e8%af%95"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f21jop0927og%2f&title=2017%e6%8b%bc%e5%a4%9a%e5%a4%9a%e5%89%8d%e7%ab%af%e7%ac%94%e8%af%95"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">2017拼多多前端笔试</h1><div class="meta"><div class="postdate"><time datetime="2019-01-05" itemprop="datePublished">2019-01-05</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch1 id=\x22articleHeader0\x22\x3e简答题：\x3c\/h1\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3esettimeout 与 setInterval的区别， 及对他们的内存的分析\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e区别\x3c\/h3\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3esetTimeout是在一段时间后调用指定函数（仅一次）\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3esetInterval是每隔一段时间调用指定函数（N次）\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function run(){\n    \/\/ 其他代码\n    setTimeout(function(){\n        run();\n    }, 10000);\n}\nrun();\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dockerfile\x22\x3e\x3ccode\x3efunction \x3cspan class=\x22hljs-keyword\x22\x3erun\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e(){\n\x3c\/span\x3e    \/\/ 其他代码\n    setTimeout(function(){\n        \x3cspan class=\x22hljs-keyword\x22\x3erun\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e();\n\x3c\/span\x3e    }, \x3cspan class=\x22hljs-number\x22\x3e10000\x3c\/span\x3e);\n}\n\x3cspan class=\x22hljs-keyword\x22\x3erun\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e();\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e以上面的代码来说, 虽然设置的是10s执行一次, 但是实际时间却是需要\/\/ 其他代码的执行时间来确定\x3cbr\x3e即setTimeout的间隔时间是, \/\/ setTimeout 的间隔时间 === 最小时间是(10s\x2b)\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22setInterval(function(){\n    run();\n}, 10000);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lisp\x22\x3e\x3ccode\x3esetInterval(\x3cspan class=\x22hljs-name\x22\x3efunction\x3c\/span\x3e(){\n    run()\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n}, \x3cspan class=\x22hljs-number\x22\x3e10000\x3c\/span\x3e)\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e而setInterval, 不会有上面的问题, 但是如果run()的执行时间, 操作大于10s, 那么甚至可能跳过任务;\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22http:\/\/www.pjhome.net\/article\/Javascript\/822.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3esetInterval 和 setTimeout 会产生内存溢出\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22https:\/\/gxnotes.com\/article\/65338.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eJavaScript setInterval()方法是否导致内存泄漏？\x3c\/a\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e关于内存泄漏\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e内存\x3c\/h3\x3e\n\x3cp\x3e程序的运行需要内存。只要程序提出要求，操作系统或者运行时（runtime）就必须供给内存。\x3cbr\x3e对于持续运行的服务进程（daemon），必须及时释放不再用到的内存。否则，内存占用越来越高，轻则影响系统性能，重则导致进程崩溃。\x3cbr\x3e不再用到的内存，没有及时释放，就叫做内存泄漏（memory leak）。\x3cbr\x3e（比如 C 语言）必须手动释放内存，程序员负责内存管理。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22char * buffer;\nbuffer = (char*) malloc(42);\n\n\/\/...\n\nfree(buffer)    \/\/手动释放内存\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs arduino\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3echar\x3c\/span\x3e * \x3cspan class=\x22hljs-built_in\x22\x3ebuffer\x3c\/span\x3e;\n\x3cspan class=\x22hljs-built_in\x22\x3ebuffer\x3c\/span\x3e = (\x3cspan class=\x22hljs-keyword\x22\x3echar\x3c\/span\x3e*) malloc(\x3cspan class=\x22hljs-number\x22\x3e42\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/...\x3c\/span\x3e\n\nfree(\x3cspan class=\x22hljs-built_in\x22\x3ebuffer\x3c\/span\x3e)    \x3cspan class=\x22hljs-comment\x22\x3e\/\/手动释放内存\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cblockquote\x3e\x3cp\x3e上面是 C 语言代码，malloc方法用来申请内存，使用完毕之后，必须自己用free方法释放内存。\x3cbr\x3e这很麻烦，所以大多数语言提供自动内存管理，减轻程序员的负担，这被称为\x22垃圾回收机制\x22（garbage collector）。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e垃圾回收机制\x3c\/h3\x3e\n\x3cp\x3e怎么知道哪些内存不再需要呢？常用的方法是 \x27引用计数\x27, 语言的引擎有一张 \x27引用表\x27, 保存了内存里面所有的资源(通常是各种值)的引用次数，当一个值的引用次数为 0 时，表示这个值用不到了，因此可将其释放。\x3c\/p\x3e\n\x3cp\x3e但是如果一个值不再用到了，引用次数却不为 0 ，垃圾回收机制却无法释放这块内存，从而导致内存泄漏。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const arr = [1, 2, 3, 4];\nconsole.log(arr);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode\x3econst arr = [\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e];\nconsole.log(arr);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e打印完 arr 之后, arr 便用不到了，引用次数为 1, 但是它还会继续占用内存。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const arr = [1, 2, 3, 4];\nconsole.log(arr);\narr = null;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode\x3econst arr = [\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e];\nconsole.log(arr);\narr = null;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3earr 重置为 null，就解除了对 [1, 2, 3, 4] 的引用，引用次数变成了 0 ，内存就可以释放了。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3eJavaScript 内存管理\x3c\/h3\x3e\n\x3cp\x3eJavaScript 是一种垃圾回收语言。垃圾回收语言通过周期性地检查先前分配的内存是否可达，帮助开发者管理内存。换言之，垃圾回收语言减轻了“内存仍可用”及“内存仍可达”的问题。两者的区别是微妙而重要的：仅有开发者了解哪些内存在将来仍会使用，而不可达内存通过算法确定和标记，适时被操作系统回收。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3eJavaScript 内存泄漏\x3c\/h3\x3e\n\x3cp\x3e垃圾回收语言的内存泄漏主因是不需要的引用。理解它之前，还需了解垃圾回收语言如何辨别内存的可达与不可达。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3eMark-and-sweep\x3c\/strong\x3e\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e大部分垃圾回收语言用的算法称之为 Mark-and-sweep 。算法由以下几步组成：\x3cbr\x3e垃圾回收器创建了一个“roots”列表。Roots 通常是代码中全局变量的引用。JavaScript 中，“window” 对象是一个全局变量，被当作 root 。window 对象总是存在，因此垃圾回收器可以检查它和它的所有子对象是否存在（即不是垃圾）；\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e所有的 roots 被检查和标记为激活（即不是垃圾）。所有的子对象也被递归地检查。从 root 开始的所有对象如果是可达的，它就不被当作垃圾。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e所有未被标记的内存会被当做垃圾，收集器现在可以释放内存，归还给操作系统了。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e现代的垃圾回收器改良了算法，但是本质是相同的：可达内存被标记，其余的被当作垃圾回收。\x3c\/p\x3e\n\x3cp\x3e不需要的引用是指开发者明知内存引用不再需要，却由于某些原因，它仍被留在激活的 root 树中。在 JavaScript 中，不需要的引用是保留在代码中的变量，它不再需要，却指向一块本该被释放的内存。有些人认为这是开发者的错误。\x3c\/p\x3e\n\x3cp\x3e为了理解 JavaScript 中最常见的内存泄漏，我们需要了解哪种方式的引用容易被遗忘。\x3c\/p\x3e\n\x3ch4\x3e常见 JavaScript 内存泄漏\x3c\/h4\x3e\n\x3ch5\x3e意外的全局变量\x3c\/h5\x3e\n\x3cp\x3eJavaScript 处理未定义变量的方式比较宽松：未定义的变量会在全局对象创建一个新变量。在浏览器中，全局对象是 window 。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function foo(arg) {\n    bar = \x26quot;this is a hidden global variable\x26quot;;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3efoo\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(arg)\x3c\/span\x3e \x3c\/span\x3e{\n    bar = \x3cspan class=\x22hljs-string\x22\x3e\x22this is a hidden global variable\x22\x3c\/span\x3e;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e真相是：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function foo(arg) {\n    window.bar = \x26quot;this is an explicit global variable\x26quot;;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3efoo\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3earg\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.bar = \x3cspan class=\x22hljs-string\x22\x3e\x22this is an explicit global variable\x22\x3c\/span\x3e;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e函数 foo 内部忘记使用 var ，意外创建了一个全局变量。此例泄漏了一个简单的字符串，无伤大雅，但是有更糟的情况。\x3c\/p\x3e\n\x3cp\x3e另一种意外的全局变量可能由 this 创建：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function foo() {\n    this.variable = \x26quot;potential accidental global\x26quot;;\n}\n\/\/ Foo 调用自己，this 指向了全局对象（window）\n\/\/ 而不是 undefined\nfoo();\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3efoo\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.variable = \x3cspan class=\x22hljs-string\x22\x3e\x22potential accidental global\x22\x3c\/span\x3e;\n}\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ Foo 调用自己，this 指向了全局对象（window）\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 而不是 undefined\x3c\/span\x3e\nfoo();\x3c\/code\x3e\x3c\/pre\x3e\n\x3cblockquote\x3e\x3cp\x3e在 JavaScript 文件头部加上 \x27use strict\x27，可以避免此类错误发生。启用严格模式解析 JavaScript ，避免意外的全局变量。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e全局变量注意事项:\x3cbr\x3e尽管我们讨论了一些意外的全局变量，但是仍有一些明确的全局变量产生的垃圾。它们被定义为不可回收（除非定义为空或重新分配）。尤其当全局变量用于临时存储和处理大量信息时，需要多加小心。如果必须使用全局变量存储大量数据时，确保用完以后把它设置为 null 或者重新定义。与全局变量相关的增加内存消耗的一个主因是缓存。缓存数据是为了重用，缓存必须有一个大小上限才有用。高内存消耗导致缓存突破上限，因为缓存内容无法被回收。\x3c\/p\x3e\n\x3ch5\x3e被遗忘的计时器或回调函数\x3c\/h5\x3e\n\x3cp\x3e在 JavaScript 中使用 setInterval 非常平常。一段常见的代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var someResource = getData();\nsetInterval(function() {\n    var node = document.getElementById(\x27Node\x27);\n    if(node) {\n        \/\/ 处理 node 和 someResource\n        node.innerHTML = JSON.stringify(someResource));\n    }\n}, 1000);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs crmsh\x22\x3e\x3ccode\x3evar someResource = getData();\nsetInterval(function() {\n    var \x3cspan class=\x22hljs-keyword\x22\x3enode\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3e= document\x3c\/span\x3e.getElementById(\x27\x3cspan class=\x22hljs-keyword\x22\x3eNode\x3c\/span\x3e\x3cspan class=\x22hljs-title\x22\x3e\x27);\n    if\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3enode\x3c\/span\x3e\x3cspan class=\x22hljs-title\x22\x3e) {\n        \/\/ 处理 node\x3c\/span\x3e 和 someResource\n        \x3cspan class=\x22hljs-keyword\x22\x3enode\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3einnerHTML\x3c\/span\x3e = JSON.stringify(someResource));\n    }\n}, \x3cspan class=\x22hljs-number\x22\x3e1000\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e此例说明了什么：与节点或数据关联的计时器不再需要，\x3cem\x3enode\x3c\/em\x3e 对象可以删除，整个回调函数也不需要了。可是，计时器回调函数仍然没被回收（计时器停止才会被回收）。同时，\x3cem\x3esomeResource\x3c\/em\x3e 如果存储了大量的数据，也是无法被回收的。\x3c\/p\x3e\n\x3cp\x3e对于观察者的例子，一旦它们不再需要（或者关联的对象变成不可达），明确地移除它们非常重要。老的 IE 6 是无法处理循环引用的。如今，即使没有明确移除它们，一旦观察者对象变成不可达，大部分浏览器是可以回收观察者处理函数的。\x3c\/p\x3e\n\x3cp\x3e观察者代码示例：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var element = document.getElementById(\x27button\x27);\nfunction onClick(event) {\n    element.innerHTML = \x27text\x27;\n}\nelement.addEventListener(\x27click\x27, onClick);   \/\/ =\x3e 循环调用\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e element = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27button\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eonClick\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eevent\x3c\/span\x3e) \x3c\/span\x3e{\n    element.innerHTML = \x3cspan class=\x22hljs-string\x22\x3e\x27text\x27\x3c\/span\x3e;\n}\nelement.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27click\x27\x3c\/span\x3e, onClick);   \x3cspan class=\x22hljs-comment\x22\x3e\/\/ =\x26gt; 循环调用\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e对象观察者和循环引用注意事项\x3c\/strong\x3e\x3cbr\x3e老版本的 IE 是无法检测 DOM 节点与 JavaScript 代码之间的循环引用，会导致内存泄漏。如今，现代的浏览器（包括 IE 和 Microsoft Edge）使用了更先进的垃圾回收算法，已经可以正确检测和处理循环引用了。换言之，回收节点内存时，不必非要调用 removeEventListener 了。\x3c\/p\x3e\n\x3ch5\x3e脱离 DOM 的引用\x3c\/h5\x3e\n\x3cp\x3e有时，保存 DOM 节点内部数据结构很有用。假如你想快速更新表格的几行内容，把每一行 DOM 存成字典（JSON 键值对）或者数组很有意义。此时，同样的 DOM 元素存在两个引用：一个在 DOM 树中，另一个在字典中。将来你决定删除这些行时，需要把两个引用都清除.\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var elements = {\n    button: document.getElementById(\x27button\x27),\n    image: document.getElementById(\x27image\x27),\n    text: document.getElementById(\x27text\x27)\n};\nfunction doStuff() {\n    image.src = \x27http:\/\/some.url\/image\x27;\n    button.click();\n    console.log(text.innerHTML);\n    \/\/ 更多逻辑\n}\nfunction removeButton() {\n    \/\/ 按钮是 body 的后代元素\n    document.body.removeChild(document.getElementById(\x27button\x27));\n    \/\/ 此时，仍旧存在一个全局的 #button 的引用\n    \/\/ elements 字典。button 元素仍旧在内存中，不能被 GC 回收。\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e elements = {\n    \x3cspan class=\x22hljs-attr\x22\x3ebutton\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27button\x27\x3c\/span\x3e),\n    \x3cspan class=\x22hljs-attr\x22\x3eimage\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27image\x27\x3c\/span\x3e),\n    \x3cspan class=\x22hljs-attr\x22\x3etext\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27text\x27\x3c\/span\x3e)\n};\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edoStuff\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    image.src = \x3cspan class=\x22hljs-string\x22\x3e\x27http:\/\/some.url\/image\x27\x3c\/span\x3e;\n    button.click();\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(text.innerHTML);\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 更多逻辑\x3c\/span\x3e\n}\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eremoveButton\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 按钮是 body 的后代元素\x3c\/span\x3e\n    \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.body.removeChild(\x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27button\x27\x3c\/span\x3e));\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 此时，仍旧存在一个全局的 #button 的引用\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ elements 字典。button 元素仍旧在内存中，不能被 GC 回收。\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e此外还要考虑 DOM 树内部或子节点的引用问题。假如你的 JavaScript 代码中保存了表格某一个 \x26lt;td\x26gt; 的引用。将来决定删除整个表格的时候，直觉认为 GC 会回收除了已保存的 \x26lt;td\x26gt; 以外的其它节点。实际情况并非如此：此 \x26lt;td\x26gt; 是表格的子节点，子元素与父元素是引用关系。由于代码保留了 \x26lt;td\x26gt; 的引用，导致整个表格仍待在内存中。保存 DOM 元素引用的时候，要小心谨慎。\x3c\/p\x3e\n\x3ch5\x3e闭包\x3c\/h5\x3e\n\x3cblockquote\x3e\x3cp\x3e如果闭包的作用域中保存着一个 HTML 元素，则该元素无法被销毁。(下面代码来自高程)\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e闭包是 JavaScript 开发的一个关键方面：匿名函数可以访问父级作用域的变量。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function assgin() {\n    var ele = document.getElementById(\x27someEle\x27);\n    ele.onclick = function(){\n        alert(ele.id);\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eassgin\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ele = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27someEle\x27\x3c\/span\x3e);\n    ele.onclick = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n        alert(ele.id);\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e以上代码创建了一个作为 ele 元素事件处理程序的闭包，而这个闭包有创建了一个循环的引用，由于匿名函数保存了一个 assgin() 的活动对象的引用 ，因此无法减少对 ele 的引用次数 , 只要匿名函数存在，ele的引用次数至少是 1。我们可以稍微改写一下:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function assgin() {\n    var ele = document.getElementById(\x27someEle\x27);\n    var id = ele.id\n    ele.onclick = function(){\n        alert(id);\n    }\n    ele = null;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eassgin\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ele = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27someEle\x27\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e id = ele.id\n    ele.onclick = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n        alert(id);\n    }\n    ele = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上面代码中，通过把 ele.id 的一个副本保存在一个变量中，并且在比保重引用该变量消除了循环引用，但是这样还不能解决内存泄露，\x3cem\x3e闭包会引用包含函数的整个活动对象\x3c\/em\x3e，而其中包含着 ele ，即使闭包不直接引用 ele ，包含函数的活动对象中也会保存 一个引用，因此需要把 ele 变量设置为 null ,这样就解除了对 DOM 对象的引用，减少其引用数，确保能正常回收。\x3c\/p\x3e\n\x3cp\x3e关于内存的发现 chrome 的使用~暂时没有使用过，看不太明白，就不 copy 了。\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22http:\/\/www.cnblogs.com\/rubylouvre\/p\/3345294.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ejs闭包测试\x3c\/a\x3e =\x26gt; 看不懂~\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader8\x22\x3e上述内容 copy 自下面二者：\x3c\/h3\x3e\n\x3cp\x3e\x3ca href=\x22http:\/\/www.ruanyifeng.com\/blog\/2017\/04\/memory-leak.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eJavaScript 内存泄漏教程-阮一峰\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22https:\/\/jinlong.github.io\/2016\/05\/01\/4-Types-of-Memory-Leaks-in-JavaScript-and-How-to-Get-Rid-Of-Them\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e4类 JavaScript 内存泄漏及如何避免\x3c\/a\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader9\x22\x3eajax 原生实现\x3c\/h2\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var xhr = createXHR()\nxhr.onreadystatechange = function() {\n    if(xhr.readyState == 4) {\n        if(xhr.status == 200) {\n            console.log(xhr.responeText)\n            \/\/do sth...\n        } else {\n            console.log(\x27request fail\x27 \x2b xhr.status)\n        }\n    }\n};\nxhr.open(\x27get\x27, \x27hello.com\x27, true)\nxhr.send(null);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e xhr = createXHR()\nxhr.onreadystatechange = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(xhr.readyState == \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e) {\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(xhr.status == \x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e) {\n            \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(xhr.responeText)\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/do sth...\x3c\/span\x3e\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27request fail\x27\x3c\/span\x3e \x2b xhr.status)\n        }\n    }\n};\nxhr.open(\x3cspan class=\x22hljs-string\x22\x3e\x27get\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27hello.com\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e)\nxhr.send(\x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader10\x22\x3e闭包的理解\x3c\/h2\x3e\n\x3cp\x3e闭包是指有权访问另一个函数作用域中的变量的函数。\x3cbr\x3e这个口述我还是不知道怎么说，或许是应用不够~看了无数文章到头来敌不过忘记~也可能我理解的还是不到位吧~个人不解释了，放参考链接吧\x3cbr\x3e\x3ca href=\x22https:\/\/stackoverflow.com\/questions\/111102\/how-do-javascript-closures-work\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eHow do JavaScript closures work?--StackOverflow\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22http:\/\/www.ruanyifeng.com\/blog\/2009\/08\/learning_javascript_closures.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e学习Javascript闭包（Closure）--阮一峰的网络日志\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22https:\/\/zhuanlan.zhihu.com\/p\/22486908\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eJS 中的闭包是什么--方应杭\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22https:\/\/github.com\/lin-xin\/blog\/issues\/8\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eJavaScript 中 闭包 的详解\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22https:\/\/developer.mozilla.org\/cn\/docs\/Web\/JavaScript\/Closures\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e闭包--MDN\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22http:\/\/hexin.life\/2017\/04\/15\/title-7\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e闭包的应用\x3c\/a\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader11\x22\x3e[html中一段文本内容 hdslakd\x3cem\x3ednska8das ，将文本中含有数组[\x27d\x27, \x27a\x27, \x27\x3c\/em\x3e\x27, \x278\x27] 中的内容标记为红色文本(字符串有改动)](\x3ca href=\x22http:\/\/hexin.life\/more\/pdd.html)\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/hexin.life\/more\/pdd.html)\x3c\/a\x3e\n\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader12\x22\x3e设定 html 结构\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    \x3cstyle\x3e\n        .mark {\n            color: red;\n        }\n    \x3c\/style\x3e\n    \n\x3chtml\x3e\n    \x3cbody\x3e\n        \x3cdiv class=\x27textToMark\x27\x3e\n        hdslakddnska8das\n        \x3c\/div\x3e\n    \x3c\/body\x3e\n\x3c\/html\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22css\x22\x3e\n        \x3cspan class=\x22hljs-selector-class\x22\x3e.mark\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-attribute\x22\x3ecolor\x3c\/span\x3e: red;\n        }\n    \x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x27textToMark\x27\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        hdslakddnska8das\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader13\x22\x3e方法一:循环\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    const textToMark = document.querySelector(\x27.textToMark\x27);\n    \n    const text = textToMark.innerHTML;\n\n    const arr = [\x27d\x27, \x27a\x27, \x27*\x27, \x278\x27];\n\n    const newText = text.split(\x27\x27);\n\n    function toMark (textArr, arr) {\n        for(let i = 0; i \x3c newText.length; i\x2b\x2b) {\n            for(let j = 0; j \x3c arr.length; j\x2b\x2b) {\n                if(newText[i] == arr[j]) {\n                    newText[i] = `\x3cspan class=\x27mark\x27\x3e${newText[i]}\x3c\/span\x3e`;\n                }\n            }\n        }\n        return newText;\n    }\n    toMark(newText, arr);\n    textToMark.innerHTML = newText.join(\x27\x27);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e textToMark = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.querySelector(\x3cspan class=\x22hljs-string\x22\x3e\x27.textToMark\x27\x3c\/span\x3e);\n    \n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e text = textToMark.innerHTML;\n\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e arr = [\x3cspan class=\x22hljs-string\x22\x3e\x27d\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27a\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27*\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x278\x27\x3c\/span\x3e];\n\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e newText = text.split(\x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e);\n\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3etoMark\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3etextArr, arr\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; newText.length; i\x2b\x2b) {\n            \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e j = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; j \x26lt; arr.length; j\x2b\x2b) {\n                \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(newText[i] == arr[j]) {\n                    newText[i] = \x3cspan class=\x22hljs-string\x22\x3e`\x26lt;span class=\x27mark\x27\x26gt;\x3cspan class=\x22hljs-subst\x22\x3e${newText[i]}\x3c\/span\x3e\x26lt;\/span\x26gt;`\x3c\/span\x3e;\n                }\n            }\n        }\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e newText;\n    }\n    toMark(newText, arr);\n    textToMark.innerHTML = newText.join(\x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader14\x22\x3e方法二: 字符串的 replace\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    const textToMark = document.querySelector(\x27.textToMark\x27);\n    \n    const text = textToMark.innerHTML;\n\n    const reg = \/[da\\*8]\x2b\/g;\n\n    var newtext = text.replace(reg, (match) =\x3e {\n        return match = `\x3cspan class=\x27mark\x27\x3e${match}\x3c\/span\x3e`;\n    });\n    \n    textToMark.innerHTML = newtext;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs typescript\x22\x3e\x3ccode\x3e    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e textToMark = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.querySelector(\x3cspan class=\x22hljs-string\x22\x3e\x27.textToMark\x27\x3c\/span\x3e);\n    \n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e text = textToMark.innerHTML;\n\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e reg = \x3cspan class=\x22hljs-regexp\x22\x3e\/[da\\*8]\x2b\/g\x3c\/span\x3e;\n\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e newtext = text.replace(reg, \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3ematch\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e match = \x3cspan class=\x22hljs-string\x22\x3e`\x26lt;span class=\x27mark\x27\x26gt;\x3cspan class=\x22hljs-subst\x22\x3e${match}\x3c\/span\x3e\x26lt;\/span\x26gt;`\x3c\/span\x3e;\n    });\n    \n    textToMark.innerHTML = newtext;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cblockquote\x3e\x3cp\x3e代码为个人写出，如果有更好的办法欢迎指教\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader15\x22\x3e\x3ca href=\x22http:\/\/hexin.life\/more\/pdd.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e原生JS创建这样的 dom 结构 \x26lt; div id=\x27hello\x27\x26gt; \x26lt; p class=\x27textToMark\x27\x26gt;hdslakddnska8das\x26lt; p\x26gt;\x26lt; \/div\x26gt;\x3c\/a\x3e\x3c\/h2\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function createElement() {\n        var body = document.body;\n    \n        var fragment = document.createDocumentFragment()      \n\n        var div = document.createElement(\x27div\x27)\n        div.setAttribute(\x27id\x27, \x27hello\x27)\n\n        fragment.appendChild(div)\n\n        var p = document.createElement(\x27p\x27)\n        p.className = \x27textToMark\x27\n        p.innerHTML = \x27hdslakddnska8das\x27\n\n        div.appendChild(p);\n        body.appendChild(fragment)\n    }\n    createElement();\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ecreateElement\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e body = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.body;\n    \n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e fragment = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.createDocumentFragment()      \n\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e div = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.createElement(\x3cspan class=\x22hljs-string\x22\x3e\x27div\x27\x3c\/span\x3e)\n        div.setAttribute(\x3cspan class=\x22hljs-string\x22\x3e\x27id\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27hello\x27\x3c\/span\x3e)\n\n        fragment.appendChild(div)\n\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e p = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.createElement(\x3cspan class=\x22hljs-string\x22\x3e\x27p\x27\x3c\/span\x3e)\n        p.className = \x3cspan class=\x22hljs-string\x22\x3e\x27textToMark\x27\x3c\/span\x3e\n        p.innerHTML = \x3cspan class=\x22hljs-string\x22\x3e\x27hdslakddnska8das\x27\x3c\/span\x3e\n\n        div.appendChild(p);\n        body.appendChild(fragment)\n    }\n    createElement();\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e感谢评论指出，已改正，关于节点创建 createElement 的效率问题，如果\x3cstrong\x3e当插入的节点很多\x3c\/strong\x3e的时候，createElement 的效率会不如 createDocumentFragment .\x3cbr\x3ecreateElement 每次 append 一个节点的时候，都会导致页面的重排，例如:\x3c\/p\x3e\n\x3cp\x3e数据为这样:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cul id=\x26quot;myList\x26quot;\x3e\n    \x3cli\x3e\n        \x3ca href=\x26quot;www.baidu.com\x26quot;\x3e\x3c\/a\x3e\n    \x3c\/li\x3e\n    \x3cli\x3e\n        \x3ca href=\x26quot;www.helloworld.com\x26quot;\x3e\x3c\/a\x3e\n    \x3c\/li\x3e\n\x3c\/ul\x3e\n\n\nvar data = [\n    { name: \x2736O秋招\x27, url: \x27http:\/\/campus.360.cn\/2015\/grad.html\x27},\n    { name: \x27TX校招\x27, url: \x27http:\/\/join.qq.com\/index.php\x27}\n]\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dust\x22\x3e\x3ccode\x3e\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eul\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22myList\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ea\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ehref\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22www.baidu.com\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ea\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ea\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ehref\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22www.helloworld.com\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ea\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eul\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\nvar data = [\n    \x3c\/span\x3e\x3cspan class=\x22hljs-template-variable\x22\x3e{ name: \x2736O秋招\x27, url: \x27http:\/\/campus.360.cn\/2015\/grad.html\x27}\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e,\n    \x3c\/span\x3e\x3cspan class=\x22hljs-template-variable\x22\x3e{ name: \x27TX校招\x27, url: \x27http:\/\/join.qq.com\/index.php\x27}\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e\n]\n\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function appendChildToElement(appendToElement, data) {\n    var a, li;\n    for (var i = 0, len = data.length; i \x3c len; i\x2b\x2b) {\n        a = document.createElement(\x27a\x27);\n        a.href = data[i].url;\n        a.appChild(document.createTextNode(data[i].name))\n        li = document.createElement(\x27li\x27);\n        li.appendChild(a);\n        appendChildToElement(li);\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eappendChildToElement\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eappendToElement, data\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e a, li;\n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, len = data.length; i \x26lt; len; i\x2b\x2b) {\n        a = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.createElement(\x3cspan class=\x22hljs-string\x22\x3e\x27a\x27\x3c\/span\x3e);\n        a.href = data[i].url;\n        a.appChild(\x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.createTextNode(data[i].name))\n        li = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.createElement(\x3cspan class=\x22hljs-string\x22\x3e\x27li\x27\x3c\/span\x3e);\n        li.appendChild(a);\n        appendChildToElement(li);\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这种情况下，data 内的每一个对象插入到 DOM 结构的时候都会触发一次重排，因此效率会较低。\x3cbr\x3e但是我们可以改变他的 display 属性，临时从文档移除 ul ，即可有效减少重排次数。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var ul = document.getElementById(\x27myList\x27);\nur.style.display = \x27none\x27;\nappendChildToElement(ul, data);\nul.style.display = \x27block\x27;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs maxima\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e ul = document.getElementById(\x27myList\x27);\nur.\x3cspan class=\x22hljs-built_in\x22\x3estyle\x3c\/span\x3e.\x3cspan class=\x22hljs-built_in\x22\x3edisplay\x3c\/span\x3e = \x27none\x27;\nappendChildToElement(ul, data);\nul.\x3cspan class=\x22hljs-built_in\x22\x3estyle\x3c\/span\x3e.\x3cspan class=\x22hljs-built_in\x22\x3edisplay\x3c\/span\x3e = \x27\x3cspan class=\x22hljs-built_in\x22\x3eblock\x3c\/span\x3e\x27;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e当然，更好的办法就是利用 createDocumentFragment 来创建一个文档片段.\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var fragment = document.createElementFragment();\nappendChildToElement(fragment, data);\ndocument.getElementById(\x27myList\x27).appendChild(fragment);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dart\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e fragment = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.createElementFragment();\nappendChildToElement(fragment, data);\n\x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27myList\x27\x3c\/span\x3e).appendChild(fragment);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e只访问了一次 DOM 节点，只触发了一次重排;再次感谢 @xaclincoln 的指出。\x3c\/p\x3e\n\x3cp\x3e查了一些关于 createDocumentFragment 和 createElement 比较的文章。\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/stackoverflow.com\/questions\/3397161\/should-i-use-document-createdocumentfragment-or-document-createelement\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ecreateDocumentFragment or createElement--StackOverflow\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/jsperf.com\/createelement-vs-createdocumentfragment\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ecreateElement vs createDocumentFragment\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/www.cnblogs.com\/xesam\/archive\/2011\/12\/19\/2293876.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ecreateElement 与 createDocumentFragment 的点点区别\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/www.cnitblog.com\/asfman\/articles\/32614.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eCreateDocumentFragment 的用处\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader16\x22\x3e\x3ca href=\x22http:\/\/hexin.life\/more\/pdd.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e创建一个函数对 JS 基础类型 ( function, boolean, array, number, string, object) 进行值复制\x3c\/a\x3e\x3c\/h2\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    function valueToCopy (valueBeCopy) {\n        var copyValue;\n        if (typeof (\x2bvalueBeCopy) === \x27number\x27 \x26amp;\x26amp; typeof valueBeCopy !== \x27object\x27) {\n            copyValue = \x2bvalueBeCopy;\n        } else if (typeof valueBeCopy === \x27string\x27) {\n            copyValue = parseInt(copyValue);\n        } else if (typeof valueBeCopy === \x27object\x27){\n            if(Array.isArray(valueBeCopy)) {\n                copyValue = valueBeCopy.slice();\n            }\n            copyValue = JSON.parse(JSON.stringify(valueBeCopy))\n        } \n            copyValue = valueBeCopy;\n        \/\/ console.log(copyValue)\n        return copyValue;   \n    }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3evalueToCopy\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3evalueBeCopy\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e copyValue;\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e (\x2bvalueBeCopy) === \x3cspan class=\x22hljs-string\x22\x3e\x27number\x27\x3c\/span\x3e \x26amp;\x26amp; \x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e valueBeCopy !== \x3cspan class=\x22hljs-string\x22\x3e\x27object\x27\x3c\/span\x3e) {\n            copyValue = \x2bvalueBeCopy;\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e valueBeCopy === \x3cspan class=\x22hljs-string\x22\x3e\x27string\x27\x3c\/span\x3e) {\n            copyValue = \x3cspan class=\x22hljs-built_in\x22\x3eparseInt\x3c\/span\x3e(copyValue);\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e valueBeCopy === \x3cspan class=\x22hljs-string\x22\x3e\x27object\x27\x3c\/span\x3e){\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(\x3cspan class=\x22hljs-built_in\x22\x3eArray\x3c\/span\x3e.isArray(valueBeCopy)) {\n                copyValue = valueBeCopy.slice();\n            }\n            copyValue = \x3cspan class=\x22hljs-built_in\x22\x3eJSON\x3c\/span\x3e.parse(\x3cspan class=\x22hljs-built_in\x22\x3eJSON\x3c\/span\x3e.stringify(valueBeCopy))\n        } \n            copyValue = valueBeCopy;\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ console.log(copyValue)\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e copyValue;   \n    }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010477174\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010477174\x22 alt=\x22test img\x22 title=\x22test img\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader17\x22\x3eurl 输入到页面完成经历了什么\x3c\/h2\x3e\n\x3cp\x3e感觉这篇文章非常非常详细了~太长了，过段时间再整理(抄袭~)\x3cbr\x3e\x3ca href=\x22http:\/\/www.kuqin.com\/shuoit\/20170324\/353413.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e老生常谈-从输入url到页面展示到底发生了什么\x3c\/a\x3e\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader18\x22\x3e\x3ca href=\x22http:\/\/hexin.life\/more\/pdd.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e选择题\x3c\/a\x3e\x3c\/h1\x3e\n\x3ch2 id=\x22articleHeader19\x22\x3e执行顺序\x3c\/h2\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var input = document.getElementById(\x27cls\x27)\n\ninput.onmouseup = function() {\n    console.log(\x27onmouseup\x27)\n}\ninput.onmousedown = function() {\n    console.log(\x27onmousedown\x27)\n}\ninput.onclick = function() {\n    console.log(\x27onclick\x27)\n}\ninput.onfocus = function() {\n    console.log(\x27onfocus\x27)\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-selector-tag\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3einput\x3c\/span\x3e = document.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27cls\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-selector-tag\x22\x3einput\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.onmouseup\x3c\/span\x3e = function() {\n    console.log(\x3cspan class=\x22hljs-string\x22\x3e\x27onmouseup\x27\x3c\/span\x3e)\n}\n\x3cspan class=\x22hljs-selector-tag\x22\x3einput\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.onmousedown\x3c\/span\x3e = function() {\n    console.log(\x3cspan class=\x22hljs-string\x22\x3e\x27onmousedown\x27\x3c\/span\x3e)\n}\n\x3cspan class=\x22hljs-selector-tag\x22\x3einput\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.onclick\x3c\/span\x3e = function() {\n    console.log(\x3cspan class=\x22hljs-string\x22\x3e\x27onclick\x27\x3c\/span\x3e)\n}\n\x3cspan class=\x22hljs-selector-tag\x22\x3einput\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.onfocus\x3c\/span\x3e = function() {\n    console.log(\x3cspan class=\x22hljs-string\x22\x3e\x27onfocus\x27\x3c\/span\x3e)\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cblockquote\x3e\x3cp\x3eonmousedown =\x26gt; onfocus =\x26gt; onmouseup =\x26gt; onclick\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader20\x22\x3e\x3ca href=\x22http:\/\/hexin.life\/more\/pdd.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ea 链接默认事件的阻止\x3c\/a\x3e\x3c\/h2\x3e\n\x3cblockquote\x3e\n\x3cp\x3eA. a.onmouseup = function(e) {\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    e.preventDefault()\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs css\x22\x3e\x3ccode\x3e    \x3cspan class=\x22hljs-selector-tag\x22\x3ee\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.preventDefault\x3c\/span\x3e()\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eB.  a.onmousedown = function(e) {\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    e.preventDefault()\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs css\x22\x3e\x3ccode\x3e    \x3cspan class=\x22hljs-selector-tag\x22\x3ee\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.preventDefault\x3c\/span\x3e()\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eC.  a.onclick = function(e) {\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    e.preventDefault()\n }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs css\x22\x3e\x3ccode\x3e    \x3cspan class=\x22hljs-selector-tag\x22\x3ee\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.preventDefault\x3c\/span\x3e()\n }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eD. A B C 都可以~\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e=\x26gt; 经测试只有 onclick 可以\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader21\x22\x3eIE浏览器中 attachEvent 方式的事件绑定\x3c\/h2\x3e\n\x3cblockquote\x3e\x3cp\x3eattachEvent的this总是Window。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22el.attachEvent(\x27onclick\x27, function(){\n    alert(this);\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3eel.attachEvent(\x3cspan class=\x22hljs-string\x22\x3e\x27onclick\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{\n    alert(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e);\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader22\x22\x3eHTTP状态码\x3c\/h2\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e400 Bad Request\x3cbr\x3e由于明显的客户端错误（例如，格式错误的请求语法，太大的大小，无效的请求消息或欺骗性路由请求），服务器不能或不会处理该请求。[31]\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e401 Unauthorized（RFC 7235）\x3cbr\x3e参见：HTTP基本认证、HTTP摘要认证\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e类似于403 Forbidden，401语义即“未认证”，即用户没有必要的凭据。[32]该状态码表示当前请求需要用户验证。\x3c\/p\x3e\n\x3cp\x3e注意：当网站（通常是网站域名）禁止IP地址时，有些网站状态码显示的401，表示该特定地址被拒绝访问网站。\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e402 Payment Required\x3cbr\x3e该状态码是为了将来可能的需求而预留的。该状态码最初的意图可能被用作某种形式的数字现金或在线支付方案的一部分，但几乎没有哪家服务商使用，而且这个状态码通常不被使用。如果特定开发人员已超过请求的每日限制，Google Developers API会使用此状态码。[34]\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e403 Forbidden\x3cbr\x3e服务器已经理解请求，但是拒绝执行它。与401响应不同的是，身份验证并不能提供任何帮助，而且这个请求也不应该被重复提交。如果这不是一个HEAD请求，而且服务器希望能够讲清楚为何请求不能被执行，那么就应该在实体内描述拒绝的原因。当然服务器也可以返回一个404响应，假如它不希望让客户端获得任何信息。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader23\x22\x3e选择正确答案(构造函数的引用地址)\x3c\/h2\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var str = \x27asd;  \nvar str2 = new String(str)  var str1 = new String(str)\nconsole.log(str1 == str2 , str1 === str2)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs maxima\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e str = \x27asd;  \n\x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e str2 = \x3cspan class=\x22hljs-built_in\x22\x3enew\x3c\/span\x3e String(str)  \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e str1 = \x3cspan class=\x22hljs-built_in\x22\x3enew\x3c\/span\x3e String(str)\nconsole.\x3cspan class=\x22hljs-built_in\x22\x3elog\x3c\/span\x3e(str1 == str2 , str1 === str2)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eA. true  true\x3cbr\x3eB. true false\x3cbr\x3eC. false true\x3cbr\x3eD. false false\x3c\/p\x3e\n\x3cp\x3e\/\/  =\x26gt; 输出 =\x26gt; false false\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e因为 new 出来的俩个字符串引用地址不同\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader24\x22\x3e下面的输出结果 (this 指向问题)\x3c\/h2\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    function one () { \n        this.name = 1;\n        return function two () {\n                name = 2;\n            return function three() {\n                var name = 3;\n                console.log(this.name);\n            }\n        }\n    }\n    one()()()  \/\/ =\x3e 2;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eone\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{ \n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.name = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3etwo\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n                name = \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ethree\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n                \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e name = \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e;\n                \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.name);\n            }\n        }\n    }\n    one()()()  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ =\x26gt; 2;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cblockquote\x3e\x3cp\x3e还有一部分题忘掉喽 ~ 还有一些题具体的记不太清了，稍作修改，考点计本差不多，上面答案有的是我自己写的，有的是我 google 整理出来的，笔试期间摄像头坏了，而且不小心弹出去了三四次~就当练习了吧，反正简历也没准备好呢，哦，对了，考点大多都在高程中有详细讲解，需要好好看一下高程，面试应该会问一些 Node 和 ES6吧，如果有错误或者更好的方法请告诉我\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e更多笔试整理更新在\x3ca href=\x22http:\/\/hexin.life\/2017\/08\/01\/title-22\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e个人博客\x3c\/a\x3e和\x3ca href=\x22https:\/\/github.com\/18292843691\/FE-interview\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eGithub\x3c\/a\x3e，欢迎小伙伴来一起准备秋招(求大腿抱)。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>2017拼多多前端笔试</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000010477169">https://segmentfault.com/a/1190000010477169</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/21jop0927og/" target="_blank">https://alili.tech/archive/21jop0927og/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>