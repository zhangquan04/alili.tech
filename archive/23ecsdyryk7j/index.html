<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="【工程化】从0搭建VueJS移动端组件库开发框架"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>【工程化】从0搭建VueJS移动端组件库开发框架 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/23ecsdyryk7j/",
				"appid": "1613049289050283", 
				"title": "【工程化】从0搭建VueJS移动端组件库开发框架 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-13T02:30:11"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/i9w1907vd8/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/9rifz9nh76v/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f23ecsdyryk7j%2f&text=%e3%80%90%e5%b7%a5%e7%a8%8b%e5%8c%96%e3%80%91%e4%bb%8e0%e6%90%ad%e5%bb%baVueJS%e7%a7%bb%e5%8a%a8%e7%ab%af%e7%bb%84%e4%bb%b6%e5%ba%93%e5%bc%80%e5%8f%91%e6%a1%86%e6%9e%b6"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f23ecsdyryk7j%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f23ecsdyryk7j%2f&text=%e3%80%90%e5%b7%a5%e7%a8%8b%e5%8c%96%e3%80%91%e4%bb%8e0%e6%90%ad%e5%bb%baVueJS%e7%a7%bb%e5%8a%a8%e7%ab%af%e7%bb%84%e4%bb%b6%e5%ba%93%e5%bc%80%e5%8f%91%e6%a1%86%e6%9e%b6"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f23ecsdyryk7j%2f&title=%e3%80%90%e5%b7%a5%e7%a8%8b%e5%8c%96%e3%80%91%e4%bb%8e0%e6%90%ad%e5%bb%baVueJS%e7%a7%bb%e5%8a%a8%e7%ab%af%e7%bb%84%e4%bb%b6%e5%ba%93%e5%bc%80%e5%8f%91%e6%a1%86%e6%9e%b6"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f23ecsdyryk7j%2f&is_video=false&description=%e3%80%90%e5%b7%a5%e7%a8%8b%e5%8c%96%e3%80%91%e4%bb%8e0%e6%90%ad%e5%bb%baVueJS%e7%a7%bb%e5%8a%a8%e7%ab%af%e7%bb%84%e4%bb%b6%e5%ba%93%e5%bc%80%e5%8f%91%e6%a1%86%e6%9e%b6"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e3%80%90%e5%b7%a5%e7%a8%8b%e5%8c%96%e3%80%91%e4%bb%8e0%e6%90%ad%e5%bb%baVueJS%e7%a7%bb%e5%8a%a8%e7%ab%af%e7%bb%84%e4%bb%b6%e5%ba%93%e5%bc%80%e5%8f%91%e6%a1%86%e6%9e%b6&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f23ecsdyryk7j%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f23ecsdyryk7j%2f&title=%e3%80%90%e5%b7%a5%e7%a8%8b%e5%8c%96%e3%80%91%e4%bb%8e0%e6%90%ad%e5%bb%baVueJS%e7%a7%bb%e5%8a%a8%e7%ab%af%e7%bb%84%e4%bb%b6%e5%ba%93%e5%bc%80%e5%8f%91%e6%a1%86%e6%9e%b6"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f23ecsdyryk7j%2f&title=%e3%80%90%e5%b7%a5%e7%a8%8b%e5%8c%96%e3%80%91%e4%bb%8e0%e6%90%ad%e5%bb%baVueJS%e7%a7%bb%e5%8a%a8%e7%ab%af%e7%bb%84%e4%bb%b6%e5%ba%93%e5%bc%80%e5%8f%91%e6%a1%86%e6%9e%b6"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f23ecsdyryk7j%2f&title=%e3%80%90%e5%b7%a5%e7%a8%8b%e5%8c%96%e3%80%91%e4%bb%8e0%e6%90%ad%e5%bb%baVueJS%e7%a7%bb%e5%8a%a8%e7%ab%af%e7%bb%84%e4%bb%b6%e5%ba%93%e5%bc%80%e5%8f%91%e6%a1%86%e6%9e%b6"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f23ecsdyryk7j%2f&title=%e3%80%90%e5%b7%a5%e7%a8%8b%e5%8c%96%e3%80%91%e4%bb%8e0%e6%90%ad%e5%bb%baVueJS%e7%a7%bb%e5%8a%a8%e7%ab%af%e7%bb%84%e4%bb%b6%e5%ba%93%e5%bc%80%e5%8f%91%e6%a1%86%e6%9e%b6"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">【工程化】从0搭建VueJS移动端组件库开发框架</h1><div class="meta"><div class="postdate"><time datetime="2019-01-13" itemprop="datePublished">2019-01-13</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e之前发表过一篇\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000009295452\x22\x3e《Vue-Donut——专用于构建Vue的UI组件库的开发框架》\x3c\/a\x3e，仅仅是对框架一个粗略的介绍，并没有针对里面的实现方式进行详细说明。\x3c\/p\x3e\n\x3cp\x3e最近参与维护公司内部的一个针对移动端的UI组件库，该组件库缺乏文档和严格的文件组织结构。\x3ccode\x3eVue-Donut\x3c\/code\x3e的功能比较简单，并不能方便地创建针对移动端UI组件库的文档和预览。在参考了\x3ccode\x3emint-ui\x3c\/code\x3e等业界内成熟的方案之后，我在\x3ccode\x3eVue-Donut\x3c\/code\x3e的基础上进行了拓展，最后搭建出了一个非常方便且自动化的开发框架。\x3c\/p\x3e\n\x3cp\x3e由于觉得开发的过程非常有意思，也想记录一下自己的开发思路，因此决定好好地写一篇文章作为记录分享。\x3c\/p\x3e\n\x3cp\x3e项目地址：\x3ca href=\x22https:\/\/github.com\/jrainlau\/vue-donut\/tree\/mobile\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/jrainlau\/v...\x3c\/a\x3e\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader0\x22\x3e1. 功能分析\x3c\/h1\x3e\n\x3cp\x3e首先我们来规划一下这个框架的最终目的是什么：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVOEqW?w=1544\x26amp;h=1056\x22 src=\x22https:\/\/static.alili.tech\/img\/bVOEqW?w=1544\x26amp;h=1056\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e如图所示，通过该框架可以生成一个文档页面。这个页面分为三个部分：导航、文档、预览。\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e导航：通过导航切换不同组件的文档和预览。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e文档：该类型组件所对应的文档，以markdown形式书写。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e预览：该类型组件所对应的预览页面。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e为了让组件的开发和文档的维护更加高效，我们希望这个框架可以更加自动化。如果我们只要开不同组件的预览的页面及其对应的说明文档\x3ccode\x3eREADME\x3c\/code\x3e，框架就能自动帮我们生成对应的导航和HTML内容，岂不妙哉？除此之外，当我们已经把所有的UI组件都开发好了，统统放在\x3ccode\x3e\/components\x3c\/code\x3e目录下，如果能够通过框架进行一键构建打包，最后产出一个npm包，那么别人使用这套UI组件库也会变得非常简单。带着这个想法，我们来分析一下我们可能需要用到的关键技术。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader1\x22\x3e2. 技术分析\x3c\/h1\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e使用webpack2作为框架核心：使用方便，高度可定制。同时webpack2文档已经相当齐全，生态圈繁荣，社区活跃，遇到的坑基本上都可以在google和stackoverflow找到。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e预览页面以\x3ccode\x3eiframe\x3c\/code\x3e的形式插入到文档页面中：维护组件库的时候只需要聚焦于组件的开发和预览页面的组织，无需分心维护导航和文档，实现了解耦。因此意味着这是一个基于Vue.js的\x3cstrong\x3e多页应用\x3c\/strong\x3e。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e自动生成导航：使用\x3ccode\x3evue-router\x3c\/code\x3e进行页面切换。每当新建一个预览页面，就会自动在页面上生成对应的导航，并自动维护导航和路由的关系。因此，我们需要一套机制去监听文件结构的变化。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e自动生成文档：一个预览页面对应一份文档，所以文档理应以\x3ccode\x3eREADME.md\x3c\/code\x3e的形式存放在对应的预览页面文件夹内。我们需要一个能够把\x3ccode\x3eREADME.md\x3c\/code\x3e直接转化成html内容的办法。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e开发者模式：通过一条命令，启动一个\x3ccode\x3ewebpack-dev-server\x3c\/code\x3e，提供热更新和自动刷新功能。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e构建打包模式：通过一条命令，自动把\x3ccode\x3e\/components\x3c\/code\x3e目录下的所有资源打包成一个npm包。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e页面构建模式：通过一条命令，生成能够直接部署使用的静态资源文件。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e通过对技术的梳理，我们脑海里面已经有了一个印象，接下来就是一步一步地进行开发了。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader2\x22\x3e3. 梳理框架目录结构\x3c\/h1\x3e\n\x3cp\x3e一个好的目录结构，能够极大地方便我们接下来的工作。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22.\n├── index.html  \/\/ 文档页的入口html\n├── view.html  \/\/ 预览页的入口html\n├── package.json  \/\/ 依赖声明、npm script命令\n├── src\n│\x26nbsp;\x26nbsp; ├── document  \/\/ 文档页目录\n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; ├── doc-app.vue  \/\/ 文档页入口.vue文件\n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; ├── doc-entry.js  \/\/ 文档页入口.js文件\n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; ├── doc-router.js  \/\/ 文档页路由配置\n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; ├── doc_comps  \/\/ 文档页组件\n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; └── static  \/\/ 文档页静态资源\n│\x26nbsp;\x26nbsp; └── view  \/\/ 预览页目录\n│\x26nbsp;\x26nbsp;     ├── assets  \/\/ 预览页静态资源\n│\x26nbsp;\x26nbsp;     ├── components \/\/ UI组件库\n│\x26nbsp;\x26nbsp;     ├── pages \/\/ 存放不同的预览页\n│\x26nbsp;\x26nbsp;     ├── view-app.vue \/\/ 预览页入口.vue文件\n│\x26nbsp;\x26nbsp;     ├── view-entry.js  \/\/ 预览页入口.js文件\n│\x26nbsp;\x26nbsp;     └── view-router.js  \/\/ 预览页路由配置\n└── webpack\n    ├── webpack.base.config.js \/\/ webpack通用配置 \n    ├── webpack.build.config.js  \/\/ UI库构建打包配置\n    ├── webpack.dev.config.js  \/\/ 开发模式配置\n    └── webpack.doc.config.js  \/\/ 静态资源构建配置\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3e.\n├── index\x3cspan class=\x22hljs-selector-class\x22\x3e.html\x3c\/span\x3e  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 文档页的入口html\x3c\/span\x3e\n├── view\x3cspan class=\x22hljs-selector-class\x22\x3e.html\x3c\/span\x3e  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 预览页的入口html\x3c\/span\x3e\n├── package\x3cspan class=\x22hljs-selector-class\x22\x3e.json\x3c\/span\x3e  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 依赖声明、npm script命令\x3c\/span\x3e\n├── src\n│\x26nbsp;\x26nbsp; ├── document  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 文档页目录\x3c\/span\x3e\n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; ├── doc-app\x3cspan class=\x22hljs-selector-class\x22\x3e.vue\x3c\/span\x3e  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 文档页入口.vue文件\x3c\/span\x3e\n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; ├── doc-entry\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 文档页入口.js文件\x3c\/span\x3e\n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; ├── doc-router\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 文档页路由配置\x3c\/span\x3e\n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; ├── doc_comps  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 文档页组件\x3c\/span\x3e\n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; └── static  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 文档页静态资源\x3c\/span\x3e\n│\x26nbsp;\x26nbsp; └── view  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 预览页目录\x3c\/span\x3e\n│\x26nbsp;\x26nbsp;     ├── assets  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 预览页静态资源\x3c\/span\x3e\n│\x26nbsp;\x26nbsp;     ├── components \x3cspan class=\x22hljs-comment\x22\x3e\/\/ UI组件库\x3c\/span\x3e\n│\x26nbsp;\x26nbsp;     ├── pages \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 存放不同的预览页\x3c\/span\x3e\n│\x26nbsp;\x26nbsp;     ├── view-app\x3cspan class=\x22hljs-selector-class\x22\x3e.vue\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 预览页入口.vue文件\x3c\/span\x3e\n│\x26nbsp;\x26nbsp;     ├── view-entry\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 预览页入口.js文件\x3c\/span\x3e\n│\x26nbsp;\x26nbsp;     └── view-router\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 预览页路由配置\x3c\/span\x3e\n└── webpack\n    ├── webpack\x3cspan class=\x22hljs-selector-class\x22\x3e.base\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.config\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/ webpack通用配置 \x3c\/span\x3e\n    ├── webpack\x3cspan class=\x22hljs-selector-class\x22\x3e.build\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.config\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ UI库构建打包配置\x3c\/span\x3e\n    ├── webpack\x3cspan class=\x22hljs-selector-class\x22\x3e.dev\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.config\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 开发模式配置\x3c\/span\x3e\n    └── webpack\x3cspan class=\x22hljs-selector-class\x22\x3e.doc\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.config\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 静态资源构建配置\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e可以看到，目录结构并不复杂，接下来我们首先对webpack进行配置，以便我们能够把项目跑起来。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader3\x22\x3e4. webapck配置\x3c\/h1\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e4.1 基础配置\x3c\/h3\x3e\n\x3cp\x3e进入到\x3ccode\x3e\/webpack\x3c\/code\x3e目录，新建一个\x3ccode\x3ewebpack.base.config.js\x3c\/code\x3e文件，其内容如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const { join } = require(\x27path\x27)\nconst hljs = require(\x27highlight.js\x27)\n\n\/\/ 配置markdown解析、以便高亮显示markdown中的代码块\nconst markdown = require(\x27markdown-it\x27)({\n  highlight: function (str, lang) {\n    if (lang \x26amp;\x26amp; hljs.getLanguage(lang)) {\n      try {\n        return \x27\x3cpre class=\x26quot;hljs\x26quot;\x3e\x3ccode\x3e\x27 \x2b\n               hljs.highlight(lang, str, true).value \x2b\n               \x27\x3c\/code\x3e\x3c\/pre\x3e\x27;\n      } catch (__) {}\n    }\n\n    return \x27\x3cpre class=\x26quot;hljs\x26quot;\x3e\x3ccode\x3e\x27 \x2b markdown.utils.escapeHtml(str) \x2b \x27\x3c\/code\x3e\x3c\/pre\x3e\x27;\n  }\n})\n\nconst resolve = dir =\x3e join(__dirname, \x27..\x27, dir)\n\nmodule.exports = {\n  \/\/ 只配置输出路径\n  output: {\n    filename: \x27js\/[name].js\x27,\n    path: resolve(\x27dist\x27),\n    publicPath: \x27\/\x27\n  },\n\n  \/\/ 配置不同的loader以便资源加载\n  \/\/ eslint是标配，建议加上\n  module: {\n    rules: [\n      {\n        test: \/\\.js$\/,\n        exclude: \/node_modules\/,\n        use: [\n          \x27babel-loader\x27,\n          \x27eslint-loader\x27\n        ]\n      },\n      {\n        enforce: \x27pre\x27,\n        test: \/\\.vue$\/,\n        loader: \x27eslint-loader\x27,\n        exclude: \/node_modules\/\n      },\n      {\n        test: \/\\.(png|jpg|gif|svg)$\/,\n        loader: \x27url-loader\x27\n      },\n      {\n        test: \/\\.css$\/,\n        use: [{\n          loader: \x27style-loader\x27\n        }, {\n          loader: \x27css-loader\x27\n        }]\n      },\n      {\n        test: \/\\.less$\/,\n        use: [{\n          loader: \x27style-loader\x27 \/\/ creates style nodes from JS strings\n        }, {\n          loader: \x27css-loader\x27 \/\/ translates CSS into CommonJS\n        }, {\n          loader: \x27less-loader\x27 \/\/ compiles Less to CSS\n        }]\n      },\n      \/\/ vue-markdown-loader能够把.md文件直接转化成vue组件\n      {\n        test: \/\\.md$\/,\n        loader: \x27vue-markdown-loader\x27,\n        options: markdown\n      }\n    ]\n  },\n  resolve: {\n    \/\/ 该项配置能够在加载资源的时候省略后缀名\n    extensions: [\x27.js\x27, \x27.vue\x27, \x27.json\x27, \x27.css\x27, \x27.less\x27],\n    modules: [resolve(\x27src\x27), \x27node_modules\x27],\n    \/\/ 配置路径别名\n    alias: {\n      \x27~src\x27: resolve(\x27src\x27),\n      \x27~components\x27: resolve(\x27src\/view\/components\x27),\n      \x27~pages\x27: resolve(\x27src\/view\/pages\x27),\n      \x27~assets\x27: resolve(\x27src\/view\/assets\x27),\n      \x27~store\x27: resolve(\x27src\/store\x27),\n      \x27~static\x27: resolve(\x27src\/document\/static\x27),\n      \x27~docComps\x27: resolve(\x27src\/document\/doc_comps\x27)\n    }\n  }\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e { join } = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27path\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e hljs = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27highlight.js\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 配置markdown解析、以便高亮显示markdown中的代码块\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e markdown = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27markdown-it\x27\x3c\/span\x3e)({\n  \x3cspan class=\x22hljs-attr\x22\x3ehighlight\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3estr, lang\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (lang \x26amp;\x26amp; hljs.getLanguage(lang)) {\n      \x3cspan class=\x22hljs-keyword\x22\x3etry\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;pre class=\x22hljs\x22\x26gt;\x26lt;code\x26gt;\x27\x3c\/span\x3e \x2b\n               hljs.highlight(lang, str, \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e).value \x2b\n               \x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;\/code\x26gt;\x26lt;\/pre\x26gt;\x27\x3c\/span\x3e;\n      } \x3cspan class=\x22hljs-keyword\x22\x3ecatch\x3c\/span\x3e (__) {}\n    }\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;pre class=\x22hljs\x22\x26gt;\x26lt;code\x26gt;\x27\x3c\/span\x3e \x2b markdown.utils.escapeHtml(str) \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;\/code\x26gt;\x26lt;\/pre\x26gt;\x27\x3c\/span\x3e;\n  }\n})\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e resolve = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3edir\x3c\/span\x3e =\x26gt;\x3c\/span\x3e join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27..\x27\x3c\/span\x3e, dir)\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 只配置输出路径\x3c\/span\x3e\n  output: {\n    \x3cspan class=\x22hljs-attr\x22\x3efilename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27js\/[name].js\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: resolve(\x3cspan class=\x22hljs-string\x22\x3e\x27dist\x27\x3c\/span\x3e),\n    \x3cspan class=\x22hljs-attr\x22\x3epublicPath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\/\x27\x3c\/span\x3e\n  },\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 配置不同的loader以便资源加载\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ eslint是标配，建议加上\x3c\/span\x3e\n  \x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3erules\x3c\/span\x3e: [\n      {\n        \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.js$\/\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eexclude\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/node_modules\/\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3euse\x3c\/span\x3e: [\n          \x3cspan class=\x22hljs-string\x22\x3e\x27babel-loader\x27\x3c\/span\x3e,\n          \x3cspan class=\x22hljs-string\x22\x3e\x27eslint-loader\x27\x3c\/span\x3e\n        ]\n      },\n      {\n        \x3cspan class=\x22hljs-attr\x22\x3eenforce\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27pre\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.vue$\/\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27eslint-loader\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eexclude\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/node_modules\/\x3c\/span\x3e\n      },\n      {\n        \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.(png|jpg|gif|svg)$\/\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27url-loader\x27\x3c\/span\x3e\n      },\n      {\n        \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.css$\/\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3euse\x3c\/span\x3e: [{\n          \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27style-loader\x27\x3c\/span\x3e\n        }, {\n          \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27css-loader\x27\x3c\/span\x3e\n        }]\n      },\n      {\n        \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.less$\/\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3euse\x3c\/span\x3e: [{\n          \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27style-loader\x27\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/ creates style nodes from JS strings\x3c\/span\x3e\n        }, {\n          \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27css-loader\x27\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/ translates CSS into CommonJS\x3c\/span\x3e\n        }, {\n          \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27less-loader\x27\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/ compiles Less to CSS\x3c\/span\x3e\n        }]\n      },\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ vue-markdown-loader能够把.md文件直接转化成vue组件\x3c\/span\x3e\n      {\n        \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.md$\/\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27vue-markdown-loader\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eoptions\x3c\/span\x3e: markdown\n      }\n    ]\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3eresolve\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 该项配置能够在加载资源的时候省略后缀名\x3c\/span\x3e\n    extensions: [\x3cspan class=\x22hljs-string\x22\x3e\x27.js\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27.vue\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27.json\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27.css\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27.less\x27\x3c\/span\x3e],\n    \x3cspan class=\x22hljs-attr\x22\x3emodules\x3c\/span\x3e: [resolve(\x3cspan class=\x22hljs-string\x22\x3e\x27src\x27\x3c\/span\x3e), \x3cspan class=\x22hljs-string\x22\x3e\x27node_modules\x27\x3c\/span\x3e],\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 配置路径别名\x3c\/span\x3e\n    alias: {\n      \x3cspan class=\x22hljs-string\x22\x3e\x27~src\x27\x3c\/span\x3e: resolve(\x3cspan class=\x22hljs-string\x22\x3e\x27src\x27\x3c\/span\x3e),\n      \x3cspan class=\x22hljs-string\x22\x3e\x27~components\x27\x3c\/span\x3e: resolve(\x3cspan class=\x22hljs-string\x22\x3e\x27src\/view\/components\x27\x3c\/span\x3e),\n      \x3cspan class=\x22hljs-string\x22\x3e\x27~pages\x27\x3c\/span\x3e: resolve(\x3cspan class=\x22hljs-string\x22\x3e\x27src\/view\/pages\x27\x3c\/span\x3e),\n      \x3cspan class=\x22hljs-string\x22\x3e\x27~assets\x27\x3c\/span\x3e: resolve(\x3cspan class=\x22hljs-string\x22\x3e\x27src\/view\/assets\x27\x3c\/span\x3e),\n      \x3cspan class=\x22hljs-string\x22\x3e\x27~store\x27\x3c\/span\x3e: resolve(\x3cspan class=\x22hljs-string\x22\x3e\x27src\/store\x27\x3c\/span\x3e),\n      \x3cspan class=\x22hljs-string\x22\x3e\x27~static\x27\x3c\/span\x3e: resolve(\x3cspan class=\x22hljs-string\x22\x3e\x27src\/document\/static\x27\x3c\/span\x3e),\n      \x3cspan class=\x22hljs-string\x22\x3e\x27~docComps\x27\x3c\/span\x3e: resolve(\x3cspan class=\x22hljs-string\x22\x3e\x27src\/document\/doc_comps\x27\x3c\/span\x3e)\n    }\n  }\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e4.2 开发模式配置\x3c\/h3\x3e\n\x3cp\x3e基础配置好了，我们就可以开始开发模式的配置了。在当前目录下，新建一个\x3ccode\x3ewebpack.dev.config.js\x3c\/code\x3e文件，并写入如下内容：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const { join } = require(\x27path\x27)\nconst webpack = require(\x27webpack\x27)\nconst merge = require(\x27webpack-merge\x27)\nconst basicConfig = require(\x27.\/webpack.base.config\x27)\nconst HtmlWebpackPlugin = require(\x27html-webpack-plugin\x27)\n\nconst resolve = dir =\x3e join(__dirname, \x27..\x27, dir)\n\nmodule.exports = merge(basicConfig, {\n  \/\/ 由于是多页应用，所以应该有2个入口文件\n  entry: {\n    app: \x27.\/src\/document\/doc-entry.js\x27,\n    view: \x27.\/src\/view\/view-entry.js\x27\n  },\n  module: {\n    rules: [\n      {\n        test: \/\\.vue$\/,\n        loader: \x27vue-loader\x27\n      }\n    ]\n  },\n  devtool: \x27inline-source-map\x27,\n\n  \/\/ webpack-dev-server配置\n  devServer: {\n    contentBase: resolve(\x27\/\x27),\n    compress: true,\n    hot: true,\n    inline: true,\n    publicPath: \x27\/\x27,\n    stats: \x27minimal\x27\n  },\n  plugins: [\n    \/\/ 热更新插件\n    new webpack.HotModuleReplacementPlugin(),\n    new webpack.NamedModulesPlugin(),\n    \n    \/\/ 把生成的js注入到入口html文件\n    new HtmlWebpackPlugin({\n      filename: \x27index.html\x27,\n      template: \x27index.html\x27,\n      inject: true,\n      chunks: [\x27app\x27]\n    }),\n    new HtmlWebpackPlugin({\n      filename: \x27view.html\x27,\n      template: \x27view.html\x27,\n      inject: true,\n      chunks: [\x27view\x27]\n    })\n  ]\n})\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs typescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e { join } = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27path\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e webpack = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e merge = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack-merge\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e basicConfig = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/webpack.base.config\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e HtmlWebpackPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27html-webpack-plugin\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e resolve = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3edir\x3c\/span\x3e =\x26gt;\x3c\/span\x3e join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27..\x27\x3c\/span\x3e, dir)\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = merge(basicConfig, {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 由于是多页应用，所以应该有2个入口文件\x3c\/span\x3e\n  entry: {\n    app: \x3cspan class=\x22hljs-string\x22\x3e\x27.\/src\/document\/doc-entry.js\x27\x3c\/span\x3e,\n    view: \x3cspan class=\x22hljs-string\x22\x3e\x27.\/src\/view\/view-entry.js\x27\x3c\/span\x3e\n  },\n  \x3cspan class=\x22hljs-keyword\x22\x3emodule\x3c\/span\x3e: {\n    rules: [\n      {\n        test: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.vue$\/\x3c\/span\x3e,\n        loader: \x3cspan class=\x22hljs-string\x22\x3e\x27vue-loader\x27\x3c\/span\x3e\n      }\n    ]\n  },\n  devtool: \x3cspan class=\x22hljs-string\x22\x3e\x27inline-source-map\x27\x3c\/span\x3e,\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ webpack-dev-server配置\x3c\/span\x3e\n  devServer: {\n    contentBase: resolve(\x3cspan class=\x22hljs-string\x22\x3e\x27\/\x27\x3c\/span\x3e),\n    compress: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n    hot: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n    inline: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n    publicPath: \x3cspan class=\x22hljs-string\x22\x3e\x27\/\x27\x3c\/span\x3e,\n    stats: \x3cspan class=\x22hljs-string\x22\x3e\x27minimal\x27\x3c\/span\x3e\n  },\n  plugins: [\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 热更新插件\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.HotModuleReplacementPlugin(),\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.NamedModulesPlugin(),\n    \n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 把生成的js注入到入口html文件\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e HtmlWebpackPlugin({\n      filename: \x3cspan class=\x22hljs-string\x22\x3e\x27index.html\x27\x3c\/span\x3e,\n      template: \x3cspan class=\x22hljs-string\x22\x3e\x27index.html\x27\x3c\/span\x3e,\n      inject: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n      chunks: [\x3cspan class=\x22hljs-string\x22\x3e\x27app\x27\x3c\/span\x3e]\n    }),\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e HtmlWebpackPlugin({\n      filename: \x3cspan class=\x22hljs-string\x22\x3e\x27view.html\x27\x3c\/span\x3e,\n      template: \x3cspan class=\x22hljs-string\x22\x3e\x27view.html\x27\x3c\/span\x3e,\n      inject: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n      chunks: [\x3cspan class=\x22hljs-string\x22\x3e\x27view\x27\x3c\/span\x3e]\n    })\n  ]\n})\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e非常简单的配置，值得注意的是因为多页应用的缘故，入口文件和\x3ccode\x3eHtmlWebpackPlugin\x3c\/code\x3e都要写多份。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e4.3 构件打包配置\x3c\/h3\x3e\n\x3cp\x3e接下来，还有把UI组件库构建打包成npm包的配置。新建一个名为\x3ccode\x3ewebpack.build.config.js\x3c\/code\x3e的文件：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const { join } = require(\x27path\x27)\nconst merge = require(\x27webpack-merge\x27)\nconst basicConfig = require(\x27.\/webpack.base.config\x27)\nconst CleanWebpackPlugin = require(\x27clean-webpack-plugin\x27)\nconst CopyWebpackPlugin = require(\x27copy-webpack-plugin\x27)\n\nconst resolve = dir =\x3e join(__dirname, \x27..\x27, dir)\n\nmodule.exports = merge(basicConfig, {\n  \/\/ 入口文件\n  entry: {\n    app: \x27.\/src\/view\/components\/index.js\x27\n  },\n  devtool: \x27source-map\x27,\n  \/\/ 输出位置为dist目录，名字自定义，输出格式为umd格式\n  output: {\n    path: resolve(\x27dist\x27),\n    filename: \x27index.js\x27,\n    library: \x27my-project\x27,\n    libraryTarget: \x27umd\x27\n  },\n  module: {\n    rules: [\n      {\n        test: \/\\.vue$\/,\n        loader: \x27vue-loader\x27\n      }\n    ]\n  },\n  plugins: [\n    \/\/ 每一次打包都把上一次的清空\n    new CleanWebpackPlugin([\x27dist\x27], {\n      root: resolve(\x27.\/\x27)\n    }),\n    \/\/ 把静态资源复制出去，以便实现UI换肤等功能\n    new CopyWebpackPlugin([\n      { from: \x27src\/view\/assets\x27, to: \x27assets\x27 }\n    ])\n  ]\n})\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs typescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e { join } = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27path\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e merge = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack-merge\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e basicConfig = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/webpack.base.config\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e CleanWebpackPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27clean-webpack-plugin\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e CopyWebpackPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27copy-webpack-plugin\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e resolve = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3edir\x3c\/span\x3e =\x26gt;\x3c\/span\x3e join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27..\x27\x3c\/span\x3e, dir)\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = merge(basicConfig, {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 入口文件\x3c\/span\x3e\n  entry: {\n    app: \x3cspan class=\x22hljs-string\x22\x3e\x27.\/src\/view\/components\/index.js\x27\x3c\/span\x3e\n  },\n  devtool: \x3cspan class=\x22hljs-string\x22\x3e\x27source-map\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 输出位置为dist目录，名字自定义，输出格式为umd格式\x3c\/span\x3e\n  output: {\n    path: resolve(\x3cspan class=\x22hljs-string\x22\x3e\x27dist\x27\x3c\/span\x3e),\n    filename: \x3cspan class=\x22hljs-string\x22\x3e\x27index.js\x27\x3c\/span\x3e,\n    library: \x3cspan class=\x22hljs-string\x22\x3e\x27my-project\x27\x3c\/span\x3e,\n    libraryTarget: \x3cspan class=\x22hljs-string\x22\x3e\x27umd\x27\x3c\/span\x3e\n  },\n  \x3cspan class=\x22hljs-keyword\x22\x3emodule\x3c\/span\x3e: {\n    rules: [\n      {\n        test: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.vue$\/\x3c\/span\x3e,\n        loader: \x3cspan class=\x22hljs-string\x22\x3e\x27vue-loader\x27\x3c\/span\x3e\n      }\n    ]\n  },\n  plugins: [\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 每一次打包都把上一次的清空\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e CleanWebpackPlugin([\x3cspan class=\x22hljs-string\x22\x3e\x27dist\x27\x3c\/span\x3e], {\n      root: resolve(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/\x27\x3c\/span\x3e)\n    }),\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 把静态资源复制出去，以便实现UI换肤等功能\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e CopyWebpackPlugin([\n      { \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27src\/view\/assets\x27\x3c\/span\x3e, to: \x3cspan class=\x22hljs-string\x22\x3e\x27assets\x27\x3c\/span\x3e }\n    ])\n  ]\n})\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e4.4 一键生成文档配置\x3c\/h3\x3e\n\x3cp\x3e最后，我们一起来配置一键生成文档网站的\x3ccode\x3ewebpack.doc.config.js\x3c\/code\x3e：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const { join } = require(\x27path\x27)\nconst webpack = require(\x27webpack\x27)\nconst merge = require(\x27webpack-merge\x27)\nconst basicConfig = require(\x27.\/webpack.base.config\x27)\nconst HtmlWebpackPlugin = require(\x27html-webpack-plugin\x27)\nconst ExtractTextPlugin = require(\x27extract-text-webpack-plugin\x27)\nconst CleanWebpackPlugin = require(\x27clean-webpack-plugin\x27)\n\nconst resolve = dir =\x3e join(__dirname, \x27..\x27, dir)\n\nmodule.exports = merge(basicConfig, {\n  \/\/ 类似开发者模式，两个入口文件，多了一个公共依赖包vendor\n  \/\/ 以`js\/`开头能够自动输出到`js`目录下\n  entry: {\n    \x27js\/app\x27: \x27.\/src\/document\/doc-entry.js\x27,\n    \x27js\/view\x27: \x27.\/src\/view\/view-entry.js\x27,\n    \x27js\/vendor\x27: [\n      \x27vue\x27,\n      \x27vue-router\x27\n    ]\n  },\n  devtool: \x27source-map\x27,\n\n  \/\/ 输出文件加hash\n  output: {\n    path: resolve(\x27docs\x27),\n    filename: \x27[name].[chunkhash:8].js\x27,\n    chunkFilename: \x27js\/[name].[chunkhash:8].js\x27\n  },\n  module: {\n    rules: [\n      {\n        test: \/\\.vue$\/,\n        loader: \x27vue-loader\x27,\n        options: {\n          loaders: {\n            css: ExtractTextPlugin.extract({\n              use: [\x27css-loader\x27]\n            }),\n            less: ExtractTextPlugin.extract({\n              use: [\x27css-loader\x27, \x27less-loader\x27]\n            })\n          }\n        }\n      }\n    ]\n  },\n  plugins: [\n    \/\/ 提取css文件并指定其输出位置和命名\n    new ExtractTextPlugin({\n      filename: \x27css\/[name].[contenthash:8].css\x27,\n      allChunks: true\n    }),\n    \n    \/\/ 抽离公共依赖\n    new webpack.optimize.CommonsChunkPlugin({\n      names: [\x27js\/vendor\x27, \x27js\/manifest\x27]\n    }),\n    \n    \/\/ 把构建出的静态资源注入到多个入口html中\n    new HtmlWebpackPlugin({\n      filename: \x27index.html\x27,\n      template: \x27index.html\x27,\n      inject: true,\n      minify: {\n        removeComments: true,\n        collapseWhitespace: true,\n        removeAttributeQuotes: true\n      },\n      chunks: [\x27js\/vendor\x27, \x27js\/manifest\x27, \x27js\/app\x27],\n      chunksSortMode: \x27dependency\x27\n    }),\n    new HtmlWebpackPlugin({\n      filename: \x27view.html\x27,\n      template: \x27view.html\x27,\n      inject: true,\n      minify: {\n        removeComments: true,\n        collapseWhitespace: true,\n        removeAttributeQuotes: true\n      },\n      chunks: [\x27js\/vendor\x27, \x27js\/manifest\x27, \x27js\/view\x27],\n      chunksSortMode: \x27dependency\x27\n    }),\n    new webpack.LoaderOptionsPlugin({\n      minimize: true,\n      debug: false\n    }),\n    new webpack.optimize.OccurrenceOrderPlugin(),\n    new CleanWebpackPlugin([\x27docs\x27], {\n      root: resolve(\x27.\/\x27)\n    })\n  ]\n})\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs typescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e { join } = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27path\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e webpack = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e merge = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack-merge\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e basicConfig = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/webpack.base.config\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e HtmlWebpackPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27html-webpack-plugin\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e ExtractTextPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27extract-text-webpack-plugin\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e CleanWebpackPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27clean-webpack-plugin\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e resolve = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3edir\x3c\/span\x3e =\x26gt;\x3c\/span\x3e join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27..\x27\x3c\/span\x3e, dir)\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = merge(basicConfig, {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 类似开发者模式，两个入口文件，多了一个公共依赖包vendor\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 以`js\/`开头能够自动输出到`js`目录下\x3c\/span\x3e\n  entry: {\n    \x3cspan class=\x22hljs-string\x22\x3e\x27js\/app\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27.\/src\/document\/doc-entry.js\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x27js\/view\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27.\/src\/view\/view-entry.js\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x27js\/vendor\x27\x3c\/span\x3e: [\n      \x3cspan class=\x22hljs-string\x22\x3e\x27vue\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-string\x22\x3e\x27vue-router\x27\x3c\/span\x3e\n    ]\n  },\n  devtool: \x3cspan class=\x22hljs-string\x22\x3e\x27source-map\x27\x3c\/span\x3e,\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 输出文件加hash\x3c\/span\x3e\n  output: {\n    path: resolve(\x3cspan class=\x22hljs-string\x22\x3e\x27docs\x27\x3c\/span\x3e),\n    filename: \x3cspan class=\x22hljs-string\x22\x3e\x27[name].[chunkhash:8].js\x27\x3c\/span\x3e,\n    chunkFilename: \x3cspan class=\x22hljs-string\x22\x3e\x27js\/[name].[chunkhash:8].js\x27\x3c\/span\x3e\n  },\n  \x3cspan class=\x22hljs-keyword\x22\x3emodule\x3c\/span\x3e: {\n    rules: [\n      {\n        test: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.vue$\/\x3c\/span\x3e,\n        loader: \x3cspan class=\x22hljs-string\x22\x3e\x27vue-loader\x27\x3c\/span\x3e,\n        options: {\n          loaders: {\n            css: ExtractTextPlugin.extract({\n              use: [\x3cspan class=\x22hljs-string\x22\x3e\x27css-loader\x27\x3c\/span\x3e]\n            }),\n            less: ExtractTextPlugin.extract({\n              use: [\x3cspan class=\x22hljs-string\x22\x3e\x27css-loader\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27less-loader\x27\x3c\/span\x3e]\n            })\n          }\n        }\n      }\n    ]\n  },\n  plugins: [\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 提取css文件并指定其输出位置和命名\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e ExtractTextPlugin({\n      filename: \x3cspan class=\x22hljs-string\x22\x3e\x27css\/[name].[contenthash:8].css\x27\x3c\/span\x3e,\n      allChunks: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n    }),\n    \n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 抽离公共依赖\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.optimize.CommonsChunkPlugin({\n      names: [\x3cspan class=\x22hljs-string\x22\x3e\x27js\/vendor\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27js\/manifest\x27\x3c\/span\x3e]\n    }),\n    \n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 把构建出的静态资源注入到多个入口html中\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e HtmlWebpackPlugin({\n      filename: \x3cspan class=\x22hljs-string\x22\x3e\x27index.html\x27\x3c\/span\x3e,\n      template: \x3cspan class=\x22hljs-string\x22\x3e\x27index.html\x27\x3c\/span\x3e,\n      inject: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n      minify: {\n        removeComments: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n        collapseWhitespace: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n        removeAttributeQuotes: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n      },\n      chunks: [\x3cspan class=\x22hljs-string\x22\x3e\x27js\/vendor\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27js\/manifest\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27js\/app\x27\x3c\/span\x3e],\n      chunksSortMode: \x3cspan class=\x22hljs-string\x22\x3e\x27dependency\x27\x3c\/span\x3e\n    }),\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e HtmlWebpackPlugin({\n      filename: \x3cspan class=\x22hljs-string\x22\x3e\x27view.html\x27\x3c\/span\x3e,\n      template: \x3cspan class=\x22hljs-string\x22\x3e\x27view.html\x27\x3c\/span\x3e,\n      inject: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n      minify: {\n        removeComments: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n        collapseWhitespace: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n        removeAttributeQuotes: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n      },\n      chunks: [\x3cspan class=\x22hljs-string\x22\x3e\x27js\/vendor\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27js\/manifest\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27js\/view\x27\x3c\/span\x3e],\n      chunksSortMode: \x3cspan class=\x22hljs-string\x22\x3e\x27dependency\x27\x3c\/span\x3e\n    }),\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.LoaderOptionsPlugin({\n      minimize: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n      debug: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n    }),\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.optimize.OccurrenceOrderPlugin(),\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e CleanWebpackPlugin([\x3cspan class=\x22hljs-string\x22\x3e\x27docs\x27\x3c\/span\x3e], {\n      root: resolve(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/\x27\x3c\/span\x3e)\n    })\n  ]\n})\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e通过上面这个配置，最终会产出一个\x3ccode\x3eindex.html\x3c\/code\x3e和一个\x3ccode\x3eview.html\x3c\/code\x3e，以及各自所需的css和js文件。直接部署到静态服务器上即可进行访问。\x3c\/p\x3e\n\x3cp\x3e多说一句，webpack的配置乍一看上去好像很复杂，但实际上是相当简单，webpack2的官方文档也挺完善且易读，推荐对webpack2不熟悉的朋友花点时间认真阅读一下文档。\x3c\/p\x3e\n\x3cp\x3e至此，我们已经把\x3ccode\x3e\/webpack\x3c\/code\x3e目录下的相关配置都弄好了，框架的基础骨架已经搭建完毕，接下来开始对业务逻辑进行开发。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader8\x22\x3e5. 业务逻辑开发\x3c\/h1\x3e\n\x3cp\x3e在根目录下新建两个入口文件\x3ccode\x3eindex.html\x3c\/code\x3e和\x3ccode\x3eview.html\x3c\/code\x3e，分别添加一个\x3ccode\x3e\x26lt;div id=\x22app\x22\x26gt;\x26lt;\/div\x26gt;\x3c\/code\x3e和\x3ccode\x3e\x26lt;div id=\x22view\x22\x26gt;\x26lt;\/div\x26gt;\x3c\/code\x3e标签。\x3c\/p\x3e\n\x3cp\x3e进入\x3ccode\x3e\/src\x3c\/code\x3e目录，新建\x3ccode\x3e\/document\x3c\/code\x3e和\x3ccode\x3e\/view\x3c\/code\x3e目录，按照前文目录结构所示新建需要的目录和文件。\x3c\/p\x3e\n\x3cp\x3e具体的内容可以看\x3ca href=\x22https:\/\/github.com\/jrainlau\/vue-donut\/tree\/mobile\/template\/src\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e这里\x3c\/a\x3e，简单来说就是初始化\x3ccode\x3evue\x3c\/code\x3e应用，请暂时忽略\x3ccode\x3erouter.js\x3c\/code\x3e当中的这一段代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22routeList.forEach((route) =\x3e {\n  routes.splice(1, 0, {\n    path: `\/${route}`,\n    component: resolve =\x3e require([`~pages\/${route}\/index`], resolve)\n  });\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3erouteList.forEach(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eroute\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n  routes.splice(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, {\n    \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e`\/\x3cspan class=\x22hljs-subst\x22\x3e${route}\x3c\/span\x3e`\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3ecomponent\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eresolve\x3c\/span\x3e =\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e([\x3cspan class=\x22hljs-string\x22\x3e`~pages\/\x3cspan class=\x22hljs-subst\x22\x3e${route}\x3c\/span\x3e\/index`\x3c\/span\x3e], resolve)\n  });\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这个是监听目录变化自动管理导航相关的功能，会在后面详细介绍。\x3c\/p\x3e\n\x3cp\x3e逻辑很简单。\x3ccode\x3e\/document\x3c\/code\x3e和\x3ccode\x3e\/view\x3c\/code\x3e分别属于\x3ccode\x3e文档\x3c\/code\x3e和\x3ccode\x3e预览\x3c\/code\x3e两个应用，其中\x3ccode\x3e预览\x3c\/code\x3e以\x3ccode\x3eiframe\x3c\/code\x3e的形式内嵌到\x3ccode\x3e文档\x3c\/code\x3e应用页面内，相关的操作其实都是在\x3ccode\x3e文档\x3c\/code\x3e当中进行。当点击导航的时候，\x3ccode\x3e文档\x3c\/code\x3e应用会自动加载\x3ccode\x3e\/view\/pages\/\x3c\/code\x3e下相关预览页文件夹的\x3ccode\x3eREADME.md\x3c\/code\x3e文件，同时修改\x3ccode\x3eiframe\x3c\/code\x3e的链接，实现内容的同步切换。\x3c\/p\x3e\n\x3cp\x3e接下来，我们一起来研究一下如何监听文件目录变化，自动维护\x3ccode\x3erouter\x3c\/code\x3e导航。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader9\x22\x3e6. 自动维护\x3ccode\x3erouter\x3c\/code\x3e导航\x3c\/h1\x3e\n\x3cp\x3e如果你有用过\x3ca href=\x22https:\/\/nuxtjs.org\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eNuxt\x3c\/a\x3e，一定对其自动维护\x3ccode\x3erouter\x3c\/code\x3e的功能不会陌生。如果没有用过也没关系，我们自己来实现这个功能！\x3c\/p\x3e\n\x3cp\x3e使用\x3ccode\x3evue-router\x3c\/code\x3e的同学可能都经历过这么一个痛点，每当新建页面，都要往\x3ccode\x3erouter.js\x3c\/code\x3e的数组里面添加一个声明，最终\x3ccode\x3erouter.js\x3c\/code\x3e很可能会变成这样：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const route = [\n  { path: \x27\/a\x27, component: resolve =\x3e require([\x27a\x27], resolve) },\n  { path: \x27\/b\x27, component: resolve =\x3e require([\x27b\x27], resolve) },\n  { path: \x27\/c\x27, component: resolve =\x3e require([\x27c\x27], resolve) },\n  { path: \x27\/d\x27, component: resolve =\x3e require([\x27d\x27], resolve) },\n  { path: \x27\/e\x27, component: resolve =\x3e require([\x27e\x27], resolve) },\n  { path: \x27\/f\x27, component: resolve =\x3e require([\x27f\x27], resolve) },\n  ...\n]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e route = [\n  { \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\/a\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3ecomponent\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eresolve\x3c\/span\x3e =\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e([\x3cspan class=\x22hljs-string\x22\x3e\x27a\x27\x3c\/span\x3e], resolve) },\n  { \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\/b\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3ecomponent\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eresolve\x3c\/span\x3e =\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e([\x3cspan class=\x22hljs-string\x22\x3e\x27b\x27\x3c\/span\x3e], resolve) },\n  { \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\/c\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3ecomponent\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eresolve\x3c\/span\x3e =\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e([\x3cspan class=\x22hljs-string\x22\x3e\x27c\x27\x3c\/span\x3e], resolve) },\n  { \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\/d\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3ecomponent\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eresolve\x3c\/span\x3e =\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e([\x3cspan class=\x22hljs-string\x22\x3e\x27d\x27\x3c\/span\x3e], resolve) },\n  { \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\/e\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3ecomponent\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eresolve\x3c\/span\x3e =\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e([\x3cspan class=\x22hljs-string\x22\x3e\x27e\x27\x3c\/span\x3e], resolve) },\n  { \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\/f\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3ecomponent\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eresolve\x3c\/span\x3e =\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e([\x3cspan class=\x22hljs-string\x22\x3e\x27f\x27\x3c\/span\x3e], resolve) },\n  ...\n]\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e很烦，对不对？如果可以自动维护就好了。首先我们要做一个约定，约定好不同的“页面”应该如何组织。\x3c\/p\x3e\n\x3cp\x3e在\x3ccode\x3e\/src\/view\/pages\x3c\/code\x3e目录下，每新建一个“页面”，我们就要新建一个和该页面同名的文件夹，往里添加文档\x3ccode\x3eREADME.md\x3c\/code\x3e和入口\x3ccode\x3eindex.vue\x3c\/code\x3e，效果如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22└── view\n    └── pages\n        ├── 页面A\n        │   ├── index.vue\n        │   └── README.md\n        ├── 页面B\n        │   ├── index.vue\n        │   └── README.md\n        ├── 页面C\n        │   ├── index.vue\n        │   └── README.md\n        └── 页面D\n            ├── index.vue\n            └── README.md\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3e└── view\n    └── pages\n        ├── 页面A\n        │   ├── index\x3cspan class=\x22hljs-selector-class\x22\x3e.vue\x3c\/span\x3e\n        │   └── README\x3cspan class=\x22hljs-selector-class\x22\x3e.md\x3c\/span\x3e\n        ├── 页面B\n        │   ├── index\x3cspan class=\x22hljs-selector-class\x22\x3e.vue\x3c\/span\x3e\n        │   └── README\x3cspan class=\x22hljs-selector-class\x22\x3e.md\x3c\/span\x3e\n        ├── 页面C\n        │   ├── index\x3cspan class=\x22hljs-selector-class\x22\x3e.vue\x3c\/span\x3e\n        │   └── README\x3cspan class=\x22hljs-selector-class\x22\x3e.md\x3c\/span\x3e\n        └── 页面D\n            ├── index\x3cspan class=\x22hljs-selector-class\x22\x3e.vue\x3c\/span\x3e\n            └── README.md\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e约定好了文件的组织方式，接下来我们需要用到一个工具去负责监听和处理。这里我们使用了\x3ca href=\x22https:\/\/github.com\/paulmillr\/chokidar\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3echokidar\x3c\/a\x3e来实现。\x3c\/p\x3e\n\x3cp\x3e在\x3ccode\x3e\/webpack\x3c\/code\x3e目录下新建一个\x3ccode\x3ewatcher.js\x3c\/code\x3e文件：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22console.log(\x27Watching dirs...\x27);\nconst { resolve } = require(\x27path\x27)\nconst chokidar = require(\x27chokidar\x27)\nconst fs = require(\x27fs\x27)\nconst routeList = []\n\nconst watcher = chokidar.watch(resolve(__dirname, \x27..\/src\/view\/pages\x27), {\n  ignored: \/(^|[\\\/\\\\])\\..\/\n})\n\nwatcher\n  \/\/ 监听目录添加\n  .on(\x27addDir\x27, (path) =\x3e {\n    let routeName = path.split(\x27\/\x27).pop()\n    if (routeName !== \x27pages\x27 \x26amp;\x26amp; routeName !== \x27index\x27) {\n      routeList.push(`\x27${routeName}\x27`)\n      fs.writeFileSync(resolve(__dirname, \x27..\/src\/route-list.js\x27), `module.exports = [${routeList}]`)\n    }\n  })\n  \/\/ 监听目录变化（删除、重命名）\n  .on(\x27unlinkDir\x27, (path) =\x3e {\n    let routeName = path.split(\x27\/\x27).pop()\n    const itemIndex = routeList.findIndex((val) =\x3e {\n      return val === `\x27${routeName}\x27`\n    })\n    routeList.splice(itemIndex, 1)\n    fs.writeFileSync(resolve(__dirname, \x27..\/src\/route-list.js\x27), `module.exports = [${routeList}]`)\n  })\n\nmodule.exports = watcher\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs typescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27Watching dirs...\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e { resolve } = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27path\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e chokidar = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27chokidar\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e fs = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27fs\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e routeList = []\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e watcher = chokidar.watch(resolve(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27..\/src\/view\/pages\x27\x3c\/span\x3e), {\n  ignored: \x3cspan class=\x22hljs-regexp\x22\x3e\/(^|[\\\/\\\\])\\..\/\x3c\/span\x3e\n})\n\nwatcher\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 监听目录添加\x3c\/span\x3e\n  .on(\x3cspan class=\x22hljs-string\x22\x3e\x27addDir\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3epath\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e routeName = path.split(\x3cspan class=\x22hljs-string\x22\x3e\x27\/\x27\x3c\/span\x3e).pop()\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (routeName !== \x3cspan class=\x22hljs-string\x22\x3e\x27pages\x27\x3c\/span\x3e \x26amp;\x26amp; routeName !== \x3cspan class=\x22hljs-string\x22\x3e\x27index\x27\x3c\/span\x3e) {\n      routeList.push(\x3cspan class=\x22hljs-string\x22\x3e`\x27\x3cspan class=\x22hljs-subst\x22\x3e${routeName}\x3c\/span\x3e\x27`\x3c\/span\x3e)\n      fs.writeFileSync(resolve(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27..\/src\/route-list.js\x27\x3c\/span\x3e), \x3cspan class=\x22hljs-string\x22\x3e`module.exports = [\x3cspan class=\x22hljs-subst\x22\x3e${routeList}\x3c\/span\x3e]`\x3c\/span\x3e)\n    }\n  })\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 监听目录变化（删除、重命名）\x3c\/span\x3e\n  .on(\x3cspan class=\x22hljs-string\x22\x3e\x27unlinkDir\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3epath\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e routeName = path.split(\x3cspan class=\x22hljs-string\x22\x3e\x27\/\x27\x3c\/span\x3e).pop()\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e itemIndex = routeList.findIndex(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eval\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e val === \x3cspan class=\x22hljs-string\x22\x3e`\x27\x3cspan class=\x22hljs-subst\x22\x3e${routeName}\x3c\/span\x3e\x27`\x3c\/span\x3e\n    })\n    routeList.splice(itemIndex, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e)\n    fs.writeFileSync(resolve(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27..\/src\/route-list.js\x27\x3c\/span\x3e), \x3cspan class=\x22hljs-string\x22\x3e`module.exports = [\x3cspan class=\x22hljs-subst\x22\x3e${routeList}\x3c\/span\x3e]`\x3c\/span\x3e)\n  })\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = watcher\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这里面主要做了3件事：监听目录变化、维护目录名列表、把列表写入文件。当开启\x3ccode\x3ewatcher\x3c\/code\x3e后，可以在\x3ccode\x3e\/src\x3c\/code\x3e底下看到一个\x3ccode\x3eroute-list.js\x3c\/code\x3e文件，内容如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22module.exports = [\x27页面A\x27,\x27页面B\x27,\x27页面C\x27,\x27页面D\x27]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs java\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3emodule\x3c\/span\x3e.\x3cspan class=\x22hljs-keyword\x22\x3eexports\x3c\/span\x3e = [\x3cspan class=\x22hljs-string\x22\x3e\x27页面A\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x27页面B\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x27页面C\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x27页面D\x27\x3c\/span\x3e]\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后我们就可以愉快地使用了……\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ view-router.js\n\nimport routeList from \x27..\/route-list.js\x27;\n\nconst routes = [\n  { path: \x27\/\x27, component: resolve =\x3e require([\x27~pages\/index\x27], resolve) },\n  { path: \x27*\x27, component: resolve =\x3e require([\x27~pages\/index\x27], resolve) },\n];\n\nrouteList.forEach((route) =\x3e {\n  routes.splice(1, 0, {\n    path: `\/${route}`,\n    component: resolve =\x3e require([`~pages\/${route}\/index`], resolve)\n  });\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ view-router.js\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e routeList \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27..\/route-list.js\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e routes = [\n  { \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\/\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3ecomponent\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eresolve\x3c\/span\x3e =\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e([\x3cspan class=\x22hljs-string\x22\x3e\x27~pages\/index\x27\x3c\/span\x3e], resolve) },\n  { \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27*\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3ecomponent\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eresolve\x3c\/span\x3e =\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e([\x3cspan class=\x22hljs-string\x22\x3e\x27~pages\/index\x27\x3c\/span\x3e], resolve) },\n];\n\nrouteList.forEach(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eroute\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n  routes.splice(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, {\n    \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e`\/\x3cspan class=\x22hljs-subst\x22\x3e${route}\x3c\/span\x3e`\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3ecomponent\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eresolve\x3c\/span\x3e =\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e([\x3cspan class=\x22hljs-string\x22\x3e`~pages\/\x3cspan class=\x22hljs-subst\x22\x3e${route}\x3c\/span\x3e\/index`\x3c\/span\x3e], resolve)\n  });\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ doc-router.js\n\nimport routeList from \x27..\/route-list.js\x27;\n\nconst routes = [\n  { path: \x27\/\x27, component: resolve =\x3e require([\x27~pages\/index\/README.md\x27], resolve) }\n];\n\nrouteList.forEach((route) =\x3e {\n  routes.push({\n    path: `\/${route}`,\n    component: resolve =\x3e require([`~pages\/${route}\/README.md`], resolve)\n  });\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ doc-router.js\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e routeList \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27..\/route-list.js\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e routes = [\n  { \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\/\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3ecomponent\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eresolve\x3c\/span\x3e =\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e([\x3cspan class=\x22hljs-string\x22\x3e\x27~pages\/index\/README.md\x27\x3c\/span\x3e], resolve) }\n];\n\nrouteList.forEach(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eroute\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n  routes.push({\n    \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e`\/\x3cspan class=\x22hljs-subst\x22\x3e${route}\x3c\/span\x3e`\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3ecomponent\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eresolve\x3c\/span\x3e =\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e([\x3cspan class=\x22hljs-string\x22\x3e`~pages\/\x3cspan class=\x22hljs-subst\x22\x3e${route}\x3c\/span\x3e\/README.md`\x3c\/span\x3e], resolve)\n  });\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e同理，在页面的导航组件里面，我们也加载这个\x3ccode\x3eroute-list.js\x3c\/code\x3e文件，实现导航内容的自动更新。\x3c\/p\x3e\n\x3cp\x3e放个视频，大家可以感受一下（SF竟然不允许内嵌视频，不科学）：\x3cbr\x3e\x3ca href=\x22https:\/\/v.qq.com\/x\/page\/a0510lzpimz.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/v.qq.com\/x\/page\/a0510...\x3c\/a\x3e\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader10\x22\x3e7. UI库文件组织约定\x3c\/h1\x3e\n\x3cp\x3e这个框架的根本目的，其实是为了UI库的开发。那么我们也应该对UI库的文件组织进行约定。\x3c\/p\x3e\n\x3cp\x3e进入\x3ccode\x3e\/src\/view\/components\x3c\/code\x3e目录，我们的整个UI库就放在这里面：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22└── components\n    ├── index.js \/\/ 入口文件\n    ├── 组件A\n    │   ├── index.vue\n    ├── 组件B\n    │   ├── index.vue\n    ├── 组件C\n    │   ├── index.vue\n    └── 组件D\n        └── index.vue\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3e└── components\n    ├── index\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 入口文件\x3c\/span\x3e\n    ├── 组件A\n    │   ├── index\x3cspan class=\x22hljs-selector-class\x22\x3e.vue\x3c\/span\x3e\n    ├── 组件B\n    │   ├── index\x3cspan class=\x22hljs-selector-class\x22\x3e.vue\x3c\/span\x3e\n    ├── 组件C\n    │   ├── index\x3cspan class=\x22hljs-selector-class\x22\x3e.vue\x3c\/span\x3e\n    └── 组件D\n        └── index.vue\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e当中的\x3ccode\x3eindex.js\x3c\/code\x3e，将会以\x3ca href=\x22https:\/\/vuejs.org\/v2\/guide\/plugins.html#ad\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3evue plugin\x3c\/a\x3e的方式编写：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import MyHeader from \x27.\/组件A\x27\nimport MyContent from \x27.\/组件B\x27\nimport MyFooter from \x27.\/组件C\x27\n\nconst install = (Vue) =\x3e {\n  Vue.component(\x27my-header\x27, MyHeader)\n  Vue.component(\x27my-content\x27, MyContent)\n  Vue.component(\x27my-footer\x27, MyFooter)\n}\n\nexport {\n  MyHeader,\n  MyContent,\n  MyFooter\n}\n\nexport default install\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs coffeescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e MyHeader \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/组件A\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e MyContent \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/组件B\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e MyFooter \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/组件C\x27\x3c\/span\x3e\n\nconst install = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e(Vue)\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n  Vue.component(\x3cspan class=\x22hljs-string\x22\x3e\x27my-header\x27\x3c\/span\x3e, MyHeader)\n  Vue.component(\x3cspan class=\x22hljs-string\x22\x3e\x27my-content\x27\x3c\/span\x3e, MyContent)\n  Vue.component(\x3cspan class=\x22hljs-string\x22\x3e\x27my-footer\x27\x3c\/span\x3e, MyFooter)\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e {\n  MyHeader,\n  MyContent,\n  MyFooter\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e install\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样，就能够在入口\x3ccode\x3e.js\x3c\/code\x3e文件中以\x3ccode\x3eVue.use(UILibrary)\x3c\/code\x3e的形式对UI库进行引用了。\x3c\/p\x3e\n\x3cp\x3e扩展一下，考虑到UI可能有“换肤”的功能，那么我们可以在\x3ccode\x3e\/src\/view\x3c\/code\x3e目录下新建一个\x3ccode\x3e\/assets\x3c\/code\x3e目录，专门存放样式相关的文件，这个目录最终也会被打包到\x3ccode\x3e\/dist\x3c\/code\x3e目录下，在使用的时候引入相应样式文件即可。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader11\x22\x3e8. 构建运行命令\x3c\/h1\x3e\n\x3cp\x3e前面做了那么多，最终我们希望能够通过简单的\x3ccode\x3enpm script\x3c\/code\x3e命令就把整个框架运行起来，应该怎么做呢？\x3c\/p\x3e\n\x3cp\x3e还记得在\x3ccode\x3e\/webpack\x3c\/code\x3e目录下的三个\x3ccode\x3econfig.js\x3c\/code\x3e文件吗？它们就是框架跑通的关键，但是我们并不打算直接运行它们，而是在其之上封装一下。\x3c\/p\x3e\n\x3cp\x3e在\x3ccode\x3e\/webpack\x3c\/code\x3e目录下新建一个\x3ccode\x3edev.js\x3c\/code\x3e文件，内容如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22require(\x27.\/watcher.js\x27)\nmodule.exports = require(\x27.\/webpack.dev.config.js\x27)\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-title\x22\x3erequire\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/watcher.js\x27\x3c\/span\x3e)\x3c\/span\x3e\x3c\/span\x3e\nmodule\x3cspan class=\x22hljs-selector-class\x22\x3e.exports\x3c\/span\x3e = require(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/webpack.dev.config.js\x27\x3c\/span\x3e)\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e同样的，分别新建\x3ccode\x3ebuild.js\x3c\/code\x3e和\x3ccode\x3edoc.js\x3c\/code\x3e文件，分别引入\x3ccode\x3ewebpack.build.config.js\x3c\/code\x3e和\x3ccode\x3ewebpack.doc.config.js\x3c\/code\x3e即可。\x3c\/p\x3e\n\x3cp\x3e为什么要这么做呢？因为webpack运行的时候会读取\x3ccode\x3econfig.js\x3c\/code\x3e文件，如果我们希望在webpack工作之前先进行一些预处理，那么这种做法就非常方便了，比如这里添加的监听目录文件变化的功能。如果将来有什么扩展，也可以通过类似的方式进行。\x3c\/p\x3e\n\x3cp\x3e接下来就是在\x3ccode\x3epackage.json\x3c\/code\x3e里面定义我们的\x3ccode\x3enpm script\x3c\/code\x3e了：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x26quot;dev\x26quot;: \x26quot;node_modules\/.bin\/webpack-dev-server --config webpack\/dev.js\x26quot;,\n\x26quot;doc\x26quot;: \x26quot;node_modules\/.bin\/webpack -p --config webpack\/doc.js --progress --profile --colors\x26quot;,\n\x26quot;build\x26quot;: \x26quot;node_modules\/.bin\/webpack -p --config webpack\/build.js --progress --profile --colors\x26quot;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs brainfuck\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\x22dev\x22:\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\x22node_modules\/\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e.\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3ebin\/webpack\x3c\/span\x3e\x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3edev\x3c\/span\x3e\x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3eserver\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e\x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3econfig\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3ewebpack\/dev\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e.\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3ejs\x22\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e,\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\x22doc\x22:\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\x22node_modules\/\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e.\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3ebin\/webpack\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3ep\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e\x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3econfig\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3ewebpack\/doc\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e.\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3ejs\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e\x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3eprogress\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e\x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3eprofile\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e\x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3ecolors\x22\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e,\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\x22build\x22:\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\x22node_modules\/\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e.\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3ebin\/webpack\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3ep\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e\x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3econfig\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3ewebpack\/build\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e.\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3ejs\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e\x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3eprogress\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e\x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3eprofile\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e\x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3ecolors\x22\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e值得注意的是，在生产模式下，需要加\x3ccode\x3e-p\x3c\/code\x3e才能充分启动webpack2的\x3ccode\x3etree-shaking\x3c\/code\x3e功能。\x3c\/p\x3e\n\x3cp\x3e在根目录下通过\x3ccode\x3enpm run 命令\x3c\/code\x3e的方式测试一下是否已经跑起来了呢？\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader12\x22\x3e9. 后续工作\x3c\/h1\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e添加单元测试\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e加入PWA功能\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch1 id=\x22articleHeader13\x22\x3e10. 尾声\x3c\/h1\x3e\n\x3cp\x3e本文篇幅较长，能够看到这里的估计已经有点晕了吧。很久都没有写文章了，终于被我攒了个大招发出来，特别爽。搭建开发框架的过程是一个不断尝试，不断google和stackoverflow的过程。在这个过程中，大到对架构设计，小到对文件组织、工具使用，都有了更进一步的理解。\x3c\/p\x3e\n\x3cp\x3e这个框架的运作模式，其实也是参考了很多业界内的方案，更多的是想要“偷懒”。能让机器自动帮忙搞的，绝对不自己手动搞，这才是技术进步的动力嘛。\x3c\/p\x3e\n\x3cp\x3e该项目已经被改装成\x3ccode\x3evue-cli\x3c\/code\x3e的模板，通过\x3ccode\x3evue init jrainlau\/vue-donut#mobile\x3c\/code\x3e即可使用，欢迎尝试，期待反馈和PR，谢谢大家~\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>【工程化】从0搭建VueJS移动端组件库开发框架</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000009660650">https://segmentfault.com/a/1190000009660650</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/23ecsdyryk7j/" target="_blank">https://alili.tech/archive/23ecsdyryk7j/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>