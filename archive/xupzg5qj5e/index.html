<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="js拖拽粘贴上传与CodeMirror"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>js拖拽粘贴上传与CodeMirror | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/xupzg5qj5e/",
				"appid": "1613049289050283", 
				"title": "js拖拽粘贴上传与CodeMirror | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-01T02:30:10"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/j60tyttzo9d/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/pzonaco1jtf/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fxupzg5qj5e%2f&text=js%e6%8b%96%e6%8b%bd%e7%b2%98%e8%b4%b4%e4%b8%8a%e4%bc%a0%e4%b8%8eCodeMirror"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fxupzg5qj5e%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fxupzg5qj5e%2f&text=js%e6%8b%96%e6%8b%bd%e7%b2%98%e8%b4%b4%e4%b8%8a%e4%bc%a0%e4%b8%8eCodeMirror"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fxupzg5qj5e%2f&title=js%e6%8b%96%e6%8b%bd%e7%b2%98%e8%b4%b4%e4%b8%8a%e4%bc%a0%e4%b8%8eCodeMirror"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fxupzg5qj5e%2f&is_video=false&description=js%e6%8b%96%e6%8b%bd%e7%b2%98%e8%b4%b4%e4%b8%8a%e4%bc%a0%e4%b8%8eCodeMirror"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=js%e6%8b%96%e6%8b%bd%e7%b2%98%e8%b4%b4%e4%b8%8a%e4%bc%a0%e4%b8%8eCodeMirror&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fxupzg5qj5e%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fxupzg5qj5e%2f&title=js%e6%8b%96%e6%8b%bd%e7%b2%98%e8%b4%b4%e4%b8%8a%e4%bc%a0%e4%b8%8eCodeMirror"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fxupzg5qj5e%2f&title=js%e6%8b%96%e6%8b%bd%e7%b2%98%e8%b4%b4%e4%b8%8a%e4%bc%a0%e4%b8%8eCodeMirror"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fxupzg5qj5e%2f&title=js%e6%8b%96%e6%8b%bd%e7%b2%98%e8%b4%b4%e4%b8%8a%e4%bc%a0%e4%b8%8eCodeMirror"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fxupzg5qj5e%2f&title=js%e6%8b%96%e6%8b%bd%e7%b2%98%e8%b4%b4%e4%b8%8a%e4%bc%a0%e4%b8%8eCodeMirror"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">js拖拽粘贴上传与CodeMirror</h1><div class="meta"><div class="postdate"><time datetime="2019-02-01" itemprop="datePublished">2019-02-01</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3eMarkdown编辑器选用\x3ca href=\x22https:\/\/simplemde.com\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/simplemde.com\x3c\/a\x3e\x3cbr\x3e它是一款纯js实现的markdown编辑器。缺点不支持图片上传。那我们就得改造它。\x3cbr\x3esimplemde是基于codemirror编辑器的.\x3cbr\x3e先介绍基本：\x3cbr\x3ecodemirror文档：\x3ca href=\x22http:\/\/codemirror.net\/doc\/manual.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/codemirror.net\/doc\/man...\x3c\/a\x3e\x3cbr\x3esimplemde文档:\x3ca href=\x22https:\/\/github.com\/NextStepWebs\/simplemde-markdown-editor\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/NextStepWe...\x3c\/a\x3e\x3cbr\x3eAPI文档:\x3cbr\x3e拖拽：\x3cbr\x3e\x3ca href=\x22https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/API\/DragEvent\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/developer.mozilla.org...\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/API\/DragEvent\/dataTransfer\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/developer.mozilla.org...\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e粘贴：\x3cbr\x3e\x3ca href=\x22https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/API\/ClipboardEvent\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/developer.mozilla.org...\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/Events\/paste\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/developer.mozilla.org...\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e注意一点：目前firefox与chrome比较新的版本都实现了这些API。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader0\x22\x3epaste事件\x3c\/h1\x3e\n\x3cp\x3e绑定的元素不一定是input，普通的div也是可以绑定的，如果是给document绑定了，就相当于全局了，任何时候的粘贴操作都会触发。\x3cbr\x3e获取事件对象ClipboardEvent\x3cbr\x3e先写一下事件绑定的代码\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22pasteEle.addEventListener(\x26quot;paste\x26quot;, function (e){\n    if ( !(e.clipboardData \x26amp;\x26amp; e.clipboardData.items) ) {\n        return ;\n    }\n \n    for (var i = 0, len = e.clipboardData.items.length; i \x3c len; i\x2b\x2b) {\n        var item = e.clipboardData.items[i];\n \n        if (item.kind === \x26quot;string\x26quot;) {\n            item.getAsString(function (str) {\n                \/\/ str 是获取到的字符串\n            })\n        } else if (item.kind === \x26quot;file\x26quot;) {\n            var pasteFile = item.getAsFile();\n            \/\/ pasteFile就是获取到的文件\n        }\n    }\n});\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3epasteEle.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x22paste\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-params\x22\x3e(e)\x3c\/span\x3e\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e ( !(e.clipboardData \x26amp;\x26amp; e.clipboardData.items) ) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e ;\n    }\n \n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, len = e.clipboardData.items.length; i \x26lt; len; i\x2b\x2b) {\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e item = e.clipboardData.items[i];\n \n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (item.kind === \x3cspan class=\x22hljs-string\x22\x3e\x22string\x22\x3c\/span\x3e) {\n            item.getAsString(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-params\x22\x3e(str)\x3c\/span\x3e \x3c\/span\x3e{\n                \x3cspan class=\x22hljs-comment\x22\x3e\/\/ str 是获取到的字符串\x3c\/span\x3e\n            })\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (item.kind === \x3cspan class=\x22hljs-string\x22\x3e\x22file\x22\x3c\/span\x3e) {\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e pasteFile = item.getAsFile();\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ pasteFile就是获取到的文件\x3c\/span\x3e\n        }\n    }\n});\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e粘贴事件提供了一个clipboardData的属性，如果该属性有items属性，那么就可以查看items中是否有图片类型的数据了。\x3cbr\x3e\x3cstrong\x3eclipboardData介绍\x3c\/strong\x3e\x3cbr\x3e介绍一下clipboardData对象，它实际上是一个DataTransfer类型的对象，DataTransfer 是拖动产生的一个对象，但实际上粘贴事件也是它。\x3cbr\x3e属性介绍\x3cbr\x3edropEffect    String    默认是 none\x3cbr\x3eeffectAllowed    String    默认是 uninitialized\x3cbr\x3efiles    FileList    在粘贴操作时为空List\x3cbr\x3eitems    DataTransferItemList    剪切板中的各项数据\x3cbr\x3etypes    Array    剪切板中的数据类型。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3eDataTransferItem\x3c\/strong\x3e\x3cbr\x3eitems是一个DataTransferItemList对象，自然里面都是DataTransferItem类型的数据了。\x3cbr\x3eDataTransferItem有两个属性kind和type\x3c\/p\x3e\n\x3cp\x3ekind    一般为string或者file\x3cbr\x3etype    具体的数据类型，例如具体是哪种类型字符串或者哪种类型的文件，即MIME-Type，常见的值有text\/plain、text\/html、Files。\x3cbr\x3e方法\x3c\/p\x3e\n\x3cp\x3egetAsFile    空    如果kind是file，可以用该方法获取到文件\x3cbr\x3egetAsString    回调函数    如果kind是string，可以用该方法获取到字符串，字符串需要用回调函数得到，回调函数的第一个参数就是剪切板中的字符串\x3cbr\x3e综合\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ demo 程序将粘贴事件绑定到 document 上\ndocument.addEventListener(\x26quot;paste\x26quot;, function (e) {\n    var cbd = e.clipboardData;\n    \/\/var ua = window.navigator.userAgent;\n \n    for(var i = 0; i \x3c cbd.items.length; i\x2b\x2b) {\n        var item = cbd.items[i];\n        if(item.kind == \x26quot;file\x26quot;){\n            var blob = item.getAsFile();\n            if (blob.size === 0) {\n                return;\n            }\n            \/\/ blob 就是从剪切板获得的文件 可以进行上传或其他操作\n        }\n    }\n}, false);\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ demo 程序将粘贴事件绑定到 document 上\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x22paste\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3ee\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e cbd = e.clipboardData;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/var ua = window.navigator.userAgent;\x3c\/span\x3e\n \n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; cbd.items.length; i\x2b\x2b) {\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e item = cbd.items[i];\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(item.kind == \x3cspan class=\x22hljs-string\x22\x3e\x22file\x22\x3c\/span\x3e){\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e blob = item.getAsFile();\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (blob.size === \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) {\n                \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n            }\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ blob 就是从剪切板获得的文件 可以进行上传或其他操作\x3c\/span\x3e\n        }\n    }\n}, \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e);\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch1 id=\x22articleHeader1\x22\x3edrop事件\x3c\/h1\x3e\n\x3cp\x3eDragEvent\x3cbr\x3e\x3cstrong\x3eDragEvent.dataTransfer\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3edropEffect    String    默认是 none\x3cbr\x3eeffectAllowed    String    默认是 uninitialized\x3cbr\x3efiles    FileList\x3cbr\x3eitems    DataTransferItemList    剪切板中的各项数据\x3cbr\x3etypes    Array    剪切板中的数据类型。\x3cbr\x3eDataTransferItem\x3cbr\x3eitems是一个DataTransferItemList对象，自然里面都是DataTransferItem类型的数据了。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3eDataTransferItem\x3c\/strong\x3e有两个属性kind和type\x3c\/p\x3e\n\x3cp\x3ekind    一般为string或者file\x3cbr\x3etype    具体的数据类型，例如具体是哪种类型字符串或者哪种类型的文件，即MIME-Type，常见的值有images\/*、text\/plain、text\/html、Files。\x3cbr\x3e方法\x3c\/p\x3e\n\x3cp\x3egetAsFile    空    如果kind是file，可以用该方法获取到文件\x3cbr\x3egetAsString    回调函数    如果kind是string，可以用该方法获取到字符串，字符串需要用回调函数得到，回调函数的第一个参数就是剪切板中的字符串\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22dropEle.addEventListener(\x26quot;drop\x26quot;, function (e){\n    var data = new FormData();\n    var files = event.dataTransfer.files;\n    var i = 0;\n    var len = files.length;\n    while (i \x3c len){\n        data.append(\x26quot;file\x26quot; \x2b i, files[i]);\n         i\x2b\x2b;\n    }\n    var xhr = new XMLHttpRequest();\n    xhr.open(\x26quot;post\x26quot;, \x26quot;\/upload\x26quot;, true);\n    xhr.onreadystatechange = function(){\n         if (xhr.readyState == 4){\n             alert(xhr.responseText);\n         }\n     };\n     xhr.send(data);\n});\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3edropEle.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x22drop\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-params\x22\x3e(e)\x3c\/span\x3e\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e data = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e FormData();\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e files = event.dataTransfer.files;\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e len = files.length;\n    \x3cspan class=\x22hljs-keyword\x22\x3ewhile\x3c\/span\x3e (i \x26lt; len){\n        data.append(\x3cspan class=\x22hljs-string\x22\x3e\x22file\x22\x3c\/span\x3e \x2b i, files[i]);\n         i\x2b\x2b;\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e xhr = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e XMLHttpRequest();\n    xhr.open(\x3cspan class=\x22hljs-string\x22\x3e\x22post\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22\/upload\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e);\n    xhr.onreadystatechange = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{\n         \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (xhr.readyState == \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e){\n             alert(xhr.responseText);\n         }\n     };\n     xhr.send(data);\n});\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e阻止浏览器默认打开拖拽文件的行为：参考这里\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22window.addEventListener(\x26quot;drop\x26quot;,function(e){\n  e = e || event;\n  console.log(e);\n  \/\/e.preventDefault();\n  if (e.target.tagName != \x26quot;textarea\x26quot;) {  \/\/ check wich element is our target\n    e.preventDefault();\n  }  \n},false);\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x22drop\x22\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ee\x3c\/span\x3e)\x3c\/span\x3e{\n  e = e || event;\n  \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(e);\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/e.preventDefault();\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (e.target.tagName != \x3cspan class=\x22hljs-string\x22\x3e\x22textarea\x22\x3c\/span\x3e) {  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ check wich element is our target\x3c\/span\x3e\n    e.preventDefault();\n  }  \n},\x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e);\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e理论知识说完了。下面开始实验改造codemirror\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader2\x22\x3ecodemirror支持粘贴和拖拽上传\x3c\/h1\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c!DOCTYPE html\x3e\n\x3chtml\x3e\n\x3chead\x3e\n    \x3cmeta charset=\x26quot;utf-8\x26quot;\x3e\n    \x3cmeta http-equiv=\x26quot;X-UA-Compatible\x26quot; content=\x26quot;IE=edge\x26quot;\x3e\n    \x3ctitle\x3ecodemirror\x3c\/title\x3e\n    \x3clink rel=\x26quot;stylesheet\x26quot; href=\x26quot;codemirror.css\x26quot;\x3e\n    \x3cscript src=\x26quot;codemirror.js\x26quot;\x3e\x3c\/script\x3e\n\x3c\/head\x3e\n\x3cbody\x3e\n    \x3ctextarea name=\x26quot;aaa\x26quot; id=\x26quot;aaa\x26quot;\x3e\x3c\/textarea\x3e\n    \x3cscript\x3e\n    var textarea=document.getElementById(\x26quot;aaa\x26quot;)\n      var editor = CodeMirror.fromTextArea(textarea, {\n        lineNumbers: true\n      });\n  editor.on(\x26quot;paste\x26quot;,function(editor,e){\n      \/\/ console.log(e.clipboardData)\n      if(!(e.clipboardData\x26amp;\x26amp;e.clipboardData.items)){\n          alert(\x26quot;该浏览器不支持操作\x26quot;);\n          return;\n      }\n      for (var i = 0, len = e.clipboardData.items.length; i \x3c len; i\x2b\x2b) {\n        var item = e.clipboardData.items[i];\n       \/\/ console.log(item.kind\x2b\x26quot;:\x26quot;\x2bitem.type);\n        if (item.kind === \x26quot;string\x26quot;) {\n            item.getAsString(function (str) {\n                \/\/ str 是获取到的字符串\n            })\n        } else if (item.kind === \x26quot;file\x26quot;) {\n            var pasteFile = item.getAsFile();\n            \/\/ pasteFile就是获取到的文件\n            console.log(pasteFile);\n            fileUpload(pasteFile);\n        }\n    }\n  });\n  editor.on(\x26quot;drop\x26quot;,function(editor,e){\n      \/\/ console.log(e.dataTransfer.files[0]);\n      if(!(e.dataTransfer\x26amp;\x26amp;e.dataTransfer.files)){\n          alert(\x26quot;该浏览器不支持操作\x26quot;);\n          return;\n      }\n      for(var i=0;i\x3ce.dataTransfer.files.length;i\x2b\x2b){\n          console.log(e.dataTransfer.files[i]);\n          fileUpload(e.dataTransfer.files[i]);\n      }\n      e.preventDefault();\n  });\n  \/\/文件上传\n  function fileUpload(fileObj){\n      var data = new FormData();\n      data.append(\x26quot;file\x26quot;,fileObj);\n      var xhr = new XMLHttpRequest();\n    xhr.open(\x26quot;post\x26quot;, \x26quot;\/upload\x26quot;, true);\n    xhr.onreadystatechange = function(){\n         if (xhr.readyState == 4){\n             alert(xhr.responseText);\n         }\n     };\n     xhr.send(data);\n  }\n  \/\/阻止浏览器默认打开拖拽文件的行为\n  window.addEventListener(\x26quot;drop\x26quot;,function(e){\n  e = e || event;\n  e.preventDefault();\n  if (e.target.tagName == \x26quot;textarea\x26quot;) {  \/\/ check wich element is our target\n    e.preventDefault();\n  } \n},false);\n\x3c\/script\x3e\n\x3c\/html\x3e\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x26lt;!DOCTYPE html\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3emeta\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3echarset\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22utf-8\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3emeta\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ehttp-equiv\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22X-UA-Compatible\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3econtent\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22IE=edge\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etitle\x3c\/span\x3e\x26gt;\x3c\/span\x3ecodemirror\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etitle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3elink\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3erel\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22stylesheet\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ehref\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22codemirror.css\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22codemirror.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etextarea\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22aaa\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22aaa\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etextarea\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e textarea=\x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x22aaa\x22\x3c\/span\x3e)\n      \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e editor = CodeMirror.fromTextArea(textarea, {\n        \x3cspan class=\x22hljs-attr\x22\x3elineNumbers\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n      });\n  editor.on(\x3cspan class=\x22hljs-string\x22\x3e\x22paste\x22\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eeditor,e\x3c\/span\x3e)\x3c\/span\x3e{\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ console.log(e.clipboardData)\x3c\/span\x3e\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(!(e.clipboardData\x26amp;\x26amp;e.clipboardData.items)){\n          alert(\x3cspan class=\x22hljs-string\x22\x3e\x22该浏览器不支持操作\x22\x3c\/span\x3e);\n          \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n      }\n      \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, len = e.clipboardData.items.length; i \x26lt; len; i\x2b\x2b) {\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e item = e.clipboardData.items[i];\n       \x3cspan class=\x22hljs-comment\x22\x3e\/\/ console.log(item.kind\x2b\x22:\x22\x2bitem.type);\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (item.kind === \x3cspan class=\x22hljs-string\x22\x3e\x22string\x22\x3c\/span\x3e) {\n            item.getAsString(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3estr\x3c\/span\x3e) \x3c\/span\x3e{\n                \x3cspan class=\x22hljs-comment\x22\x3e\/\/ str 是获取到的字符串\x3c\/span\x3e\n            })\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (item.kind === \x3cspan class=\x22hljs-string\x22\x3e\x22file\x22\x3c\/span\x3e) {\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e pasteFile = item.getAsFile();\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ pasteFile就是获取到的文件\x3c\/span\x3e\n            \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(pasteFile);\n            fileUpload(pasteFile);\n        }\n    }\n  });\n  editor.on(\x3cspan class=\x22hljs-string\x22\x3e\x22drop\x22\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eeditor,e\x3c\/span\x3e)\x3c\/span\x3e{\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ console.log(e.dataTransfer.files[0]);\x3c\/span\x3e\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(!(e.dataTransfer\x26amp;\x26amp;e.dataTransfer.files)){\n          alert(\x3cspan class=\x22hljs-string\x22\x3e\x22该浏览器不支持操作\x22\x3c\/span\x3e);\n          \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n      }\n      \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i=\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;i\x26lt;e.dataTransfer.files.length;i\x2b\x2b){\n          \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(e.dataTransfer.files[i]);\n          fileUpload(e.dataTransfer.files[i]);\n      }\n      e.preventDefault();\n  });\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/文件上传\x3c\/span\x3e\n  \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3efileUpload\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3efileObj\x3c\/span\x3e)\x3c\/span\x3e{\n      \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e data = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e FormData();\n      data.append(\x3cspan class=\x22hljs-string\x22\x3e\x22file\x22\x3c\/span\x3e,fileObj);\n      \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e xhr = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e XMLHttpRequest();\n    xhr.open(\x3cspan class=\x22hljs-string\x22\x3e\x22post\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22\/upload\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e);\n    xhr.onreadystatechange = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n         \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (xhr.readyState == \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e){\n             alert(xhr.responseText);\n         }\n     };\n     xhr.send(data);\n  }\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/阻止浏览器默认打开拖拽文件的行为\x3c\/span\x3e\n  \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x22drop\x22\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ee\x3c\/span\x3e)\x3c\/span\x3e{\n  e = e || event;\n  e.preventDefault();\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (e.target.tagName == \x3cspan class=\x22hljs-string\x22\x3e\x22textarea\x22\x3c\/span\x3e) {  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ check wich element is our target\x3c\/span\x3e\n    e.preventDefault();\n  } \n},\x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e);\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e附Codemirror常用事件与方法\x3c\/strong\x3e\x3cbr\x3e参考\x3ca href=\x22http:\/\/blog.csdn.net\/mafan121\/article\/details\/49178945\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e这里\x3c\/a\x3e\x3cbr\x3e1.onChange(instance,changeObj)：codeMirror文本被修改后触发。\x3cbr\x3einstance是一个当前的codemirror对象，changeObj是一个｛from，to，text,removed｝对象。其中from，to分别表示起始行对象和结束行对象，行对象包括ch：改变位置距离行头的间隔字符，line：改变的行数。text是一个字符串数组表示被修改的文本内容，即你输入的内容。\x3c\/p\x3e\n\x3cp\x3e2.onBeforeChange(instance,changObj):内容改变前被调用\x3cbr\x3e3.onCursorActivity(instance)：当鼠标点击内容区、选中内容、修改内容时被触发\x3cbr\x3e4.onKeyHandled:(instance,name,event):当一个都dom元素的事件触发时调用，name为操作名称。\x3cbr\x3e5.onInputRead(insatance,changeObj):当一个新的input从隐藏的textara读取出时调用\x3cbr\x3e6.onBeforeSelectionChange(instance,obj):当选中的区域被改变时调用，obj对象是选择的范围和改变的内容（本人未测试成功）\x3cbr\x3e7.onUpdate(instance):编辑器内容被改变时触发\x3cbr\x3e8.onFocus(instance):编辑器获得焦点式触发\x3cbr\x3e9.onBlur(instance):编辑器失去焦点时触发\x3c\/p\x3e\n\x3cp\x3e常用方法：\x3cbr\x3egetValue():获取编辑器文本内容\x3cbr\x3esetValue(text):设置编辑器文本内容\x3cbr\x3egetRange({line,ch},{line,ch}):获取指定范围内的文本内容第一个对象是起始坐标，第二个是结束坐标\x3cbr\x3ereplaceRange(replaceStr,{line,ch},{line,ch}):替换指定区域的内容\x3cbr\x3egetLine(line)：获取指定行的文本内容\x3cbr\x3elineCount():统计编辑器内容行数\x3cbr\x3efirstLine():获取第一行行数，默认为0，从开始计数\x3cbr\x3elastLine():获取最后一行行数\x3cbr\x3egetLineHandle(line):根据行号获取行句柄\x3cbr\x3egetSelection():获取鼠标选中区域的代码\x3cbr\x3ereplaceSelection(str):替换选中区域的代码\x3cbr\x3esetSelection({line:num,ch:num1},{line:num2,ch:num3}):设置一个区域被选中\x3cbr\x3esomethingSelected()：判断是否被选择\x3cbr\x3egetEditor()：获取CodeMirror对像\x3cbr\x3eundo()：撤销\x3cbr\x3eredo():回退\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader3\x22\x3esimplemde支持粘贴和拖拽上传\x3c\/h1\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var simplemde = new SimpleMDE({ element: document.getElementById(\x26quot;MyID\x26quot;) });\nsimplemde.codemirror.on(\x26quot;drop\x26quot;, function(editor,e){\n    ...\n});\nsimplemde.codemirror.on(\x26quot;paste\x26quot;,function(editor,e){\n...\n});\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e simplemde = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e SimpleMDE({ \x3cspan class=\x22hljs-attr\x22\x3eelement\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x22MyID\x22\x3c\/span\x3e) });\nsimplemde.codemirror.on(\x3cspan class=\x22hljs-string\x22\x3e\x22drop\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eeditor,e\x3c\/span\x3e)\x3c\/span\x3e{\n    ...\n});\nsimplemde.codemirror.on(\x3cspan class=\x22hljs-string\x22\x3e\x22paste\x22\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eeditor,e\x3c\/span\x3e)\x3c\/span\x3e{\n...\n});\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch1 id=\x22articleHeader4\x22\x3eBlob对象转File对象\x3c\/h1\x3e\n\x3cp\x3e为了使用WebUploader这个文件上传组件，需要将粘贴得到的Blob对象转为File对象。\x3cbr\x3eBlob 对象是包含有只读原始数据的类文件对象.File 接口基于 Blob，继承了 Blob 的功能,并且扩展支持用户计算机上的本地文件。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var blob=new Blob();\nvar file = new File([blob], \x26quot;image.png\x26quot;, {type:\x26quot;image\/png\x26quot;});\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs scala\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e blob=\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eBlob\x3c\/span\x3e();\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e file = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eFile\x3c\/span\x3e([blob], \x3cspan class=\x22hljs-string\x22\x3e\x22image.png\x22\x3c\/span\x3e, {\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x22image\/png\x22\x3c\/span\x3e});\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eFile构造器的第一个参数必须是数组\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader5\x22\x3eWebUploader文件上传\x3c\/h1\x3e\n\x3cp\x3e\x3ca href=\x22http:\/\/fex.baidu.com\/webuploader\/getting-started.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/fex.baidu.com\/webuploa...\x3c\/a\x3e\x3cbr\x3e创建Uploader对象\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var uploader = WebUploader.Uploader({\n    swf: \x27path_of_swf\/Uploader.swf\x27,\n \n    \/\/ 开起分片上传。\n    chunked: true\n});\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e uploader = WebUploader.Uploader({\n    swf: \x3cspan class=\x22hljs-string\x22\x3e\x27path_of_swf\/Uploader.swf\x27\x3c\/span\x3e,\n \n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 开起分片上传。\x3c\/span\x3e\n    chunked: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n});\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e监听fileQueued事件来实现进度UI构造:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 当有文件被添加进队列的时候\nuploader.on( \x27fileQueued\x27, function( file ) {\n    var $list=$(\x26quot;#list\x26quot;);\n    $list.append( \x27\x3cdiv id=\x26quot;\x27 \x2b file.id \x2b \x27\x26quot; class=\x26quot;item\x26quot;\x3e\x27 \x2b\n        \x27\x3ch4 class=\x26quot;info\x26quot;\x3e\x27 \x2b file.name \x2b \x27\x3c\/h4\x3e\x27 \x2b\n        \x27\x3cp class=\x26quot;state\x26quot;\x3e等待上传...\x3c\/p\x3e\x27 \x2b\n    \x27\x3c\/div\x3e\x27 );\n});\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs scilab\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 当有文件被添加进队列的时候\x3c\/span\x3e\nuploader.on( \x3cspan class=\x22hljs-string\x22\x3e\x27fileQueued\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e( file )\x3c\/span\x3e {\x3c\/span\x3e\n    var $\x3cspan class=\x22hljs-built_in\x22\x3elist\x3c\/span\x3e=$(\x3cspan class=\x22hljs-string\x22\x3e\x22#list\x22\x3c\/span\x3e);\n    $list.append( \x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;div id=\x22\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e\x27 \x2b file.id \x2b \x27\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e\x22 class=\x22\x3c\/span\x3eitem\x3cspan class=\x22hljs-string\x22\x3e\x22\x26gt;\x27\x3c\/span\x3e \x2b\n        \x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;h4 class=\x22\x3c\/span\x3einfo\x3cspan class=\x22hljs-string\x22\x3e\x22\x26gt;\x27\x3c\/span\x3e \x2b file.name \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;\/h4\x26gt;\x27\x3c\/span\x3e \x2b\n        \x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;p class=\x22\x3c\/span\x3estate\x3cspan class=\x22hljs-string\x22\x3e\x22\x26gt;等待上传...\x26lt;\/p\x26gt;\x27\x3c\/span\x3e \x2b\n    \x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;\/div\x26gt;\x27\x3c\/span\x3e );\n});\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e文件上传进度:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 文件上传过程中创建进度条实时显示。\nuploader.on( \x27uploadProgress\x27, function( file, percentage ) {\n    var $li = $( \x27#\x27\x2bfile.id ),\n    $percent = $li.find(\x27.progress .progress-bar\x27);\n    \/\/ 避免重复创建\n    if ( !$percent.length ) {\n        $percent = $(\x27\x3cdiv class=\x26quot;progress progress-striped active\x26quot;\x3e\x27 \x2b\n          \x27\x3cdiv class=\x26quot;progress-bar\x26quot; role=\x26quot;progressbar\x26quot; style=\x26quot;width: 0%\x26quot;\x3e\x27 \x2b\n          \x27\x3c\/div\x3e\x27 \x2b\n        \x27\x3c\/div\x3e\x27).appendTo( $li ).find(\x27.progress-bar\x27);\n    }\n \n    $li.find(\x27p.state\x27).text(\x27上传中\x27);\n    $percent.css( \x27width\x27, percentage * 100 \x2b \x27%\x27 );\n});\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs mel\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 文件上传过程中创建进度条实时显示。\x3c\/span\x3e\nuploader.on( \x3cspan class=\x22hljs-string\x22\x3e\x27uploadProgress\x27\x3c\/span\x3e, function( \x3cspan class=\x22hljs-keyword\x22\x3efile\x3c\/span\x3e, percentage ) {\n    var $li = $( \x3cspan class=\x22hljs-string\x22\x3e\x27#\x27\x3c\/span\x3e\x2b\x3cspan class=\x22hljs-keyword\x22\x3efile\x3c\/span\x3e.id ),\n    $percent = $li.find(\x3cspan class=\x22hljs-string\x22\x3e\x27.progress .progress-bar\x27\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 避免重复创建\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e ( !$percent.length ) {\n        $percent = $(\x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;div class=\x22progress progress-striped active\x22\x26gt;\x27\x3c\/span\x3e \x2b\n          \x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;div class=\x22progress-bar\x22 role=\x22progressbar\x22 style=\x22width: 0%\x22\x26gt;\x27\x3c\/span\x3e \x2b\n          \x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;\/div\x26gt;\x27\x3c\/span\x3e \x2b\n        \x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;\/div\x26gt;\x27\x3c\/span\x3e).appendTo( $li ).find(\x3cspan class=\x22hljs-string\x22\x3e\x27.progress-bar\x27\x3c\/span\x3e);\n    }\n \n    $li.find(\x3cspan class=\x22hljs-string\x22\x3e\x27p.state\x27\x3c\/span\x3e).\x3cspan class=\x22hljs-keyword\x22\x3etext\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27上传中\x27\x3c\/span\x3e);\n    $percent.css( \x3cspan class=\x22hljs-string\x22\x3e\x27width\x27\x3c\/span\x3e, percentage * \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27%\x27\x3c\/span\x3e );\n});\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e文件成功、失败处理:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22uploader.on( \x27uploadSuccess\x27, function( file,data ) {\n    $( \x27#\x27\x2bfile.id ).find(\x27p.state\x27).text(\x27已上传\x27);\n});\n \nuploader.on( \x27uploadError\x27, function( file ) {\n    $( \x27#\x27\x2bfile.id ).find(\x27p.state\x27).text(\x27上传出错\x27);\n});\n \nuploader.on( \x27uploadComplete\x27, function( file ) {\n    $( \x27#\x27\x2bfile.id ).find(\x27.progress\x27).fadeOut();\n});\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3euploader.on( \x3cspan class=\x22hljs-string\x22\x3e\x27uploadSuccess\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e file,data \x3c\/span\x3e) \x3c\/span\x3e{\n    $( \x3cspan class=\x22hljs-string\x22\x3e\x27#\x27\x3c\/span\x3e\x2bfile.id ).find(\x3cspan class=\x22hljs-string\x22\x3e\x27p.state\x27\x3c\/span\x3e).text(\x3cspan class=\x22hljs-string\x22\x3e\x27已上传\x27\x3c\/span\x3e);\n});\n \nuploader.on( \x3cspan class=\x22hljs-string\x22\x3e\x27uploadError\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e file \x3c\/span\x3e) \x3c\/span\x3e{\n    $( \x3cspan class=\x22hljs-string\x22\x3e\x27#\x27\x3c\/span\x3e\x2bfile.id ).find(\x3cspan class=\x22hljs-string\x22\x3e\x27p.state\x27\x3c\/span\x3e).text(\x3cspan class=\x22hljs-string\x22\x3e\x27上传出错\x27\x3c\/span\x3e);\n});\n \nuploader.on( \x3cspan class=\x22hljs-string\x22\x3e\x27uploadComplete\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e file \x3c\/span\x3e) \x3c\/span\x3e{\n    $( \x3cspan class=\x22hljs-string\x22\x3e\x27#\x27\x3c\/span\x3e\x2bfile.id ).find(\x3cspan class=\x22hljs-string\x22\x3e\x27.progress\x27\x3c\/span\x3e).fadeOut();\n});\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e添加文件到队列并上传:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22uploader.addFiles( file ) \nuploader.addFiles( [file1, file2 …] ) \n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs css\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-selector-tag\x22\x3euploader\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.addFiles\x3c\/span\x3e( \x3cspan class=\x22hljs-selector-tag\x22\x3efile\x3c\/span\x3e ) \n\x3cspan class=\x22hljs-selector-tag\x22\x3euploader\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.addFiles\x3c\/span\x3e( \x3cspan class=\x22hljs-selector-attr\x22\x3e[file1, file2 …]\x3c\/span\x3e ) \n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e开始上传:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22uploader.upload() \n\/\/uploader.upload( file | fileId)\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs gcode\x22\x3e\x3ccode\x3euploader.upload\x3cspan class=\x22hljs-comment\x22\x3e()\x3c\/span\x3e \n\x3cspan class=\x22hljs-comment\x22\x3e\/\/uploader.upload( file | fileId)\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e其他参考：\x3cbr\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000004288686\x22\x3ejs获取剪切板内容，js控制图片粘贴\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22http:\/\/www.hyjiacan.com\/codemirror-event\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e在线代码编辑器 CODEMIRROR 事件说明\x3c\/a\x3e\x3cbr\x3ejavascript.ruanyifeng.com\x3cbr\x3e\x3ca href=\x22https:\/\/developer.mozilla.org\/zh-CN\/docs\/Web\/API\/Blob\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/developer.mozilla.org...\x3c\/a\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>js拖拽粘贴上传与CodeMirror</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000007434697">https://segmentfault.com/a/1190000007434697</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/xupzg5qj5e/" target="_blank">https://alili.tech/archive/xupzg5qj5e/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>