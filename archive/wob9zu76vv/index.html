<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="webpack多页应用架构系列（十一）：预打包Dll，实现webpack音速编译"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>webpack多页应用架构系列（十一）：预打包Dll，实现webpack音速编译 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/wob9zu76vv/",
				"appid": "1613049289050283", 
				"title": "webpack多页应用架构系列（十一）：预打包Dll，实现webpack音速编译 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-02T02:30:11"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/34la5juv27h/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/dvp03aedwli/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fwob9zu76vv%2f&text=webpack%e5%a4%9a%e9%a1%b5%e5%ba%94%e7%94%a8%e6%9e%b6%e6%9e%84%e7%b3%bb%e5%88%97%ef%bc%88%e5%8d%81%e4%b8%80%ef%bc%89%ef%bc%9a%e9%a2%84%e6%89%93%e5%8c%85Dll%ef%bc%8c%e5%ae%9e%e7%8e%b0webpack%e9%9f%b3%e9%80%9f%e7%bc%96%e8%af%91"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fwob9zu76vv%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fwob9zu76vv%2f&text=webpack%e5%a4%9a%e9%a1%b5%e5%ba%94%e7%94%a8%e6%9e%b6%e6%9e%84%e7%b3%bb%e5%88%97%ef%bc%88%e5%8d%81%e4%b8%80%ef%bc%89%ef%bc%9a%e9%a2%84%e6%89%93%e5%8c%85Dll%ef%bc%8c%e5%ae%9e%e7%8e%b0webpack%e9%9f%b3%e9%80%9f%e7%bc%96%e8%af%91"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fwob9zu76vv%2f&title=webpack%e5%a4%9a%e9%a1%b5%e5%ba%94%e7%94%a8%e6%9e%b6%e6%9e%84%e7%b3%bb%e5%88%97%ef%bc%88%e5%8d%81%e4%b8%80%ef%bc%89%ef%bc%9a%e9%a2%84%e6%89%93%e5%8c%85Dll%ef%bc%8c%e5%ae%9e%e7%8e%b0webpack%e9%9f%b3%e9%80%9f%e7%bc%96%e8%af%91"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fwob9zu76vv%2f&is_video=false&description=webpack%e5%a4%9a%e9%a1%b5%e5%ba%94%e7%94%a8%e6%9e%b6%e6%9e%84%e7%b3%bb%e5%88%97%ef%bc%88%e5%8d%81%e4%b8%80%ef%bc%89%ef%bc%9a%e9%a2%84%e6%89%93%e5%8c%85Dll%ef%bc%8c%e5%ae%9e%e7%8e%b0webpack%e9%9f%b3%e9%80%9f%e7%bc%96%e8%af%91"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=webpack%e5%a4%9a%e9%a1%b5%e5%ba%94%e7%94%a8%e6%9e%b6%e6%9e%84%e7%b3%bb%e5%88%97%ef%bc%88%e5%8d%81%e4%b8%80%ef%bc%89%ef%bc%9a%e9%a2%84%e6%89%93%e5%8c%85Dll%ef%bc%8c%e5%ae%9e%e7%8e%b0webpack%e9%9f%b3%e9%80%9f%e7%bc%96%e8%af%91&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fwob9zu76vv%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fwob9zu76vv%2f&title=webpack%e5%a4%9a%e9%a1%b5%e5%ba%94%e7%94%a8%e6%9e%b6%e6%9e%84%e7%b3%bb%e5%88%97%ef%bc%88%e5%8d%81%e4%b8%80%ef%bc%89%ef%bc%9a%e9%a2%84%e6%89%93%e5%8c%85Dll%ef%bc%8c%e5%ae%9e%e7%8e%b0webpack%e9%9f%b3%e9%80%9f%e7%bc%96%e8%af%91"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fwob9zu76vv%2f&title=webpack%e5%a4%9a%e9%a1%b5%e5%ba%94%e7%94%a8%e6%9e%b6%e6%9e%84%e7%b3%bb%e5%88%97%ef%bc%88%e5%8d%81%e4%b8%80%ef%bc%89%ef%bc%9a%e9%a2%84%e6%89%93%e5%8c%85Dll%ef%bc%8c%e5%ae%9e%e7%8e%b0webpack%e9%9f%b3%e9%80%9f%e7%bc%96%e8%af%91"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fwob9zu76vv%2f&title=webpack%e5%a4%9a%e9%a1%b5%e5%ba%94%e7%94%a8%e6%9e%b6%e6%9e%84%e7%b3%bb%e5%88%97%ef%bc%88%e5%8d%81%e4%b8%80%ef%bc%89%ef%bc%9a%e9%a2%84%e6%89%93%e5%8c%85Dll%ef%bc%8c%e5%ae%9e%e7%8e%b0webpack%e9%9f%b3%e9%80%9f%e7%bc%96%e8%af%91"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fwob9zu76vv%2f&title=webpack%e5%a4%9a%e9%a1%b5%e5%ba%94%e7%94%a8%e6%9e%b6%e6%9e%84%e7%b3%bb%e5%88%97%ef%bc%88%e5%8d%81%e4%b8%80%ef%bc%89%ef%bc%9a%e9%a2%84%e6%89%93%e5%8c%85Dll%ef%bc%8c%e5%ae%9e%e7%8e%b0webpack%e9%9f%b3%e9%80%9f%e7%bc%96%e8%af%91"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">webpack多页应用架构系列（十一）：预打包Dll，实现webpack音速编译</h1><div class="meta"><div class="postdate"><time datetime="2019-02-02" itemprop="datePublished">2019-02-02</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e本文首发于\x3cem\x3eArray_Huang\x3c\/em\x3e的技术博客——\x3ccode\x3e实用至上\x3c\/code\x3e，非经作者同意，请勿转载。\x3cbr\x3e原文地址：\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000007104372\x22\x3e\x3ccode\x3ehttps:\/\/segmentfault.com\/a\/1190000007104372\x3c\/code\x3e\x3c\/a\x3e\x3cbr\x3e如果您对本系列文章感兴趣，欢迎关注订阅这里：\x3ca href=\x22https:\/\/segmentfault.com\/blog\/array_huang\x22 target=\x22_blank\x22\x3e\x3ccode\x3ehttps:\/\/segmentfault.com\/blog\/array_huang\x3c\/code\x3e\x3c\/a\x3e\n\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e前言\x3c\/h2\x3e\n\x3cp\x3e书承上文《\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000007043716\x22\x3ewebpack多页应用架构系列（十）：如何打造一个自定义的bootstrap\x3c\/a\x3e》。\x3c\/p\x3e\n\x3cp\x3e上文说到我们利用webpack来打包一个可配置的bootstrap，但\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000007043716#articleHeader7\x22 target=\x22_blank\x22\x3e文末\x3c\/a\x3e留下一个问题：由于bootstrap十分庞大，因此每次编译都要耗费大部分的时间在打包bootstrap这一块，而换来的仅仅是配置的便利，十分不划算。\x3c\/p\x3e\n\x3cp\x3e我也并非是故意卖关子，这的确是我自己开发中碰到的问题，而在撰写完该文后，我立即着手探索解决之道。终于，发现了webpack这一大杀器：\x3ccode\x3eDllPlugin\x3c\/code\x3e\x26amp;\x3ccode\x3eDllReferencePlugin\x3c\/code\x3e，打包时间过长的问题得到完美解决。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e解决方案的机制和原理\x3c\/h2\x3e\n\x3cp\x3e\x3ccode\x3eDllPlugin\x3c\/code\x3e\x26amp;\x3ccode\x3eDllReferencePlugin\x3c\/code\x3e这一方案，实际上也是属于代码分割的范畴，但与\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000006871991\x22\x3eCommonsChunkPlugin\x3c\/a\x3e不一样的是，它不仅仅是把公用代码提取出来放到一个独立的文件供不同的页面来使用，它更重要的一点是：把公用代码和它的使用者（业务代码）从编译这一步就分离出来，换句话说，我们可以分别来编译公用代码和业务代码了。这有什么好处呢？很简单，业务代码常改，而公用代码不常改，那么，我们在日常修改业务代码的过程中，就可以省出编译公用代码那一部分所耗费的时间了（是不是马上就联想到坑爹的bootstrap了呢）。\x3c\/p\x3e\n\x3cp\x3e整个过程大概是这样的：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e利用\x3ccode\x3eDllPlugin\x3c\/code\x3e把公用代码打包成一个\x3cstrong\x3e“Dll文件”\x3c\/strong\x3e（其实本质上还是js，只是套用概念而已）；除了Dll文件外，\x3ccode\x3eDllPlugin\x3c\/code\x3e还会生成一个manifest.json文件作为公用代码的索引供\x3ccode\x3eDllReferencePlugin\x3c\/code\x3e使用。\x3c\/li\x3e\n\x3cli\x3e在业务代码的webpack配置文件中配置好\x3ccode\x3eDllReferencePlugin\x3c\/code\x3e并进行编译，达到利用\x3ccode\x3eDllReferencePlugin\x3c\/code\x3e让业务代码和Dll文件实现关联的目的。\x3c\/li\x3e\n\x3cli\x3e在各个页面\x26lt;head\x26gt;中，先加载Dll文件，再加载业务代码文件。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e适用范围\x3c\/h3\x3e\n\x3cp\x3eDll文件里只适合放置不常改动的代码，比如说第三方库（谁也不会有事无事就升级一下第三方库吧），尤其是本身就庞大或者依赖众多的库。如果你自己整理了一套成熟的框架，开发项目时只需要在上面添砖加瓦的，那么也可以把这套框架也打包进Dll文件里，甚至可以做到多个项目共用这一份Dll文件。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e如何配置哪些代码需要打包进Dll文件？\x3c\/h3\x3e\n\x3cp\x3e我们需要专门为Dll文件建一份webpack配置文件，不能与业务代码共用同一份配置：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const webpack = require(\x27webpack\x27);\nconst ExtractTextPlugin = require(\x27extract-text-webpack-plugin\x27);\nconst dirVars = require(\x27.\/webpack-config\/base\/dir-vars.config.js\x27); \/\/ 与业务代码共用同一份路径的配置表\n\nmodule.exports = {\n  output: {\n    path: dirVars.dllDir,\n    filename: \x27[name].js\x27,\n    library: \x27[name]\x27, \/\/ 当前Dll的所有内容都会存放在这个参数指定变量名的一个全局变量下，注意与DllPlugin的name参数保持一致\n  },\n  entry: {\n    \/*\n      指定需要打包的js模块\n      或是css\/less\/图片\/字体文件等资源，但注意要在module参数配置好相应的loader\n    *\/\n    dll: [\n      \x27jquery\x27, \x27!!bootstrap-webpack!bootstrapConfig\x27,\n      \x27metisMenu\/metisMenu.min\x27, \x27metisMenu\/metisMenu.min.css\x27,\n    ],\n  },\n  plugins: [\n    new webpack.DllPlugin({\n      path: \x27manifest.json\x27, \/\/ 本Dll文件中各模块的索引，供DllReferencePlugin读取使用\n      name: \x27[name]\x27,  \/\/ 当前Dll的所有内容都会存放在这个参数指定变量名的一个全局变量下，注意与参数output.library保持一致\n      context: dirVars.staticRootDir, \/\/ 指定一个路径作为上下文环境，需要与DllReferencePlugin的context参数保持一致，建议统一设置为项目根目录\n    }),\n    \/* 跟业务代码一样，该兼容的还是得兼容 *\/\n    new webpack.ProvidePlugin({\n      $: \x27jquery\x27,\n      jQuery: \x27jquery\x27,\n      \x27window.jQuery\x27: \x27jquery\x27,\n      \x27window.$\x27: \x27jquery\x27,\n    }),\n    new ExtractTextPlugin(\x27[name].css\x27), \/\/ 打包css\/less的时候会用到ExtractTextPlugin\n  ],\n  module: require(\x27.\/webpack-config\/module.config.js\x27), \/\/ 沿用业务代码的module配置\n  resolve: require(\x27.\/webpack-config\/resolve.config.js\x27), \/\/ 沿用业务代码的resolve配置\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e webpack = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e ExtractTextPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27extract-text-webpack-plugin\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e dirVars = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/webpack-config\/base\/dir-vars.config.js\x27\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 与业务代码共用同一份路径的配置表\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n  \x3cspan class=\x22hljs-attr\x22\x3eoutput\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: dirVars.dllDir,\n    \x3cspan class=\x22hljs-attr\x22\x3efilename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27[name].js\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3elibrary\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27[name]\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 当前Dll的所有内容都会存放在这个参数指定变量名的一个全局变量下，注意与DllPlugin的name参数保持一致\x3c\/span\x3e\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3eentry\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/*\n      指定需要打包的js模块\n      或是css\/less\/图片\/字体文件等资源，但注意要在module参数配置好相应的loader\n    *\/\x3c\/span\x3e\n    dll: [\n      \x3cspan class=\x22hljs-string\x22\x3e\x27jquery\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27!!bootstrap-webpack!bootstrapConfig\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-string\x22\x3e\x27metisMenu\/metisMenu.min\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27metisMenu\/metisMenu.min.css\x27\x3c\/span\x3e,\n    ],\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3eplugins\x3c\/span\x3e: [\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.DllPlugin({\n      \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27manifest.json\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 本Dll文件中各模块的索引，供DllReferencePlugin读取使用\x3c\/span\x3e\n      name: \x3cspan class=\x22hljs-string\x22\x3e\x27[name]\x27\x3c\/span\x3e,  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 当前Dll的所有内容都会存放在这个参数指定变量名的一个全局变量下，注意与参数output.library保持一致\x3c\/span\x3e\n      context: dirVars.staticRootDir, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 指定一个路径作为上下文环境，需要与DllReferencePlugin的context参数保持一致，建议统一设置为项目根目录\x3c\/span\x3e\n    }),\n    \x3cspan class=\x22hljs-comment\x22\x3e\/* 跟业务代码一样，该兼容的还是得兼容 *\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.ProvidePlugin({\n      \x3cspan class=\x22hljs-attr\x22\x3e$\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27jquery\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3ejQuery\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27jquery\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-string\x22\x3e\x27window.jQuery\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27jquery\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-string\x22\x3e\x27window.$\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27jquery\x27\x3c\/span\x3e,\n    }),\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e ExtractTextPlugin(\x3cspan class=\x22hljs-string\x22\x3e\x27[name].css\x27\x3c\/span\x3e), \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 打包css\/less的时候会用到ExtractTextPlugin\x3c\/span\x3e\n  ],\n  \x3cspan class=\x22hljs-attr\x22\x3emodule\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/webpack-config\/module.config.js\x27\x3c\/span\x3e), \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 沿用业务代码的module配置\x3c\/span\x3e\n  resolve: \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/webpack-config\/resolve.config.js\x27\x3c\/span\x3e), \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 沿用业务代码的resolve配置\x3c\/span\x3e\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e如何编译Dll文件？\x3c\/h3\x3e\n\x3cp\x3e编译Dll文件的代码实际上跟编译业务代码是一样的，记得利用\x3ccode\x3e--config\x3c\/code\x3e指定上述专供Dll使用的webpack配置文件就好了：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$ webpack --progress --colors --config .\/webpack-dll.config.js\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e$ webpack --progress --colors --config .\/webpack-dll.config.js\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e另外，建议可以把该语句写到\x3ccode\x3enpm scripts\x3c\/code\x3e里，好记一点哈。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e如何让业务代码关联Dll文件？\x3c\/h3\x3e\n\x3cp\x3e我们需要在供编译业务代码的webpack配置文件里设好\x3ccode\x3eDllReferencePlugin\x3c\/code\x3e的配置项：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22new webpack.DllReferencePlugin({\n  context: dirVars.staticRootDir, \/\/ 指定一个路径作为上下文环境，需要与DllPlugin的context参数保持一致，建议统一设置为项目根目录\n  manifest: require(\x27..\/..\/manifest.json\x27), \/\/ 指定manifest.json\n  name: \x27dll\x27,  \/\/ 当前Dll的所有内容都会存放在这个参数指定变量名的一个全局变量下，注意与DllPlugin的name参数保持一致\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.DllReferencePlugin({\n  \x3cspan class=\x22hljs-attr\x22\x3econtext\x3c\/span\x3e: dirVars.staticRootDir, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 指定一个路径作为上下文环境，需要与DllPlugin的context参数保持一致，建议统一设置为项目根目录\x3c\/span\x3e\n  manifest: \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27..\/..\/manifest.json\x27\x3c\/span\x3e), \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 指定manifest.json\x3c\/span\x3e\n  name: \x3cspan class=\x22hljs-string\x22\x3e\x27dll\x27\x3c\/span\x3e,  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 当前Dll的所有内容都会存放在这个参数指定变量名的一个全局变量下，注意与DllPlugin的name参数保持一致\x3c\/span\x3e\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e配置好\x3ccode\x3eDllReferencePlugin\x3c\/code\x3e了以后，正常编译业务代码即可。不过要注意，必须要先编译Dll并生成manifest.json后再编译业务代码；而以后每次修改Dll并重新编译后，也要重新编译一下业务代码。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e如何在业务代码里使用Dll文件打包的module\/资源？\x3c\/h3\x3e\n\x3cp\x3e不需要刻意做些什么，该怎么require就怎么require，webpack都会帮你处理好的了。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e如何整合Dll？\x3c\/h3\x3e\n\x3cp\x3e在每个页面里，都要按这个顺序来加载js文件：Dll文件 =\x26gt; \x3ccode\x3eCommonsChunkPlugin\x3c\/code\x3e生成的公用chunk文件（如果没用\x3ccode\x3eCommonsChunkPlugin\x3c\/code\x3e那就忽略啦） =\x26gt; 页面本身的入口文件。\x3c\/p\x3e\n\x3cp\x3e有两个注意事项：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e如果你是像我一样利用\x3ccode\x3eHtmlWebpackPlugin\x3c\/code\x3e来生成HTML并自动加载chunk的话，请务必在\x26lt;head\x26gt;里手写\x26lt;script\x26gt;来加载Dll文件。\x3c\/li\x3e\n\x3cli\x3e为了完全分离源文件和编译后生成的文件，也为了方便在编译前可以清空build目录，不应直接把Dll文件编译生成到build目录里，我建议可以先生成到源文件src目录里，再用\x3ccode\x3efile-loader\x3c\/code\x3e给原封不动搬运过去。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3e光说不练假把式，来个跑分啊大兄弟！\x3c\/h2\x3e\n\x3cp\x3e下面以我的脚手架项目\x3ca href=\x22https:\/\/github.com\/Array-Huang\/webpack-seed\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eArray-Huang\/webpack-seed\x3c\/a\x3e为例，测试一下（使用开发环境的webpack配置文件\x3ccode\x3ewebpack.dev.config.js\x3c\/code\x3e）使用这套Dll方案前后的webpack编译时间：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e使用Dll方案前的编译时间为：10秒17\x3c\/li\x3e\n\x3cli\x3e使用Dll方案后的编译时间为：4秒29\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e由于该项目只是一个脚手架，涉及到的第三方库并不多，我只把jQuery、bootstrap、metisMenu给打包进Dll文件里了，尽管如此，还是差了将近6秒了，相信在实际项目中，这套\x3ccode\x3eDllPlugin\x3c\/code\x3e\x26amp;\x3ccode\x3eDllReferencePlugin\x3c\/code\x3e的方案能为你省下更多的时间来找女朋友（大误）。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader9\x22\x3e示例代码\x3c\/h2\x3e\n\x3cp\x3e诸位看本系列文章，搭配我在Github上的脚手架项目食用更佳哦（笑）：\x3ca href=\x22https:\/\/github.com\/Array-Huang\/webpack-seed\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eArray-Huang\/webpack-seed\x3c\/a\x3e（\x3ccode\x3ehttps:\/\/github.com\/Array-Huang\/webpack-seed\x3c\/code\x3e）。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader10\x22\x3e附系列文章目录（同步更新）\x3c\/h2\x3e\n\x3cul\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000006843916\x22\x3ewebpack多页应用架构系列（一）：一步一步解决架构痛点：\x3ccode\x3ehttps:\/\/segmentfault.com\/a\/1190000006843916\x3c\/code\x3e\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000006863968\x22 target=\x22_blank\x22\x3ewebpack多页应用架构系列（二）：webpack配置常用部分有哪些？:\x3ccode\x3ehttps:\/\/segmentfault.com\/a\/1190000006863968\x3c\/code\x3e\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000006871991\x22\x3ewebpack多页应用架构系列（三）：怎么打包公共代码才能避免重复？：\x3ccode\x3ehttps:\/\/segmentfault.com\/a\/1190000006871991\x3c\/code\x3e\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000006887523\x22 target=\x22_blank\x22\x3ewebpack多页应用架构系列（四）：老式jQuery插件还不能丢，怎么兼容？:\x3ccode\x3ehttps:\/\/segmentfault.com\/a\/1190000006887523\x3c\/code\x3e\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000006897458\x22\x3ewebpack多页应用架构系列（五）：听说webpack连less\/css也能打包？:\x3ccode\x3ehttps:\/\/segmentfault.com\/a\/1190000006897458\x3c\/code\x3e\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000006907701\x22 target=\x22_blank\x22\x3ewebpack多页应用架构系列（六）：听说webpack连图片和字体也能打包？:\x3ccode\x3ehttps:\/\/segmentfault.com\/a\/1190000006907701\x3c\/code\x3e\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000006952432\x22\x3ewebpack多页应用架构系列（七）：开发环境、生产环境傻傻分不清楚？:\x3ccode\x3ehttps:\/\/segmentfault.com\/a\/1190000006952432\x3c\/code\x3e\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000006992218\x22 target=\x22_blank\x22\x3ewebpack多页应用架构系列（八）：教练我要写ES6！webpack怎么整合Babel？:\x3ccode\x3ehttps:\/\/segmentfault.com\/a\/1190000006992218\x3c\/code\x3e\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000007030775\x22\x3ewebpack多页应用架构系列（九）：总有刁民想害朕！ESLint为你阻击垃圾代码:\x3ccode\x3ehttps:\/\/segmentfault.com\/a\/1190000007030775\x3c\/code\x3e\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000007043716\x22 target=\x22_blank\x22\x3ewebpack多页应用架构系列（十）：如何打造一个自定义的bootstrap:\x3ccode\x3ehttps:\/\/segmentfault.com\/a\/1190000007043716\x3c\/code\x3e\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000007104372\x22\x3ewebpack多页应用架构系列（十一）：预打包Dll，实现webpack音速编译:\x3ccode\x3ehttps:\/\/segmentfault.com\/a\/1190000007104372\x3c\/code\x3e\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000007126268\x22 target=\x22_blank\x22\x3ewebpack多页应用架构系列（十二）：利用webpack生成HTML普通网页\x26amp;页面模板:\x3ccode\x3ehttps:\/\/segmentfault.com\/a\/1190000007126268\x3c\/code\x3e\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000007159115\x22\x3ewebpack多页应用架构系列（十三）：构建一个简单的模板布局系统:\x3ccode\x3ehttps:\/\/segmentfault.com\/a\/1190000007159115\x3c\/code\x3e\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000007301770\x22 target=\x22_blank\x22\x3ewebpack多页应用架构系列（十四）：No复制粘贴！多项目共用基础设施\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000008203380\x22\x3ewebpack多页应用架构系列（十五）：论前端如何在后端渲染开发模式下夹缝生存\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000010317802\x22 target=\x22_blank\x22\x3ewebpack多页应用架构系列（十六）：善用浏览器缓存，该去则去，该留则留\x3c\/a\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cblockquote\x3e本文首发于\x3cem\x3eArray_Huang\x3c\/em\x3e的技术博客——\x3ccode\x3e实用至上\x3c\/code\x3e，非经作者同意，请勿转载。\x3cbr\x3e原文地址：\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000007104372\x22\x3e\x3ccode\x3ehttps:\/\/segmentfault.com\/a\/1190000007104372\x3c\/code\x3e\x3c\/a\x3e\x3cbr\x3e如果您对本系列文章感兴趣，欢迎关注订阅这里：\x3ca href=\x22https:\/\/segmentfault.com\/blog\/array_huang\x22 target=\x22_blank\x22\x3e\x3ccode\x3ehttps:\/\/segmentfault.com\/blog\/array_huang\x3c\/code\x3e\x3c\/a\x3e\n\x3c\/blockquote\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>webpack多页应用架构系列（十一）：预打包Dll，实现webpack音速编译</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000007104372">https://segmentfault.com/a/1190000007104372</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/wob9zu76vv/" target="_blank">https://alili.tech/archive/wob9zu76vv/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>