<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="大公司是怎么发布静态资源的"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>大公司是怎么发布静态资源的 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/urvpnai88r/",
				"appid": "1613049289050283", 
				"title": "大公司是怎么发布静态资源的 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-02T02:30:11"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/v37dcshzod/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/jbjafkzanw/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2furvpnai88r%2f&text=%e5%a4%a7%e5%85%ac%e5%8f%b8%e6%98%af%e6%80%8e%e4%b9%88%e5%8f%91%e5%b8%83%e9%9d%99%e6%80%81%e8%b5%84%e6%ba%90%e7%9a%84"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2furvpnai88r%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2furvpnai88r%2f&text=%e5%a4%a7%e5%85%ac%e5%8f%b8%e6%98%af%e6%80%8e%e4%b9%88%e5%8f%91%e5%b8%83%e9%9d%99%e6%80%81%e8%b5%84%e6%ba%90%e7%9a%84"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2furvpnai88r%2f&title=%e5%a4%a7%e5%85%ac%e5%8f%b8%e6%98%af%e6%80%8e%e4%b9%88%e5%8f%91%e5%b8%83%e9%9d%99%e6%80%81%e8%b5%84%e6%ba%90%e7%9a%84"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2furvpnai88r%2f&is_video=false&description=%e5%a4%a7%e5%85%ac%e5%8f%b8%e6%98%af%e6%80%8e%e4%b9%88%e5%8f%91%e5%b8%83%e9%9d%99%e6%80%81%e8%b5%84%e6%ba%90%e7%9a%84"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%a4%a7%e5%85%ac%e5%8f%b8%e6%98%af%e6%80%8e%e4%b9%88%e5%8f%91%e5%b8%83%e9%9d%99%e6%80%81%e8%b5%84%e6%ba%90%e7%9a%84&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2furvpnai88r%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2furvpnai88r%2f&title=%e5%a4%a7%e5%85%ac%e5%8f%b8%e6%98%af%e6%80%8e%e4%b9%88%e5%8f%91%e5%b8%83%e9%9d%99%e6%80%81%e8%b5%84%e6%ba%90%e7%9a%84"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2furvpnai88r%2f&title=%e5%a4%a7%e5%85%ac%e5%8f%b8%e6%98%af%e6%80%8e%e4%b9%88%e5%8f%91%e5%b8%83%e9%9d%99%e6%80%81%e8%b5%84%e6%ba%90%e7%9a%84"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2furvpnai88r%2f&title=%e5%a4%a7%e5%85%ac%e5%8f%b8%e6%98%af%e6%80%8e%e4%b9%88%e5%8f%91%e5%b8%83%e9%9d%99%e6%80%81%e8%b5%84%e6%ba%90%e7%9a%84"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2furvpnai88r%2f&title=%e5%a4%a7%e5%85%ac%e5%8f%b8%e6%98%af%e6%80%8e%e4%b9%88%e5%8f%91%e5%b8%83%e9%9d%99%e6%80%81%e8%b5%84%e6%ba%90%e7%9a%84"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">大公司是怎么发布静态资源的</h1><div class="meta"><div class="postdate"><time datetime="2019-02-02" itemprop="datePublished">2019-02-02</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e\x3cp\x3e静态资源（Static Resources）: js、css、img 等非服务器动态运行生成的文件。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e在一般的网站中，静态资源使用频率高，流量占用大。对于有追求（访问量稍大）的网站，都会把静态资源放置到 CDN 服务器，不占用业务服务器的网络带宽，而达到更好的用户体验。那大公司的静态资源是怎么发布的呢？\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e发布要求\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e1. 静态资源必须走 CDN\x3c\/h3\x3e\n\x3cp\x3e如非自建 CDN，推荐 \x3ca\x3e又拍云\x3c\/a\x3e，阿里云，七牛云。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e2. 平滑升级--非覆盖式发布\x3c\/h3\x3e\n\x3cblockquote\x3e\x3cp\x3e在不修改线上静态资源的情况下，发布新的静态资源。即 CDN 上的静态资源必须\x3cstrong\x3e共存多个静态资源版本\x3c\/strong\x3e。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e负责百度 FIS 的核心功能开发者张云龙已经给出了 \x3ca href=\x22https:\/\/www.zhihu.com\/question\/20790576\/answer\/32602154\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e部署的方案\x3c\/a\x3e，\x3cstrong\x3e非覆盖式发布\x3c\/strong\x3e。他的文中提到：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e先部署页面，再部署资源：在二者部署的时间间隔内，如果有用户访问页面，就会在新的页面结构中加载旧的资源，并且把这个旧版本的资源当做新版本缓存起来，其结果就是：用户访问到了一个样式错乱的页面，除非手动刷新，否则在资源缓存过期之前，页面会一直执行错误。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e先部署资源，再部署页面：在部署时间间隔之内，有旧版本资源本地缓存的用户访问网站，由于请求的页面是旧版本的，资源引用没有改变，浏览器将直接使用本地缓存，这种情况下页面展现正常；但没有本地缓存或者缓存过期的用户访问网站，就会出现旧版本页面加载新版本资源的情况，导致页面执行错误，但当页面完成部署，这部分用户再次访问页面又会恢复正常了。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e3. 精确的缓存控制——文件版本号\x3c\/h3\x3e\n\x3cblockquote\x3e\x3cp\x3e更新静态资源，只更新修改的部分。不能修改未更新的资源的引用。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e在 CDN 的配置中，会把缓存的时间设置很长。文件的更新就需要一种灵活的机制，也不能每次发布版本就把所有文件更新一遍，全量更新静态资源对于用户和服务提供者来说都是非常不友好的，极度浪费 CDN 资源和用户的流量。\x3cbr\x3e比如： \x3ccode\x3ea.html\x3c\/code\x3e 页面引用了 100 个静态资源文件，但是本次发版本只修改了一个\x3ccode\x3ea.js\x3c\/code\x3e文件。那么就只能修改 \x3ccode\x3ea.js\x3c\/code\x3e 文件的引用，可能修改为 \x3ccode\x3ea.hash.js\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e 解决办法：根据文件的内容算出一个值，如果文件内容不改变，那么这个值就不会改变。\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e张云龙的文章中给出了『精确的缓存控制』的原理————我们会很自然的联想到利用 数据摘要要算法 对文件求摘要信息，摘要信息与文件内容一一对应，就有了一种可以精确到单个文件粒度的缓存控制依据了。\x3c\/p\x3e\n\x3cp\x3eGrunt,gulp 也有对应的插件用来解决这个问题。如果你使用 webpack，那么可以配置下 chunkhash 或者 hash。更厉害的，\x3cstrong\x3e文章末尾还有相关的解决方案。\x3c\/strong\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e发布和问题\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e1. 发布流程\x3c\/h3\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVD2VM?w=964\x26amp;h=448\x22 src=\x22https:\/\/static.alili.tech\/img\/bVD2VM?w=964\x26amp;h=448\x22 alt=\x22静态资源发布流程图\x22 title=\x22静态资源发布流程图\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e如果我们把静态资源的实际访问域名设置为 \x3ccode\x3eres.company.com\x3c\/code\x3e。\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e功能开发结束后，开发人员把静态资源提交到测试环境 Git 仓库。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e测试人员在测试环境通过绑定 host 的方式测试，测试通过后，进入发布阶段，需要静态资源代码提交到产品环境 Git 仓库。（使用测试和产品两个仓库，是为了测试和产品环境完全隔离）\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e源站（origin.res.company.com）从产品环境 Git 拉取静态资源的代码，并且为静态资源提供访问服务（nginx 等），该域名不提供文件缓存服务，仅仅作为 CDN 的回源地址。所以代码中一定不要写源站的信息。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e在 CDN 服务商提供的空间中，将\x3cstrong\x3e回源地址\x3c\/strong\x3e配置为源站（origin.res.company.com）。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eCDN 服务器会提供一个默认的访问域名，比如 \x3ccode\x3ecdn-1.res.cdn_company.com\x3c\/code\x3e, 然后把实际需求访问的静态资源域名 \x3ccode\x3eres.company.com\x3c\/code\x3e CNAME 到 \x3ccode\x3ecdn-1.res.cdn_company.com\x3c\/code\x3e。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e代码发布完毕。用户访问的时候，会访问到最近的 CDN 阶段。CDN 结点去文件中心取文件，如果不存在文件则回源到源站，获取文件。(有些 CDN 产品提供文件存储功能，异地备份)\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e通过这样的流程，就能让用户访通过 CDN 访问到我们的实际资源。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e2. 怎么做到多个项目共存\x3c\/h3\x3e\n\x3cblockquote\x3e\x3cp\x3e结论：我们会按照目录来划分业务的静态资源。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e\x3ccode\x3eres.company.com\x3c\/code\x3e 域名下面会共存多个业务。A 业务、B 业务都是使用同样的发布方案。\x3cbr\x3e比如某静态资源的访问路径为：\x3ccode\x3ehttp:\/\/res.company.com\/:业务名\/js\/test.de5b0b0c.js\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e多个团队可以使用同一个静态资源仓库，\x3ccode\x3eres.git\x3c\/code\x3e，然后按照目录来区分业务。web 服务器直接指向到 \x3ccode\x3eres\/\x3c\/code\x3e即可。静态资源更新只需要 pull 代码即可，而不需求做其他改动。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e3. 是否同步源站文件到 CDN\x3c\/h3\x3e\n\x3cblockquote\x3e\x3cp\x3e结论：同步源站文件到 CDN 能确保实现非覆盖式发布。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e\x3ca\x3e又拍云\x3c\/a\x3e等 CDN 服务商都提供了这些贴心的服务，就算你提交了新的同名文件，那也是不会生效的。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVD2VP?w=560\x26amp;h=329\x22 src=\x22https:\/\/static.alili.tech\/img\/bVD2VP?w=560\x26amp;h=329\x22 alt=\x22CDN 回源\x22 title=\x22CDN 回源\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e终端用户就近访问 CDN 加速节点上的资源\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e若 CDN 加速节点上不存在资源，则回源获取资源\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e回源获取的资源持久化存储到 CDN\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e返回资源内容给终端用户\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e当终端用户再次访问相同的资源时，CDN 的加速节点将直接返回资源内容，不需要重新回源获取\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e另外我还做了测试，在未做源站迁移的情况下，删掉源站文件，会出现大面积的 404 响应。\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVD2VR?w=978\x26amp;h=652\x22 src=\x22https:\/\/static.alili.tech\/img\/bVD2VR?w=978\x26amp;h=652\x22 alt=\x22未做源站迁移\x22 title=\x22未做源站迁移\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3e推荐工具\x3c\/h2\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/www.upyun.com\/index.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e超厉害的 CDN 服务商——又拍云\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/weixin\/tmt-workflow\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e微信出品的前端工程化工具——tmt-workflow\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/fex-team\/fis\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e百度团队出品——FIS\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca\x3e京东的非官方——JDF\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/webpack.github.io\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e能打造最牛逼的工程化工具——webpack\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch2 id=\x22articleHeader9\x22\x3e参考文档\x3c\/h2\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/www.zhihu.com\/question\/20790576\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e大公司里怎样开发和部署前端代码？\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/www.infoq.com\/cn\/articles\/front-end-engineering-and-performance-optimization-part1\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e前端工程精粹（一）：静态资源版本更新与缓存\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/blog.upyun.com\/?p=252\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e又拍云【功能介绍】源站资源迁移\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>大公司是怎么发布静态资源的</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000007122250">https://segmentfault.com/a/1190000007122250</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/urvpnai88r/" target="_blank">https://alili.tech/archive/urvpnai88r/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>