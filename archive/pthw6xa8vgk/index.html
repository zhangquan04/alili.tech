<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="使用React.setState需要注意的三点"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>使用React.setState需要注意的三点 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/pthw6xa8vgk/",
				"appid": "1613049289050283", 
				"title": "使用React.setState需要注意的三点 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-27T02:30:59"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/b9f17h8bvp/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/gltfbih2kd/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fpthw6xa8vgk%2f&text=%e4%bd%bf%e7%94%a8React.setState%e9%9c%80%e8%a6%81%e6%b3%a8%e6%84%8f%e7%9a%84%e4%b8%89%e7%82%b9"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fpthw6xa8vgk%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fpthw6xa8vgk%2f&text=%e4%bd%bf%e7%94%a8React.setState%e9%9c%80%e8%a6%81%e6%b3%a8%e6%84%8f%e7%9a%84%e4%b8%89%e7%82%b9"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fpthw6xa8vgk%2f&title=%e4%bd%bf%e7%94%a8React.setState%e9%9c%80%e8%a6%81%e6%b3%a8%e6%84%8f%e7%9a%84%e4%b8%89%e7%82%b9"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fpthw6xa8vgk%2f&is_video=false&description=%e4%bd%bf%e7%94%a8React.setState%e9%9c%80%e8%a6%81%e6%b3%a8%e6%84%8f%e7%9a%84%e4%b8%89%e7%82%b9"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e4%bd%bf%e7%94%a8React.setState%e9%9c%80%e8%a6%81%e6%b3%a8%e6%84%8f%e7%9a%84%e4%b8%89%e7%82%b9&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fpthw6xa8vgk%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fpthw6xa8vgk%2f&title=%e4%bd%bf%e7%94%a8React.setState%e9%9c%80%e8%a6%81%e6%b3%a8%e6%84%8f%e7%9a%84%e4%b8%89%e7%82%b9"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fpthw6xa8vgk%2f&title=%e4%bd%bf%e7%94%a8React.setState%e9%9c%80%e8%a6%81%e6%b3%a8%e6%84%8f%e7%9a%84%e4%b8%89%e7%82%b9"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fpthw6xa8vgk%2f&title=%e4%bd%bf%e7%94%a8React.setState%e9%9c%80%e8%a6%81%e6%b3%a8%e6%84%8f%e7%9a%84%e4%b8%89%e7%82%b9"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fpthw6xa8vgk%2f&title=%e4%bd%bf%e7%94%a8React.setState%e9%9c%80%e8%a6%81%e6%b3%a8%e6%84%8f%e7%9a%84%e4%b8%89%e7%82%b9"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">使用React.setState需要注意的三点</h1><div class="meta"><div class="postdate"><time datetime="2019-01-27" itemprop="datePublished">2019-01-27</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e原文: \x3ca href=\x22https:\/\/medium.com\/@mweststrate\/3-reasons-why-i-stopped-using-react-setstate-ab73fc67a42e#.yeam8iov0\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/medium.com\/@mweststra...\x3c\/a\x3e\x3cbr\x3e作者: Michel Weststrate\x3c\/p\x3e\n\x3chr\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e前言\x3c\/h2\x3e\n\x3cp\x3e这篇文章原标题是\x3cstrong\x3e3 Reasons why I stopped using React.setState\x3c\/strong\x3e，但是我对原文作者提出的论点不是很感冒，但是作者提出的三点对\x3ccode\x3eReact\x3c\/code\x3e新手来说是很容易忽略的地方，所以我在这里只提出部分内容，而且把标题改为\x3cstrong\x3e使用React.setState需要注意的三点\x3c\/strong\x3e。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e正文\x3c\/h2\x3e\n\x3cp\x3e对\x3ccode\x3eReact\x3c\/code\x3e新手来说，使用\x3ccode\x3esetState\x3c\/code\x3e是一件很复杂的事情。即使是熟练的\x3ccode\x3eReact\x3c\/code\x3e开发，也很有可能因为\x3ccode\x3eReact\x3c\/code\x3e的一些机制而产生一些bug，比如下面这个例子：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVIRIT?w=800\x26amp;h=265\x22 src=\x22https:\/\/static.alili.tech\/img\/bVIRIT?w=800\x26amp;h=265\x22 alt=\x22由于异步的setState造成的bug。log永远比当前的慢一步\x22 title=\x22由于异步的setState造成的bug。log永远比当前的慢一步\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/www.gitbook.com\/book\/chenyitian\/react-docs\/details\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e文档\x3c\/a\x3e中也说明了当使用\x3ccode\x3esetState\x3c\/code\x3e的时候，需要注意什么问题：\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3cp\x3e\x3cstrong\x3e注意：\x3c\/strong\x3e\x3cbr\x3e绝对不要 直接改变\x3ccode\x3ethis.state\x3c\/code\x3e，因为之后调用\x3ccode\x3esetState()\x3c\/code\x3e可能会替换掉你做的改变。把\x3ccode\x3ethis.state\x3c\/code\x3e当做是不可变的。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3esetState()\x3c\/code\x3e不会立刻改变\x3ccode\x3ethis.state\x3c\/code\x3e，而是创建一个即将处理的\x3ccode\x3estate\x3c\/code\x3e转变。在调用该方法之后访问\x3ccode\x3ethis.state\x3c\/code\x3e可能会返回现有的值。\x3c\/p\x3e\n\x3cp\x3e对\x3ccode\x3esetState\x3c\/code\x3e的调用没有任何同步性的保证，并且调用可能会为了性能收益批量执行。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3esetState()\x3c\/code\x3e将总是触发一次重绘，除非在\x3ccode\x3eshouldComponentUpdate()\x3c\/code\x3e中实现了条件渲染逻辑。如果可变对象被使用了，但又不能在\x3ccode\x3eshouldComponentUpdate()\x3c\/code\x3e中实现这种逻辑，仅在新\x3ccode\x3estate\x3c\/code\x3e和之前的\x3ccode\x3estate\x3c\/code\x3e存在差异的时候调用\x3ccode\x3esetState()\x3c\/code\x3e可以避免不必要的重新渲染。\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e总结出来，当使用\x3ccode\x3esetState\x3c\/code\x3e的时候，有三个问题需要注意:\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e1. setState是异步的(译者注：不保证同步的)\x3c\/h3\x3e\n\x3cp\x3e很多开发刚开始没有注意到\x3ccode\x3esetState\x3c\/code\x3e是异步的。如果你修改一些\x3ccode\x3estate\x3c\/code\x3e，然后直接查看它，你会看到之前的\x3ccode\x3estate\x3c\/code\x3e。这是\x3ccode\x3esetState\x3c\/code\x3e中最容易出错的地方。 \x3ccode\x3esetState\x3c\/code\x3e这个词看起来并不像是异步的，所以如果你不假思索的用它，可能会造成\x3ccode\x3ebugs\x3c\/code\x3e。下面这个例子很好的展示了这个问题：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22class Select extends React.Component {\n  constructor(props, context) {\n    super(props, context)\n    this.state = {\n      selection: props.values[0]\n    };\n  }\n  \n  render() {\n    return (\n      \x3cul onKeyDown={this.onKeyDown} tabIndex={0}\x3e\n        {this.props.values.map(value =\x3e\n          \x3cli\n            className={value === this.state.selection ? \x27selected\x27 : \x27\x27}\n            key={value}\n            onClick={() =\x3e this.onSelect(value)}\n          \x3e\n            {value}\n          \x3c\/li\x3e \n        )}  \n      \x3c\/ul\x3e\n    )\n  }\n  \n  onSelect(value) {\n    this.setState({\n      selection: value\n    })\n    this.fireOnSelect()\n  }\n\n  onKeyDown = (e) =\x3e {\n    const {values} = this.props\n    const idx = values.indexOf(this.state.selection)\n    if (e.keyCode === 38 \x26amp;\x26amp; idx \x3e 0) { \/* up *\/\n      this.setState({\n        selection: values[idx - 1]\n      })\n    } else if (e.keyCode === 40 \x26amp;\x26amp; idx \x3c values.length -1) { \/* down *\/\n      this.setState({\n        selection: values[idx \x2b 1]\n      })  \n    }\n    this.fireOnSelect()\n  }\n   \n  fireOnSelect() {\n    if (typeof this.props.onSelect === \x26quot;function\x26quot;)\n      this.props.onSelect(this.state.selection) \/* not what you expected..*\/\n  }\n}\n\nReactDOM.render(\n  \x3cSelect \n    values={[\x26quot;State.\x26quot;, \x26quot;Should.\x26quot;, \x26quot;Be.\x26quot;, \x26quot;Synchronous.\x26quot;]} \n    onSelect={value =\x3e console.log(value)}\n  \/\x3e,\n  document.getElementById(\x26quot;app\x26quot;)\n)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eSelect\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eReact\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e(props, context) {\n    \x3cspan class=\x22hljs-keyword\x22\x3esuper\x3c\/span\x3e(props, context)\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state = {\n      \x3cspan class=\x22hljs-attr\x22\x3eselection\x3c\/span\x3e: props.values[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e]\n    };\n  }\n  \n  render() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n      \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eul\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonKeyDown\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{this.onKeyDown}\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etabIndex\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{0}\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        {this.props.values.map(value =\x26gt;\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\n            \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{value\x3c\/span\x3e === \x3cspan class=\x22hljs-string\x22\x3ethis.state.selection\x3c\/span\x3e ? \x27\x3cspan class=\x22hljs-attr\x22\x3eselected\x3c\/span\x3e\x27 \x3cspan class=\x22hljs-attr\x22\x3e:\x3c\/span\x3e \x27\x27}\n            \x3cspan class=\x22hljs-attr\x22\x3ekey\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{value}\x3c\/span\x3e\n            \x3cspan class=\x22hljs-attr\x22\x3eonClick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e this.onSelect(value)}\n          \x26gt;\n            {value}\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e \n        )}  \n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eul\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n    )\n  }\n  \n  onSelect(value) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.setState({\n      \x3cspan class=\x22hljs-attr\x22\x3eselection\x3c\/span\x3e: value\n    })\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.fireOnSelect()\n  }\n\n  onKeyDown = \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3ee\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e {values} = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e idx = values.indexOf(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state.selection)\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (e.keyCode === \x3cspan class=\x22hljs-number\x22\x3e38\x3c\/span\x3e \x26amp;\x26amp; idx \x26gt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) { \x3cspan class=\x22hljs-comment\x22\x3e\/* up *\/\x3c\/span\x3e\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.setState({\n        \x3cspan class=\x22hljs-attr\x22\x3eselection\x3c\/span\x3e: values[idx - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e]\n      })\n    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (e.keyCode === \x3cspan class=\x22hljs-number\x22\x3e40\x3c\/span\x3e \x26amp;\x26amp; idx \x26lt; values.length \x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e) { \x3cspan class=\x22hljs-comment\x22\x3e\/* down *\/\x3c\/span\x3e\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.setState({\n        \x3cspan class=\x22hljs-attr\x22\x3eselection\x3c\/span\x3e: values[idx \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e]\n      })  \n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.fireOnSelect()\n  }\n   \n  fireOnSelect() {\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.onSelect === \x3cspan class=\x22hljs-string\x22\x3e\x22function\x22\x3c\/span\x3e)\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.onSelect(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state.selection) \x3cspan class=\x22hljs-comment\x22\x3e\/* not what you expected..*\/\x3c\/span\x3e\n  }\n}\n\nReactDOM.render(\n  \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eSelect\x3c\/span\x3e \n    \x3cspan class=\x22hljs-attr\x22\x3evalues\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{[\x3c\/span\x3e\x22\x3cspan class=\x22hljs-attr\x22\x3eState.\x3c\/span\x3e\x22, \x22\x3cspan class=\x22hljs-attr\x22\x3eShould.\x3c\/span\x3e\x22, \x22\x3cspan class=\x22hljs-attr\x22\x3eBe.\x3c\/span\x3e\x22, \x22\x3cspan class=\x22hljs-attr\x22\x3eSynchronous.\x3c\/span\x3e\x22]} \n    \x3cspan class=\x22hljs-attr\x22\x3eonSelect\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{value\x3c\/span\x3e =\x26gt;\x3c\/span\x3e console.log(value)}\n  \/\x26gt;,\n  document.getElementById(\x22app\x22)\n)\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e第一眼看上去，这个代码似乎没有什么问题。两个事件处理中调用\x3ccode\x3eonSelect\x3c\/code\x3e方法。但是，这个\x3ccode\x3eSelect\x3c\/code\x3e组件中有一个\x3ccode\x3ebug\x3c\/code\x3e很好的展现了之前的\x3ccode\x3eGIF\x3c\/code\x3e图。\x3ccode\x3eonSelect\x3c\/code\x3e方法永远传递的是之前的\x3ccode\x3estate.selection\x3c\/code\x3e值，因为当\x3ccode\x3efireOnSelect\x3c\/code\x3e调用的时候，\x3ccode\x3esetState\x3c\/code\x3e还没有完成它的工作。我认为\x3ccode\x3eReact\x3c\/code\x3e至少要把\x3ccode\x3esetState\x3c\/code\x3e改名为\x3ccode\x3escheduleState\x3c\/code\x3e或者把回掉函数设为必须参数。\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e这个bug很容易修改，最难的地方在于你要知道有这个问题。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e2. setState会造成不必要的渲染\x3c\/h3\x3e\n\x3cp\x3e\x3ccode\x3esetState\x3c\/code\x3e造成的第二个问题是：每次调用都会造成重新渲染。很多时候，这些重新渲染是不必要的。你可以用\x3ccode\x3eReact performance tools\x3c\/code\x3e中的\x3ca href=\x22https:\/\/facebook.github.io\/react\/docs\/perf.html#perf.printwastedmeasurements\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eprintWasted\x3c\/a\x3e来查看什么时候会发生不必要渲染。但是，大概的说，不必要的渲染有以下几个原因：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e新的\x3ccode\x3estate\x3c\/code\x3e其实和之前的是一样的。这个问题通常可以通过\x3ccode\x3eshouldComponentUpdate\x3c\/code\x3e来解决。也可以用\x3ccode\x3epure render\x3c\/code\x3e或者其他的库来解决这个问题。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e通常发生改变的\x3ccode\x3estate\x3c\/code\x3e是和渲染有关的，但是也有例外。比如，有些数据是根据某些状态来显示的。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e第三，有些\x3ccode\x3estate\x3c\/code\x3e和渲染一点关系都没有。有一些\x3ccode\x3estate\x3c\/code\x3e可能是和事件、\x3ccode\x3etimer ID\x3c\/code\x3e有关的。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e3.setState并不能很有效的管理所有的组件状态\x3c\/h3\x3e\n\x3cp\x3e基于上面的最后一条，并不是所有的组件状态都应该用\x3ccode\x3esetState\x3c\/code\x3e来进行保存和更新的。复杂的组件可能会有各种各样的状态需要管理。用\x3ccode\x3esetState\x3c\/code\x3e来管理这些状态不但会造成很多不需要的重新渲染，也会造成相关的生命周期钩子一直被调用，从而造成很多奇怪的问题。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e后话\x3c\/h2\x3e\n\x3cp\x3e在原文中作者推荐了一个叫做\x3ccode\x3eMobX\x3c\/code\x3e的库来管理部分状态，我不是很感冒，所以我就不介绍。如果感兴趣的，可以通过最上面的链接看看原文中的介绍。\x3c\/p\x3e\n\x3cp\x3e基于上面提出的三点，我认为新手应该注意的地方是：\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e\n\x3ccode\x3esetState\x3c\/code\x3e是不保证同步的\x3c\/h3\x3e\n\x3cp\x3e\x3ccode\x3esetState\x3c\/code\x3e是不保证同步的，是不保证同步的，是不保证同步的。重要的事情说三遍。之所以不说它是异步的，是因为\x3ccode\x3esetState\x3c\/code\x3e在某些情况下也是同步更新的。\x3ca href=\x22https:\/\/www.bennadel.com\/blog\/2893-setstate-state-mutation-operation-may-be-synchronous-in-reactjs.htm\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e可以参考这篇文章\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e如果需要在\x3ccode\x3esetState\x3c\/code\x3e后直接获取修改后的值，那么有几个方案：\x3c\/p\x3e\n\x3ch4\x3e传入对应的参数，不通过\x3ccode\x3ethis.state\x3c\/code\x3e获取\x3c\/h4\x3e\n\x3cp\x3e针对于之前的例子，完全可以在调用\x3ccode\x3efireOnSelect\x3c\/code\x3e的时候，传入需要的值。而不是在方法中在通过\x3ccode\x3ethis.state\x3c\/code\x3e来获取\x3c\/p\x3e\n\x3ch4\x3e使用回调函数\x3c\/h4\x3e\n\x3cp\x3e\x3ccode\x3esetState\x3c\/code\x3e方法接收一个\x3ccode\x3efunction\x3c\/code\x3e作为回调函数。这个回掉函数会在\x3ccode\x3esetState\x3c\/code\x3e完成以后直接调用，这样就可以获取最新的\x3ccode\x3estate\x3c\/code\x3e。对于之前的例子，就可以这样：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22this.setState({\n  selection: value\n}, this.fireOnSelect)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs css\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-selector-tag\x22\x3ethis\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.setState\x3c\/span\x3e({\n  \x3cspan class=\x22hljs-attribute\x22\x3eselection\x3c\/span\x3e: value\n}, \x3cspan class=\x22hljs-selector-tag\x22\x3ethis\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.fireOnSelect\x3c\/span\x3e)\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e使用setTimeout\x3c\/h4\x3e\n\x3cp\x3e在\x3ccode\x3esetState\x3c\/code\x3e使用\x3ccode\x3esetTimeout\x3c\/code\x3e来让\x3ccode\x3esetState\x3c\/code\x3e先完成以后再执行里面内容。这样子：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22this.setState({\n  selection: value\n});\n\nsetTimeout(this.fireOnSelect, 0);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs css\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-selector-tag\x22\x3ethis\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.setState\x3c\/span\x3e({\n  \x3cspan class=\x22hljs-attribute\x22\x3eselection\x3c\/span\x3e: value\n});\n\n\x3cspan class=\x22hljs-selector-tag\x22\x3esetTimeout\x3c\/span\x3e(\x3cspan class=\x22hljs-selector-tag\x22\x3ethis\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.fireOnSelect\x3c\/span\x3e, 0);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e直接输出，回调函数，\x3ccode\x3esetTimeout\x3c\/code\x3e对比\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    componentDidMount(){\n    this.setState({val: this.state.val \x2b 1}, ()=\x3e{\n      console.log(\x26quot;In callback \x26quot; \x2b this.state.val);\n    });\n\n    console.log(\x26quot;Direct call \x26quot; \x2b this.state.val);   \n\n    setTimeout(()=\x3e{\n      console.log(\x26quot;begin of setTimeout\x26quot; \x2b this.state.val);\n\n       this.setState({val: this.state.val \x2b 1}, ()=\x3e{\n          console.log(\x26quot;setTimeout setState callback \x26quot; \x2b this.state.val);\n       });\n\n      setTimeout(()=\x3e{\n        console.log(\x26quot;setTimeout of settimeout \x26quot; \x2b this.state.val);\n      }, 0);\n\n      console.log(\x26quot;end of setTimeout \x26quot; \x2b this.state.val);\n    }, 0);\n  }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs pf\x22\x3e\x3ccode\x3e    componentDidMount(){\n    this.\x3cspan class=\x22hljs-built_in\x22\x3eset\x3c\/span\x3eState({val: this.\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.val \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e}, ()=\x26gt;{\n      console.\x3cspan class=\x22hljs-keyword\x22\x3elog\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22In callback \x22\x3c\/span\x3e \x2b this.\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.val);\n    });\n\n    console.\x3cspan class=\x22hljs-keyword\x22\x3elog\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22Direct call \x22\x3c\/span\x3e \x2b this.\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.val);   \n\n    \x3cspan class=\x22hljs-built_in\x22\x3eset\x3c\/span\x3eTimeout(()=\x26gt;{\n      console.\x3cspan class=\x22hljs-keyword\x22\x3elog\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22begin of setTimeout\x22\x3c\/span\x3e \x2b this.\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.val);\n\n       this.\x3cspan class=\x22hljs-built_in\x22\x3eset\x3c\/span\x3eState({val: this.\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.val \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e}, ()=\x26gt;{\n          console.\x3cspan class=\x22hljs-keyword\x22\x3elog\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22setTimeout setState callback \x22\x3c\/span\x3e \x2b this.\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.val);\n       });\n\n      \x3cspan class=\x22hljs-built_in\x22\x3eset\x3c\/span\x3eTimeout(()=\x26gt;{\n        console.\x3cspan class=\x22hljs-keyword\x22\x3elog\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22setTimeout of settimeout \x22\x3c\/span\x3e \x2b this.\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.val);\n      }, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e);\n\n      console.\x3cspan class=\x22hljs-keyword\x22\x3elog\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22end of setTimeout \x22\x3c\/span\x3e \x2b this.\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.val);\n    }, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e);\n  }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e如果val默认为0, 输入的结果是：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3e Direct call 0\n\x3e In callback 1\n\x3e begin of setTimeout 1\n\x3e setTimeout setState callback 2\n\x3e end of setTimeout 2\n\x3e setTimeout of settimeout 2\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs ada\x22\x3e\x3ccode\x3e\x26gt; Direct call \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e\n\x26gt; \x3cspan class=\x22hljs-keyword\x22\x3eIn\x3c\/span\x3e callback \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\n\x26gt; \x3cspan class=\x22hljs-keyword\x22\x3ebegin\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eof\x3c\/span\x3e setTimeout \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\n\x26gt; setTimeout setState callback \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e\n\x26gt; \x3cspan class=\x22hljs-keyword\x22\x3eend\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eof\x3c\/span\x3e setTimeout \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e\n\x26gt; setTimeout \x3cspan class=\x22hljs-keyword\x22\x3eof\x3c\/span\x3e settimeout \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e和渲染无关的状态尽量不要放在\x3ccode\x3estate\x3c\/code\x3e中来管理\x3c\/h3\x3e\n\x3cp\x3e\x3cstrong\x3e通常\x3ccode\x3estate\x3c\/code\x3e中只来管理和渲染有关的状态\x3c\/strong\x3e，从而保证\x3ccode\x3esetState\x3c\/code\x3e改变的状态都是和渲染有关的状态。这样子就可以避免不必要的重复渲染。其他和渲染无关的状态，可以直接以属性的形式保存在组件中，在需要的时候调用和改变，不会造成渲染。或者参考原文中的\x3ccode\x3eMobX\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e避免不必要的修改\x3c\/strong\x3e，当\x3ccode\x3estate\x3c\/code\x3e的值没有发生改变的时候，尽量不要使用\x3ccode\x3esetState\x3c\/code\x3e。虽然\x3ccode\x3eshouldComponentUpdate\x3c\/code\x3e和\x3ccode\x3ePureComponent\x3c\/code\x3e可以避免不必要的重复渲染，但是还是增加了一层\x3ccode\x3eshallowEqual\x3c\/code\x3e的调用，造成多余的浪费。\x3c\/p\x3e\n\x3cp\x3e以上\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>使用React.setState需要注意的三点</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000008271880">https://segmentfault.com/a/1190000008271880</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/pthw6xa8vgk/" target="_blank">https://alili.tech/archive/pthw6xa8vgk/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>