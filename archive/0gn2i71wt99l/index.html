<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="微信公众号文章采集系统---开箱即用"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>微信公众号文章采集系统---开箱即用 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/0gn2i71wt99l/",
				"appid": "1613049289050283", 
				"title": "微信公众号文章采集系统---开箱即用 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-06T02:30:10"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/4uaieeadljm/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/7ge9fgnjfsu/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f0gn2i71wt99l%2f&text=%e5%be%ae%e4%bf%a1%e5%85%ac%e4%bc%97%e5%8f%b7%e6%96%87%e7%ab%a0%e9%87%87%e9%9b%86%e7%b3%bb%e7%bb%9f---%e5%bc%80%e7%ae%b1%e5%8d%b3%e7%94%a8"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f0gn2i71wt99l%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f0gn2i71wt99l%2f&text=%e5%be%ae%e4%bf%a1%e5%85%ac%e4%bc%97%e5%8f%b7%e6%96%87%e7%ab%a0%e9%87%87%e9%9b%86%e7%b3%bb%e7%bb%9f---%e5%bc%80%e7%ae%b1%e5%8d%b3%e7%94%a8"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f0gn2i71wt99l%2f&title=%e5%be%ae%e4%bf%a1%e5%85%ac%e4%bc%97%e5%8f%b7%e6%96%87%e7%ab%a0%e9%87%87%e9%9b%86%e7%b3%bb%e7%bb%9f---%e5%bc%80%e7%ae%b1%e5%8d%b3%e7%94%a8"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f0gn2i71wt99l%2f&is_video=false&description=%e5%be%ae%e4%bf%a1%e5%85%ac%e4%bc%97%e5%8f%b7%e6%96%87%e7%ab%a0%e9%87%87%e9%9b%86%e7%b3%bb%e7%bb%9f---%e5%bc%80%e7%ae%b1%e5%8d%b3%e7%94%a8"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%be%ae%e4%bf%a1%e5%85%ac%e4%bc%97%e5%8f%b7%e6%96%87%e7%ab%a0%e9%87%87%e9%9b%86%e7%b3%bb%e7%bb%9f---%e5%bc%80%e7%ae%b1%e5%8d%b3%e7%94%a8&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f0gn2i71wt99l%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f0gn2i71wt99l%2f&title=%e5%be%ae%e4%bf%a1%e5%85%ac%e4%bc%97%e5%8f%b7%e6%96%87%e7%ab%a0%e9%87%87%e9%9b%86%e7%b3%bb%e7%bb%9f---%e5%bc%80%e7%ae%b1%e5%8d%b3%e7%94%a8"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f0gn2i71wt99l%2f&title=%e5%be%ae%e4%bf%a1%e5%85%ac%e4%bc%97%e5%8f%b7%e6%96%87%e7%ab%a0%e9%87%87%e9%9b%86%e7%b3%bb%e7%bb%9f---%e5%bc%80%e7%ae%b1%e5%8d%b3%e7%94%a8"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f0gn2i71wt99l%2f&title=%e5%be%ae%e4%bf%a1%e5%85%ac%e4%bc%97%e5%8f%b7%e6%96%87%e7%ab%a0%e9%87%87%e9%9b%86%e7%b3%bb%e7%bb%9f---%e5%bc%80%e7%ae%b1%e5%8d%b3%e7%94%a8"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f0gn2i71wt99l%2f&title=%e5%be%ae%e4%bf%a1%e5%85%ac%e4%bc%97%e5%8f%b7%e6%96%87%e7%ab%a0%e9%87%87%e9%9b%86%e7%b3%bb%e7%bb%9f---%e5%bc%80%e7%ae%b1%e5%8d%b3%e7%94%a8"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">微信公众号文章采集系统---开箱即用</h1><div class="meta"><div class="postdate"><time datetime="2019-01-06" itemprop="datePublished">2019-01-06</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e本着开源精神和方便用户，现已将\x22微信公众号文章采集系统\x22打包成虚拟机，你只需下载安装虚拟机镜像，即可使用。\x3c\/p\x3e\n\x3cp\x3e系统镜像有6个G,只能通过种子的形式下载了， 镜像种子下载地址\x3c\/p\x3e\n\x3cp\x3e链接: \x3ca href=\x22https:\/\/pan.baidu.com\/s\/1bq9rhO7\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/pan.baidu.com\/s\/1bq9rhO7\x3c\/a\x3e 密码: 7r4d\x3c\/p\x3e\n\x3cp\x3e首先要感谢飯口組組長 把他的采集方案开源出来 。\x3c\/p\x3e\n\x3cp\x3e这里能够称之为系统是因为涉及到的技术很多，这里一一罗列：\x3c\/p\x3e\n\x3cp\x3e1、anyproxy 阿里巴巴开源的代理拦截器，使用的是4.0的版本，可以很方便的修改 response 信息。anyproxy 我在系统中已经安装好了，安装也很简单，先安装nodejs环境，然后用npm安装anyproxy.\x3c\/p\x3e\n\x3cp\x3eanyproxy 4.0开始规则可以作为模块来开发，写好了规则代码之后，不用动原来的代码，只需要在anproxy的参数带上规则文件。这里用到的命令 anproxy --rule weixin.js。 关于anproxy如何设置https 证书问题，可以参考官网。我在虚拟机中设置了全局的代理，所以需要 anyproxy 打开后才能，8001端口可以访问请求才能成功。\x3c\/p\x3e\n\x3cp\x3e规则代码主要的逻辑是对于微信公众号的请求进行拦截，把数据转发到 php。\x3c\/p\x3e\n\x3cp\x3e2、apache\x2bphp\x2bmysql 这里主要是作为web服务器来处理anyproxy 拦截的请求，处理微信文章数据和点赞数、阅读数。\x3c\/p\x3e\n\x3cp\x3e拦截过来的数据的处理可以看具体的php代码，逻辑不算太复杂。这里为了方便使用的是phpstudy的集成开发环境。\x3c\/p\x3e\n\x3cp\x3e3、按键精灵，按键精灵是国产的一种类似vb语法的模拟键盘鼠标的工具。这里用到按键精灵来模拟点击windows下的微信客户端。\x3c\/p\x3e\n\x3cp\x3e在处理多个微信公众号的时候，需要客户端来点击，把所有的手动操作通过按键精灵来模拟出来。去查看具体的代码的时候，我在处理点击历史消息使用了一个小技巧，事实是开始想通过直接通过识别图片的办法来找到 “历史消息” 按钮的位置，但是发现怎么也找不到，然后只能 循环向下移动鼠标，直到区域内找到特定的颜色，就是“历史消息”按钮。\x3c\/p\x3e\n\x3cp\x3e在一条思路行不通的时候，就要尝试其他思路。整个系统就是做下来，就是要处理这种看似行得通，实际不通，然后再去尝试，如此反复。\x3c\/p\x3e\n\x3cp\x3e4、windows 微信客户端，其实我尝试过用安卓模拟器，因为我的目标是开箱即用，所以需要把所有的程序都能够装到一起，但是在虚拟机中是没法安装安卓模拟器，也就是说虚拟机中是没法做二次虚拟的。这个坑我已经踩过了，大家就不用踩了，记得之前有人问过，阿里云windows服务器能不能装 安卓模拟器，我想答案是一样的，虚拟机不能做二次虚拟化，阿里云windows服务器不能装安卓模拟器。\x3c\/p\x3e\n\x3cp\x3e所以，当我尝试安卓模拟器后，发现原来微信pc客户端(包括mac)的功能已经做的很完善了，然后就去尝试windows客户端。\x3c\/p\x3e\n\x3cp\x3e5、virtualbox 虚拟机，这个是甲骨文公司出的虚拟机。会涉及到一些网络的配置，比如设置为NAT模式。\x3c\/p\x3e\n\x3cp\x3e现在把虚拟机镜像开源出来，里面所有的代码都在虚拟机中，大家可以随意修改。\x3c\/p\x3e\n\x3cp\x3e从最开始知道公众号文章采集到知道实现原理，再到最后做出镜像，中间经历过各种困难，耗时耗力，请教各种人，甚至吃饭睡觉都在想某个细节的解决方案，有解决问题的快乐，有被问题缠绕时的苦恼，感谢这个过程中给予过帮助人。\x3c\/p\x3e\n\x3cp\x3e在安装使用过程中遇到什么问题可以加我微信 ( liuhan199012 )\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>微信公众号文章采集系统&mdash;开箱即用</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000010402887">https://segmentfault.com/a/1190000010402887</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/0gn2i71wt99l/" target="_blank">https://alili.tech/archive/0gn2i71wt99l/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>