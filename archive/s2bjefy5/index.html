<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="React实现Toast（提示）效果"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>React实现Toast（提示）效果 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/s2bjefy5/",
				"appid": "1613049289050283", 
				"title": "React实现Toast（提示）效果 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-11T02:30:08"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/jcr1kwph98a/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/7t66asewtio/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fs2bjefy5%2f&text=React%e5%ae%9e%e7%8e%b0Toast%ef%bc%88%e6%8f%90%e7%a4%ba%ef%bc%89%e6%95%88%e6%9e%9c"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fs2bjefy5%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fs2bjefy5%2f&text=React%e5%ae%9e%e7%8e%b0Toast%ef%bc%88%e6%8f%90%e7%a4%ba%ef%bc%89%e6%95%88%e6%9e%9c"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fs2bjefy5%2f&title=React%e5%ae%9e%e7%8e%b0Toast%ef%bc%88%e6%8f%90%e7%a4%ba%ef%bc%89%e6%95%88%e6%9e%9c"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fs2bjefy5%2f&is_video=false&description=React%e5%ae%9e%e7%8e%b0Toast%ef%bc%88%e6%8f%90%e7%a4%ba%ef%bc%89%e6%95%88%e6%9e%9c"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=React%e5%ae%9e%e7%8e%b0Toast%ef%bc%88%e6%8f%90%e7%a4%ba%ef%bc%89%e6%95%88%e6%9e%9c&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fs2bjefy5%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fs2bjefy5%2f&title=React%e5%ae%9e%e7%8e%b0Toast%ef%bc%88%e6%8f%90%e7%a4%ba%ef%bc%89%e6%95%88%e6%9e%9c"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fs2bjefy5%2f&title=React%e5%ae%9e%e7%8e%b0Toast%ef%bc%88%e6%8f%90%e7%a4%ba%ef%bc%89%e6%95%88%e6%9e%9c"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fs2bjefy5%2f&title=React%e5%ae%9e%e7%8e%b0Toast%ef%bc%88%e6%8f%90%e7%a4%ba%ef%bc%89%e6%95%88%e6%9e%9c"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fs2bjefy5%2f&title=React%e5%ae%9e%e7%8e%b0Toast%ef%bc%88%e6%8f%90%e7%a4%ba%ef%bc%89%e6%95%88%e6%9e%9c"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">React实现Toast（提示）效果</h1><div class="meta"><div class="postdate"><time datetime="2019-01-11" itemprop="datePublished">2019-01-11</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch1 id=\x22articleHeader0\x22\x3e效果图\x3c\/h1\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVPy9N?w=302\x26amp;h=540\x22 src=\x22https:\/\/static.alili.tech\/img\/bVPy9N?w=302\x26amp;h=540\x22 alt=\x22toast\x22 title=\x22toast\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader1\x22\x3e需求\x3c\/h1\x3e\n\x3cp\x3e项目中需要实现app中常见的提示效果Toast。这个效果看似简单，实现起来没有那么容易。\x3cbr\x3e首先Toast的使用方法必须十分简单，简单到一行代码搞定：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22Toast.info(\x27普通的Toast我普通的摇！！\x27, 3000);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs less\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-selector-tag\x22\x3eToast\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.info\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27普通的Toast我普通的摇！！\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e3000\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e随时用随时调用上述方法即可。\x3cbr\x3e再有一点，Toast不用插入到页面中，他不会向其他组件一样一直出现在DOM中。\x3cbr\x3e只有在调用该方法的时候，动态插入到DOM中。\x3cbr\x3e还有，页面可以存在多个提示，多个提示单独存在，互不影响。\x3cbr\x3e所以，实现Toast并不像其他组件那么普通。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader2\x22\x3e使用方法\x3c\/h1\x3e\n\x3cp\x3e这次先来看看效果图中的使用代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import React from \x27react\x27\nimport ListTitle from \x27..\/..\/components\/DataDisplay\/ListTitle\x27\nimport Button from \x27..\/..\/components\/DataEntry\/Button\x27\nimport Toast from \x27..\/..\/components\/Feedback\/Toast\x27\nimport Tools from \x27..\/..\/components\/Tools\/Tools\x27\n\nconst ToastPage = () =\x3e {\n    const commonInfo = () =\x3e {\n        Toast.info(\x27普通的Toast我普通的摇！！\x27, 3000);\n    };\n    const commonSuccess = () =\x3e {\n        Toast.success(\x27操作成功\x27, 3000, \x27fa-check\x27);\n    };\n    const commonError = () =\x3e {\n        Toast.error(\x27有错误！！\x27, 3000, undefined, false, ()=\x3e{console.log(\x26quot;callback\x26quot;);});\n    };\n    const commonToast = () =\x3e {\n        Toast.info(\x27欢迎来到本直播间\x27, 3000, undefined, false);\n    };\n    const successToast = () =\x3e {\n        Toast.success(\x27操作成功！\x27, 3000, \x27fa-check\x27, false);\n    };\n    const errorToast = () =\x3e {\n        Toast.error(\x27操作失败！\x27, 3000, \x27fa-times\x27, false);\n    };\n    const warningToast = () =\x3e {\n        Toast.warning(\x27警告：手机2s后爆炸\x27, 3000, \x27fa-exclamation-triangle\x27, false);\n    };\n    const loadingToast = () =\x3e {\n        Toast.show(\x27加载中...\x27, 0, \x27fa-circle-o-notch fa-spin\x27, false);\n        const timer = setTimeout(()=\x3e{\n            Toast.hide();\n            clearTimeout(timer);\n        }, 3000);\n    };\n\n    return (\n        \x3cdiv className=\x26quot;page toast\x26quot;\x3e\n            \x3ch1 className=\x26quot;title\x26quot;\x3e\n                \x3ci className=\x26quot;fa fa-home\x26quot; onClick={()=\x3e{Tools.linkTo(\x26quot;\/index\x26quot;)\x22}}\x22\x3e\x3c\/i\x3e\n                Toast\n            \x3c\/h1\x3e\n\n            \x3cListTitle title=\x26quot;基本\x26quot; \/\x3e\n            \x3cdiv className=\x26quot;button-box\x26quot;\x3e\n                \x3cButton onClick={commonInfo}\x3e纯文字提示\x3c\/Button\x3e\n                \x3cButton onClick={commonSuccess}\x3eicon成功提示有蒙版\x3c\/Button\x3e\n                \x3cButton onClick={commonError}\x3e纯文字报错提示有回调\x3c\/Button\x3e\n            \x3c\/div\x3e\n            \x3cListTitle title=\x26quot;场景使用\x26quot; \/\x3e\n            \x3cdiv className=\x26quot;button-box\x26quot;\x3e\n                \x3cButton type=\x26quot;primary\x26quot; onClick={commonToast}\x3e普通提示\x3c\/Button\x3e\n                \x3cButton type=\x26quot;primary\x26quot; onClick={successToast}\x3e成功提示\x3c\/Button\x3e\n                \x3cButton type=\x26quot;primary\x26quot; onClick={errorToast}\x3e失败提示\x3c\/Button\x3e\n                \x3cButton type=\x26quot;primary\x26quot; onClick={warningToast}\x3e警告\x3c\/Button\x3e\n                \x3cButton type=\x26quot;primary\x26quot; onClick={loadingToast}\x3e加载中\x3c\/Button\x3e\n            \x3c\/div\x3e\n        \x3c\/div\x3e\n    )\n};\n\nexport default ToastPage\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs moonscript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e React \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e ListTitle \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27..\/..\/components\/DataDisplay\/ListTitle\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Button \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27..\/..\/components\/DataEntry\/Button\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Toast \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27..\/..\/components\/Feedback\/Toast\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Tools \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27..\/..\/components\/Tools\/Tools\x27\x3c\/span\x3e\n\nconst ToastPage = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n    const commonInfo = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        Toast.info(\x3cspan class=\x22hljs-string\x22\x3e\x27普通的Toast我普通的摇！！\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e3000\x3c\/span\x3e);\n    };\n    const commonSuccess = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        Toast.success(\x3cspan class=\x22hljs-string\x22\x3e\x27操作成功\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e3000\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27fa-check\x27\x3c\/span\x3e);\n    };\n    const commonError = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        Toast.\x3cspan class=\x22hljs-built_in\x22\x3eerror\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27有错误！！\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e3000\x3c\/span\x3e, undefined, \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e=\x26gt;\x3c\/span\x3e{console.log(\x3cspan class=\x22hljs-string\x22\x3e\x22callback\x22\x3c\/span\x3e);});\n    };\n    const commonToast = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        Toast.info(\x3cspan class=\x22hljs-string\x22\x3e\x27欢迎来到本直播间\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e3000\x3c\/span\x3e, undefined, \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e);\n    };\n    const successToast = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        Toast.success(\x3cspan class=\x22hljs-string\x22\x3e\x27操作成功！\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e3000\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27fa-check\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e);\n    };\n    const errorToast = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        Toast.\x3cspan class=\x22hljs-built_in\x22\x3eerror\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27操作失败！\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e3000\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27fa-times\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e);\n    };\n    const warningToast = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        Toast.warning(\x3cspan class=\x22hljs-string\x22\x3e\x27警告：手机2s后爆炸\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e3000\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27fa-exclamation-triangle\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e);\n    };\n    const loadingToast = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        Toast.show(\x3cspan class=\x22hljs-string\x22\x3e\x27加载中...\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27fa-circle-o-notch fa-spin\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e);\n        const timer = setTimeout(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e=\x26gt;\x3c\/span\x3e{\n            Toast.hide();\n            clearTimeout(timer);\n        }, \x3cspan class=\x22hljs-number\x22\x3e3000\x3c\/span\x3e);\n    };\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n        \x26lt;div className=\x3cspan class=\x22hljs-string\x22\x3e\x22page toast\x22\x3c\/span\x3e\x26gt;\n            \x26lt;h1 className=\x3cspan class=\x22hljs-string\x22\x3e\x22title\x22\x3c\/span\x3e\x26gt;\n                \x26lt;i className=\x3cspan class=\x22hljs-string\x22\x3e\x22fa fa-home\x22\x3c\/span\x3e onClick={()=\x26gt;{Tools.linkTo(\x3cspan class=\x22hljs-string\x22\x3e\x22\/index\x22\x3c\/span\x3e)\x22}}\x22\x26gt;\x26lt;\/i\x26gt;\n                Toast\n            \x26lt;\/h1\x26gt;\n\n            \x26lt;ListTitle title=\x3cspan class=\x22hljs-string\x22\x3e\x22基本\x22\x3c\/span\x3e \/\x26gt;\n            \x26lt;div className=\x3cspan class=\x22hljs-string\x22\x3e\x22button-box\x22\x3c\/span\x3e\x26gt;\n                \x26lt;Button onClick={commonInfo}\x26gt;纯文字提示\x26lt;\/Button\x26gt;\n                \x26lt;Button onClick={commonSuccess}\x26gt;icon成功提示有蒙版\x26lt;\/Button\x26gt;\n                \x26lt;Button onClick={commonError}\x26gt;纯文字报错提示有回调\x26lt;\/Button\x26gt;\n            \x26lt;\/div\x26gt;\n            \x26lt;ListTitle title=\x3cspan class=\x22hljs-string\x22\x3e\x22场景使用\x22\x3c\/span\x3e \/\x26gt;\n            \x26lt;div className=\x3cspan class=\x22hljs-string\x22\x3e\x22button-box\x22\x3c\/span\x3e\x26gt;\n                \x26lt;Button \x3cspan class=\x22hljs-built_in\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22primary\x22\x3c\/span\x3e onClick={commonToast}\x26gt;普通提示\x26lt;\/Button\x26gt;\n                \x26lt;Button \x3cspan class=\x22hljs-built_in\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22primary\x22\x3c\/span\x3e onClick={successToast}\x26gt;成功提示\x26lt;\/Button\x26gt;\n                \x26lt;Button \x3cspan class=\x22hljs-built_in\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22primary\x22\x3c\/span\x3e onClick={errorToast}\x26gt;失败提示\x26lt;\/Button\x26gt;\n                \x26lt;Button \x3cspan class=\x22hljs-built_in\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22primary\x22\x3c\/span\x3e onClick={warningToast}\x26gt;警告\x26lt;\/Button\x26gt;\n                \x26lt;Button \x3cspan class=\x22hljs-built_in\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22primary\x22\x3c\/span\x3e onClick={loadingToast}\x26gt;加载中\x26lt;\/Button\x26gt;\n            \x26lt;\/div\x26gt;\n        \x26lt;\/div\x26gt;\n    )\n};\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e default ToastPage\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e可以看到在ToastPage中，render return出来的DOM中没有\x26lt;Toast\/\x26gt;。\x3cbr\x3e只是在点击Button的回调中直接调用的Toast。\x3cbr\x3e按理说，组件都应该在render时候return出来，Toast是怎么实现在React中动态添加删除DOM的。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader3\x22\x3e组件分析\x3c\/h1\x3e\n\x3cp\x3e首先多个提示可以堆叠，不同提示定制化也不同，很显然是个组件，起名为Notice。\x3cbr\x3e然后Notice外面还有个容器组件，用来装载Notice并且，暴露一些方法给Toast，起名Notification。\x3cbr\x3e最后就是Toast组件，负责直接生成不同的Notice，或者销毁Notification。但是其实Toast只是个对象，而不是真正意义的组件。\x3cbr\x3e所以简单的Toast其实是也是分成三部分来完成。\x3cbr\x3eToast -\x26gt; Notification -\x26gt; Notice * n;\x3cbr\x3e接下来就是逐个开发。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader4\x22\x3eNotification开发\x3c\/h1\x3e\n\x3cp\x3e为什么要先开发Notification，因为他特别重要，起到承上启下的作用。\x3cbr\x3e首先，Notification是个容器，他自己有state，state中的notices数组就是存放生成Notice关键的数据notice（每个Notice都是不同的，所以notice中比如有一个属性：key）。\x3cbr\x3e然后render的时候，循环notices生成一段DOM节点，放到自己的div中。\x3cbr\x3e同时，其还提供一个向notices中添加notice的方法（add）和根据key，在notices中删除notice的方法（remove）。\x3cbr\x3e最后关键的地方，定义一个reRwrite方法，该方法接受一些参数，动态的向DOM中插入一个div，然后再向这个div中插入Notification，最后返回一个含有几个操作这个Notification的方法的对象。（这就是动态实现插入DOM的关键）\x3cbr\x3eNotification的代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ Notification是Notice父组件，容器\n\/\/ 是动态插入和删除DOM节点的核心\n\/\/ 同时也向上暴露给Toast重写改变自己的方法\nimport React from \x27react\x27\nimport ReactDOM from \x27react-dom\x27\nimport Notice from \x27.\/Notice\x27\n\nclass Notification extends React.Component {\n    constructor (props) {\n        super(props);\n        this.state = {\n            notices: [], \/\/ 存储当前有的notices\n            hasMask: true, \/\/ 是否显示蒙版\n        }\n    }\n    add (notice) {\n        \/\/ 添加notice\n        \/\/ 创造一个不重复的key\n        const {notices} = this.state;\n        const key = notice.key ? notice.key : notice.key = getUuid();\n        const mask = notice.mask ? notice.mask : false;\n        const temp = notices.filter((item) =\x3e item.key === key).length;\n\n        if(!temp){\n            \/\/ 不存在重复的 添加\n            notices.push(notice);\n            this.setState({\n                notices: notices,\n                hasMask: mask\n            });\n        }\n    }\n    remove (key) {\n        \/\/ 根据key删除对应\n        this.setState(previousState =\x3e {\n            return {\n                notices: previousState.notices.filter(notice =\x3e notice.key !== key),\n            };\n        });\n    }\n    getNoticeDOM () {\n        const _this = this;\n        const {notices} = this.state;\n        let result = [];\n\n        notices.map((notice)=\x3e{\n            \/\/ 每个Notice onClose的时候 删除掉notices中对应key的notice\n            const closeCallback = () =\x3e {\n                _this.remove(notice.key);\n                \/\/ 如果有用户传入的onClose 执行\n                if(notice.onClose) notice.onClose();\n            };\n\n            result.push(\n                \x3cNotice key={notice.key} {...notice} onClose={closeCallback} \/\x3e\n            );\n        });\n\n        return result;\n    }\n    getMaskDOM () {\n        const {notices, hasMask} = this.state;\n        \/\/ notices为空的时候 不显示蒙版\n        \/\/ 始终只有一个蒙版\n        if(notices.length \x3e 0 \x26amp;\x26amp; hasMask == true) return \x3cdiv className=\x26quot;zby-mask\x26quot;\x3e\x3c\/div\x3e;\n    }\n    render () {\n        const noticesDOM = this.getNoticeDOM();\n        const maskDOM = this.getMaskDOM();\n\n        return (\n            \x3cdiv className=\x26quot;zby-notification-box\x26quot;\x3e\n                {maskDOM}\n                {noticesDOM}\n            \x3c\/div\x3e\n        )\n    }\n}\n\n\/\/ 统计notice总数 防止重复\nlet noticeNumber = 0;\n\n\/\/ 生成唯一的id\nconst getUuid = () =\x3e {\n    return \x26quot;notification-\x26quot; \x2b new Date().getTime() \x2b \x26quot;-\x26quot; \x2b noticeNumber\x2b\x2b;\n};\n\n\/\/ Notification增加一个重写方法\n\/\/ 该方法方便Notification组件动态添加到页面中和重写\nNotification.reWrite = function (properties) {\n    const { ...props } = properties || {};\n\n    let div;\n\n    div = document.createElement(\x27div\x27);\n    document.body.appendChild(div);\n\n    const notification = ReactDOM.render(\x3cNotification {...props} \/\x3e, div);\n\n    return {\n        notice(noticeProps) {\n            notification.add(noticeProps);\n        },\n        removeNotice(key) {\n            notification.remove(key);\n        },\n        destroy() {\n            ReactDOM.unmountComponentAtNode(div);\n            document.body.removeChild(div);\n        },\n        component: notification\n    }\n};\n\nexport default Notification\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs processing\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ Notification是Notice父组件，容器\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 是动态插入和删除DOM节点的核心\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 同时也向上暴露给Toast重写改变自己的方法\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e React from \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e ReactDOM from \x3cspan class=\x22hljs-string\x22\x3e\x27react-dom\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Notice from \x3cspan class=\x22hljs-string\x22\x3e\x27.\/Notice\x27\x3c\/span\x3e\n\nclass Notification extends React.Component {\n    constructor (props) {\n        \x3cspan class=\x22hljs-keyword\x22\x3esuper\x3c\/span\x3e(props);\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state = {\n            notices: [], \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 存储当前有的notices\x3c\/span\x3e\n            hasMask: \x3cspan class=\x22hljs-keyword\x22\x3etrue\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 是否显示蒙版\x3c\/span\x3e\n        }\n    }\n    \x3cspan class=\x22hljs-built_in\x22\x3eadd\x3c\/span\x3e (notice) {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 添加notice\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 创造一个不重复的key\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e {notices} = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state;\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ekey\x3c\/span\x3e = notice.\x3cspan class=\x22hljs-built_in\x22\x3ekey\x3c\/span\x3e ? notice.\x3cspan class=\x22hljs-built_in\x22\x3ekey\x3c\/span\x3e : notice.\x3cspan class=\x22hljs-built_in\x22\x3ekey\x3c\/span\x3e = getUuid();\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e mask = notice.mask ? notice.mask : \x3cspan class=\x22hljs-keyword\x22\x3efalse\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e temp = notices.\x3cspan class=\x22hljs-built_in\x22\x3efilter\x3c\/span\x3e((item) =\x26gt; item.\x3cspan class=\x22hljs-built_in\x22\x3ekey\x3c\/span\x3e === \x3cspan class=\x22hljs-built_in\x22\x3ekey\x3c\/span\x3e).length;\n\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(!temp){\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 不存在重复的 添加\x3c\/span\x3e\n            notices.push(notice);\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.setState({\n                notices: notices,\n                hasMask: mask\n            });\n        }\n    }\n    remove (\x3cspan class=\x22hljs-built_in\x22\x3ekey\x3c\/span\x3e) {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 根据key删除对应\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.setState(previousState =\x26gt; {\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n                notices: previousState.notices.\x3cspan class=\x22hljs-built_in\x22\x3efilter\x3c\/span\x3e(notice =\x26gt; notice.\x3cspan class=\x22hljs-built_in\x22\x3ekey\x3c\/span\x3e !== \x3cspan class=\x22hljs-built_in\x22\x3ekey\x3c\/span\x3e),\n            };\n        });\n    }\n    getNoticeDOM () {\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e _this = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e {notices} = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state;\n        let result = [];\n\n        notices.\x3cspan class=\x22hljs-built_in\x22\x3emap\x3c\/span\x3e((notice)=\x26gt;{\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 每个Notice onClose的时候 删除掉notices中对应key的notice\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e closeCallback = () =\x26gt; {\n                _this.remove(notice.\x3cspan class=\x22hljs-built_in\x22\x3ekey\x3c\/span\x3e);\n                \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 如果有用户传入的onClose 执行\x3c\/span\x3e\n                \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(notice.onClose) notice.onClose();\n            };\n\n            result.push(\n                \x26lt;Notice \x3cspan class=\x22hljs-built_in\x22\x3ekey\x3c\/span\x3e={notice.\x3cspan class=\x22hljs-built_in\x22\x3ekey\x3c\/span\x3e} {...notice} onClose={closeCallback} \/\x26gt;\n            );\n        });\n\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e result;\n    }\n    getMaskDOM () {\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e {notices, hasMask} = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state;\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ notices为空的时候 不显示蒙版\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 始终只有一个蒙版\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(notices.length \x26gt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e \x26amp;\x26amp; hasMask == \x3cspan class=\x22hljs-keyword\x22\x3etrue\x3c\/span\x3e) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x26lt;div className=\x3cspan class=\x22hljs-string\x22\x3e\x22zby-mask\x22\x3c\/span\x3e\x26gt;\x26lt;\/div\x26gt;;\n    }\n    render () {\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e noticesDOM = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.getNoticeDOM();\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e maskDOM = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.getMaskDOM();\n\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n            \x26lt;div className=\x3cspan class=\x22hljs-string\x22\x3e\x22zby-notification-box\x22\x3c\/span\x3e\x26gt;\n                {maskDOM}\n                {noticesDOM}\n            \x26lt;\/div\x26gt;\n        )\n    }\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 统计notice总数 防止重复\x3c\/span\x3e\nlet noticeNumber = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 生成唯一的id\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e getUuid = () =\x26gt; {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22notification-\x22\x3c\/span\x3e \x2b \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Date().getTime() \x2b \x3cspan class=\x22hljs-string\x22\x3e\x22-\x22\x3c\/span\x3e \x2b noticeNumber\x2b\x2b;\n};\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ Notification增加一个重写方法\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 该方法方便Notification组件动态添加到页面中和重写\x3c\/span\x3e\nNotification.reWrite = function (properties) {\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e { ...props } = properties || {};\n\n    let div;\n\n    div = document.createElement(\x3cspan class=\x22hljs-string\x22\x3e\x27div\x27\x3c\/span\x3e);\n    document.body.appendChild(div);\n\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e notification = ReactDOM.render(\x26lt;Notification {...props} \/\x26gt;, div);\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n        notice(noticeProps) {\n            notification.\x3cspan class=\x22hljs-built_in\x22\x3eadd\x3c\/span\x3e(noticeProps);\n        },\n        removeNotice(\x3cspan class=\x22hljs-built_in\x22\x3ekey\x3c\/span\x3e) {\n            notification.remove(\x3cspan class=\x22hljs-built_in\x22\x3ekey\x3c\/span\x3e);\n        },\n        destroy() {\n            ReactDOM.unmountComponentAtNode(div);\n            document.body.removeChild(div);\n        },\n        component: notification\n    }\n};\n\nexport \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e Notification\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e看了Notification其实谜团就解开了，Notice其实就是根据notices中的notice渲染出来的组件，Toast其实就是调用Notification.reWrite返回结果的集合。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader5\x22\x3eNotice开发\x3c\/h1\x3e\n\x3cp\x3e这时候在写Notice就简单了，其props有几个关键的参数duration就是Notice显示几秒，content就是其显示的具体内容，onClose就是该销毁时候执行的回调函数。\x3cbr\x3e这里面控制Notice显示几秒，实际上是用定时器setTimeout实现的，onClose实际上就是在父组件Notification中将自己对应的notice删除。\x3cbr\x3eNotice代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ Notice是Toast最底层组件\n\/\/ 每个黑色的小框框其实都是一个Notice\n\/\/ Notice核心就是组件初始化的时候 生成一个定时器\n\/\/ 根据输入的时间 加载一个动画 然后执行输入的回调\n\/\/ Notice的显示和隐藏收到父组件Notification的绝对控制\nimport React from \x27react\x27\nimport classNames from \x27classnames\x27\n\nclass Notice extends React.Component {\n    static propTypes = {\n        duration: React.PropTypes.number, \/\/ Notice显示时间\n        content: React.PropTypes.any, \/\/ Notice显示的内容\n        onClose: React.PropTypes.func \/\/ 显示结束回调\n    };\n    static defaultProps = {\n        duration: 3000,\n    };\n    constructor (props) {\n        super(props);\n        this.state = {\n            shouldClose: false, \/\/ 是否开启关闭动画\n        }\n    }\n    componentDidMount () {\n        if(this.props.duration \x3e 0){\n            this.closeTimer = setTimeout(() =\x3e {\n                this.close();\n            }, this.props.duration - 300); \/\/ 减掉消失动画300毫秒\n        }\n    }\n    componentWillUnmount () {\n        \/\/ 当有意外关闭的时候 清掉定时器\n        this.clearCloseTimer();\n    }\n    clearCloseTimer () {\n        if (this.closeTimer) {\n            clearTimeout(this.closeTimer);\n            this.closeTimer = null;\n        }\n    }\n    close () {\n        \/\/ 关闭的时候 应该先清掉倒数定时器\n        \/\/ 然后开启过场动画\n        \/\/ 等待动画结束 执行回调\n        this.clearCloseTimer();\n        const _this = this;\n        _this.setState({shouldClose: true});\n        this.timer = setTimeout(()=\x3e{\n            if(this.props.onClose){\n                this.props.onClose();\n            }\n            clearTimeout(_this.timer);\n        }, 300);\n    }\n    render () {\n        const {shouldClose} = this.state;\n\n        return (\n            \x3cdiv className={classNames([\x27zby-notice-box\x27, {\x27leave\x27: shouldClose}])}\x3e\n                {this.props.content}\n            \x3c\/div\x3e\n        )\n    }\n}\n\nexport default Notice\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs kotlin\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ Notice是Toast最底层组件\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 每个黑色的小框框其实都是一个Notice\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ Notice核心就是组件初始化的时候 生成一个定时器\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 根据输入的时间 加载一个动画 然后执行输入的回调\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ Notice的显示和隐藏收到父组件Notification的绝对控制\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e React from \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e classNames from \x3cspan class=\x22hljs-string\x22\x3e\x27classnames\x27\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eNotice\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eReact\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n    static propTypes = {\n        duration: React.PropTypes.number, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Notice显示时间\x3c\/span\x3e\n        content: React.PropTypes.any, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Notice显示的内容\x3c\/span\x3e\n        onClose: React.PropTypes.func \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 显示结束回调\x3c\/span\x3e\n    };\n    static defaultProps = {\n        duration: \x3cspan class=\x22hljs-number\x22\x3e3000\x3c\/span\x3e,\n    };\n    \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e (props) {\n        \x3cspan class=\x22hljs-keyword\x22\x3esuper\x3c\/span\x3e(props);\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state = {\n            shouldClose: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 是否开启关闭动画\x3c\/span\x3e\n        }\n    }\n    componentDidMount () {\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.duration \x26gt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e){\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.closeTimer = setTimeout(() =\x26gt; {\n                \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.close();\n            }, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.duration - \x3cspan class=\x22hljs-number\x22\x3e300\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 减掉消失动画300毫秒\x3c\/span\x3e\n        }\n    }\n    componentWillUnmount () {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 当有意外关闭的时候 清掉定时器\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.clearCloseTimer();\n    }\n    clearCloseTimer () {\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.closeTimer) {\n            clearTimeout(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.closeTimer);\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.closeTimer = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n        }\n    }\n    close () {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 关闭的时候 应该先清掉倒数定时器\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 然后开启过场动画\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 等待动画结束 执行回调\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.clearCloseTimer();\n        const _this = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n        _this.setState({shouldClose: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e});\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.timer = setTimeout(()=\x26gt;{\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.onClose){\n                \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.onClose();\n            }\n            clearTimeout(_this.timer);\n        }, \x3cspan class=\x22hljs-number\x22\x3e300\x3c\/span\x3e);\n    }\n    render () {\n        const {shouldClose} = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state;\n\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n            \x26lt;div className={classNames([\x3cspan class=\x22hljs-string\x22\x3e\x27zby-notice-box\x27\x3c\/span\x3e, {\x3cspan class=\x22hljs-string\x22\x3e\x27leave\x27\x3c\/span\x3e: shouldClose}])}\x26gt;\n                {\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.content}\n            \x26lt;\/div\x26gt;\n        )\n    }\n}\n\nexport \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e Notice\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch1 id=\x22articleHeader6\x22\x3eToast封装\x3c\/h1\x3e\n\x3cp\x3e最后看下Toast就比较简单了。\x3cbr\x3eToast首先就是要利用Notification.reWrite初始化一个newNotification，并且保持这个Notification为单例。\x3cbr\x3e然后封装一个notice方法，动态的改变这个newNotification。\x3cbr\x3e最后封装几个常用notice方法暴露出去。\x3cbr\x3eToast代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import React from \x27react\x27\nimport classNames from \x27classnames\x27\nimport Notification from \x27.\/Notification\x27\n\n\/\/ Toast组件比较特殊\n\/\/ 因为\x3cToast \/\x3e不会被直接渲染在DOM中\n\/\/ 而是动态插入页面中\n\/\/ Toast组件核心就是通过Notification暴露的重写方法 动态改变Notification\nlet newNotification;\n\n\/\/ 获得一个Notification\nconst getNewNotification = () =\x3e {\n    \/\/ 单例 保持页面始终只有一个Notification\n    if (!newNotification) {\n        newNotification = Notification.reWrite();\n    }\n\n    return newNotification;\n};\n\n\/\/ notice方法实际上就是集合参数 完成对Notification的改变\nconst notice = (content, type, icon, duration = 3000, onClose, mask = true) =\x3e {\n    let notificationInstance = getNewNotification();\n\n    notificationInstance.notice({\n        duration,\n        mask: mask,\n        content: !!icon ? (\n            \x3cdiv className={\n                classNames([\x27zby-toast-box\x27,\n                    {\x27info\x27: type === \x27info\x27},\n                    {\x27success\x27: type === \x27success\x27},\n                    {\x27warning\x27: type === \x27warning\x27},\n                    {\x27error\x27: type === \x27error\x27}\n                ])\n            }\x3e\n                \x3cdiv className=\x26quot;zby-toast-icon\x26quot;\x3e\x3ci className={\x26quot;fa \x26quot; \x2b icon}\x3e\x3c\/i\x3e\x3c\/div\x3e\n                \x3cdiv className=\x26quot;zby-toast-content\x26quot;\x3e{content}\x3c\/div\x3e\n            \x3c\/div\x3e\n        ) : (\n            \x3cdiv className={\n                classNames([\x27zby-toast-box\x27,\n                    {\x27info\x27: type === \x27info\x27},\n                    {\x27success\x27: type === \x27success\x27},\n                    {\x27warning\x27: type === \x27warning\x27},\n                    {\x27error\x27: type === \x27error\x27}\n                ])\n            }\x3e\n                \x3cdiv className=\x26quot;zby-toast-content\x26quot;\x3e{content}\x3c\/div\x3e\n            \x3c\/div\x3e\n        ),\n        onClose: () =\x3e {\n            if (onClose) onClose();\n        },\n    });\n};\n\nexport default {\n    \/\/ 无动画\n    show(content, duration, icon, mask, onClose) {\n        return notice(content, undefined, icon, duration, onClose, mask);\n    },\n    \/\/ 翻转效果\n    info(content, duration, icon, mask, onClose) {\n        return notice(content, \x27info\x27, icon, duration, onClose, mask);\n    },\n    \/\/ 缩放效果\n    success(content, duration, icon, mask, onClose) {\n        return notice(content, \x27success\x27, icon, duration, onClose, mask);\n    },\n    \/\/ 从下方滑入\n    warning(content, duration, icon, mask, onClose) {\n        return notice(content, \x27warning\x27, icon, duration, onClose, mask);\n    },\n    \/\/ 抖动\n    error(content, duration, icon, mask, onClose) {\n        return notice(content, \x27error\x27, icon, duration, onClose, mask);\n    },\n    \/\/ 销毁\n    hide() {\n        if (newNotification) {\n            newNotification.destroy();\n            newNotification = null;\n        }\n    },\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e React \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e classNames \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27classnames\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Notification \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/Notification\x27\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ Toast组件比较特殊\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 因为\x26lt;Toast \/\x26gt;不会被直接渲染在DOM中\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 而是动态插入页面中\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ Toast组件核心就是通过Notification暴露的重写方法 动态改变Notification\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e newNotification;\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 获得一个Notification\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e getNewNotification = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 单例 保持页面始终只有一个Notification\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!newNotification) {\n        newNotification = Notification.reWrite();\n    }\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e newNotification;\n};\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ notice方法实际上就是集合参数 完成对Notification的改变\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e notice = \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3econtent, type, icon, duration = \x3cspan class=\x22hljs-number\x22\x3e3000\x3c\/span\x3e, onClose, mask = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e notificationInstance = getNewNotification();\n\n    notificationInstance.notice({\n        duration,\n        \x3cspan class=\x22hljs-attr\x22\x3emask\x3c\/span\x3e: mask,\n        \x3cspan class=\x22hljs-attr\x22\x3econtent\x3c\/span\x3e: !!icon ? (\n            \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{\x3c\/span\x3e\n                \x3cspan class=\x22hljs-attr\x22\x3eclassNames\x3c\/span\x3e([\x27\x3cspan class=\x22hljs-attr\x22\x3ezby-toast-box\x3c\/span\x3e\x27,\n                    {\x27\x3cspan class=\x22hljs-attr\x22\x3einfo\x3c\/span\x3e\x27\x3cspan class=\x22hljs-attr\x22\x3e:\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e === \x3cspan class=\x22hljs-string\x22\x3e\x27info\x27\x3c\/span\x3e},\n                    {\x27\x3cspan class=\x22hljs-attr\x22\x3esuccess\x3c\/span\x3e\x27\x3cspan class=\x22hljs-attr\x22\x3e:\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e === \x3cspan class=\x22hljs-string\x22\x3e\x27success\x27\x3c\/span\x3e},\n                    {\x27\x3cspan class=\x22hljs-attr\x22\x3ewarning\x3c\/span\x3e\x27\x3cspan class=\x22hljs-attr\x22\x3e:\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e === \x3cspan class=\x22hljs-string\x22\x3e\x27warning\x27\x3c\/span\x3e},\n                    {\x27\x3cspan class=\x22hljs-attr\x22\x3eerror\x3c\/span\x3e\x27\x3cspan class=\x22hljs-attr\x22\x3e:\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e === \x3cspan class=\x22hljs-string\x22\x3e\x27error\x27\x3c\/span\x3e}\n                ])\n            }\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22zby-toast-icon\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ei\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{\x3c\/span\x3e\x22\x3cspan class=\x22hljs-attr\x22\x3efa\x3c\/span\x3e \x22 \x2b \x3cspan class=\x22hljs-attr\x22\x3eicon\x3c\/span\x3e}\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ei\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22zby-toast-content\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e{content}\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n        ) : (\n            \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{\x3c\/span\x3e\n                \x3cspan class=\x22hljs-attr\x22\x3eclassNames\x3c\/span\x3e([\x27\x3cspan class=\x22hljs-attr\x22\x3ezby-toast-box\x3c\/span\x3e\x27,\n                    {\x27\x3cspan class=\x22hljs-attr\x22\x3einfo\x3c\/span\x3e\x27\x3cspan class=\x22hljs-attr\x22\x3e:\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e === \x3cspan class=\x22hljs-string\x22\x3e\x27info\x27\x3c\/span\x3e},\n                    {\x27\x3cspan class=\x22hljs-attr\x22\x3esuccess\x3c\/span\x3e\x27\x3cspan class=\x22hljs-attr\x22\x3e:\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e === \x3cspan class=\x22hljs-string\x22\x3e\x27success\x27\x3c\/span\x3e},\n                    {\x27\x3cspan class=\x22hljs-attr\x22\x3ewarning\x3c\/span\x3e\x27\x3cspan class=\x22hljs-attr\x22\x3e:\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e === \x3cspan class=\x22hljs-string\x22\x3e\x27warning\x27\x3c\/span\x3e},\n                    {\x27\x3cspan class=\x22hljs-attr\x22\x3eerror\x3c\/span\x3e\x27\x3cspan class=\x22hljs-attr\x22\x3e:\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e === \x3cspan class=\x22hljs-string\x22\x3e\x27error\x27\x3c\/span\x3e}\n                ])\n            }\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22zby-toast-content\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e{content}\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n        ),\n        \x3cspan class=\x22hljs-attr\x22\x3eonClose\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (onClose) onClose();\n        },\n    });\n};\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 无动画\x3c\/span\x3e\n    show(content, duration, icon, mask, onClose) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e notice(content, \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e, icon, duration, onClose, mask);\n    },\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 翻转效果\x3c\/span\x3e\n    info(content, duration, icon, mask, onClose) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e notice(content, \x3cspan class=\x22hljs-string\x22\x3e\x27info\x27\x3c\/span\x3e, icon, duration, onClose, mask);\n    },\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 缩放效果\x3c\/span\x3e\n    success(content, duration, icon, mask, onClose) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e notice(content, \x3cspan class=\x22hljs-string\x22\x3e\x27success\x27\x3c\/span\x3e, icon, duration, onClose, mask);\n    },\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 从下方滑入\x3c\/span\x3e\n    warning(content, duration, icon, mask, onClose) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e notice(content, \x3cspan class=\x22hljs-string\x22\x3e\x27warning\x27\x3c\/span\x3e, icon, duration, onClose, mask);\n    },\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 抖动\x3c\/span\x3e\n    error(content, duration, icon, mask, onClose) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e notice(content, \x3cspan class=\x22hljs-string\x22\x3e\x27error\x27\x3c\/span\x3e, icon, duration, onClose, mask);\n    },\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 销毁\x3c\/span\x3e\n    hide() {\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (newNotification) {\n            newNotification.destroy();\n            newNotification = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n        }\n    },\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样Toast，一个在React中动态插入删除DOM的组件完成了。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader7\x22\x3e总结\x3c\/h1\x3e\n\x3cp\x3e这里的Toast，Notification和Notice都是参照antd-mobile源码改写的，这种组件暴露方法给别人调用的场景，和动态插入DOM场景平时不多见，借助其源码也是一次学习。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader8\x22\x3e参考链接\x3c\/h1\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/Aus0049\/react-component\/blob\/master\/src\/containers\/Feedback\/ToastPage.js\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e项目源码\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/mobile.ant.design\/components\/toast-cn\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eantd-mobile\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/react-component\/notification\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ereact-component\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>React实现Toast（提示）效果</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000009863702">https://segmentfault.com/a/1190000009863702</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/s2bjefy5/" target="_blank">https://alili.tech/archive/s2bjefy5/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>