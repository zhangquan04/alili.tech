<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="动态端口转发：安装带有 SSH 的 SOCKS 服务器"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>动态端口转发：安装带有 SSH 的 SOCKS 服务器 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/4cphvukmryc/",
				"appid": "1613049289050283", 
				"title": "动态端口转发：安装带有 SSH 的 SOCKS 服务器 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-22T02:30:07"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/7ouebstoidy/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/q6ydalwzuci/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f4cphvukmryc%2f&text=%e5%8a%a8%e6%80%81%e7%ab%af%e5%8f%a3%e8%bd%ac%e5%8f%91%ef%bc%9a%e5%ae%89%e8%a3%85%e5%b8%a6%e6%9c%89%20SSH%20%e7%9a%84%20SOCKS%20%e6%9c%8d%e5%8a%a1%e5%99%a8"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f4cphvukmryc%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f4cphvukmryc%2f&text=%e5%8a%a8%e6%80%81%e7%ab%af%e5%8f%a3%e8%bd%ac%e5%8f%91%ef%bc%9a%e5%ae%89%e8%a3%85%e5%b8%a6%e6%9c%89%20SSH%20%e7%9a%84%20SOCKS%20%e6%9c%8d%e5%8a%a1%e5%99%a8"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f4cphvukmryc%2f&title=%e5%8a%a8%e6%80%81%e7%ab%af%e5%8f%a3%e8%bd%ac%e5%8f%91%ef%bc%9a%e5%ae%89%e8%a3%85%e5%b8%a6%e6%9c%89%20SSH%20%e7%9a%84%20SOCKS%20%e6%9c%8d%e5%8a%a1%e5%99%a8"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f4cphvukmryc%2f&is_video=false&description=%e5%8a%a8%e6%80%81%e7%ab%af%e5%8f%a3%e8%bd%ac%e5%8f%91%ef%bc%9a%e5%ae%89%e8%a3%85%e5%b8%a6%e6%9c%89%20SSH%20%e7%9a%84%20SOCKS%20%e6%9c%8d%e5%8a%a1%e5%99%a8"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%8a%a8%e6%80%81%e7%ab%af%e5%8f%a3%e8%bd%ac%e5%8f%91%ef%bc%9a%e5%ae%89%e8%a3%85%e5%b8%a6%e6%9c%89%20SSH%20%e7%9a%84%20SOCKS%20%e6%9c%8d%e5%8a%a1%e5%99%a8&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f4cphvukmryc%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f4cphvukmryc%2f&title=%e5%8a%a8%e6%80%81%e7%ab%af%e5%8f%a3%e8%bd%ac%e5%8f%91%ef%bc%9a%e5%ae%89%e8%a3%85%e5%b8%a6%e6%9c%89%20SSH%20%e7%9a%84%20SOCKS%20%e6%9c%8d%e5%8a%a1%e5%99%a8"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f4cphvukmryc%2f&title=%e5%8a%a8%e6%80%81%e7%ab%af%e5%8f%a3%e8%bd%ac%e5%8f%91%ef%bc%9a%e5%ae%89%e8%a3%85%e5%b8%a6%e6%9c%89%20SSH%20%e7%9a%84%20SOCKS%20%e6%9c%8d%e5%8a%a1%e5%99%a8"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f4cphvukmryc%2f&title=%e5%8a%a8%e6%80%81%e7%ab%af%e5%8f%a3%e8%bd%ac%e5%8f%91%ef%bc%9a%e5%ae%89%e8%a3%85%e5%b8%a6%e6%9c%89%20SSH%20%e7%9a%84%20SOCKS%20%e6%9c%8d%e5%8a%a1%e5%99%a8"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f4cphvukmryc%2f&title=%e5%8a%a8%e6%80%81%e7%ab%af%e5%8f%a3%e8%bd%ac%e5%8f%91%ef%bc%9a%e5%ae%89%e8%a3%85%e5%b8%a6%e6%9c%89%20SSH%20%e7%9a%84%20SOCKS%20%e6%9c%8d%e5%8a%a1%e5%99%a8"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">动态端口转发：安装带有 SSH 的 SOCKS 服务器</h1><div class="meta"><div class="postdate"><time datetime="2019-01-22" itemprop="datePublished">2019-01-22</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n            \x3ch1\x3e\x3ca href=\x22#动态端口转发安装带有-ssh-的-socks-服务器\x22\x3e\x3c\/a\x3e动态端口转发：安装带有 SSH 的 SOCKS 服务器\x3c\/h1\x3e\n\x3cp\x3e在上一篇文章（\x3ca href=\x22https:\/\/linux.cn\/article-8945-1.html\x22\x3e通过 SSH 实现 TCP \/ IP 隧道（端口转发）：使用 OpenSSH 可能的 8 种场景\x3c\/a\x3e）中，我们看到了处理端口转发的所有可能情况，不过那只是静态端口转发。也就是说，我们只介绍了通过 SSH 连接来访问另一个系统的端口的情况。\x3c\/p\x3e\n\x3cp\x3e在那篇文章中，我们未涉及动态端口转发，此外一些读者没看过该文章，本篇文章中将尝试补充完整。\x3c\/p\x3e\n\x3cp\x3e当我们谈论使用 SSH 进行动态端口转发时，我们说的是将 SSH 服务器转换为 \x3ca href=\x22https:\/\/wesharethis.com\/goto\/http:\/\/en.wikipedia.org\/wiki\/SOCKS\x22\x3eSOCKS\x3c\/a\x3e 服务器。那么什么是 SOCKS 服务器？\x3c\/p\x3e\n\x3cp\x3e你知道 \x3ca href=\x22https:\/\/wesharethis.com\/goto\/http:\/\/en.wikipedia.org\/wiki\/Proxy_server\x22\x3eWeb 代理\x3c\/a\x3e是用来做什么的吗？答案可能是肯定的，因为很多公司都在使用它。它是一个直接连接到互联网的系统，允许没有互联网访问的\x3ca href=\x22https:\/\/wesharethis.com\/goto\/http:\/\/en.wikipedia.org\/wiki\/Intranet\x22\x3e内部网\x3c\/a\x3e客户端让其浏览器通过代理来（尽管也有\x3ca href=\x22https:\/\/wesharethis.com\/goto\/http:\/\/en.wikipedia.org\/wiki\/Proxy_server#Transparent_and_non-transparent_proxy_server\x22\x3e透明代理\x3c\/a\x3e）浏览网页。Web 代理除了允许输出到 Internet 之外，还可以缓存页面、图像等。已经由某客户端下载的资源，另一个客户端不必再下载它们。此外，它还可以过滤内容并监视用户的活动。当然了，它的基本功能是转发 HTTP 和 HTTPS 流量。\x3c\/p\x3e\n\x3cp\x3e一个 SOCKS 服务器提供的服务类似于公司内部网络提供的代理服务器服务，但不限于 HTTP\/HTTPS，它还允许转发任何 TCP\/IP 流量（SOCKS 5 也支持 UDP）。\x3c\/p\x3e\n\x3cp\x3e例如，假设我们希望在一个没有直接连接到互联网的内部网上通过 Thunderbird 使用 POP3 、 ICMP 和 SMTP 的邮件服务。如果我们只有一个 web 代理可以用，我们可以使用的唯一的简单方式是使用某个 webmail（也可以使用 \x3ca href=\x22https:\/\/wesharethis.com\/goto\/http:\/\/webmail.mozdev.org\/\x22\x3eThunderbird 的 Webmail 扩展\x3c\/a\x3e）。我们还可以通过 \x3ca href=\x22https:\/\/wesharethis.com\/goto\/http:\/\/en.wikipedia.org\/wiki\/HTTP_tunnel_(software\x22\x3eHTTP 隧道\x3c\/a\x3e)来起到代理的用途。但最简单的方式是在网络中设置一个 SOCKS 服务器，它可以让我们使用 POP3、ICMP 和 SMTP，而不会造成任何的不便。\x3c\/p\x3e\n\x3cp\x3e虽然有很多软件可以配置非常专业的 SOCKS 服务器，但用 OpenSSH 设置一个只需要简单的一条命令：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs elixir\x22\x3eClientessh \x3cspan class=\x22hljs-variable\x22\x3e$ \x3c\/span\x3essh -D \x3cspan class=\x22hljs-number\x22\x3e1080\x3c\/span\x3e user\x3cspan class=\x22hljs-variable\x22\x3e@servidorssh\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e或者我们可以改进一下：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs nginx\x22\x3e\x3cspan class=\x22hljs-attribute\x22\x3eClientessh\x3c\/span\x3e $ ssh -fN -D \x3cspan class=\x22hljs-number\x22\x3e0.0.0.0:1080\x3c\/span\x3e user\x3cspan class=\x22hljs-variable\x22\x3e@servidorssh\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e其中：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e选项 \x3ccode\x3e-D\x3c\/code\x3e 类似于选项为 \x3ccode\x3e-L\x3c\/code\x3e 和 \x3ccode\x3e-R\x3c\/code\x3e 的静态端口转发。像那些一样，我们可以让客户端只监听本地请求或从其他节点到达的请求，具体取决于我们将请求关联到哪个地址：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs routeros\x22\x3e-D [bind_address:]\x3cspan class=\x22hljs-built_in\x22\x3e port\n\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e在静态端口转发中可以看到，我们使用选项 \x3ccode\x3e-R\x3c\/code\x3e 进行反向端口转发，而动态转发是不可能的。我们只能在 SSH 客户端创建 SOCKS 服务器，而不能在 SSH 服务器端创建。\x3c\/p\x3e\n\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e1080 是 SOCKS 服务器的典型端口，正如 8080 是 Web 代理服务器的典型端口一样。\x3c\/p\x3e\n\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e选项 \x3ccode\x3e-N\x3c\/code\x3e 防止实际启动远程 shell 交互式会话。当我们只用 \x3ccode\x3essh\x3c\/code\x3e 来建立隧道时很有用。\x3c\/p\x3e\n\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e选项 \x3ccode\x3e-f\x3c\/code\x3e 会使 \x3ccode\x3essh\x3c\/code\x3e 停留在后台并将其与当前 shell 分离，以便使该进程成为守护进程。如果没有选项 \x3ccode\x3e-N\x3c\/code\x3e（或不指定命令），则不起作用，否则交互式 shell 将与后台进程不兼容。\x3c\/p\x3e\n\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e使用 \x3ca href=\x22https:\/\/wesharethis.com\/goto\/http:\/\/www.chiark.greenend.org.uk\/%7Esgtatham\/putty\/download.html\x22\x3ePuTTY\x3c\/a\x3e 也可以非常简单地进行端口重定向。与 \x3ccode\x3essh -D 0.0.0.0:1080\x3c\/code\x3e 相当的配置如下：\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/camo.githubusercontent.com\/1f80e3fd482fb6848670ca7ca4a1452819a40c9d\/68747470733a2f2f77657368617265746869732e636f6d2f77702d636f6e74656e742f75706c6f6164732f323031372f30372f70757474795f736f636b732e706e67\x22\x3e\x3cimg src=\x22https:\/\/p0.ssl.qhimg.com\/t018dfbcdc2531042a9.png\x22 alt=\x22PuTTY SOCKS\x22\x3e\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e对于通过 SOCKS 服务器访问另一个网络的应用程序，如果应用程序提供了对 SOCKS 服务器的特别支持，就会非常方便（虽然不是必需的），就像浏览器支持使用代理服务器一样。作为一个例子，如 Firefox 或 Internet Explorer 这样的浏览器使用 SOCKS 服务器访问另一个网络的应用程序：\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/camo.githubusercontent.com\/c772c1acd3ee32cde371dd91c72f41037b554fc5\/68747470733a2f2f77657368617265746869732e636f6d2f77702d636f6e74656e742f75706c6f6164732f323031372f30372f66697265666f785f736f636b732e706e67\x22\x3e\x3cimg src=\x22https:\/\/p0.ssl.qhimg.com\/t01aee33bf67ade0216.png\x22 alt=\x22Firefox SOCKS\x22\x3e\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/camo.githubusercontent.com\/8bc68bd75491e7dae3e565ecad48c91fb24b6cbd\/68747470733a2f2f77657368617265746869732e636f6d2f77702d636f6e74656e742f75706c6f6164732f323031372f30372f696e7465726e65746578706c6f7265725f736f636b732e706e67\x22\x3e\x3cimg src=\x22https:\/\/p0.ssl.qhimg.com\/t01e170432859f4d61e.png\x22 alt=\x22Internet Explorer SOCKS\x22\x3e\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e注意：上述截图来自 \x3ca href=\x22https:\/\/wesharethis.com\/goto\/http:\/\/www.tatanka.com.br\/ies4linux\/page\/Main_Page\x22\x3eIE for Linux\x3c\/a\x3e ：如果您需要在 Linux 上使用 Internet Explorer，强烈推荐！\x3c\/p\x3e\n\x3cp\x3e然而，最常见的浏览器并不要求 SOCKS 服务器，因为它们通常与代理服务器配合得更好。\x3c\/p\x3e\n\x3cp\x3e不过，Thunderbird 也支持 SOCKS，而且很有用：\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/camo.githubusercontent.com\/99c5aded8ac6cd2f329032a007c71935f040fb40\/68747470733a2f2f77657368617265746869732e636f6d2f77702d636f6e74656e742f75706c6f6164732f323031372f30372f7468756e646572626972645f736f636b732e706e67\x22\x3e\x3cimg src=\x22https:\/\/p0.ssl.qhimg.com\/t01969448d299831111.png\x22 alt=\x22Thunderbird SOCKS\x22\x3e\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e另一个例子：\x3ca href=\x22https:\/\/wesharethis.com\/goto\/https:\/\/www.spotify.com\/int\/download\/linux\/\x22\x3eSpotify\x3c\/a\x3e 客户端同样支持 SOCKS：\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/camo.githubusercontent.com\/0d5ad72e42e5b27c1c3fdb93660af244b2f5c8aa\/68747470733a2f2f77657368617265746869732e636f6d2f77702d636f6e74656e742f75706c6f6164732f323031372f30372f73706f746966795f736f636b732e706e67\x22\x3e\x3cimg src=\x22https:\/\/p0.ssl.qhimg.com\/t01dce9826ad207902a.png\x22 alt=\x22Spotify SOCKS\x22\x3e\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e需要关注一下名称解析。有时我们会发现，在目前的网络中，我们无法解析 SOCKS 服务器另一端所要访问的系统的名称。SOCKS 5 还允许我们通过隧道传播 DNS 请求（ 因为 SOCKS 5 允许我们使用 UDP）并将它们发送到另一端：可以指定是本地还是远程解析（或者也可以两者都试试）。支持此功能的应用程序也必须考虑到这一点。例如，Firefox 具有参数 \x3ccode\x3enetwork.proxy.socks_remote_dns\x3c\/code\x3e（在 \x3ccode\x3eabout:config\x3c\/code\x3e 中），允许我们指定远程解析。而默认情况下，它在本地解析。\x3c\/p\x3e\n\x3cp\x3eThunderbird 也支持参数 \x3ccode\x3enetwork.proxy.socks_remote_dns\x3c\/code\x3e，但由于没有地址栏来放置 \x3ccode\x3eabout:config\x3c\/code\x3e，我们需要改变它，就像在 \x3ca href=\x22https:\/\/wesharethis.com\/goto\/http:\/\/kb.mozillazine.org\/About:config\x22\x3eMozillaZine:about:config\x3c\/a\x3e 中读到的，依次点击 工具 → 选项 → 高级 → 常规 → 配置编辑器（按钮）。\x3c\/p\x3e\n\x3cp\x3e没有对 SOCKS 特别支持的应用程序可以被 sock 化socksified。这对于使用 TCP\/IP 的许多应用程序都没有问题，但并不是全部。“sock 化” 需要加载一个额外的库，它可以检测对 TCP\/IP 堆栈的请求，并修改请求，以通过 SOCKS 服务器重定向，从而不需要特别编程来支持 SOCKS 便可以正常通信。\x3c\/p\x3e\n\x3cp\x3e在 Windows 和 \x3ca href=\x22https:\/\/wesharethis.com\/2017\/07\/10\/linux-swap-partition\/\x22\x3eLinux\x3c\/a\x3e 上都有 “Sock 化工具”。\x3c\/p\x3e\n\x3cp\x3e对于 Windows，我们举个例子，SocksCap 是一种闭源，但对非商业使用免费的产品，我使用了很长时间都十分满意。SocksCap 由一家名为 Permeo 的公司开发，该公司是创建 SOCKS 参考技术的公司。Permeo 被 \x3ca href=\x22https:\/\/wesharethis.com\/goto\/http:\/\/www.bluecoat.com\/\x22\x3eBlue Coat\x3c\/a\x3e 买下后，它\x3ca href=\x22https:\/\/wesharethis.com\/goto\/http:\/\/www.bluecoat.com\/products\/sockscap\x22\x3e停止了 SocksCap 项目\x3c\/a\x3e。现在你仍然可以在互联网上找到 \x3ccode\x3esc32r240.exe\x3c\/code\x3e 文件。\x3ca href=\x22https:\/\/wesharethis.com\/goto\/http:\/\/www.freecap.ru\/eng\/\x22\x3eFreeCap\x3c\/a\x3e 也是面向 Windows 的免费代码项目，外观和使用都非常类似于 SocksCap。然而，它工作起来更加糟糕，多年来一直没有缺失维护。看起来，它的作者倾向于推出需要付款的新产品 \x3ca href=\x22https:\/\/wesharethis.com\/goto\/http:\/\/widecap.ru\/en\/support\/\x22\x3eWideCap\x3c\/a\x3e。\x3c\/p\x3e\n\x3cp\x3e这是 SocksCap 的一个界面，可以看到我们 “sock 化” 了的几个应用程序。当我们从这里启动它们时，这些应用程序将通过 SOCKS 服务器访问网络：\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/camo.githubusercontent.com\/26a8de045e1af1be43bc4e3982f7fa55f52fe9f2\/68747470733a2f2f77657368617265746869732e636f6d2f77702d636f6e74656e742f75706c6f6164732f323031372f30372f736f636b736361702e706e67\x22\x3e\x3cimg src=\x22https:\/\/p0.ssl.qhimg.com\/t017e7c39cbd83c67f5.png\x22 alt=\x22SocksCap\x22\x3e\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e在配置对话框中可以看到，如果选择了协议 SOCKS 5，我们可以选择在本地或远程解析名称：\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/camo.githubusercontent.com\/1d9c3be060ea636aeb7b82b0166584883f9dbc7c\/68747470733a2f2f77657368617265746869732e636f6d2f77702d636f6e74656e742f75706c6f6164732f323031372f30372f736f636b736361705f73657474696e67732e706e67\x22\x3e\x3cimg src=\x22https:\/\/p0.ssl.qhimg.com\/t01ea8c1bebef65cecc.png\x22 alt=\x22SocksCap settings\x22\x3e\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e在 Linux 上，如同往常一样，对某个远程命令我们都有许多替代方案。在 Debian\/Ubuntu 中，命令行：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs routeros\x22\x3e$ Apt-cache search\x3cspan class=\x22hljs-built_in\x22\x3e socks\n\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e的输出会告诉我们很多。\x3c\/p\x3e\n\x3cp\x3e最著名的是 \x3ca href=\x22https:\/\/wesharethis.com\/goto\/http:\/\/tsocks.sourceforge.net\/\x22\x3etsocks\x3c\/a\x3e 和 \x3ca href=\x22https:\/\/wesharethis.com\/goto\/http:\/\/proxychains.sourceforge.net\/\x22\x3eproxychains\x3c\/a\x3e。它们的工作方式大致相同：只需用它们启动我们想要 “sock 化” 的应用程序就行。使用 \x3ccode\x3eproxychains\x3c\/code\x3e 的 \x3ccode\x3ewget\x3c\/code\x3e 的例子：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs fsharp\x22\x3e$ Proxychains wget http:\x3cspan class=\x22hljs-comment\x22\x3e\/\/www.google.com\x3c\/span\x3e\nProxyChains\x3cspan class=\x22hljs-number\x22\x3e-3.1\x3c\/span\x3e (http:\x3cspan class=\x22hljs-comment\x22\x3e\/\/proxychains.sf.net)\x3c\/span\x3e\n-\x3cspan class=\x22hljs-number\x22\x3e-19\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e13\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e-- http:\x3cspan class=\x22hljs-comment\x22\x3e\/\/www.google.com\/\x3c\/span\x3e\nResolving www.google.com ...\nDNS-request | Www.google.com\n| S-chain | - \x26lt;- - \x3cspan class=\x22hljs-number\x22\x3e10.23\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e.37\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e.3\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e1080\x3c\/span\x3e-\x26lt;\x26gt;\x26lt;\x26gt;\x3cspan class=\x22hljs-number\x22\x3e-4.2\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e.2\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e.2\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e53\x3c\/span\x3e-\x26lt;\x26gt;\x26lt;\x26gt;-OK\n| DNS-response | Www.google.com is \x3cspan class=\x22hljs-number\x22\x3e72.14\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e.221\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e.147\x3c\/span\x3e\n\x3cspan class=\x22hljs-number\x22\x3e72.14\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e.221\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e.147\x3c\/span\x3e\nConnecting \x3cspan class=\x22hljs-keyword\x22\x3eto\x3c\/span\x3e www.google.com | \x3cspan class=\x22hljs-number\x22\x3e72.14\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e.221\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e.147\x3c\/span\x3e |: \x3cspan class=\x22hljs-number\x22\x3e80\x3c\/span\x3e ...\n| S-chain | - \x26lt;- - \x3cspan class=\x22hljs-number\x22\x3e10.23\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e.37\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e.3\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e1080\x3c\/span\x3e-\x26lt;\x26gt;\x26lt;\x26gt;\x3cspan class=\x22hljs-number\x22\x3e-72.14\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e.221\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e.147\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e80\x3c\/span\x3e-\x26lt;\x26gt;\x26lt;\x26gt;-OK\nConnected.\nHTTP request sent, awaiting response ... \x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e OK\nLength: unspecified [text \/ html]\nSaving \x3cspan class=\x22hljs-keyword\x22\x3eto\x3c\/span\x3e: `index.html \x27\n\n    \x3cspan class=\x22hljs-meta\x22\x3e[\x26lt;=\x26gt;]\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e6\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e016\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e24.0\x3c\/span\x3eK \/ s \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e0.2\x3c\/span\x3es\n\n\x3cspan class=\x22hljs-number\x22\x3e19\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e13\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e21\x3c\/span\x3e (\x3cspan class=\x22hljs-number\x22\x3e24.0\x3c\/span\x3e KB \/ s) - `index.html \x27saved [\x3cspan class=\x22hljs-number\x22\x3e6016\x3c\/span\x3e]\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e要让它可以工作，我们必须在 \x3ccode\x3e\/etc\/proxychains.conf\x3c\/code\x3e 中指定要使用的代理服务器：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs accesslog\x22\x3e\x3cspan class=\x22hljs-string\x22\x3e[ProxyList]\x3c\/span\x3e\nSocks5 clientessh \x3cspan class=\x22hljs-number\x22\x3e1080\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e我们也设置远程进行 DNS 请求：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs shell\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e#\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e Proxy DNS requests - no leak \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e DNS data\x3c\/span\x3e\nProxy_dns\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e另外，在前面的输出中，我们已经看到了同一个 \x3ccode\x3eproxychains\x3c\/code\x3e 的几条信息性的消息， 非 \x3ccode\x3ewget\x3c\/code\x3e 的行是标有字符串 \x3ccode\x3e|DNS-request|\x3c\/code\x3e、\x3ccode\x3e|S-chain|\x3c\/code\x3e 或 \x3ccode\x3e|DNS-response|\x3c\/code\x3e 的。如果我们不想看到它们，也可以在配置中进行调整：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs clean\x22\x3e# Quiet mode (no output \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e library)\nQuiet_mode\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3chr\x3e\n\x3cp\x3evia: \x3ca href=\x22https:\/\/wesharethis.com\/2017\/07\/15\/dynamic-port-forwarding-mount-socks-server-ssh\/\x22\x3ehttps:\/\/wesharethis.com\/2017\/07\/15\/dynamic-port-forwarding-mount-socks-server-ssh\/\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e作者：\x3ca href=\x22https:\/\/wesharethis.com\/author\/ahmad\/\x22\x3eAhmad\x3c\/a\x3e 译者：\x3ca href=\x22https:\/\/github.com\/firmianay\x22\x3efirmianay\x3c\/a\x3e 校对：\x3ca href=\x22https:\/\/github.com\/jasminepeng\x22\x3ejasminepeng\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e本文由 \x3ca href=\x22https:\/\/github.com\/LCTT\/TranslateProject\x22\x3eLCTT\x3c\/a\x3e 原创编译，\x3ca href=\x22https:\/\/linux.cn\/\x22\x3eLinux中国\x3c\/a\x3e 荣誉推出\x3c\/p\x3e\n\n          \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>动态端口转发：安装带有 SSH 的 SOCKS 服务器</p><h2 id="原文链接">原文链接</h2><p><a href="https://www.zcfy.cc/article/dynamic-port-forwarding-mount-a-socks-server-with-ssh">https://www.zcfy.cc/article/dynamic-port-forwarding-mount-a-socks-server-with-ssh</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/4cphvukmryc/" target="_blank">https://alili.tech/archive/4cphvukmryc/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>