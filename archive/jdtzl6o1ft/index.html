<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="使用ES6的新特性Proxy来实现一个数据绑定实例"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>使用ES6的新特性Proxy来实现一个数据绑定实例 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/jdtzl6o1ft/",
				"appid": "1613049289050283", 
				"title": "使用ES6的新特性Proxy来实现一个数据绑定实例 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-01T02:30:10"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/4h4i56jtmvo/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/ynfirljvjqn/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fjdtzl6o1ft%2f&text=%e4%bd%bf%e7%94%a8ES6%e7%9a%84%e6%96%b0%e7%89%b9%e6%80%a7Proxy%e6%9d%a5%e5%ae%9e%e7%8e%b0%e4%b8%80%e4%b8%aa%e6%95%b0%e6%8d%ae%e7%bb%91%e5%ae%9a%e5%ae%9e%e4%be%8b"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fjdtzl6o1ft%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fjdtzl6o1ft%2f&text=%e4%bd%bf%e7%94%a8ES6%e7%9a%84%e6%96%b0%e7%89%b9%e6%80%a7Proxy%e6%9d%a5%e5%ae%9e%e7%8e%b0%e4%b8%80%e4%b8%aa%e6%95%b0%e6%8d%ae%e7%bb%91%e5%ae%9a%e5%ae%9e%e4%be%8b"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fjdtzl6o1ft%2f&title=%e4%bd%bf%e7%94%a8ES6%e7%9a%84%e6%96%b0%e7%89%b9%e6%80%a7Proxy%e6%9d%a5%e5%ae%9e%e7%8e%b0%e4%b8%80%e4%b8%aa%e6%95%b0%e6%8d%ae%e7%bb%91%e5%ae%9a%e5%ae%9e%e4%be%8b"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fjdtzl6o1ft%2f&is_video=false&description=%e4%bd%bf%e7%94%a8ES6%e7%9a%84%e6%96%b0%e7%89%b9%e6%80%a7Proxy%e6%9d%a5%e5%ae%9e%e7%8e%b0%e4%b8%80%e4%b8%aa%e6%95%b0%e6%8d%ae%e7%bb%91%e5%ae%9a%e5%ae%9e%e4%be%8b"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e4%bd%bf%e7%94%a8ES6%e7%9a%84%e6%96%b0%e7%89%b9%e6%80%a7Proxy%e6%9d%a5%e5%ae%9e%e7%8e%b0%e4%b8%80%e4%b8%aa%e6%95%b0%e6%8d%ae%e7%bb%91%e5%ae%9a%e5%ae%9e%e4%be%8b&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fjdtzl6o1ft%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fjdtzl6o1ft%2f&title=%e4%bd%bf%e7%94%a8ES6%e7%9a%84%e6%96%b0%e7%89%b9%e6%80%a7Proxy%e6%9d%a5%e5%ae%9e%e7%8e%b0%e4%b8%80%e4%b8%aa%e6%95%b0%e6%8d%ae%e7%bb%91%e5%ae%9a%e5%ae%9e%e4%be%8b"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fjdtzl6o1ft%2f&title=%e4%bd%bf%e7%94%a8ES6%e7%9a%84%e6%96%b0%e7%89%b9%e6%80%a7Proxy%e6%9d%a5%e5%ae%9e%e7%8e%b0%e4%b8%80%e4%b8%aa%e6%95%b0%e6%8d%ae%e7%bb%91%e5%ae%9a%e5%ae%9e%e4%be%8b"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fjdtzl6o1ft%2f&title=%e4%bd%bf%e7%94%a8ES6%e7%9a%84%e6%96%b0%e7%89%b9%e6%80%a7Proxy%e6%9d%a5%e5%ae%9e%e7%8e%b0%e4%b8%80%e4%b8%aa%e6%95%b0%e6%8d%ae%e7%bb%91%e5%ae%9a%e5%ae%9e%e4%be%8b"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fjdtzl6o1ft%2f&title=%e4%bd%bf%e7%94%a8ES6%e7%9a%84%e6%96%b0%e7%89%b9%e6%80%a7Proxy%e6%9d%a5%e5%ae%9e%e7%8e%b0%e4%b8%80%e4%b8%aa%e6%95%b0%e6%8d%ae%e7%bb%91%e5%ae%9a%e5%ae%9e%e4%be%8b"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">使用ES6的新特性Proxy来实现一个数据绑定实例</h1><div class="meta"><div class="postdate"><time datetime="2019-02-01" itemprop="datePublished">2019-02-01</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e\x3cp\x3e项目地址：\x3ca href=\x22https:\/\/github.com\/jrainlau\/mog\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e\x3c\/a\x3e\x3ca href=\x22https:\/\/github.com\/jrainlau\/mog\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/jrainlau\/mog\x3c\/a\x3e\x3cbr\x3e在线体验：\x3ca href=\x22http:\/\/codepen.io\/jrainlau\/pen\/YpyBBY\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22jrainlau\/pen\/YpyBBY\x22 data-typeid=\x223\x22\x3e点击预览\x3c\/button\x3e\x3ca href=\x22http:\/\/codepen.io\/jrainlau\/pen\/YpyBBY\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/codepen.io\/jrainlau\/pe...\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22jrainlau\/pen\/YpyBBY\x22 data-typeid=\x223\x22\x3e点击预览\x3c\/button\x3e\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3chr\x3e\n\x3cp\x3e作为一个前端开发者，曾踩了太多的“数据绑定”的坑。在早些时候，都是通过\x3ccode\x3ejQuery\x3c\/code\x3e之类的工具手动完成这些功能，但是当数据量非常大的时候，这些手动的工作让我非常痛苦。直到使用了\x3ccode\x3eVueJS\x3c\/code\x3e，这些痛苦才得以终结。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3eVueJS\x3c\/code\x3e的其中一个卖点，就是“数据绑定”。使用者无需关心数据是怎么绑定到dom上面的，只需要关注数据就好，因为\x3ccode\x3eVueJS\x3c\/code\x3e已经自动帮我们完成了这些工作。\x3c\/p\x3e\n\x3cp\x3e这真的非常神奇，我不可救药地爱上了\x3ccode\x3eVueJS\x3c\/code\x3e，并且把它用到我自己的项目当中。随着使用的深入，我更加想知道它深入的原理是什么。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e\n\x3ccode\x3eVueJS\x3c\/code\x3e是如何进行数据绑定的？\x3c\/h2\x3e\n\x3cp\x3e通过阅读官方文档，我看到了下面这段话：\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e把一个普通 Javascript 对象传给 Vue 实例来作为它的 data 选项，Vue 将遍历它的属性，用 Object.defineProperty 将它们转为 getter\/setter。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e关键词是\x3ccode\x3eObject.definProperty\x3c\/code\x3e，在\x3ca href=\x22https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/JavaScript\/Reference\/Global_Objects\/Object\/defineProperty\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eMDN文档\x3c\/a\x3e里面是这么说的：\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e\x3ccode\x3eObject.defineProperty()\x3c\/code\x3e方法直接定义一个对象的属性，或者修改对象当中一个已经存在的属性，并返回这个对象。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e让我们写个例子来测试一下它。\x3c\/p\x3e\n\x3cp\x3e首先，建立一个钢铁侠对象并赋予他一些属性：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22let ironman = {\n  name: \x27Tony Stark\x27,\n  sex: \x27male\x27,\n  age: \x2735\x27\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xquery\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e ironman = {\n  name: \x3cspan class=\x22hljs-string\x22\x3e\x27Tony Stark\x27\x3c\/span\x3e,\n  sex: \x3cspan class=\x22hljs-string\x22\x3e\x27male\x27\x3c\/span\x3e,\n  age: \x3cspan class=\x22hljs-string\x22\x3e\x2735\x27\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e现在我们使用\x3ccode\x3eObject.defineProperty()\x3c\/code\x3e方法来对他的一些属性进行修改，并且在控制台把所修改的内容输出：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22Object.defineProperty(ironman, \x27age\x27, {\n  set (val) {\n    console.log(`Set age to ${val}`)\n    return val\n  }\n})\n\nironman.age = \x2748\x27\n\/\/ --\x3e Set age to 48\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs kotlin\x22\x3e\x3ccode\x3eObject.defineProperty(ironman, \x3cspan class=\x22hljs-string\x22\x3e\x27age\x27\x3c\/span\x3e, {\n  \x3cspan class=\x22hljs-keyword\x22\x3eset\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3eval\x3c\/span\x3e) {\n    console.log(`Set age to ${\x3cspan class=\x22hljs-keyword\x22\x3eval\x3c\/span\x3e}`)\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eval\x3c\/span\x3e\n  }\n})\n\nironman.age = \x3cspan class=\x22hljs-string\x22\x3e\x2748\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ --\x26gt; Set age to 48\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e看起来挺完美的。如果把\x3ccode\x3econsole.log(\x27Set age to ${val}\x27)\x3c\/code\x3e改为\x3ccode\x3eelement.innerHTML = val\x3c\/code\x3e，是不是就意味着数据绑定已经完成了呢？\x3c\/p\x3e\n\x3cp\x3e让我们再修改一下钢铁侠的属性：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22let ironman = {\n  name: \x27Tony Stark\x27,\n  sex: \x27male\x27,\n  age: \x2735\x27,\n  hobbies: [\x27girl\x27, \x27money\x27, \x27game\x27]\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs vim\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e ironman = {\n  name: \x3cspan class=\x22hljs-string\x22\x3e\x27Tony Stark\x27\x3c\/span\x3e,\n  sex: \x3cspan class=\x22hljs-string\x22\x3e\x27male\x27\x3c\/span\x3e,\n  age: \x3cspan class=\x22hljs-string\x22\x3e\x2735\x27\x3c\/span\x3e,\n  hobbie\x3cspan class=\x22hljs-variable\x22\x3es:\x3c\/span\x3e [\x3cspan class=\x22hljs-string\x22\x3e\x27girl\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27money\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27game\x27\x3c\/span\x3e]\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e嗯……他就是一个花花公子。现在我想把一些“爱好”添加到他身上，并且在控制台看到对应的输出：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22Object.defineProperty(ironman.hobbies, \x27push\x27, {\n  value () {\n    console.log(`Push ${arguments[0]} to ${this}`)\n    this[this.length] = arguments[0]\n  }\n})\n\nironman.hobbies.push(\x27wine\x27)\nconsole.log(ironman.hobbies)\n\n\/\/ --\x3e Push wine to girl,money,game\n\/\/ --\x3e [ \x27girl\x27, \x27money\x27, \x27game\x27, \x27wine\x27 ]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.defineProperty(ironman.hobbies, \x3cspan class=\x22hljs-string\x22\x3e\x27push\x27\x3c\/span\x3e, {\n  value () {\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e`Push \x3cspan class=\x22hljs-subst\x22\x3e${\x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e]}\x3c\/span\x3e to \x3cspan class=\x22hljs-subst\x22\x3e${\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e}\x3c\/span\x3e`\x3c\/span\x3e)\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e[\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.length] = \x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e]\n  }\n})\n\nironman.hobbies.push(\x3cspan class=\x22hljs-string\x22\x3e\x27wine\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(ironman.hobbies)\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ --\x26gt; Push wine to girl,money,game\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ --\x26gt; [ \x27girl\x27, \x27money\x27, \x27game\x27, \x27wine\x27 ]\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在此之前，我是使用\x3ccode\x3eget()\x3c\/code\x3e方法去追踪对象的属性变化，但是对于一个数组，我们不能使用这个方法，而是使用\x3ccode\x3evalue()\x3c\/code\x3e方法来代替。虽然这招也灵，但是并非最好的办法。有没有更好的方法可以简化这些追踪对象或数组属性变化的方法呢？\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e在ECMA2015，\x3ccode\x3eProxy\x3c\/code\x3e是一个不错的选择\x3c\/h2\x3e\n\x3cp\x3e什么是\x3ccode\x3eProxy\x3c\/code\x3e？在\x3cdel\x3e\x3ca href=\x22https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/JavaScript\/Reference\/Global_Objects\/Proxy\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eMDN文档\x3c\/a\x3e\x3c\/del\x3e中是这么说的（误）：\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3eProxy可以理解成，在目标对象之前架设一层“拦截”，外界对该对象的访问，都必须先通过这层拦截，因此提供了一种机制，可以对外界的访问进行过滤和改写。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e\x3ccode\x3eProxy\x3c\/code\x3e是ECMA2015的一个新特性，它非常强大，但我并不会讨论太多关于它的东西，除了我们现在需要的一个。现在让我们一起来新建一个Proxy实例：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22let ironmanProxy = new Proxy(ironman, {\n  set (target, property, value) {\n    target[property] = value\n    console.log(\x27change....\x27)\n    return true\n  }\n})\n\nironmanProxy.age = \x2748\x27\nconsole.log(ironman.age)\n\n\/\/ --\x3e change....\n\/\/ --\x3e 48\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs qml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e ironmanProxy = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eProxy\x3c\/span\x3e(ironman, {\n  set (target, \x3cspan class=\x22hljs-keyword\x22\x3eproperty\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e\x3c\/span\x3e, value) {\n    target[\x3cspan class=\x22hljs-keyword\x22\x3eproperty\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e] \x3c\/span\x3e= value\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27change....\x27\x3c\/span\x3e)\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n  }\n})\n\nironmanProxy.age = \x3cspan class=\x22hljs-string\x22\x3e\x2748\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(ironman.age)\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ --\x26gt; change....\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ --\x26gt; 48\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e符合预期。那么对于数组呢？\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22let ironmanProxy = new Proxy(ironman.hobbies, {\n  set (target, property, value) {\n    target[property] = value\n    console.log(\x27change....\x27)\n    return true\n  }\n})\n\nironmanProxy.push(\x27wine\x27)\nconsole.log(ironman.hobbies)\n\n\/\/ --\x3e change...\n\/\/ --\x3e change...\n\/\/ --\x3e [ \x27girl\x27, \x27money\x27, \x27game\x27, \x27wine\x27 ]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs qml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e ironmanProxy = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eProxy\x3c\/span\x3e(ironman.hobbies, {\n  set (target, \x3cspan class=\x22hljs-keyword\x22\x3eproperty\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e\x3c\/span\x3e, value) {\n    target[\x3cspan class=\x22hljs-keyword\x22\x3eproperty\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e] \x3c\/span\x3e= value\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27change....\x27\x3c\/span\x3e)\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n  }\n})\n\nironmanProxy.push(\x3cspan class=\x22hljs-string\x22\x3e\x27wine\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(ironman.hobbies)\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ --\x26gt; change...\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ --\x26gt; change...\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ --\x26gt; [ \x27girl\x27, \x27money\x27, \x27game\x27, \x27wine\x27 ]\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e仍然符合预期！但是为什么输出了两次\x3ccode\x3echange...\x3c\/code\x3e呢？因为每当我触发\x3ccode\x3epush()\x3c\/code\x3e方法的时候，这个数组的\x3ccode\x3elength\x3c\/code\x3e属性和\x3ccode\x3ebody\x3c\/code\x3e内容都被修改了，所以会引起两次变化。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e实时数据绑定\x3c\/h2\x3e\n\x3cp\x3e解决了最核心的问题，可以考虑其他的问题了。\x3c\/p\x3e\n\x3cp\x3e想象一下，我们有一个模板和数据对象：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c!-- html template --\x3e\n\x3cp\x3eHello, my name is \x22{{\x22name\x22}}\x22, I enjoy eatting \x22{{\x22hobbies.food\x22}}\x22\x3c\/p\x3e\n\n\x3c!-- javascript --\x3e\nlet ironman = {\n  name: \x27Tony Stark\x27,\n  sex: \x27male\x27,\n  age: \x2735\x27,\n  hobbies: {\n    food: \x27banana\x27,\n    drink: \x27wine\x27\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dust\x22\x3e\x3ccode\x3e\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- html template --\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e\x26gt;\x3c\/span\x3eHello, my name is \x3c\/span\x3e\x3cspan class=\x22hljs-template-variable\x22\x3e\x22{{\x22name}\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e}, I enjoy eatting \x3c\/span\x3e\x3cspan class=\x22hljs-template-variable\x22\x3e\x22{{\x22hobbies.food}\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e}\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- javascript --\x26gt;\x3c\/span\x3e\nlet ironman = \x3c\/span\x3e\x3cspan class=\x22hljs-template-variable\x22\x3e{\n  name: \x27Tony Stark\x27,\n  sex: \x27male\x27,\n  age: \x2735\x27,\n  hobbies: {\n    food: \x27banana\x27,\n    drink: \x27wine\x27\n  }\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e\n}\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e通过前面的代码，我们知道如果想要追踪一个对象的属性变化，我们应该把这个属性作为第一个参数传入\x3ccode\x3eProxy\x3c\/code\x3e实例。让我们一起来创建一个返回新的\x3ccode\x3eProxy\x3c\/code\x3e实例的函数吧！\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function $setData (dataObj, fn) {\n    let self = this\n    let once = false\n    let $d = new Proxy(dataObj, {\n      set (target, property, value) {\n        if (!once) {\n          target[property] = value\n          once = true\n          \/* Do something here *\/\n        }\n        return true\n      }\n    })\n    fn($d)\n  }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs qml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3e$setData\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3edataObj, fn\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e self = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e once = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e $d = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eProxy\x3c\/span\x3e(dataObj, {\n      set (target, \x3cspan class=\x22hljs-keyword\x22\x3eproperty\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e\x3c\/span\x3e, value) {\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!once) {\n          target[\x3cspan class=\x22hljs-keyword\x22\x3eproperty\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e] \x3c\/span\x3e= value\n          once = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n          \x3cspan class=\x22hljs-comment\x22\x3e\/* Do something here *\/\x3c\/span\x3e\n        }\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n      }\n    })\n    fn($d)\n  }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e它可以通过以下的方式被使用：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$setData(dataObj, ($d) =\x3e {\n  \/* \n   * dataObj.someProps = something\n   *\/\n})\n\n\/\/ 或者\n\n$setData(dataObj.arrayProps, ($d) =\x3e {\n  \/* \n   * dataObj.push(something)\n   *\/\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs php\x22\x3e\x3ccode\x3e$setData(dataObj, ($d) =\x26gt; {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/* \n   * dataObj.someProps = something\n   *\/\x3c\/span\x3e\n})\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 或者\x3c\/span\x3e\n\n$setData(dataObj.arrayProps, ($d) =\x26gt; {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/* \n   * dataObj.push(something)\n   *\/\x3c\/span\x3e\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e除此之外，我们应该实现模板对数据对象的映射，这样才能用\x3ccode\x3eTony Stark\x3c\/code\x3e来替换\x3ccode\x3e\x22{{\x22name\x22}}\x22\x3c\/code\x3e。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function replaceFun(str, data) {\n    let self = this\n    return str.replace(\/\x22{{\x22([^{}]*)\x22}}\x22\/g, (a, b) =\x3e {\n      return data[b]\n    })\n  }\n\nreplaceFun(\x27My name is \x22{{\x22name\x22}}\x22\x27, { name: \x27xxx\x27 })\n\/\/ --\x3e My name is xxx\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs typescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ereplaceFun\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3estr, data\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e self = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e str.replace(\x3cspan class=\x22hljs-regexp\x22\x3e\/\x22{{\x22([^{}]*)\x22}}\x22\/g\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3ea, b\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e data[b]\n    })\n  }\n\nreplaceFun(\x3cspan class=\x22hljs-string\x22\x3e\x27My name is \x22{{\x22name\x22}}\x22\x27\x3c\/span\x3e, { name: \x3cspan class=\x22hljs-string\x22\x3e\x27xxx\x27\x3c\/span\x3e })\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ --\x26gt; My name is xxx\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这个函数对于如\x3ccode\x3e{ name: \x27xx\x27, age: 18 }\x3c\/code\x3e的单层属性对象运行良好，但是对于如\x3ccode\x3e{ hobbies: { food: \x27apple\x27, drink: \x27milk\x27 } }\x3c\/code\x3e这样的多层属性对象却无能为力。举个例子，如果模板关键字是\x3ccode\x3e\x22{{\x22hobbies.food\x22}}\x22\x3c\/code\x3e，那么\x3ccode\x3ereplaceFun()\x3c\/code\x3e函数就应该返回\x3ccode\x3edata[\x27hobbies\x27][\x27food\x27]\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e为了解决这个问题，再来一个函数：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function getObjProp (obj, propsName) {\n    let propsArr = propsName.split(\x27.\x27)\n    function rec(o, pName) {\n      if (!o[pName] instanceof Array \x26amp;\x26amp; o[pName] instanceof Object) {\n        return rec(o[pName], propsArr.shift())\n      }\n      return o[pName]\n    }\n    return rec(obj, propsArr.shift())\n  }\n\ngetObjProp({ data: { hobbies: { food: \x27apple\x27, drink: \x27milk\x27 } } }, \x27hobbies.food\x27)\n\/\/ --\x3e return  { food: \x27apple\x27, drink: \x27milk\x27 }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs vim\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3egetObjProp\x3c\/span\x3e \x3cspan class=\x22hljs-params\x22\x3e(obj, propsName)\x3c\/span\x3e {\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e propsArr = propsName.\x3cspan class=\x22hljs-keyword\x22\x3esplit\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\x27\x3c\/span\x3e)\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3erec\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(o, pName)\x3c\/span\x3e {\x3c\/span\x3e\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!o[pName] instanceof Array \x26amp;\x26amp; \x3cspan class=\x22hljs-keyword\x22\x3eo\x3c\/span\x3e[pName] instanceof Object) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3erec\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3eo\x3c\/span\x3e[pName], propsArr.shift())\n      }\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eo\x3c\/span\x3e[pName]\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3erec\x3c\/span\x3e(obj, propsArr.shift())\n  }\n\ngetObjProp({ dat\x3cspan class=\x22hljs-variable\x22\x3ea:\x3c\/span\x3e { hobbie\x3cspan class=\x22hljs-variable\x22\x3es:\x3c\/span\x3e { food: \x3cspan class=\x22hljs-string\x22\x3e\x27apple\x27\x3c\/span\x3e, drink: \x3cspan class=\x22hljs-string\x22\x3e\x27milk\x27\x3c\/span\x3e } } }, \x3cspan class=\x22hljs-string\x22\x3e\x27hobbies.food\x27\x3c\/span\x3e)\n\/\/ --\x26gt; \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e  { food: \x3cspan class=\x22hljs-string\x22\x3e\x27apple\x27\x3c\/span\x3e, drink: \x3cspan class=\x22hljs-string\x22\x3e\x27milk\x27\x3c\/span\x3e }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e最终的\x3ccode\x3ereplaceFun()\x3c\/code\x3e函数应该是下面这样子的：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function replaceFun(str, data) {\n    let self = this\n    return str.replace(\/\x22{{\x22([^{}]*)\x22}}\x22\/g, (a, b) =\x3e {\n      let r = self._getObjProp(data, b);\n      console.log(a, b, r)\n      if (typeof r === \x27string\x27 || typeof r === \x27number\x27) {\n        return r\n      } else {\n        return self._getObjProp(r, b.split(\x27.\x27)[1])\n      }\n    })\n  }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs typescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ereplaceFun\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3estr, data\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e self = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e str.replace(\x3cspan class=\x22hljs-regexp\x22\x3e\/\x22{{\x22([^{}]*)\x22}}\x22\/g\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3ea, b\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e r = self._getObjProp(data, b);\n      \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(a, b, r)\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e r === \x3cspan class=\x22hljs-string\x22\x3e\x27string\x27\x3c\/span\x3e || \x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e r === \x3cspan class=\x22hljs-string\x22\x3e\x27number\x27\x3c\/span\x3e) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e r\n      } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e self._getObjProp(r, b.split(\x3cspan class=\x22hljs-string\x22\x3e\x27.\x27\x3c\/span\x3e)[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e])\n      }\n    })\n  }\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e一个数据绑定的实例，叫做“Mog”\x3c\/h2\x3e\n\x3cp\x3e不为什么，就叫做“Mog”。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22class Mog {\n  constructor (options) {\n    this.$data = options.data\n    this.$el = options.el\n    this.$tpl = options.template\n    this._render(this.$tpl, this.$data)\n  }\n\n  $setData (dataObj, fn) {\n    let self = this\n    let once = false\n    let $d = new Proxy(dataObj, {\n      set (target, property, value) {\n        if (!once) {\n          target[property] = value\n          once = true\n          self._render(self.$tpl, self.$data)\n        }\n        return true\n      }\n    })\n    fn($d)\n  }\n\n  _render (tplString, data) {\n    document.querySelector(this.$el).innerHTML = this._replaceFun(tplString, data)\n  }\n\n  _replaceFun(str, data) {\n    let self = this\n    return str.replace(\/\x22{{\x22([^{}]*)\x22}}\x22\/g, (a, b) =\x3e {\n      let r = self._getObjProp(data, b);\n      console.log(a, b, r)\n      if (typeof r === \x27string\x27 || typeof r === \x27number\x27) {\n        return r\n      } else {\n        return self._getObjProp(r, b.split(\x27.\x27)[1])\n      }\n    })\n  }\n\n  _getObjProp (obj, propsName) {\n    let propsArr = propsName.split(\x27.\x27)\n    function rec(o, pName) {\n      if (!o[pName] instanceof Array \x26amp;\x26amp; o[pName] instanceof Object) {\n        return rec(o[pName], propsArr.shift())\n      }\n      return o[pName]\n    }\n    return rec(obj, propsArr.shift())\n  }\n\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs kotlin\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eMog\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e (options) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$\x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e = options.\x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$el = options.el\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$tpl = options.template\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._render(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$tpl, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$\x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e)\n  }\n\n  $setData (dataObj, fn) {\n    let self = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e\n    let once = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n    let $d = new Proxy(dataObj, {\n      \x3cspan class=\x22hljs-keyword\x22\x3eset\x3c\/span\x3e (target, property, value) {\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!once) {\n          target[property] = value\n          once = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n          self._render(self.$tpl, self.$\x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e)\n        }\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n      }\n    })\n    fn($d)\n  }\n\n  _render (tplString, \x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e) {\n    document.querySelector(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$el).innerHTML = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._replaceFun(tplString, \x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e)\n  }\n\n  _replaceFun(str, \x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e) {\n    let self = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e str.replace(\/\x22{{\x22([^{}]*)\x22}}\x22\/g, (a, b) =\x26gt; {\n      let r = self._getObjProp(\x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e, b);\n      console.log(a, b, r)\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (typeof r === \x3cspan class=\x22hljs-string\x22\x3e\x27string\x27\x3c\/span\x3e || typeof r === \x3cspan class=\x22hljs-string\x22\x3e\x27number\x27\x3c\/span\x3e) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e r\n      } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e self._getObjProp(r, b.split(\x3cspan class=\x22hljs-string\x22\x3e\x27.\x27\x3c\/span\x3e)[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e])\n      }\n    })\n  }\n\n  _getObjProp (obj, propsName) {\n    let propsArr = propsName.split(\x3cspan class=\x22hljs-string\x22\x3e\x27.\x27\x3c\/span\x3e)\n    function rec(o, pName) {\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!o[pName] instanceof Array \x26amp;\x26amp; o[pName] instanceof Object) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e rec(o[pName], propsArr.shift())\n      }\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e o[pName]\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e rec(obj, propsArr.shift())\n  }\n\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e使用：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c!-- html --\x3e\n\n    \x3cdiv id=\x26quot;app\x26quot;\x3e\n      \x3cp\x3e\n        Hello everyone, my name is \x3cspan\x3e\x22{{\x22name\x22}}\x22\x3c\/span\x3e, I am a mini \x3cspan\x3e\x22{{\x22lang\x22}}\x22\x3c\/span\x3e framework for just \x3cspan\x3e\x22{{\x22work\x22}}\x22\x3c\/span\x3e. I can bind data from \x3cspan\x3e\x22{{\x22supports.0\x22}}\x22\x3c\/span\x3e, \x3cspan\x3e\x22{{\x22supports.1\x22}}\x22\x3c\/span\x3e and \x3cspan\x3e\x22{{\x22supports.2\x22}}\x22\x3c\/span\x3e. What\x27s more, I was created by \x3cspan\x3e\x22{{\x22info.author\x22}}\x22\x3c\/span\x3e, and was written in \x3cspan\x3e\x22{{\x22info.jsVersion\x22}}\x22\x3c\/span\x3e. My motto is \x26quot;\x3cspan\x3e\x22{{\x22motto\x22}}\x22\x3c\/span\x3e\x26quot;.\n      \x3c\/p\x3e\n    \x3c\/div\x3e\n    \x3cdiv id=\x26quot;input-wrapper\x26quot;\x3e\n      Motto: \x3cinput type=\x26quot;text\x26quot; id=\x26quot;set-motto\x26quot; autofocus\x3e\n    \x3c\/div\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs django\x22\x3e\x3ccode\x3e\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- html --\x26gt;\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22app\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        Hello everyone, my name is \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-template-variable\x22\x3e\x22{{\x22name\x22}}\x22\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e, I am a mini \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-template-variable\x22\x3e\x22{{\x22lang\x22}}\x22\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e framework for just \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-template-variable\x22\x3e\x22{{\x22work\x22}}\x22\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e. I can bind data from \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-template-variable\x22\x3e\x22{{\x22supports.0\x22}}\x22\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e, \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-template-variable\x22\x3e\x22{{\x22supports.1\x22}}\x22\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e and \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-template-variable\x22\x3e\x22{{\x22supports.2\x22}}\x22\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e. What\x27s more, I was created by \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-template-variable\x22\x3e\x22{{\x22info.author\x22}}\x22\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e, and was written in \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-template-variable\x22\x3e\x22{{\x22info.jsVersion\x22}}\x22\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e. My motto is \x22\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-template-variable\x22\x3e\x22{{\x22motto\x22}}\x22\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x22.\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22input-wrapper\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      Motto: \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3einput\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22set-motto\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eautofocus\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c!-- javascript --\x3e\n\nlet template = document.querySelector(\x27#app\x27).innerHTML\n\nlet mog = new Mog({\n  template: template,\n  el: \x27#app\x27,\n  data: {\n    name: \x27mog\x27,\n    lang: \x27javascript\x27,\n    work: \x27data binding\x27,\n    supports: [\x27String\x27, \x27Array\x27, \x27Object\x27],\n    info: {\n      author: \x27Jrain\x27,\n      jsVersion: \x27Ecma2015\x27\n    },\n    motto: \x27Every dog has his day\x27\n  }\n})\n\ndocument.querySelector(\x27#set-motto\x27).oninput = (e) =\x3e {\n  mog.$setData(mog.$data, ($d) =\x3e {\n    $d.motto = e.target.value\n  })\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3e\x26lt;!-- javascript --\x26gt;\n\nlet template = document.querySelector(\x3cspan class=\x22hljs-string\x22\x3e\x27#app\x27\x3c\/span\x3e)\x3cspan class=\x22hljs-selector-class\x22\x3e.innerHTML\x3c\/span\x3e\n\nlet mog = new Mog({\n  template: template,\n  el: \x3cspan class=\x22hljs-string\x22\x3e\x27#app\x27\x3c\/span\x3e,\n  data: {\n    name: \x3cspan class=\x22hljs-string\x22\x3e\x27mog\x27\x3c\/span\x3e,\n    lang: \x3cspan class=\x22hljs-string\x22\x3e\x27javascript\x27\x3c\/span\x3e,\n    work: \x3cspan class=\x22hljs-string\x22\x3e\x27data binding\x27\x3c\/span\x3e,\n    supports: [\x3cspan class=\x22hljs-string\x22\x3e\x27String\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27Array\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27Object\x27\x3c\/span\x3e],\n    info: {\n      author: \x3cspan class=\x22hljs-string\x22\x3e\x27Jrain\x27\x3c\/span\x3e,\n      jsVersion: \x3cspan class=\x22hljs-string\x22\x3e\x27Ecma2015\x27\x3c\/span\x3e\n    },\n    motto: \x3cspan class=\x22hljs-string\x22\x3e\x27Every dog has his day\x27\x3c\/span\x3e\n  }\n})\n\ndocument.querySelector(\x3cspan class=\x22hljs-string\x22\x3e\x27#set-motto\x27\x3c\/span\x3e)\x3cspan class=\x22hljs-selector-class\x22\x3e.oninput\x3c\/span\x3e = (e) =\x26gt; {\n  mog.\x3cspan class=\x22hljs-variable\x22\x3e$setData\x3c\/span\x3e(mog.\x3cspan class=\x22hljs-variable\x22\x3e$data\x3c\/span\x3e, (\x3cspan class=\x22hljs-variable\x22\x3e$d\x3c\/span\x3e) =\x26gt; {\n    \x3cspan class=\x22hljs-variable\x22\x3e$d\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.motto\x3c\/span\x3e = e\x3cspan class=\x22hljs-selector-class\x22\x3e.target\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.value\x3c\/span\x3e\n  })\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e你可以在\x3ca href=\x22http:\/\/codepen.io\/jrainlau\/pen\/YpyBBY\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e这里\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22jrainlau\/pen\/YpyBBY\x22 data-typeid=\x223\x22\x3e点击预览\x3c\/button\x3e进行在线体验。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e后记\x3c\/h2\x3e\n\x3cp\x3e\x3ccode\x3eMog\x3c\/code\x3e仅仅是一个用于学习数据绑定的实验性质的项目，代码仍然不够优雅，功能也不够丰富。但是这个小玩具让我学习了很多。如果你对它有兴趣，欢迎到\x3ca href=\x22https:\/\/github.com\/jrainlau\/mog\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e这里\x3c\/a\x3e把项目fork走，并且加入一些你的想法。\x3c\/p\x3e\n\x3cp\x3e感谢阅读！\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>使用ES6的新特性Proxy来实现一个数据绑定实例</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000007443611">https://segmentfault.com/a/1190000007443611</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/jdtzl6o1ft/" target="_blank">https://alili.tech/archive/jdtzl6o1ft/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>