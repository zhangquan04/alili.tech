<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="ES6! 如何制作一个高效轮播图？"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>ES6! 如何制作一个高效轮播图？ | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/vsnaqjrizb/",
				"appid": "1613049289050283", 
				"title": "ES6! 如何制作一个高效轮播图？ | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-27T02:30:59"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/zln5ohmgj1d/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/zopj8uo03n/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fvsnaqjrizb%2f&text=ES6%21%20%e5%a6%82%e4%bd%95%e5%88%b6%e4%bd%9c%e4%b8%80%e4%b8%aa%e9%ab%98%e6%95%88%e8%bd%ae%e6%92%ad%e5%9b%be%ef%bc%9f"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fvsnaqjrizb%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fvsnaqjrizb%2f&text=ES6%21%20%e5%a6%82%e4%bd%95%e5%88%b6%e4%bd%9c%e4%b8%80%e4%b8%aa%e9%ab%98%e6%95%88%e8%bd%ae%e6%92%ad%e5%9b%be%ef%bc%9f"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fvsnaqjrizb%2f&title=ES6%21%20%e5%a6%82%e4%bd%95%e5%88%b6%e4%bd%9c%e4%b8%80%e4%b8%aa%e9%ab%98%e6%95%88%e8%bd%ae%e6%92%ad%e5%9b%be%ef%bc%9f"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fvsnaqjrizb%2f&is_video=false&description=ES6%21%20%e5%a6%82%e4%bd%95%e5%88%b6%e4%bd%9c%e4%b8%80%e4%b8%aa%e9%ab%98%e6%95%88%e8%bd%ae%e6%92%ad%e5%9b%be%ef%bc%9f"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=ES6%21%20%e5%a6%82%e4%bd%95%e5%88%b6%e4%bd%9c%e4%b8%80%e4%b8%aa%e9%ab%98%e6%95%88%e8%bd%ae%e6%92%ad%e5%9b%be%ef%bc%9f&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fvsnaqjrizb%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fvsnaqjrizb%2f&title=ES6%21%20%e5%a6%82%e4%bd%95%e5%88%b6%e4%bd%9c%e4%b8%80%e4%b8%aa%e9%ab%98%e6%95%88%e8%bd%ae%e6%92%ad%e5%9b%be%ef%bc%9f"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fvsnaqjrizb%2f&title=ES6%21%20%e5%a6%82%e4%bd%95%e5%88%b6%e4%bd%9c%e4%b8%80%e4%b8%aa%e9%ab%98%e6%95%88%e8%bd%ae%e6%92%ad%e5%9b%be%ef%bc%9f"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fvsnaqjrizb%2f&title=ES6%21%20%e5%a6%82%e4%bd%95%e5%88%b6%e4%bd%9c%e4%b8%80%e4%b8%aa%e9%ab%98%e6%95%88%e8%bd%ae%e6%92%ad%e5%9b%be%ef%bc%9f"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fvsnaqjrizb%2f&title=ES6%21%20%e5%a6%82%e4%bd%95%e5%88%b6%e4%bd%9c%e4%b8%80%e4%b8%aa%e9%ab%98%e6%95%88%e8%bd%ae%e6%92%ad%e5%9b%be%ef%bc%9f"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">ES6! 如何制作一个高效轮播图？</h1><div class="meta"><div class="postdate"><time datetime="2019-01-27" itemprop="datePublished">2019-01-27</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVIHHG?w=1800\x26amp;h=770\x22 src=\x22https:\/\/static.alili.tech\/img\/bVIHHG?w=1800\x26amp;h=770\x22 alt=\x22Make a lún\x27bō\x27tú works\x22 title=\x22Make a lún\x27bō\x27tú works\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e轮播图千种万种，怎样才能做出符合要求的轮播图？原理上天入地，如何优化才能达到极限丝滑？本文作者将解答这一切，通过现场制作一个轮播图，带你详细了解、理解，制作 \x3cstrong\x3eAll\x3c\/strong\x3e kinds of 高性能轮播图 ！\x3c\/p\x3e\n\x3cp\x3e仿自 Google Play\x3c\/p\x3e\n\x3cp\x3e不过，在事实上，轮播图的点击率通常都很低，很少能引起用户的注意，而却往往占用了页面某个极重要的位置。你的网站真的需要一个轮播图吗？轻轻问自己三声，谷歌一下对轮播图效果的相关调查和建议，再决定是否要着手制作你的轮播图。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e2017.8.20 更新\x3c\/strong\x3e——————————\x3cbr\x3e\x3cstrong\x3e1.\x3c\/strong\x3e 代码简洁化 \x26amp; 语言精简\x3cbr\x3e\x3cstrong\x3e2.\x3c\/strong\x3e 删去不被推荐的有限部分\x3cbr\x3e\x3cstrong\x3e3.\x3c\/strong\x3e API 重写\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e! ES6 API 重写\x3c\/strong\x3e\x3cbr\x3eES6 啊，，牛逼啊！我TM要火啊！！\x3cbr\x3e然而并没有。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e开始\x3c\/h2\x3e\n\x3cp\x3e\x3cstrong\x3e1. 结构\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3ediv.father\x3c\/code\x3e包裹图片。\x3ccode\x3ediv.viewport\x3c\/code\x3e为视口部分。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cdiv class=\x26quot;viewport\x26quot; id=\x26quot;example\x26quot;\x3e\n  \x3cdiv class=\x26quot;father\x26quot;\x3e\n    \x3cdiv\x3eA\x3c\/div\x3e\x3c!-- 1 --\x3e\n    \x3cdiv\x3eB\x3c\/div\x3e\n    \x3cdiv\x3eC\x3c\/div\x3e\x3c!-- 3 --\x3e\n    \x3cdiv\x3eD\x3c\/div\x3e\n    \x3cdiv\x3eE\x3c\/div\x3e\x3c!-- 5 --\x3e\n  \x3c\/div\x3e\n  \x3cdiv class=\x26quot;mother\x26quot;\x3e左\x3c\/div\x3e\n  \x3cdiv class=\x26quot;mother\x26quot;\x3e右\x3c\/div\x3e\n\x3c\/div\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22viewport\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22example\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22father\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3eA\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- 1 --\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3eB\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3eC\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- 3 --\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3eD\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3eE\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- 5 --\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22mother\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e左\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22mother\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e右\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22.viewport {\n  width: 900px;\n  height: 300px;\n  overflow: hidden;\n  position: relative;\n}\n.father {\n  height: inherit;\n  width: 3000%; \/* 子元素 float 无法撑开 *\/\n  transform: translate3d(0, 0, 0);\n  transition: transform 0.3s ease-in-out;\n}\n.father \x3e div {\n  width: 550px;\n  height: inherit;\n  float: left;\n}\n.mother {\n  width: 30px;\n  height: inherit;\n  line-height: 300px;\n  text-align: center;\n  cursor: pointer;\n  user-select:none;\n  background: rgba(0,0,0,0.15);\n  position: absolute;top: 0;\n} .mother.left { left: 0 } .mother.right { right: 0 }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22css hljs\x22\x3e\x3ccode class=\x22css\x22\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.viewport\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-attribute\x22\x3ewidth\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e900px\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-attribute\x22\x3eheight\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e300px\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-attribute\x22\x3eoverflow\x3c\/span\x3e: hidden;\n  \x3cspan class=\x22hljs-attribute\x22\x3eposition\x3c\/span\x3e: relative;\n}\n\x3cspan class=\x22hljs-selector-class\x22\x3e.father\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-attribute\x22\x3eheight\x3c\/span\x3e: inherit;\n  \x3cspan class=\x22hljs-attribute\x22\x3ewidth\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e3000%\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/* 子元素 float 无法撑开 *\/\x3c\/span\x3e\n  \x3cspan class=\x22hljs-attribute\x22\x3etransform\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3etranslate3d\x3c\/span\x3e(0, 0, 0);\n  \x3cspan class=\x22hljs-attribute\x22\x3etransition\x3c\/span\x3e: transform \x3cspan class=\x22hljs-number\x22\x3e0.3s\x3c\/span\x3e ease-in-out;\n}\n\x3cspan class=\x22hljs-selector-class\x22\x3e.father\x3c\/span\x3e \x26gt; \x3cspan class=\x22hljs-selector-tag\x22\x3ediv\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-attribute\x22\x3ewidth\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e550px\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-attribute\x22\x3eheight\x3c\/span\x3e: inherit;\n  \x3cspan class=\x22hljs-attribute\x22\x3efloat\x3c\/span\x3e: left;\n}\n\x3cspan class=\x22hljs-selector-class\x22\x3e.mother\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-attribute\x22\x3ewidth\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e30px\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-attribute\x22\x3eheight\x3c\/span\x3e: inherit;\n  \x3cspan class=\x22hljs-attribute\x22\x3eline-height\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e300px\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-attribute\x22\x3etext-align\x3c\/span\x3e: center;\n  \x3cspan class=\x22hljs-attribute\x22\x3ecursor\x3c\/span\x3e: pointer;\n  \x3cspan class=\x22hljs-attribute\x22\x3euser-select\x3c\/span\x3e:none;\n  \x3cspan class=\x22hljs-attribute\x22\x3ebackground\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3ergba\x3c\/span\x3e(0,0,0,0.15);\n  \x3cspan class=\x22hljs-attribute\x22\x3eposition\x3c\/span\x3e: absolute;\x3cspan class=\x22hljs-attribute\x22\x3etop\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n} \x3cspan class=\x22hljs-selector-class\x22\x3e.mother\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.left\x3c\/span\x3e { \x3cspan class=\x22hljs-attribute\x22\x3eleft\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e } \x3cspan class=\x22hljs-selector-class\x22\x3e.mother\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.right\x3c\/span\x3e { \x3cspan class=\x22hljs-attribute\x22\x3eright\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3etransform: translate3d()\x3c\/code\x3e使用 GPU 加速。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e2. 代码实现\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22class Lunbo {\n  constructor(element) {\n    this.viewport = element;\n    this.father = element.children[0];\n    this.photos = this.father.children;\n    \/\/ 自设的图片宽, 包括 margin\n    this.photoWidth = this.photos[0].offsetWidth \x2b parseInt(getComputedStyle(this.photos[0]).marginLeft) \x2b parseInt(getComputedStyle(this.photos[0]).marginRight);\n\n    \/\/ 注册移动事件\n    element.children[1].addEventListener(\x27click\x27, this.left.bind(this));\n    element.children[2].addEventListener(\x27click\x27, this.right.bind(this));\n  }\n\n  load() {\n\n  }\n\n  left() {\n    this.load(this.showingId - 1);\n  }\n\n  right() {\n    this.load(this.showingId \x2b 1);\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eLunbo\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e(element) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.viewport = element;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.father = element.children[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e];\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.photos = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.father.children;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 自设的图片宽, 包括 margin\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.photoWidth = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.photos[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].offsetWidth \x2b \x3cspan class=\x22hljs-built_in\x22\x3eparseInt\x3c\/span\x3e(getComputedStyle(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.photos[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e]).marginLeft) \x2b \x3cspan class=\x22hljs-built_in\x22\x3eparseInt\x3c\/span\x3e(getComputedStyle(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.photos[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e]).marginRight);\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 注册移动事件\x3c\/span\x3e\n    element.children[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e].addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27click\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.left.bind(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e));\n    element.children[\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e].addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27click\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.right.bind(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e));\n  }\n\n  load() {\n\n  }\n\n  left() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.load(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.showingId - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e);\n  }\n\n  right() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.load(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.showingId \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e);\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3col\x3e\n\x3cli\x3e\n\x3cstrong\x3e页面加载时\x3c\/strong\x3e：选取一张作为焦点\x3cbr\x3e\x3cstrong\x3e切换时\x3c\/strong\x3e：\x3ccode\x3efatherGo(to)\x3c\/code\x3e负责跳转到指定的焦点图；\x3c\/li\x3e\n\x3cli\x3e\n\x3cstrong\x3e高效 \x26amp; 无限\x3c\/strong\x3e轮播\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e（此处以下所有代码仅显示添加 \/ 修改部分）\x3cbr\x3e思路也是难点。一题，这样解决：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22class Lunbo {\n  constructor(element) {\n    \/\/ (可视宽 -焦点图片宽) \/ 2，焦点图到视口左或右的距离\n    this.partnerWidth = (this.viewport.clientWidth - this.photoWidth) \/ 2;\n  }\n\n  \/\/ 计算移动距离\n  countX(id) {\n    return -id * this.photoWidth \x2b this.partnerWidth;\n  }\n\n  \/\/ 切换 \/ 载入 \/ 移动图片。无参数则除法求整，仅用来切换到一个瞎选的初始焦点\n  load(newId = parseInt(this.photos.length \/ 2) - 1) {\n    this.father.style.transform = `translate3d(${this.countX(newId)}px, 0, 0)`;\n    this.showingId = newId;\n  }\n}\n\/\/ 切换至初始焦点\nconst Example = new Lunbo(document.getElementById(\x26quot;example\x26quot;));\nExample.load();\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eLunbo\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e(element) {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ (可视宽 -焦点图片宽) \/ 2，焦点图到视口左或右的距离\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.partnerWidth = (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.viewport.clientWidth - \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.photoWidth) \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n  }\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 计算移动距离\x3c\/span\x3e\n  countX(id) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e -id * \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.photoWidth \x2b \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.partnerWidth;\n  }\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 切换 \/ 载入 \/ 移动图片。无参数则除法求整，仅用来切换到一个瞎选的初始焦点\x3c\/span\x3e\n  load(newId = \x3cspan class=\x22hljs-built_in\x22\x3eparseInt\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.photos.length \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e) - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.father.style.transform = \x3cspan class=\x22hljs-string\x22\x3e`translate3d(\x3cspan class=\x22hljs-subst\x22\x3e${\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.countX(newId)}\x3c\/span\x3epx, 0, 0)`\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.showingId = newId;\n  }\n}\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 切换至初始焦点\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e Example = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Lunbo(\x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x22example\x22\x3c\/span\x3e));\nExample.load();\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e\x3ccode\x3ecountX(id)\x3c\/code\x3e 解释：\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e若将 Id = 2 对应图片（第 3 张）作焦点，向左挪过去两张（此时该图靠最左），后加回\x3ccode\x3epartnerWidth\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e二题：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cdiv class=\x26quot;father\x26quot; id=\x26quot;father\x26quot;\x3e\n  \x3cdiv\x3eA\x3c\/div\x3e\x3cdiv\x3eB\x3c\/div\x3e\x3cdiv\x3eC\x3c\/div\x3e\x3cdiv\x3eD\x3c\/div\x3e\x3cdiv\x3eE\x3c\/div\x3e\n\n  \x3cdiv\x3eA\x3c\/div\x3e\n  \x3cdiv\x3eB\x3c\/div\x3e\n  \x3cdiv\x3eC\x3c\/div\x3e\n  \x3cdiv\x3eD\x3c\/div\x3e\n  \x3cdiv\x3eE\x3c\/div\x3e\n\n  \x3cdiv\x3eA\x3c\/div\x3e\x3cdiv\x3eB\x3c\/div\x3e\x3cdiv\x3eC\x3c\/div\x3e\x3cdiv\x3eD\x3c\/div\x3e\x3cdiv\x3eE\x3c\/div\x3e\n\x3c\/div\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22father\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22father\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3eA\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3eB\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3eC\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3eD\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3eE\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3eA\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3eB\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3eC\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3eD\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3eE\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3eA\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3eB\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3eC\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3eD\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3eE\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e三倍于展示图，JS 动态生成亦可。称之三个块。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22.moving { transition: none }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22css hljs\x22\x3e\x3ccode class=\x22css\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.moving\x3c\/span\x3e { \x3cspan class=\x22hljs-attribute\x22\x3etransition\x3c\/span\x3e: none }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在\x3cstrong\x3e接近\x3c\/strong\x3e块间距时\x3cstrong\x3e关闭动画\x3c\/strong\x3e移至另一块相应位置。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22class Lunbo {\n  constructor(element) {\n    \/\/ 表示接近边缘的图片 Id。接近左边缘的即第2 张图，右边缘的则为倒数第二张\n    this.closeLeftId = 1;\n    this.closeRightId = this.photos.length - 2;\n\n    this.photosQuantity = this.photos.length \/ 3;\n\n    \/\/ 当运动到上面两个 Id 时默默移动到的对应 Id\n    \/\/ 接近左边时跳转到右边块的第二张\n    \/\/ 接近右边则跳转到左边块的倒数第二张\n    this.backLeftId = this.photosQuantity - 2;\n    this.backRightId = this.photosQuantity * 2 \x2b 1;\n  }\n\n  load(newId = parseInt(this.photos.length \/ 2) - 1) {\n    this.father.style.transform = `translate3d(${this.countX(newId)}px, 0, 0)`;\n\n    if (newId === this.closeLeftId){\n      newId = this.backRightId;\n    } else if (newId === this.closeRightId){\n      newId = this.backLeftId;\n    } else {\n      this.showingId = newId;\n      return;\n    }\n    this.father.addEventListener(\x27transitionend\x27, this.backMove.bind(this, newId), {once: true});\n  }\n\n  backMove(newId) {\n    this.father.classList.add(\x26quot;moving\x26quot;);\n    this.father.clientWidth();\n    this.father.style.transform = `translate3d(${this.countX(newId)}px, 0, 0)`;\n    this.father.clientWidth();\n    this.father.classList.remove(\x26quot;moving\x26quot;);\n    this.showingId = newId;\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eLunbo\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e(element) {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 表示接近边缘的图片 Id。接近左边缘的即第2 张图，右边缘的则为倒数第二张\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.closeLeftId = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.closeRightId = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.photos.length - \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.photosQuantity = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.photos.length \/ \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e;\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 当运动到上面两个 Id 时默默移动到的对应 Id\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 接近左边时跳转到右边块的第二张\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 接近右边则跳转到左边块的倒数第二张\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.backLeftId = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.photosQuantity - \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.backRightId = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.photosQuantity * \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n  }\n\n  load(newId = \x3cspan class=\x22hljs-built_in\x22\x3eparseInt\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.photos.length \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e) - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.father.style.transform = \x3cspan class=\x22hljs-string\x22\x3e`translate3d(\x3cspan class=\x22hljs-subst\x22\x3e${\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.countX(newId)}\x3c\/span\x3epx, 0, 0)`\x3c\/span\x3e;\n\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (newId === \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.closeLeftId){\n      newId = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.backRightId;\n    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (newId === \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.closeRightId){\n      newId = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.backLeftId;\n    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.showingId = newId;\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.father.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27transitionend\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.backMove.bind(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e, newId), {\x3cspan class=\x22hljs-attr\x22\x3eonce\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e});\n  }\n\n  backMove(newId) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.father.classList.add(\x3cspan class=\x22hljs-string\x22\x3e\x22moving\x22\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.father.clientWidth();\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.father.style.transform = \x3cspan class=\x22hljs-string\x22\x3e`translate3d(\x3cspan class=\x22hljs-subst\x22\x3e${\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.countX(newId)}\x3c\/span\x3epx, 0, 0)`\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.father.clientWidth();\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.father.classList.remove(\x3cspan class=\x22hljs-string\x22\x3e\x22moving\x22\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.showingId = newId;\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e4. 整理代码\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c!DOCTYPE html\x3e\x3chtml\x3e\x3chead\x3e\n\x3ctitle\x3e17.8.20\x3c\/title\x3e\n\x3cstyle\x3e\nhtml,body { height: 100% }\n.viewport {\n  width: 900px;height: 300px;\n  overflow: hidden;\n  position: relative;\n}\n.father {\n  height: inherit;\n  width: 3000%;\n  transform: translate3d(0, 0, 0);\n  transition: transform 0.3s ease-in-out;\n} .father.moving { transition: none }\n.father \x3e div {\n  width: 550px;height: inherit;background: #aaa;\n  float: left;\n}\n.mother {\n  width: 30px;\n  height: inherit;\n  line-height: 300px;\n  text-align: center;\n  cursor: pointer;\n  user-select:none;\n  background: rgba(0,0,0,0.15);\n  position: absolute;top: 0;\n} .mother.left { left: 0 } .mother.right { right: 0 }\n\x3c\/style\x3e\x3c\/head\x3e\x3cbody\x3e\n\x3cdiv class=\x26quot;viewport\x26quot; id=\x26quot;example\x26quot;\x3e\n  \x3cdiv class=\x26quot;father\x26quot;\x3e\n    \x3cdiv\x3eA\x3c\/div\x3e\x3cdiv\x3eB\x3c\/div\x3e\x3cdiv\x3eC\x3c\/div\x3e\x3cdiv\x3eD\x3c\/div\x3e\x3cdiv\x3eE\x3c\/div\x3e\n\n    \x3cdiv\x3eA\x3c\/div\x3e\n    \x3cdiv\x3eB\x3c\/div\x3e\n    \x3cdiv\x3eC\x3c\/div\x3e\n    \x3cdiv\x3eD\x3c\/div\x3e\n    \x3cdiv\x3eE\x3c\/div\x3e\n\n    \x3cdiv\x3eA\x3c\/div\x3e\x3cdiv\x3eB\x3c\/div\x3e\x3cdiv\x3eC\x3c\/div\x3e\x3cdiv\x3eD\x3c\/div\x3e\x3cdiv\x3eE\x3c\/div\x3e\n  \x3c\/div\x3e\n  \x3cdiv class=\x26quot;mother left\x26quot;\x3e左\x3c\/div\x3e\n  \x3cdiv class=\x26quot;mother right\x26quot;\x3e右\x3c\/div\x3e\n\x3c\/div\x3e\n\x3cscript\x3e\nclass Lunbo {\n  constructor(element) {\n    this.viewport = element;\n    this.father = element.children[0];\n    this.photos = this.father.children;\n    \/\/ 自设的图片宽, 包括 margin\n    this.photoWidth = this.photos[0].offsetWidth \x2b parseInt(getComputedStyle(this.photos[0]).marginLeft) \x2b parseInt(getComputedStyle(this.photos[0]).marginRight);\n\n    \/\/ (可视宽 -焦点图片宽) \/ 2，焦点图到视口左或右的距离\n    this.partnerWidth = (this.viewport.clientWidth - this.photoWidth) \/ 2;\n\n    \/\/ 表示接近边缘的图片 Id。接近左边缘的即第2 张图，右边缘的则为倒数第二张\n    this.closeLeftId = 1;\n    this.closeRightId = this.photos.length - 2;\n\n    this.photosQuantity = this.photos.length \/ 3;\n\n    \/\/ 当运动到上面两个 Id 时默默移动到的对应 Id\n    \/\/ 接近左边时跳转到右边块的第二张\n    \/\/ 接近右边则跳转到左边块的倒数第二张\n    this.backLeftId = this.photosQuantity - 2;\n    this.backRightId = this.photosQuantity * 2 \x2b 1;\n\n    \/\/ 注册移动事件\n    element.children[1].addEventListener(\x27click\x27, this.left.bind(this));\n    element.children[2].addEventListener(\x27click\x27, this.right.bind(this));\n  }\n\n  \/\/ 计算移动距离\n  countX(id) {\n    return -id * this.photoWidth \x2b this.partnerWidth;\n  }\n\n  \/\/ 切换 \/ 载入 \/ 移动图片。无参数则除法求整，仅用来切换到一个瞎选的初始焦点\n  load(newId = parseInt(this.photos.length \/ 2) - 1) {\n    this.father.style.transform = `translate3d(${this.countX(newId)}px, 0, 0)`;\n\n    if (newId === this.closeLeftId){\n      newId = this.backRightId;\n    } else if (newId === this.closeRightId){\n      newId = this.backLeftId;\n    } else {\n      this.showingId = newId;\n      return;\n    }\n    this.father.addEventListener(\x27transitionend\x27, this.backMove.bind(this, newId), {once: true});\n  }\n\n  backMove(newId) {\n    this.father.classList.add(\x26quot;moving\x26quot;);\n    this.father.style.transform = `translate3d(${this.countX(newId)}px, 0, 0)`;\n\n    this.father.clientWidth;\n\n    this.father.classList.remove(\x26quot;moving\x26quot;);\n    this.showingId = newId;\n  }\n\n  left() {\n    this.load(this.showingId - 1);\n  }\n\n  right() {\n    this.load(this.showingId \x2b 1);\n  }\n}\n\n\/\/ 切换至初始焦点\nconst Example = new Lunbo(document.getElementById(\x26quot;example\x26quot;));\nExample.load();\n\x3c\/script\x3e\x3c\/body\x3e\x3c\/html\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x26lt;!DOCTYPE html\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etitle\x3c\/span\x3e\x26gt;\x3c\/span\x3e17.8.20\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etitle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22css\x22\x3e\n\x3cspan class=\x22hljs-selector-tag\x22\x3ehtml\x3c\/span\x3e,\x3cspan class=\x22hljs-selector-tag\x22\x3ebody\x3c\/span\x3e { \x3cspan class=\x22hljs-attribute\x22\x3eheight\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e100%\x3c\/span\x3e }\n\x3cspan class=\x22hljs-selector-class\x22\x3e.viewport\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-attribute\x22\x3ewidth\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e900px\x3c\/span\x3e;\x3cspan class=\x22hljs-attribute\x22\x3eheight\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e300px\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-attribute\x22\x3eoverflow\x3c\/span\x3e: hidden;\n  \x3cspan class=\x22hljs-attribute\x22\x3eposition\x3c\/span\x3e: relative;\n}\n\x3cspan class=\x22hljs-selector-class\x22\x3e.father\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-attribute\x22\x3eheight\x3c\/span\x3e: inherit;\n  \x3cspan class=\x22hljs-attribute\x22\x3ewidth\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e3000%\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-attribute\x22\x3etransform\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3etranslate3d\x3c\/span\x3e(0, 0, 0);\n  \x3cspan class=\x22hljs-attribute\x22\x3etransition\x3c\/span\x3e: transform \x3cspan class=\x22hljs-number\x22\x3e0.3s\x3c\/span\x3e ease-in-out;\n} \x3cspan class=\x22hljs-selector-class\x22\x3e.father\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.moving\x3c\/span\x3e { \x3cspan class=\x22hljs-attribute\x22\x3etransition\x3c\/span\x3e: none }\n\x3cspan class=\x22hljs-selector-class\x22\x3e.father\x3c\/span\x3e \x26gt; \x3cspan class=\x22hljs-selector-tag\x22\x3ediv\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-attribute\x22\x3ewidth\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e550px\x3c\/span\x3e;\x3cspan class=\x22hljs-attribute\x22\x3eheight\x3c\/span\x3e: inherit;\x3cspan class=\x22hljs-attribute\x22\x3ebackground\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e#aaa\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-attribute\x22\x3efloat\x3c\/span\x3e: left;\n}\n\x3cspan class=\x22hljs-selector-class\x22\x3e.mother\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-attribute\x22\x3ewidth\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e30px\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-attribute\x22\x3eheight\x3c\/span\x3e: inherit;\n  \x3cspan class=\x22hljs-attribute\x22\x3eline-height\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e300px\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-attribute\x22\x3etext-align\x3c\/span\x3e: center;\n  \x3cspan class=\x22hljs-attribute\x22\x3ecursor\x3c\/span\x3e: pointer;\n  \x3cspan class=\x22hljs-attribute\x22\x3euser-select\x3c\/span\x3e:none;\n  \x3cspan class=\x22hljs-attribute\x22\x3ebackground\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3ergba\x3c\/span\x3e(0,0,0,0.15);\n  \x3cspan class=\x22hljs-attribute\x22\x3eposition\x3c\/span\x3e: absolute;\x3cspan class=\x22hljs-attribute\x22\x3etop\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n} \x3cspan class=\x22hljs-selector-class\x22\x3e.mother\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.left\x3c\/span\x3e { \x3cspan class=\x22hljs-attribute\x22\x3eleft\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e } \x3cspan class=\x22hljs-selector-class\x22\x3e.mother\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.right\x3c\/span\x3e { \x3cspan class=\x22hljs-attribute\x22\x3eright\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e }\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22viewport\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22example\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22father\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3eA\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3eB\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3eC\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3eD\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3eE\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3eA\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3eB\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3eC\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3eD\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3eE\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3eA\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3eB\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3eC\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3eD\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3eE\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22mother left\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e左\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22mother right\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e右\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eLunbo\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e(element) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.viewport = element;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.father = element.children[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e];\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.photos = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.father.children;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 自设的图片宽, 包括 margin\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.photoWidth = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.photos[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].offsetWidth \x2b \x3cspan class=\x22hljs-built_in\x22\x3eparseInt\x3c\/span\x3e(getComputedStyle(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.photos[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e]).marginLeft) \x2b \x3cspan class=\x22hljs-built_in\x22\x3eparseInt\x3c\/span\x3e(getComputedStyle(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.photos[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e]).marginRight);\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ (可视宽 -焦点图片宽) \/ 2，焦点图到视口左或右的距离\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.partnerWidth = (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.viewport.clientWidth - \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.photoWidth) \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 表示接近边缘的图片 Id。接近左边缘的即第2 张图，右边缘的则为倒数第二张\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.closeLeftId = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.closeRightId = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.photos.length - \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.photosQuantity = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.photos.length \/ \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e;\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 当运动到上面两个 Id 时默默移动到的对应 Id\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 接近左边时跳转到右边块的第二张\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 接近右边则跳转到左边块的倒数第二张\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.backLeftId = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.photosQuantity - \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.backRightId = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.photosQuantity * \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 注册移动事件\x3c\/span\x3e\n    element.children[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e].addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27click\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.left.bind(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e));\n    element.children[\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e].addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27click\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.right.bind(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e));\n  }\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 计算移动距离\x3c\/span\x3e\n  countX(id) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e -id * \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.photoWidth \x2b \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.partnerWidth;\n  }\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 切换 \/ 载入 \/ 移动图片。无参数则除法求整，仅用来切换到一个瞎选的初始焦点\x3c\/span\x3e\n  load(newId = \x3cspan class=\x22hljs-built_in\x22\x3eparseInt\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.photos.length \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e) - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.father.style.transform = \x3cspan class=\x22hljs-string\x22\x3e`translate3d(\x3cspan class=\x22hljs-subst\x22\x3e${\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.countX(newId)}\x3c\/span\x3epx, 0, 0)`\x3c\/span\x3e;\n\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (newId === \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.closeLeftId){\n      newId = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.backRightId;\n    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (newId === \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.closeRightId){\n      newId = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.backLeftId;\n    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.showingId = newId;\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.father.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27transitionend\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.backMove.bind(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e, newId), {\x3cspan class=\x22hljs-attr\x22\x3eonce\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e});\n  }\n\n  backMove(newId) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.father.classList.add(\x3cspan class=\x22hljs-string\x22\x3e\x22moving\x22\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.father.style.transform = \x3cspan class=\x22hljs-string\x22\x3e`translate3d(\x3cspan class=\x22hljs-subst\x22\x3e${\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.countX(newId)}\x3c\/span\x3epx, 0, 0)`\x3c\/span\x3e;\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.father.clientWidth;\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.father.classList.remove(\x3cspan class=\x22hljs-string\x22\x3e\x22moving\x22\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.showingId = newId;\n  }\n\n  left() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.load(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.showingId - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e);\n  }\n\n  right() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.load(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.showingId \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e);\n  }\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 切换至初始焦点\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e Example = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Lunbo(\x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x22example\x22\x3c\/span\x3e));\nExample.load();\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e代码已通过测试。你需要码更多的代码，兼容各个浏览器，以及让它可以被更好地维护，然后做得更好（装）看（B）一些。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e高级选项\x3c\/h2\x3e\n\x3cp\x3e一味把\x3ccode\x3e\x26lt;script\x26gt;\x3c\/code\x3e放到\x3ccode\x3e\x26lt;\/body\x26gt;\x3c\/code\x3e前只会\x3cstrong\x3e适得其反\x3c\/strong\x3e——你需要 “加载优化” ；焦点图没有\x3cstrong\x3e特别样式\x3c\/strong\x3e不够突出——你在想 “突出焦点” ；需要给予用户更多\x3cstrong\x3e自主选择\x3c\/strong\x3e——去看看 “位置指示”\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e加载优化（重要）\x3c\/h3\x3e\n\x3cp\x3e我们会在页面载入后看到轮播图从第\x3cstrong\x3e一\x3c\/strong\x3e张转到焦点 —— 非常有损体验。可把一部分\x3ccode\x3e\x26lt;script\x26gt;\x3c\/code\x3e放到\x3ccode\x3e\x26lt;head\x26gt;\x3c\/code\x3e里或轮播图前，阻塞渲染。最好是提前计算 translateX 。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cdiv class=\x26quot;father\x26quot; id=\x26quot;father\x26quot; style=\x26quot;transform: translate3d(-3125px, 0px, 0px)\x26quot;\x3e\n\x3c\/div\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22father\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22father\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3estyle\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22transform: translate3d(-3125px, 0px, 0px)\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后删去多余初始移动代码。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e突出焦点\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22焦点 { 放大到110% }\n其他 { 半透明;正常大小 }\n.focusing { opacity: 1;transform: scale3d(1.1, 1.1, 1) }\n.father \x3e div { opacity: 0.4;background: #bbb;transition: inherit; }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22css hljs\x22\x3e\x3ccode class=\x22css\x22\x3e焦点 { 放大到110% }\n其他 { 半透明;正常大小 }\n\x3cspan class=\x22hljs-selector-class\x22\x3e.focusing\x3c\/span\x3e { \x3cspan class=\x22hljs-attribute\x22\x3eopacity\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\x3cspan class=\x22hljs-attribute\x22\x3etransform\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3escale3d\x3c\/span\x3e(1.1, 1.1, 1) }\n\x3cspan class=\x22hljs-selector-class\x22\x3e.father\x3c\/span\x3e \x26gt; \x3cspan class=\x22hljs-selector-tag\x22\x3ediv\x3c\/span\x3e { \x3cspan class=\x22hljs-attribute\x22\x3eopacity\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0.4\x3c\/span\x3e;\x3cspan class=\x22hljs-attribute\x22\x3ebackground\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e#bbb\x3c\/span\x3e;\x3cspan class=\x22hljs-attribute\x22\x3etransition\x3c\/span\x3e: inherit; }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e为\x3ccode\x3eLunbo.load(newId)\x3c\/code\x3e及\x3ccode\x3ebackMove(newId)\x3c\/code\x3e添加‘焦点样式更改’行\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22class Lunbo {\n  ...(前后文省略)\n  load(newId) {\n    ...\n    this.photos[showingId].classList.remove(\x26quot;focusing\x26quot;);\n    this.photos[newId].classList.add(\x26quot;focusing\x26quot;);\n    ...\n  }\n  ...\n  backMove(newId) {\n    this.father.classList.add(\x26quot;moving\x26quot;);\n    this.photos[newId].classList.add(\x26quot;focusing\x26quot;);\n    this.father.style.transform = `translate3d(${this.countX(newId)}px, 0, 0)`;\n\n    this.father.clientWidth;\n\n    this.father.classList.remove(\x26quot;moving\x26quot;);\n    this.photos[showingId].classList.remove(\x26quot;focusing\x26quot;);\n    this.showingId = newId;\n  }\n  ...\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eLunbo\x3c\/span\x3e \x3c\/span\x3e{\n  ...(前后文省略)\n  load(newId) {\n    ...\n    this.photos[showingId].classList.remove(\x3cspan class=\x22hljs-string\x22\x3e\x22focusing\x22\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.photos[newId].classList.add(\x3cspan class=\x22hljs-string\x22\x3e\x22focusing\x22\x3c\/span\x3e);\n    ...\n  }\n  ...\n  backMove(newId) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.father.classList.add(\x3cspan class=\x22hljs-string\x22\x3e\x22moving\x22\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.photos[newId].classList.add(\x3cspan class=\x22hljs-string\x22\x3e\x22focusing\x22\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.father.style.transform = \x3cspan class=\x22hljs-string\x22\x3e`translate3d(\x3cspan class=\x22hljs-subst\x22\x3e${\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.countX(newId)}\x3c\/span\x3epx, 0, 0)`\x3c\/span\x3e;\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.father.clientWidth;\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.father.classList.remove(\x3cspan class=\x22hljs-string\x22\x3e\x22moving\x22\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.photos[showingId].classList.remove(\x3cspan class=\x22hljs-string\x22\x3e\x22focusing\x22\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.showingId = newId;\n  }\n  ...\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cdiv class = \x26quot;father\x26quot; id=\x26quot;father\x26quot; style=\x26quot;transform: translate3d(-3125px, 0px, 0px);\x26quot;\x3e\n  ...\n  \x3cdiv class=\x26quot;focusing\x26quot;\x3e..\x3c\/div\x3e\x3c!--提前选择焦点 --\x3e\n  ...\n\x3c\/div\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e = \x3cspan class=\x22hljs-string\x22\x3e\x22father\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22father\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3estyle\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22transform: translate3d(-3125px, 0px, 0px);\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  ...\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22focusing\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e..\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!--提前选择焦点 --\x26gt;\x3c\/span\x3e\n  ...\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e位置指示 \x26amp; 切换\x3c\/h3\x3e\n\x3cp\x3e（在更新 ES6 之前，）这里的代码经过了测试。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e1. 显示\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22.seter {\n  width: 400px;height: 20px;\n  position: absolute;bottom: 0;left: calc(50% - 200px);\n  cursor: pointer;\n}\n.seter \x3e div {\n  width: 80px;height: 28px;\n  background: orange;\n  float: left;\n} .seter \x3e .on { margin-top: -8px;transition: margin 0.5s ease-in-out; }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22css hljs\x22\x3e\x3ccode class=\x22css\x22\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.seter\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-attribute\x22\x3ewidth\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e400px\x3c\/span\x3e;\x3cspan class=\x22hljs-attribute\x22\x3eheight\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e20px\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-attribute\x22\x3eposition\x3c\/span\x3e: absolute;\x3cspan class=\x22hljs-attribute\x22\x3ebottom\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\x3cspan class=\x22hljs-attribute\x22\x3eleft\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3ecalc\x3c\/span\x3e(50% - 200px);\n  \x3cspan class=\x22hljs-attribute\x22\x3ecursor\x3c\/span\x3e: pointer;\n}\n\x3cspan class=\x22hljs-selector-class\x22\x3e.seter\x3c\/span\x3e \x26gt; \x3cspan class=\x22hljs-selector-tag\x22\x3ediv\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-attribute\x22\x3ewidth\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e80px\x3c\/span\x3e;\x3cspan class=\x22hljs-attribute\x22\x3eheight\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e28px\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-attribute\x22\x3ebackground\x3c\/span\x3e: orange;\n  \x3cspan class=\x22hljs-attribute\x22\x3efloat\x3c\/span\x3e: left;\n} \x3cspan class=\x22hljs-selector-class\x22\x3e.seter\x3c\/span\x3e \x26gt; \x3cspan class=\x22hljs-selector-class\x22\x3e.on\x3c\/span\x3e { \x3cspan class=\x22hljs-attribute\x22\x3emargin-top\x3c\/span\x3e: -\x3cspan class=\x22hljs-number\x22\x3e8px\x3c\/span\x3e;\x3cspan class=\x22hljs-attribute\x22\x3etransition\x3c\/span\x3e: margin \x3cspan class=\x22hljs-number\x22\x3e0.5s\x3c\/span\x3e ease-in-out; }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cdiv class=\x26quot;viewport\x26quot; id=\x26quot;example\x26quot;\x3e\n  \x3cdiv class=\x26quot;father\x26quot; ...\x3e\n    ...\n  \x3c\/div\x3e\n  \x3cdiv class=\x26quot;mother\x26quot; id=\x26quot;left\x26quot; left\x3e左\x3c\/div\x3e\n  \x3cdiv class=\x26quot;mother\x26quot; id=\x26quot;right\x26quot; right\x3e右\x3c\/div\x3e\n  \x3cdiv class=\x26quot;seter\x26quot; id=\x26quot;seter\x26quot;\x3e\n    \x3cdiv data-seter-id=\x26quot;0\x26quot;\x3e\x3c\/div\x3e\n    \x3cdiv class=\x26quot;on\x26quot; data-seter-id=\x26quot;1\x26quot;\x3e\x3c\/div\x3e\n    \x3cdiv data-seter-id=\x26quot;2\x26quot;\x3e\x3c\/div\x3e\n    \x3cdiv data-seter-id=\x26quot;3\x26quot;\x3e\x3c\/div\x3e\n    \x3cdiv data-seter-id=\x26quot;4\x26quot;\x3e\x3c\/div\x3e\n  \x3c\/div\x3e\n\x3c\/div\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22viewport\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22example\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22father\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e...\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    ...\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22mother\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22left\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eleft\x3c\/span\x3e\x26gt;\x3c\/span\x3e左\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22mother\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22right\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eright\x3c\/span\x3e\x26gt;\x3c\/span\x3e右\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22seter\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22seter\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3edata-seter-id\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x220\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22on\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3edata-seter-id\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x221\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3edata-seter-id\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x222\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3edata-seter-id\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x223\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3edata-seter-id\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x224\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e函数 toSeterId 通过给予的图片 Id 计算对应的 seterId；\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22class Lunbo {\n  constructor(element) {\n    ...\n    this.seters = element.children[3].children;\n    ...\n\n    \/\/ 注册移动事件\n    ...\n    element.children[3].addEventListener(\x27click\x27, function (event) {\n      if (!event.target.hasAttribute(\x27data-seter-id\x27)) return;\n      this.load(Number(event.target.getAttribute(\x27data-seter-id\x27)));\n    }.bind(this))\n  }\n  ...\n  load(newId) {\n    ...\n    this.seters[this.toSeterId(showingId)].className = \x27\x27;\n    this.seters[this.toSeterId(newId)].className = \x27on\x27;\n    ...\n  }\n  ...\n  toSeterId(id) {\n    let seterId;\n    if(id \x3e= this.photosQuantity * 2) {\n      seterId = id - 2 * this.photosQuantity;\n    } else if(id \x3e= this.photosQuantity) {\n      seterId = id - this.photosQuantity;\n    }\n    return seterId;\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eLunbo\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e(element) {\n    ...\n    this.seters = element.children[\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e].children;\n    ...\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 注册移动事件\x3c\/span\x3e\n    ...\n    element.children[\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e].addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27click\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eevent\x3c\/span\x3e) \x3c\/span\x3e{\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!event.target.hasAttribute(\x3cspan class=\x22hljs-string\x22\x3e\x27data-seter-id\x27\x3c\/span\x3e)) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.load(\x3cspan class=\x22hljs-built_in\x22\x3eNumber\x3c\/span\x3e(event.target.getAttribute(\x3cspan class=\x22hljs-string\x22\x3e\x27data-seter-id\x27\x3c\/span\x3e)));\n    }.bind(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e))\n  }\n  ...\n  load(newId) {\n    ...\n    this.seters[\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.toSeterId(showingId)].className = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.seters[\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.toSeterId(newId)].className = \x3cspan class=\x22hljs-string\x22\x3e\x27on\x27\x3c\/span\x3e;\n    ...\n  }\n  ...\n  toSeterId(id) {\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e seterId;\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(id \x26gt;= \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.photosQuantity * \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e) {\n      seterId = id - \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e * \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.photosQuantity;\n    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(id \x26gt;= \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.photosQuantity) {\n      seterId = id - \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.photosQuantity;\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e seterId;\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e2. 可切换\x3c\/strong\x3e\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e每次通过指示切换时先\x3ccode\x3ebackMove\x3c\/code\x3e至中间块，后再进行移动；\x3c\/li\x3e\n\x3cli\x3e避免从第一张晃过中间数张至最后一张（最短路径）。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 继上文 “显示” 进一步更改\nclass Lunbo {\n  constructor(element) {\n    ...\n    this.magicNumber = parseInt(this.photosQuantity \/ 2);\n    ...\n    \/\/ 注册移动事件\n    ...\n    element.children[3].addEventListener(\x27click\x27, function (event) {\n      if (!event.target.hasAttribute(\x27data-seter-id\x27)) return;\n\n      const newId = Number(event.target.getAttribute(\x27data-seter-id\x27)) \x2b this.photosQuantity;\n\n      \/\/ 切换至中间块\n      this.backMove(toSeterId(showingId) \x2b this.photosQuantity);\n\n      \/\/ 最短路径选择\n      if (newId \x3e this.showingId \x2b this.magicNumber) {\n        \/\/ XXXX则移至左块\n        this.load(newId - this.photosQuantity);\n      } else if (newId \x3c this.showingId - this.magicNumber) {\n        \/\/ XXXX则移至右块\n        this.load(newId \x2b this.photosQuantity);\n      } else {\n        \/\/ 中间块不变\n        this.load(newId);\n      }\n    }.bind(this))\n  }\n  ...\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 继上文 “显示” 进一步更改\x3c\/span\x3e\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eLunbo\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e(element) {\n    ...\n    this.magicNumber = \x3cspan class=\x22hljs-built_in\x22\x3eparseInt\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.photosQuantity \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e);\n    ...\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 注册移动事件\x3c\/span\x3e\n    ...\n    element.children[\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e].addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27click\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eevent\x3c\/span\x3e) \x3c\/span\x3e{\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!event.target.hasAttribute(\x3cspan class=\x22hljs-string\x22\x3e\x27data-seter-id\x27\x3c\/span\x3e)) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n\n      \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e newId = \x3cspan class=\x22hljs-built_in\x22\x3eNumber\x3c\/span\x3e(event.target.getAttribute(\x3cspan class=\x22hljs-string\x22\x3e\x27data-seter-id\x27\x3c\/span\x3e)) \x2b \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.photosQuantity;\n\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 切换至中间块\x3c\/span\x3e\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.backMove(toSeterId(showingId) \x2b \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.photosQuantity);\n\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 最短路径选择\x3c\/span\x3e\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (newId \x26gt; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.showingId \x2b \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.magicNumber) {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ XXXX则移至左块\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.load(newId - \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.photosQuantity);\n      } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (newId \x26lt; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.showingId - \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.magicNumber) {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ XXXX则移至右块\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.load(newId \x2b \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.photosQuantity);\n      } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 中间块不变\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.load(newId);\n      }\n    }.bind(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e))\n  }\n  ...\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e(°_°ノ)\x3c\/h3\x3e\n\x3cp\x3e我突然知道\x3cstrong\x3e为什么越牛的大牛会越越来越牛\x3c\/strong\x3e了 !!!∑(ﾟДﾟノ)ノ\x3c\/p\x3e\n\x3cp\x3e其实他们本来是想写一个文档来说明，写一个动态图演示给新手的！(\x27▽\x27〃)\x3c\/p\x3e\n\x3cp\x3e但是……\x3c\/p\x3e\n\x3cp\x3e做完后他们一定会腰酸背痛……(;｀O´)o\x3c\/p\x3e\n\x3cp\x3e\/\/ 本文不再更新，除非作者开心\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>ES6! 如何制作一个高效轮播图？</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000008255568">https://segmentfault.com/a/1190000008255568</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/vsnaqjrizb/" target="_blank">https://alili.tech/archive/vsnaqjrizb/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>