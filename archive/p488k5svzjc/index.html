<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="vue-cli是如何工作的"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>vue-cli是如何工作的 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/p488k5svzjc/",
				"appid": "1613049289050283", 
				"title": "vue-cli是如何工作的 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-12T02:30:24"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/igjd4hdyuz9/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/zvafwd763s/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fp488k5svzjc%2f&text=vue-cli%e6%98%af%e5%a6%82%e4%bd%95%e5%b7%a5%e4%bd%9c%e7%9a%84"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fp488k5svzjc%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fp488k5svzjc%2f&text=vue-cli%e6%98%af%e5%a6%82%e4%bd%95%e5%b7%a5%e4%bd%9c%e7%9a%84"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fp488k5svzjc%2f&title=vue-cli%e6%98%af%e5%a6%82%e4%bd%95%e5%b7%a5%e4%bd%9c%e7%9a%84"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fp488k5svzjc%2f&is_video=false&description=vue-cli%e6%98%af%e5%a6%82%e4%bd%95%e5%b7%a5%e4%bd%9c%e7%9a%84"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=vue-cli%e6%98%af%e5%a6%82%e4%bd%95%e5%b7%a5%e4%bd%9c%e7%9a%84&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fp488k5svzjc%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fp488k5svzjc%2f&title=vue-cli%e6%98%af%e5%a6%82%e4%bd%95%e5%b7%a5%e4%bd%9c%e7%9a%84"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fp488k5svzjc%2f&title=vue-cli%e6%98%af%e5%a6%82%e4%bd%95%e5%b7%a5%e4%bd%9c%e7%9a%84"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fp488k5svzjc%2f&title=vue-cli%e6%98%af%e5%a6%82%e4%bd%95%e5%b7%a5%e4%bd%9c%e7%9a%84"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fp488k5svzjc%2f&title=vue-cli%e6%98%af%e5%a6%82%e4%bd%95%e5%b7%a5%e4%bd%9c%e7%9a%84"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">vue-cli是如何工作的</h1><div class="meta"><div class="postdate"><time datetime="2019-01-12" itemprop="datePublished">2019-01-12</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3evue-cli是Vue.js官方脚手架命令行工具，我们可以用它快速搭建Vue.js项目，vue-cli最主要的功能就是初始化项目，既可以使用官方模板，也可以使用自定义模板生成项目，而且从2.8.0版本开始，vue-cli新增了\x3ccode\x3ebuild\x3c\/code\x3e命令，能让你零配置启动一个Vue.js应用。接下来，我们一起探究一下vue-cli是如何工作的。\x3c\/p\x3e\n\x3ch4\x3e全局安装\x3c\/h4\x3e\n\x3cp\x3e首先，vue-cli是一个node包，且可以在终端直接通过\x3ccode\x3evue\x3c\/code\x3e命令调用，所以vue-cli需要全局安装，当npm全局安装一个包时，主要做了两件事：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e将包安装到全局的node_modules目录下。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e在bin目录下创建对应的命令，并链接到对应的可执行脚本。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e看一下vue-cli的package.json，可以发现如下代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n  \x26quot;bin\x26quot;: {\n    \x26quot;vue\x26quot;: \x26quot;bin\/vue\x26quot;,\n    \x26quot;vue-init\x26quot;: \x26quot;bin\/vue-init\x26quot;,\n    \x26quot;vue-list\x26quot;: \x26quot;bin\/vue-list\x26quot;,\n    \x26quot;vue-build\x26quot;: \x26quot;bin\/vue-build\x26quot;\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs json\x22\x3e\x3ccode\x3e{\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22bin\x22\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22vue\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22bin\/vue\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22vue-init\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22bin\/vue-init\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22vue-list\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22bin\/vue-list\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22vue-build\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22bin\/vue-build\x22\x3c\/span\x3e\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样在全局安装vue-cli后，npm会帮你注册\x3ccode\x3evue\x3c\/code\x3e, \x3ccode\x3evue-init\x3c\/code\x3e, \x3ccode\x3evue-list\x3c\/code\x3e, \x3ccode\x3evue-build\x3c\/code\x3e这几个命令。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000009803946\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000009803946\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch4\x3e项目结构\x3c\/h4\x3e\n\x3cp\x3evue-cli项目本身也不大，项目结构如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22.\n├── bin\n├── docs\n├── lib\n└── test\n    └── e2e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs crystal\x22\x3e\x3ccode\x3e.\n├── bin\n├── docs\n├── \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3elib\x3c\/span\x3e\x3c\/span\x3e\n└── test\n    └── e2e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3ebin\x3c\/code\x3e目录下是可执行文件，\x3ccode\x3edocs\x3c\/code\x3e下是新特性\x3ccode\x3evue build\x3c\/code\x3e的文档，\x3ccode\x3elib\x3c\/code\x3e是拆分出来的类库，\x3ccode\x3etest\x3c\/code\x3e下是测试文件，我们着重看\x3ccode\x3ebin\x3c\/code\x3e目录下的文件即可。\x3c\/p\x3e\n\x3ch4\x3ebin\/vue\x3c\/h4\x3e\n\x3cp\x3e首先看\x3ccode\x3ebin\/vue\x3c\/code\x3e，内容很简短，只有如下代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22#!\/usr\/bin\/env node\n\nrequire(\x27commander\x27)\n  .version(require(\x27..\/package\x27).version)\n  .usage(\x27\x3ccommand\x3e [options]\x27)\n  .command(\x27init\x27, \x27generate a new project from a template\x27)\n  .command(\x27list\x27, \x27list available official templates\x27)\n  .command(\x27build\x27, \x27prototype a new project\x27)\n  .parse(process.argv)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs less\x22\x3e\x3ccode\x3e#!\/\x3cspan class=\x22hljs-selector-tag\x22\x3eusr\x3c\/span\x3e\/\x3cspan class=\x22hljs-selector-tag\x22\x3ebin\x3c\/span\x3e\/\x3cspan class=\x22hljs-selector-tag\x22\x3eenv\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3enode\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-selector-tag\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27commander\x27\x3c\/span\x3e)\n  \x3cspan class=\x22hljs-selector-class\x22\x3e.version\x3c\/span\x3e(require(\x3cspan class=\x22hljs-string\x22\x3e\x27..\/package\x27\x3c\/span\x3e).version)\n  \x3cspan class=\x22hljs-selector-class\x22\x3e.usage\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;command\x26gt; [options]\x27\x3c\/span\x3e)\n  \x3cspan class=\x22hljs-selector-class\x22\x3e.command\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27init\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27generate a new project from a template\x27\x3c\/span\x3e)\n  \x3cspan class=\x22hljs-selector-class\x22\x3e.command\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27list\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27list available official templates\x27\x3c\/span\x3e)\n  \x3cspan class=\x22hljs-selector-class\x22\x3e.command\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27build\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27prototype a new project\x27\x3c\/span\x3e)\n  \x3cspan class=\x22hljs-selector-class\x22\x3e.parse\x3c\/span\x3e(process.argv)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3evue-cli是基于\x3ca href=\x22https:\/\/github.com\/tj\/commander.js\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ecommander.js\x3c\/a\x3e写的，支持\x3ca href=\x22https:\/\/github.com\/tj\/commander.js#git-style-sub-commands\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eGit-style sub-commands\x3c\/a\x3e,所以执行\x3ccode\x3evue init\x3c\/code\x3e可以达到和\x3ccode\x3evue-init\x3c\/code\x3e同样的效果。\x3c\/p\x3e\n\x3ch4\x3ebin\/vue-init\x3c\/h4\x3e\n\x3cp\x3e接下来看\x3ccode\x3ebin\/vue-init\x3c\/code\x3e，\x3ccode\x3evue-init\x3c\/code\x3e的主要作用是根据指定模板生成项目原型。文件首先是引入一些依赖模块和lib中的辅助函数，因为init命令需要接收至少一个参数，所以\x3ccode\x3evue-init\x3c\/code\x3e第一个被执行到的就是检验入参的\x3ca href=\x22https:\/\/github.com\/vuejs\/vue-cli\/blob\/master\/bin\/vue-init#L54\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e\x3ccode\x3ehelp\x3c\/code\x3e函数\x3c\/a\x3e，如果没有传入参数，则打印提示，传入参数则继续运行。\x3c\/p\x3e\n\x3cp\x3e再向下是解析参数的过程：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var template = program.args[0]\nvar hasSlash = template.indexOf(\x27\/\x27) \x3e -1\nvar rawName = program.args[1]\nvar inPlace = !rawName || rawName === \x27.\x27\nvar name = inPlace ? path.relative(\x27..\/\x27, process.cwd()) : rawName\nvar to = path.resolve(rawName || \x27.\x27)\nvar clone = program.clone || false\n\nvar tmp = path.join(home, \x27.vue-templates\x27, template.replace(\/\\\/\/g, \x27-\x27))\nif (program.offline) {\n  console.log(`\x3e Use cached template at ${chalk.yellow(tildify(tmp))}`)\n  template = tmp\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e template = program.args[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e]\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e hasSlash = template.indexOf(\x3cspan class=\x22hljs-string\x22\x3e\x27\/\x27\x3c\/span\x3e) \x26gt; \x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e rawName = program.args[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e]\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e inPlace = !rawName || rawName === \x3cspan class=\x22hljs-string\x22\x3e\x27.\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e name = inPlace ? path.relative(\x3cspan class=\x22hljs-string\x22\x3e\x27..\/\x27\x3c\/span\x3e, process.cwd()) : rawName\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e to = path.resolve(rawName || \x3cspan class=\x22hljs-string\x22\x3e\x27.\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e clone = program.clone || \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e tmp = path.join(home, \x3cspan class=\x22hljs-string\x22\x3e\x27.vue-templates\x27\x3c\/span\x3e, template.replace(\x3cspan class=\x22hljs-regexp\x22\x3e\/\\\/\/g\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27-\x27\x3c\/span\x3e))\n\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (program.offline) {\n  \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e`\x26gt; Use cached template at \x3cspan class=\x22hljs-subst\x22\x3e${chalk.yellow(tildify(tmp))}\x3c\/span\x3e`\x3c\/span\x3e)\n  template = tmp\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3etemplate\x3c\/code\x3e是模板名，第二个参数(\x3ccode\x3eprogram.args[1]\x3c\/code\x3e)\x3ccode\x3erawName \x3c\/code\x3e为项目名，如果不存在或为\x3ccode\x3e.\x3c\/code\x3e则视为在当前目录下初始化(\x3ccode\x3einPlace = true\x3c\/code\x3e)，默认项目名称\x3ccode\x3ename\x3c\/code\x3e也为当前文件夹名。\x3ccode\x3eto\x3c\/code\x3e是项目的输出路径，后面会用到。\x3ccode\x3eclone\x3c\/code\x3e参数判断是否使用git clone的方式下载模板，当模板在私有仓库时用得上。\x3ccode\x3eoffline\x3c\/code\x3e参数决定是否使用离线模式，如果使用离线模式，vue-cli会尝试去\x3ccode\x3e~\/.vue-templates\x3c\/code\x3e下获取对应的模板，可以省去漫长的\x3ccode\x3edownloading template\x3c\/code\x3e的等待时间，但是模板是不是最新的版本就无法确定了。\x3c\/p\x3e\n\x3cp\x3e前面在处理参数时会得到一个变量\x3ccode\x3eto\x3c\/code\x3e，表示即将生成的项目路径，如果已存在，则会输出警告，让用户确认是否继续，确认后执行\x3ccode\x3erun\x3c\/code\x3e函数：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22if (exists(to)) {\n  inquirer.prompt([{\n    type: \x27confirm\x27,\n    message: inPlace\n      ? \x27Generate project in current directory?\x27\n      : \x27Target directory exists. Continue?\x27,\n    name: \x27ok\x27\n  }], function (answers) {\n    if (answers.ok) {\n      run()\n    }\n  })\n} else {\n  run()\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs less\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-selector-tag\x22\x3eif\x3c\/span\x3e (exists(to)) {\n  \x3cspan class=\x22hljs-selector-tag\x22\x3einquirer\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.prompt\x3c\/span\x3e([{\n    \x3cspan class=\x22hljs-attribute\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27confirm\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attribute\x22\x3emessage\x3c\/span\x3e: inPlace\n      ? \x3cspan class=\x22hljs-string\x22\x3e\x27Generate project in current directory?\x27\x3c\/span\x3e\n      : \x3cspan class=\x22hljs-string\x22\x3e\x27Target directory exists. Continue?\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attribute\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27ok\x27\x3c\/span\x3e\n  }], \x3cspan class=\x22hljs-selector-tag\x22\x3efunction\x3c\/span\x3e (answers) {\n    \x3cspan class=\x22hljs-selector-tag\x22\x3eif\x3c\/span\x3e (answers.ok) {\n      \x3cspan class=\x22hljs-selector-tag\x22\x3erun\x3c\/span\x3e()\n    }\n  })\n} \x3cspan class=\x22hljs-selector-tag\x22\x3eelse\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-selector-tag\x22\x3erun\x3c\/span\x3e()\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/vuejs\/vue-cli\/blob\/master\/bin\/vue-init#L103\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3erun函数\x3c\/a\x3e主要检查了模板是否是本地模板，然后获取或下载模板，获取到模板后执行\x3ccode\x3egenerate\x3c\/code\x3e函数。\x3c\/p\x3e\n\x3cp\x3egenerate函数是生成项目的核心，主要代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22module.exports = function generate (name, src, dest, done) {\n  var opts = getOptions(name, src)\n  \/\/ Metalsmith读取template下所有资源\n  var metalsmith = Metalsmith(path.join(src, \x27template\x27))\n  var data = Object.assign(metalsmith.metadata(), {\n    destDirName: name,\n    inPlace: dest === process.cwd(),\n    noEscape: true\n  })\n  opts.helpers \x26amp;\x26amp; Object.keys(opts.helpers).map(function (key) {\n    Handlebars.registerHelper(key, opts.helpers[key])\n  })\n\n  var helpers = {chalk, logger}\n\n  if (opts.metalsmith \x26amp;\x26amp; typeof opts.metalsmith.before === \x27function\x27) {\n    opts.metalsmith.before(metalsmith, opts, helpers)\n  }\n  \/\/ 一次使用askQuestions, filterFiles, renderTemplateFiles处理读取的内容\n  metalsmith.use(askQuestions(opts.prompts))\n    .use(filterFiles(opts.filters))\n    .use(renderTemplateFiles(opts.skipInterpolation))\n\n  if (typeof opts.metalsmith === \x27function\x27) {\n    opts.metalsmith(metalsmith, opts, helpers)\n  } else if (opts.metalsmith \x26amp;\x26amp; typeof opts.metalsmith.after === \x27function\x27) {\n    opts.metalsmith.after(metalsmith, opts, helpers)\n  }\n  \/\/ 将处理后的文件输出\n  metalsmith.clean(false)\n    .source(\x27.\x27) \/\/ start from template root instead of `.\/src` which is Metalsmith\x27s default for `source`\n    .destination(dest)\n    .build(function (err, files) {\n      done(err)\n      if (typeof opts.complete === \x27function\x27) {\n        var helpers = {chalk, logger, files}\n        opts.complete(data, helpers)\n      } else {\n        logMessage(opts.completeMessage, data)\n      }\n    })\n\n  return data\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3egenerate\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3ename, src, dest, done\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e opts = getOptions(name, src)\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Metalsmith读取template下所有资源\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e metalsmith = Metalsmith(path.join(src, \x3cspan class=\x22hljs-string\x22\x3e\x27template\x27\x3c\/span\x3e))\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e data = \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.assign(metalsmith.metadata(), {\n    \x3cspan class=\x22hljs-attr\x22\x3edestDirName\x3c\/span\x3e: name,\n    \x3cspan class=\x22hljs-attr\x22\x3einPlace\x3c\/span\x3e: dest === process.cwd(),\n    \x3cspan class=\x22hljs-attr\x22\x3enoEscape\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n  })\n  opts.helpers \x26amp;\x26amp; \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.keys(opts.helpers).map(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3ekey\x3c\/span\x3e) \x3c\/span\x3e{\n    Handlebars.registerHelper(key, opts.helpers[key])\n  })\n\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e helpers = {chalk, logger}\n\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (opts.metalsmith \x26amp;\x26amp; \x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e opts.metalsmith.before === \x3cspan class=\x22hljs-string\x22\x3e\x27function\x27\x3c\/span\x3e) {\n    opts.metalsmith.before(metalsmith, opts, helpers)\n  }\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 一次使用askQuestions, filterFiles, renderTemplateFiles处理读取的内容\x3c\/span\x3e\n  metalsmith.use(askQuestions(opts.prompts))\n    .use(filterFiles(opts.filters))\n    .use(renderTemplateFiles(opts.skipInterpolation))\n\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e opts.metalsmith === \x3cspan class=\x22hljs-string\x22\x3e\x27function\x27\x3c\/span\x3e) {\n    opts.metalsmith(metalsmith, opts, helpers)\n  } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (opts.metalsmith \x26amp;\x26amp; \x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e opts.metalsmith.after === \x3cspan class=\x22hljs-string\x22\x3e\x27function\x27\x3c\/span\x3e) {\n    opts.metalsmith.after(metalsmith, opts, helpers)\n  }\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 将处理后的文件输出\x3c\/span\x3e\n  metalsmith.clean(\x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e)\n    .source(\x3cspan class=\x22hljs-string\x22\x3e\x27.\x27\x3c\/span\x3e) \x3cspan class=\x22hljs-comment\x22\x3e\/\/ start from template root instead of `.\/src` which is Metalsmith\x27s default for `source`\x3c\/span\x3e\n    .destination(dest)\n    .build(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eerr, files\x3c\/span\x3e) \x3c\/span\x3e{\n      done(err)\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e opts.complete === \x3cspan class=\x22hljs-string\x22\x3e\x27function\x27\x3c\/span\x3e) {\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e helpers = {chalk, logger, files}\n        opts.complete(data, helpers)\n      } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n        logMessage(opts.completeMessage, data)\n      }\n    })\n\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e data\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e首先通过\x3ca href=\x22https:\/\/github.com\/vuejs\/vue-cli\/blob\/master\/lib\/options.js#L14\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e\x3ccode\x3egetOptions\x3c\/code\x3e\x3c\/a\x3e获取了一些项目的基础配置信息，如项目名，git用户信息等。然后通过\x3ccode\x3emetalsmith\x3c\/code\x3e结合\x3ccode\x3easkQuestions\x3c\/code\x3e,\x3ccode\x3efilterFiles\x3c\/code\x3e,\x3ccode\x3erenderTemplateFiles\x3c\/code\x3e这几个中间件完成了项目模板的生成过程。\x3cstrong\x3e\x3ca href=\x22https:\/\/github.com\/segmentio\/metalsmith\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3emetalsmith\x3c\/a\x3e\x3c\/strong\x3e是一个插件化的静态网站生成器，它的一切都是通过插件运作的，这样可以很方便地为其扩展。\x3cbr\x3e通过generate函数的代码，很容易看出来生成项目的过程主要是以下几个阶段。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000009803947?w=932\x26amp;h=252\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000009803947?w=932\x26amp;h=252\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e每个过程主要用了以下库：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3egetOptions: 主要是读取模板下的\x3ccode\x3emeta.json\x3c\/code\x3e或\x3ccode\x3emeta.js\x3c\/code\x3e，\x3ccode\x3emeta.json\x3c\/code\x3e是必须的文件，为cli提供多种信息，例如自定义的helper，自定义选项，文件过滤规则等等。该如何写一个自定义模板，可以参考\x3ca href=\x22https:\/\/github.com\/vuejs\/vue-cli#writing-custom-templates-from-scratch\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e这里\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e通过Metalsmith读取模板内容，需要注意的是，此时的模板内容还是未被处理的，所以大概长这样:\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/* eslint-disable no-new *\/\nnew Vue({\n  el: \x27#app\x27,\n  \x22{{\x22#router\x22}}\x22\n  router,\n  \x22{{\x22\/router\x22}}\x22\n  \x22{{\x22#if_eq build \x26quot;runtime\x26quot;\x22}}\x22\n  render: h =\x3e h(App)\x22{{\x22#if_eq lintConfig \x26quot;airbnb\x26quot;\x22}}\x22,\x22{{\x22\/if_eq\x22}}\x22\n  \x22{{\x22\/if_eq\x22}}\x22\n  \x22{{\x22#if_eq build \x26quot;standalone\x26quot;\x22}}\x22\n  template: \x27\x3cApp\/\x3e\x27,\n  components: { App }\x22{{\x22#if_eq lintConfig \x26quot;airbnb\x26quot;\x22}}\x22,\x22{{\x22\/if_eq\x22}}\x22\n  \x22{{\x22\/if_eq\x22}}\x22\n})\x22{{\x22#if_eq lintConfig \x26quot;airbnb\x26quot;\x22}}\x22;\x22{{\x22\/if_eq\x22}}\x22\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs handlebars\x22\x3e\x3ccode\x3e\x3cspan class=\x22xml\x22\x3e\/* eslint-disable no-new *\/\nnew Vue({\n  el: \x27#app\x27,\n  \x3c\/span\x3e\x3cspan class=\x22hljs-template-tag\x22\x3e\x22{{\x22#\x3cspan class=\x22hljs-name\x22\x3erouter\x3c\/span\x3e\x22}}\x22\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e\n  router,\n  \x3c\/span\x3e\x3cspan class=\x22hljs-template-tag\x22\x3e\x22{{\x22\/\x3cspan class=\x22hljs-name\x22\x3erouter\x3c\/span\x3e\x22}}\x22\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e\n  \x3c\/span\x3e\x3cspan class=\x22hljs-template-tag\x22\x3e\x22{{\x22#\x3cspan class=\x22hljs-name\x22\x3e\x3cspan class=\x22hljs-builtin-name\x22\x3eif\x3c\/span\x3e\x3c\/span\x3e_eq build \x3cspan class=\x22hljs-string\x22\x3e\x22runtime\x22\x3c\/span\x3e\x22}}\x22\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e\n  render: h =\x26gt; h(App)\x3c\/span\x3e\x3cspan class=\x22hljs-template-tag\x22\x3e\x22{{\x22#\x3cspan class=\x22hljs-name\x22\x3e\x3cspan class=\x22hljs-builtin-name\x22\x3eif\x3c\/span\x3e\x3c\/span\x3e_eq lintConfig \x3cspan class=\x22hljs-string\x22\x3e\x22airbnb\x22\x3c\/span\x3e\x22}}\x22\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e,\x3c\/span\x3e\x3cspan class=\x22hljs-template-tag\x22\x3e\x22{{\x22\/\x3cspan class=\x22hljs-name\x22\x3e\x3cspan class=\x22hljs-builtin-name\x22\x3eif\x3c\/span\x3e\x3c\/span\x3e_eq\x22}}\x22\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e\n  \x3c\/span\x3e\x3cspan class=\x22hljs-template-tag\x22\x3e\x22{{\x22\/\x3cspan class=\x22hljs-name\x22\x3e\x3cspan class=\x22hljs-builtin-name\x22\x3eif\x3c\/span\x3e\x3c\/span\x3e_eq\x22}}\x22\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e\n  \x3c\/span\x3e\x3cspan class=\x22hljs-template-tag\x22\x3e\x22{{\x22#\x3cspan class=\x22hljs-name\x22\x3e\x3cspan class=\x22hljs-builtin-name\x22\x3eif\x3c\/span\x3e\x3c\/span\x3e_eq build \x3cspan class=\x22hljs-string\x22\x3e\x22standalone\x22\x3c\/span\x3e\x22}}\x22\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e\n  template: \x27\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eApp\x3c\/span\x3e\/\x26gt;\x3c\/span\x3e\x27,\n  components: { App }\x3c\/span\x3e\x3cspan class=\x22hljs-template-tag\x22\x3e\x22{{\x22#\x3cspan class=\x22hljs-name\x22\x3e\x3cspan class=\x22hljs-builtin-name\x22\x3eif\x3c\/span\x3e\x3c\/span\x3e_eq lintConfig \x3cspan class=\x22hljs-string\x22\x3e\x22airbnb\x22\x3c\/span\x3e\x22}}\x22\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e,\x3c\/span\x3e\x3cspan class=\x22hljs-template-tag\x22\x3e\x22{{\x22\/\x3cspan class=\x22hljs-name\x22\x3e\x3cspan class=\x22hljs-builtin-name\x22\x3eif\x3c\/span\x3e\x3c\/span\x3e_eq\x22}}\x22\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e\n  \x3c\/span\x3e\x3cspan class=\x22hljs-template-tag\x22\x3e\x22{{\x22\/\x3cspan class=\x22hljs-name\x22\x3e\x3cspan class=\x22hljs-builtin-name\x22\x3eif\x3c\/span\x3e\x3c\/span\x3e_eq\x22}}\x22\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e\n})\x3c\/span\x3e\x3cspan class=\x22hljs-template-tag\x22\x3e\x22{{\x22#\x3cspan class=\x22hljs-name\x22\x3e\x3cspan class=\x22hljs-builtin-name\x22\x3eif\x3c\/span\x3e\x3c\/span\x3e_eq lintConfig \x3cspan class=\x22hljs-string\x22\x3e\x22airbnb\x22\x3c\/span\x3e\x22}}\x22\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e;\x3c\/span\x3e\x3cspan class=\x22hljs-template-tag\x22\x3e\x22{{\x22\/\x3cspan class=\x22hljs-name\x22\x3e\x3cspan class=\x22hljs-builtin-name\x22\x3eif\x3c\/span\x3e\x3c\/span\x3e_eq\x22}}\x22\x3c\/span\x3e\x3c\/code\x3e\x3cspan class=\x22xml\x22\x3e\x3c\/span\x3e\x3c\/pre\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e获取自定义配置: 主要是通过\x3ca href=\x22https:\/\/github.com\/caolan\/async\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3easync\x3c\/a\x3e和\x3ca href=\x22https:\/\/github.com\/SBoudrias\/Inquirer.js\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3einquirer\x3c\/a\x3e的配合完成收集用户自定义配置。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3efilterFiles: 对文件进行过滤，通过\x3ca href=\x22https:\/\/github.com\/isaacs\/minimatch\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eminimatch\x3c\/a\x3e进行文件匹配。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e渲染模板：通过\x3ca href=\x22https:\/\/github.com\/tj\/consolidate.js\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3econsolidate.js\x3c\/a\x3e配合\x3ca href=\x22https:\/\/github.com\/wycats\/handlebars.js\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehandlebars\x3c\/a\x3e渲染文件。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e输出：直接输出\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e\x3ccode\x3evue-init\x3c\/code\x3e的整个工作流程大致就是这样，\x3ccode\x3evue-cli\x3c\/code\x3e作为一个便捷的命令行工具，其代码写的也简洁易懂，而且通过分析源码，可以发现其中用到的很多有意思的模块。\x3c\/p\x3e\n\x3ch4\x3ebin\/vue-list\x3c\/h4\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/vuejs\/vue-cli\/blob\/master\/bin\/vue-list\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3evue-list\x3c\/a\x3e功能很简单，拉取\x3ca href=\x22https:\/\/api.github.com\/users\/vuejs-templates\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3evuejs-templates\x3c\/a\x3e的模板信息并输出。\x3c\/p\x3e\n\x3ch4\x3ebin\/vue-build\x3c\/h4\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/vuejs\/vue-cli\/blob\/master\/bin\/vue-build\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3evue-build\x3c\/a\x3e则是通过一份webpack配置将项目跑起来，如果是入口仅是一个\x3ccode\x3e.vue\x3c\/code\x3e组件，就使用默认的\x3ccode\x3edefault-entry.es6\x3c\/code\x3e加载组件并渲染。\x3c\/p\x3e\n\x3ch4\x3e其他\x3c\/h4\x3e\n\x3cp\x3e在看vue-cli源码时，发现了\x3ca href=\x22https:\/\/github.com\/sindresorhus\/user-home\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3euser-home\x3c\/a\x3e这个模块，这个模块的内容如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x27use strict\x27;\nmodule.exports = require(\x27os-homedir\x27)();\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x27use strict\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27os-homedir\x27\x3c\/span\x3e)();\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3eos-homedir\x3c\/code\x3e这个包是一个\x3ccode\x3eos.homedir\x3c\/code\x3e的polyfill，在\x3ca href=\x22https:\/\/github.com\/sindresorhus\/user-home#why-not-just-use-the-os-home-module\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eWhy not just use the os-home module?\x3c\/a\x3e下，我看到了\x3ca href=\x22https:\/\/github.com\/sindresorhus\/ama\/issues\/10#issuecomment-117766328\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eModules are cheap in Node.js\x3c\/a\x3e这个blog。事实上\x3ca href=\x22https:\/\/github.com\/sindresorhus\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3esindresorhus\x3c\/a\x3e写了很多的One-line node modules，他也很喜欢One-line node moduels，因为模块越小，就意味着灵活性和重用性更高。当然对于One-line modules，每个人的看法不一样，毕竟也不是第一次听到\x3cstrong\x3e“就这一个函数也tm能写个包”\x3c\/strong\x3e的话了。我认为这个要因人而异，sindresorhus何许人也，很多著名开源项目的作者，发布的npm包1000\x2b，大多数他用到的模块，都是他自己写的，所以对他来说，使用各种“积木”去组建“高楼”得心应手。不过对于其他人来说，如果习惯于这种方式，可能会对这些东西依赖性变强，就像现在很多前端开发依赖框架而不重基础一样，所以我认为这种“拼积木”开发方式挺好，但最好还是要知其所以然。但是我感觉One-line modules的作用却不大，就像user-home这个模块，如果没有它，\x3ccode\x3econst home = require(\x27os-homedir\x27)();\x3c\/code\x3e也可以达到目的，可能处于强迫症的原因，user-home才诞生了吧，而且像\x3ca href=\x22https:\/\/github.com\/sindresorhus\/negative-zero\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3enegative-zero\x3c\/a\x3e这样的One-line modules,使用场景少是其一，而且也没带来什么方便，尤其是2.0版本，这个包直接使用Object.is去判断了:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x27use strict\x27;\nmodule.exports = x =\x3e Object.is(x, -0);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x27use strict\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3ex\x3c\/span\x3e =\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.is(x, \x3cspan class=\x22hljs-number\x22\x3e-0\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e不知道大家对One-line modules是什么看法？\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>vue-cli是如何工作的</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000009803941">https://segmentfault.com/a/1190000009803941</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/p488k5svzjc/" target="_blank">https://alili.tech/archive/p488k5svzjc/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>