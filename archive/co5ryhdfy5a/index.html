<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="用原生js写一个&#34;多动症&#34;的简历"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>用原生js写一个&#34;多动症&#34;的简历 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/co5ryhdfy5a/",
				"appid": "1613049289050283", 
				"title": "用原生js写一个&#34;多动症&#34;的简历 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-15T02:30:12"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/zhil8awwou/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/84nr940nody/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fco5ryhdfy5a%2f&text=%e7%94%a8%e5%8e%9f%e7%94%9fjs%e5%86%99%e4%b8%80%e4%b8%aa%22%e5%a4%9a%e5%8a%a8%e7%97%87%22%e7%9a%84%e7%ae%80%e5%8e%86"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fco5ryhdfy5a%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fco5ryhdfy5a%2f&text=%e7%94%a8%e5%8e%9f%e7%94%9fjs%e5%86%99%e4%b8%80%e4%b8%aa%22%e5%a4%9a%e5%8a%a8%e7%97%87%22%e7%9a%84%e7%ae%80%e5%8e%86"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fco5ryhdfy5a%2f&title=%e7%94%a8%e5%8e%9f%e7%94%9fjs%e5%86%99%e4%b8%80%e4%b8%aa%22%e5%a4%9a%e5%8a%a8%e7%97%87%22%e7%9a%84%e7%ae%80%e5%8e%86"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fco5ryhdfy5a%2f&is_video=false&description=%e7%94%a8%e5%8e%9f%e7%94%9fjs%e5%86%99%e4%b8%80%e4%b8%aa%22%e5%a4%9a%e5%8a%a8%e7%97%87%22%e7%9a%84%e7%ae%80%e5%8e%86"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e7%94%a8%e5%8e%9f%e7%94%9fjs%e5%86%99%e4%b8%80%e4%b8%aa%22%e5%a4%9a%e5%8a%a8%e7%97%87%22%e7%9a%84%e7%ae%80%e5%8e%86&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fco5ryhdfy5a%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fco5ryhdfy5a%2f&title=%e7%94%a8%e5%8e%9f%e7%94%9fjs%e5%86%99%e4%b8%80%e4%b8%aa%22%e5%a4%9a%e5%8a%a8%e7%97%87%22%e7%9a%84%e7%ae%80%e5%8e%86"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fco5ryhdfy5a%2f&title=%e7%94%a8%e5%8e%9f%e7%94%9fjs%e5%86%99%e4%b8%80%e4%b8%aa%22%e5%a4%9a%e5%8a%a8%e7%97%87%22%e7%9a%84%e7%ae%80%e5%8e%86"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fco5ryhdfy5a%2f&title=%e7%94%a8%e5%8e%9f%e7%94%9fjs%e5%86%99%e4%b8%80%e4%b8%aa%22%e5%a4%9a%e5%8a%a8%e7%97%87%22%e7%9a%84%e7%ae%80%e5%8e%86"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fco5ryhdfy5a%2f&title=%e7%94%a8%e5%8e%9f%e7%94%9fjs%e5%86%99%e4%b8%80%e4%b8%aa%22%e5%a4%9a%e5%8a%a8%e7%97%87%22%e7%9a%84%e7%ae%80%e5%8e%86"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">用原生js写一个&#34;多动症&#34;的简历</h1><div class="meta"><div class="postdate"><time datetime="2019-01-15" itemprop="datePublished">2019-01-15</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3e用原生js写一个\x22多动症\x22的简历\x3c\/h2\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/qianlongo.github.io\/resume-native\/dist\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e预览地址\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22https:\/\/github.com\/qianlongo\/resume-native\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e源码地址\x3c\/a\x3e\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e最近在知乎上看到@方应杭用vue写了一个\x3ca href=\x22https:\/\/zhuanlan.zhihu.com\/p\/25541520\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e会动的简历\x3c\/a\x3e，觉得挺好玩的，研究一下其实现思路，决定试试用原生js来实现。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000009269324?w=800\x26amp;h=450\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000009269324?w=800\x26amp;h=450\x22 alt=\x22http:\/\/odssgnnpf.bkt.clouddn.com\/return.gif\x22 title=\x22http:\/\/odssgnnpf.bkt.clouddn.com\/return.gif\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e会动的简历实现思路\x3c\/h2\x3e\n\x3cblockquote\x3e\x3cp\x3e这张会\x3ccode\x3e动\x3c\/code\x3e的简历，就好像一个打字员在不断地录入文字，页面呈现动态效果。又好像一个早已经录制好影片，而我们只是坐在放映机前观看。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e\x3cstrong\x3e原理分两个部分\x3c\/strong\x3e\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e页面能看见的不断跳动着的增加的文字，由innerHTML控制\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e页面的布局效果由藏在\x22背后的\x22\x3ccode\x3estyle\x3c\/code\x3e标签完成\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e\x3cstrong\x3e想象一下你要往一张网页每间隔0.1秒增加一个\x3ccode\x3e啊\x3c\/code\x3e字，是不是开个定时器，间断地往body里面塞\x3ccode\x3e啊\x3c\/code\x3e，就可以啊！没错，做到这一步就完成了原理的第一部分\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e再想象一下，在往页面里面塞\x3ccode\x3e啊\x3c\/code\x3e的时候，我还想改变啊字的字体颜色以及网页背景颜色，那应该怎么做呢，是不是执行下面的代码就可以呢，没错，只不过更改字体和背景色不是突然改变的，而是也是开个定时器，间断地往\x3ccode\x3estyle\x3c\/code\x3e标签中塞入以下代码，这样就完成了原理的第二步，是不是好简单 ???， 接下来让我们一步步完成它\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22.xxx{\n  color: blue;\n  background: red; \n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs css\x22\x3e\x3ccode class=\x22style\x22\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.xxx\x3c\/span\x3e{\n  \x3cspan class=\x22hljs-attribute\x22\x3ecolor\x3c\/span\x3e: blue;\n  \x3cspan class=\x22hljs-attribute\x22\x3ebackground\x3c\/span\x3e: red; \n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e项目搭建\x3c\/h2\x3e\n\x3cblockquote\x3e\x3cp\x3e在这个项目中我们\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e使用webpack2来完成项目的构建\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e使用yarn来处理依赖包的管理\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e使用es6的写法\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e使用部分原生dom操作api\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3estandard.js(代码风格约束利器)\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e目录结构如下\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000009269325?w=1096\x26amp;h=1338\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000009269325?w=1096\x26amp;h=1338\x22 alt=\x22目录结构\x22 title=\x22目录结构\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e最重要的几个模块分别是\x3ccode\x3eresumeEditor(简历编辑模块)\x3c\/code\x3e 、 \x3ccode\x3estylesEditor(简历样式编辑模块)\x3c\/code\x3e 、 \x3ccode\x3e以及vQuery(封装的dom操作模块)\x3c\/code\x3e\x3cbr\x3e最后\x3ccode\x3eapp.js(入口模块)\x3c\/code\x3e再将几个模块的功能结合起来完成整个项目。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3evQuery(封装的dom操作模块)\x3c\/h2\x3e\n\x3cblockquote\x3e\x3cp\x3e因为后面的几个模块都要依赖这个小模块，所以我们先简单的看下。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22class Vquery {\n  constructor (selector, context) {\n    this.elements = getEles(selector, context)\n  }\n\n  optimizeCb (callback) {\n    ...\n  }\n\n  get (index) {\n    ...\n  }\n\n  html (sHtml) {\n    ...\n  }\n\n  addClass (iClass) {\n    ...\n  }\n\n  css (styles) {\n    ...\n  }\n\n  height (h) {\n    ...\n  }\n\n  scrollTop (top) {\n    ...\n  }\n}\n\nexport default (selector, context) =\x3e {\n  return new Vquery(selector, context)\n}\n\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eVquery\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e (selector, context) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.elements = getEles(selector, context)\n  }\n\n  optimizeCb (callback) {\n    ...\n  }\n\n  get (index) {\n    ...\n  }\n\n  html (sHtml) {\n    ...\n  }\n\n  addClass (iClass) {\n    ...\n  }\n\n  css (styles) {\n    ...\n  }\n\n  height (h) {\n    ...\n  }\n\n  scrollTop (top) {\n    ...\n  }\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e (selector, context) =\x26gt; {\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Vquery(selector, context)\n}\n\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e可以看出它做的事就是封装一个构造函数Vquery，它的实例会有一些简单的dom操作方法，最后为了能够像jQuery那样使用$().funcName的形式去使用，我们导出了一个匿名函数，在匿名函数中去new Vquery\x3c\/strong\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3estylesEditor(简历样式编辑模块)\x3c\/h3\x3e\n\x3cblockquote\x3e\x3cp\x3e简历所展现的布局效果都是由这个模块完成的,核心方法是showStyles。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const showStyles = (num, callback) =\x3e {\n  let style = styles[num]\n  let length\n  let prevLength\n\n  if (!style) {\n    return\n  }\n\n  length = styles.filter((item, i) =\x3e { \/\/ 计算数组styles前n个元素的长度\n    return i \x3c= num\n  }).reduce((result, item) =\x3e {\n    result \x2b= item.length\n    return result\n  }, 0)\n\n  prevLength = length - style.length\n\n  clearInterval(timer)\n  timer = setInterval(() =\x3e {\n    let start = currentStyle.length - prevLength\n    let char = style.substring(start, start \x2b 1) || \x27\x27\n    currentStyle \x2b= char\n    if (currentStyle.length === length) { \/\/ 数组styles前n个元素已经全部塞入，则关闭定时器，并且执行外面传进来的回调，进而执行下一步操作\n      clearInterval(timer)\n      callback \x26amp;\x26amp; callback()\n    } else {\n      let top = $stylePre.height() - MAX_HEIGHT\n      if (top \x3e 0) { \/\/ 当塞入的内容已经超过了容器的高度，我们需要设置一下滚动距离才方便演示接下来的内容\n        goBottom(top)\n      }\n      $style.html(currentStyle)\n      $stylePre.html(Prism.highlight(currentStyle, Prism.languages.css))\n    }\n  }, delay)\n}\n\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e showStyles = \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3enum, callback\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e style = styles[num]\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e length\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e prevLength\n\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!style) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e\n  }\n\n  length = styles.filter(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eitem, i\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e { \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 计算数组styles前n个元素的长度\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e i \x26lt;= num\n  }).reduce(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eresult, item\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n    result \x2b= item.length\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e result\n  }, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e)\n\n  prevLength = length - style.length\n\n  clearInterval(timer)\n  timer = setInterval(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e start = currentStyle.length - prevLength\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e char = style.substring(start, start \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e) || \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e\n    currentStyle \x2b= char\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (currentStyle.length === length) { \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 数组styles前n个元素已经全部塞入，则关闭定时器，并且执行外面传进来的回调，进而执行下一步操作\x3c\/span\x3e\n      clearInterval(timer)\n      callback \x26amp;\x26amp; callback()\n    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e top = $stylePre.height() - MAX_HEIGHT\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (top \x26gt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) { \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 当塞入的内容已经超过了容器的高度，我们需要设置一下滚动距离才方便演示接下来的内容\x3c\/span\x3e\n        goBottom(top)\n      }\n      $style.html(currentStyle)\n      $stylePre.html(Prism.highlight(currentStyle, Prism.languages.css))\n    }\n  }, delay)\n}\n\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3estylesEditor(简历样式编辑模块)\x3c\/h2\x3e\n\x3cblockquote\x3e\x3cp\x3e简历编辑模块用来展示简历内容，主要会经历由markdown格式往html页面形式的转换。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const markdownToHtml = (callback) =\x3e {\n  $resumeMarkdown.css({\n    display: \x27none\x27\n  })\n  $resumeWrap.addClass(iClass)\n  $resumetag.html(marked(resumeMarkdown)) \/\/ 借助marked工具将markdown转化为html\n  callback \x26amp;\x26amp; callback() \/\/ 执行后续的回调\n}\n\nconst showResume = (callback) =\x3e { \/\/ 原理基本上同stylesEditor， 不断地往简历编辑的容器中塞入事先准备好的简历内容，当全部塞入的时候再关闭定时器，并执行后续的回调操作\n  clearInterval(timer)\n  timer = setInterval(() =\x3e {\n    currentMarkdown \x2b= resumeMarkdown.substring(start, start \x2b 1)\n    if (currentMarkdown.length === length) {\n      clearInterval(timer)\n      callback \x26amp;\x26amp; callback()\n    } else {\n      $resumeMarkdown.html(currentMarkdown)\n      start\x2b\x2b\n    }\n  }, delay)\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs php\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e markdownToHtml = (callback) =\x26gt; {\n  $resumeMarkdown.css({\n    display: \x3cspan class=\x22hljs-string\x22\x3e\x27none\x27\x3c\/span\x3e\n  })\n  $resumeWrap.addClass(iClass)\n  $resumetag.html(marked(resumeMarkdown)) \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 借助marked工具将markdown转化为html\x3c\/span\x3e\n  callback \x26amp;\x26amp; callback() \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 执行后续的回调\x3c\/span\x3e\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e showResume = (callback) =\x26gt; { \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 原理基本上同stylesEditor， 不断地往简历编辑的容器中塞入事先准备好的简历内容，当全部塞入的时候再关闭定时器，并执行后续的回调操作\x3c\/span\x3e\n  clearInterval(timer)\n  timer = setInterval(() =\x26gt; {\n    currentMarkdown \x2b= resumeMarkdown.substring(start, start \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e)\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (currentMarkdown.length === length) {\n      clearInterval(timer)\n      callback \x26amp;\x26amp; callback()\n    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n      $resumeMarkdown.html(currentMarkdown)\n      start\x2b\x2b\n    }\n  }, delay)\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3eapp(入口模块)\x3c\/h2\x3e\n\x3cblockquote\x3e\x3cp\x3e最后由app入口模块将以上几个模块整合完成项目的功能，我们找出其中的核心代码来, ?，你没看错，传说中的回调地狱，亮瞎了我的狗眼啊。想必大家和我一样都是不愿意看到这坨恶心的代码的，但对于处理异步问题，回调又的确是一直以来的解决方案之一。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e\x3cstrong\x3e因为定时器的操作是异步行为，而我们的简历生成过程会涉及到多个异步操作，所以为了看到如首页预览链接的效果，必须等前一个步骤完成之后，才能执行下一步步骤，这里首先使用的回调函数的解决方案，大家可以从github上拉取代码，分别切换以下几个分支来查看不同的解决方案\x3c\/strong\x3e\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3emaster(使用回调函数处理)\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3epromise(使用promise处理)\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3egenerator-thunk(使用generator \x2b thunk函数处理)\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3egenerator-promise(使用generator \x2b promise处理)\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3easync(使用async处理)\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000009269326?w=472\x26amp;h=274\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000009269326?w=472\x26amp;h=274\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22showStyles(0, () =\x3e {\n  showResume(() =\x3e {\n    showStyles(1, () =\x3e {\n      markdownToHtml(() =\x3e {\n        showStyles(2)\n      })\n    })\n  })\n})\n\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3eshowStyles(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, () =\x26gt; {\n  showResume(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n    showStyles(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, () =\x26gt; {\n      markdownToHtml(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        showStyles(\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e)\n      })\n    })\n  })\n})\n\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3e解决回调地狱之promise\x3c\/h2\x3e\n\x3cblockquote\x3e\x3cp\x3e回调方式能够解决异步操作问题，但是代码写起来非常的不美观，可读性差，代码呈横向发展趋势...伟大的程序员们开疆扩土发明了promise的解决方案。我们来看一下promise分支中app模块最终的写法\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22showStylesWrap(0)\n  .then(showResumeWrap)\n  .then(showStylesWrap.bind(null, 1))\n  .then(markdownToHtmlWrap)\n  .then(showStylesWrap.bind(null, 2))\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3eshowStylesWrap(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e)\n  .then(showResumeWrap)\n  .then(showStylesWrap.bind(\x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e))\n  .then(markdownToHtmlWrap)\n  .then(showStylesWrap.bind(\x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e))\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e可以看到，代码清爽了很多，纵向发展，应用第一步第二步第三步...一眼就能够看出来，当然实现的逻辑是将原来的相关的模块用Promise包装起来，并且在原来回调函数执行的地方resolve即可，详细实现，欢迎查看项目源码\x3c\/strong\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3e解决回调地狱之generator-thunk，generator-promise\x3c\/h2\x3e\n\x3cblockquote\x3e\x3cp\x3e两种方式比较类似，都要用到es6中的generator。关于什么是generator，thunk函数，可以查看软大神关于\x3ca href=\x22http:\/\/es6.ruanyifeng.com\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eECMAScript 6 入门\x3c\/a\x3e,这里简要地讲述一下，其如何处理异步操作问题使得可以将异步行为写起来如同步般爽。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function timeOut1 () {\n  setTimeout(() =\x3e {\n    console.log(1111)\n  }, 1000)\n}\n\nfunction timeOut2 () {\n  setTimeout(() =\x3e {\n    console.log(2222)\n  }, 200)\n}\n\nfunction * gen () {\n  yield timeOut1()\n  yield timeOut2()\n}\n\nlet g = gen()\ng.next()\ng.next()\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3etimeOut1\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  setTimeout(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-number\x22\x3e1111\x3c\/span\x3e)\n  }, \x3cspan class=\x22hljs-number\x22\x3e1000\x3c\/span\x3e)\n}\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3etimeOut2\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  setTimeout(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-number\x22\x3e2222\x3c\/span\x3e)\n  }, \x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e)\n}\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e * \x3cspan class=\x22hljs-title\x22\x3egen\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3eyield\x3c\/span\x3e timeOut1()\n  \x3cspan class=\x22hljs-keyword\x22\x3eyield\x3c\/span\x3e timeOut2()\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e g = gen()\ng.next()\ng.next()\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e上面的代码在过了200毫秒会log出2222，过了1秒钟之后log出1111\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e这，要?了，你不是说generator写起来同步可以解决异步问题吗，为毛这里timeOut2没有在timeOut1之后执行呢，毕竟gen函数中看起来是希望这样的嘛。\x3c\/p\x3e\n\x3cp\x3e其实不然，timeOut2啥时候执行取决于\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22g.next()\ng.next()\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3eg.next()\ng.next()\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e试想两个函数几乎同时执行，那在定时器中当然是200毫秒后的timeOut2先打印出2222来，但是有没有办法，让timeOut2在timeOut1后执行呢？答案是有的\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function timeOut1 () {\n  setTimeout(() =\x3e {\n    console.log(1111)\n    g.next()\n  }, 1000)\n}\n\nfunction timeOut2 () {\n  setTimeout(() =\x3e {\n    console.log(2222)\n  }, 200)\n}\n\nfunction * gen () {\n  yield timeOut1()\n  yield timeOut2()\n}\n\nlet g = gen()\ng.next()\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3etimeOut1\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  setTimeout(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-number\x22\x3e1111\x3c\/span\x3e)\n    g.next()\n  }, \x3cspan class=\x22hljs-number\x22\x3e1000\x3c\/span\x3e)\n}\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3etimeOut2\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  setTimeout(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-number\x22\x3e2222\x3c\/span\x3e)\n  }, \x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e)\n}\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e * \x3cspan class=\x22hljs-title\x22\x3egen\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3eyield\x3c\/span\x3e timeOut1()\n  \x3cspan class=\x22hljs-keyword\x22\x3eyield\x3c\/span\x3e timeOut2()\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e g = gen()\ng.next()\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e可以看到我们在timeOut1执行完成之后，再将指针指向下一个位置，即timeOut2再去执行，这样的结果就和gen函数中两个yield的写起来同步感觉一样了。但是含有一个问题，如果涉及到很多个异步操作，我们是很难通过上面的方式将异步流程管理起来的。于是我们需要做下面一件事\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function co (fn) {\n  var gen = fn();\n\n  function next(err, data) {\n    var result = gen.next(data);\n    if (result.done) return;\n    result.value(next); \/\/ thunk和promise不同地方之一在这里， promise是result.value.then(next)\n  }\n\n  next();\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eco\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3efn\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e gen = fn();\n\n  \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3enext\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eerr, data\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e result = gen.next(data);\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (result.done) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n    result.value(next); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ thunk和promise不同地方之一在这里， promise是result.value.then(next)\x3c\/span\x3e\n  }\n\n  next();\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e内部的next函数就是 thunk 的回调函数。next函数先将指针移到 generator 函数的下一步（gen.next方法），然后判断 generator 函数是否结束（result.done属性），如果没结束，就将next函数再传入 thunk 函数（result.value属性），否则就直接退出。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e最后我们在看一下通过co函数的写法完成上面的例子\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function timeOut1() {\n  return (callback) =\x3e {\n    setTimeout(() =\x3e {\n      console.log(1111)\n      callback()\n    }, 1000)\n  }\n\n}\n\nfunction timeOut2() {\n  return (callback) =\x3e {\n    setTimeout(() =\x3e {\n      console.log(2222)\n      callback()\n    }, 200)\n  }\n}\n\nfunction co(fn) {\n  var gen = fn();\n\n  function next(err, data) {\n    var result = gen.next(data);\n    if (result.done) return;\n    result.value(next); \/\/ thunk和promise不同地方之一在这里， promise是result.value.then(next)\n  }\n\n  next();\n}\n\nco(function * () {\n  yield timeOut1()\n  yield timeOut2()\n})\n\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3etimeOut1\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3ecallback\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n    setTimeout(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-number\x22\x3e1111\x3c\/span\x3e)\n      callback()\n    }, \x3cspan class=\x22hljs-number\x22\x3e1000\x3c\/span\x3e)\n  }\n\n}\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3etimeOut2\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3ecallback\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n    setTimeout(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-number\x22\x3e2222\x3c\/span\x3e)\n      callback()\n    }, \x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e)\n  }\n}\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eco\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3efn\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e gen = fn();\n\n  \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3enext\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eerr, data\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e result = gen.next(data);\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (result.done) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n    result.value(next); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ thunk和promise不同地方之一在这里， promise是result.value.then(next)\x3c\/span\x3e\n  }\n\n  next();\n}\n\nco(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e * (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3eyield\x3c\/span\x3e timeOut1()\n  \x3cspan class=\x22hljs-keyword\x22\x3eyield\x3c\/span\x3e timeOut2()\n})\n\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader9\x22\x3e解决回调地狱之async\x3c\/h2\x3e\n\x3cblockquote\x3e\x3cp\x3easync其实就是generator函数的语法糖。大家如果把generator弄明白了，使用它一定不再话下，关于这个项目的用法，欢迎查看async分支源代码，这里不再赘述。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader10\x22\x3e尾述\x3c\/h2\x3e\n\x3cblockquote\x3e\x3cp\x3e本文中可能存在阐述不当的地方，欢迎大家指正。???，最后点个赞，点个star好不好呀。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/qianlongo\/resume-native\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e源码地址\x3c\/a\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>用原生js写一个&rdquo;多动症&rdquo;的简历</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000009269321">https://segmentfault.com/a/1190000009269321</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/co5ryhdfy5a/" target="_blank">https://alili.tech/archive/co5ryhdfy5a/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>