<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="介绍 Flashback，一个互联网模拟工具"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>介绍 Flashback，一个互联网模拟工具 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/t9ppv5ukm8h/",
				"appid": "1613049289050283", 
				"title": "介绍 Flashback，一个互联网模拟工具 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-22T02:30:07"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/dmbc9wijdz9/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/yfhgsn93j5a/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2ft9ppv5ukm8h%2f&text=%e4%bb%8b%e7%bb%8d%20Flashback%ef%bc%8c%e4%b8%80%e4%b8%aa%e4%ba%92%e8%81%94%e7%bd%91%e6%a8%a1%e6%8b%9f%e5%b7%a5%e5%85%b7"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2ft9ppv5ukm8h%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2ft9ppv5ukm8h%2f&text=%e4%bb%8b%e7%bb%8d%20Flashback%ef%bc%8c%e4%b8%80%e4%b8%aa%e4%ba%92%e8%81%94%e7%bd%91%e6%a8%a1%e6%8b%9f%e5%b7%a5%e5%85%b7"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2ft9ppv5ukm8h%2f&title=%e4%bb%8b%e7%bb%8d%20Flashback%ef%bc%8c%e4%b8%80%e4%b8%aa%e4%ba%92%e8%81%94%e7%bd%91%e6%a8%a1%e6%8b%9f%e5%b7%a5%e5%85%b7"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2ft9ppv5ukm8h%2f&is_video=false&description=%e4%bb%8b%e7%bb%8d%20Flashback%ef%bc%8c%e4%b8%80%e4%b8%aa%e4%ba%92%e8%81%94%e7%bd%91%e6%a8%a1%e6%8b%9f%e5%b7%a5%e5%85%b7"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e4%bb%8b%e7%bb%8d%20Flashback%ef%bc%8c%e4%b8%80%e4%b8%aa%e4%ba%92%e8%81%94%e7%bd%91%e6%a8%a1%e6%8b%9f%e5%b7%a5%e5%85%b7&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2ft9ppv5ukm8h%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2ft9ppv5ukm8h%2f&title=%e4%bb%8b%e7%bb%8d%20Flashback%ef%bc%8c%e4%b8%80%e4%b8%aa%e4%ba%92%e8%81%94%e7%bd%91%e6%a8%a1%e6%8b%9f%e5%b7%a5%e5%85%b7"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2ft9ppv5ukm8h%2f&title=%e4%bb%8b%e7%bb%8d%20Flashback%ef%bc%8c%e4%b8%80%e4%b8%aa%e4%ba%92%e8%81%94%e7%bd%91%e6%a8%a1%e6%8b%9f%e5%b7%a5%e5%85%b7"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2ft9ppv5ukm8h%2f&title=%e4%bb%8b%e7%bb%8d%20Flashback%ef%bc%8c%e4%b8%80%e4%b8%aa%e4%ba%92%e8%81%94%e7%bd%91%e6%a8%a1%e6%8b%9f%e5%b7%a5%e5%85%b7"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2ft9ppv5ukm8h%2f&title=%e4%bb%8b%e7%bb%8d%20Flashback%ef%bc%8c%e4%b8%80%e4%b8%aa%e4%ba%92%e8%81%94%e7%bd%91%e6%a8%a1%e6%8b%9f%e5%b7%a5%e5%85%b7"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">介绍 Flashback，一个互联网模拟工具</h1><div class="meta"><div class="postdate"><time datetime="2019-01-22" itemprop="datePublished">2019-01-22</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n            \x3ch1\x3e\x3ca href=\x22#介绍-flashback一个互联网模拟工具\x22\x3e\x3c\/a\x3e介绍 Flashback，一个互联网模拟工具\x3c\/h1\x3e\n\x3cblockquote\x3e\n\x3cp\x3eFlashback 用于测试目的来模拟 HTTP 和 HTTPS 资源，如 Web 服务和 REST API。\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/camo.githubusercontent.com\/53a4804fb4ca54265a30d72d75ba699f38c6f9b5\/68747470733a2f2f6f70656e736f757263652e636f6d2f73697465732f64656661756c742f66696c65732f7374796c65732f696d6167652d66756c6c2d73697a652f7075626c69632f6c6561642d696d616765732f4f5344435f496e7465726e65745f4361626c65735f353230783239325f303631345f52442e706e673f69746f6b3d74726a5957673667\x22\x3e\x3cimg src=\x22https:\/\/p0.ssl.qhimg.com\/t01796d569915806c0f.png\x22 alt=\x22Introducing Flashback, an Internet mocking tool\x22 title=\x22Introducing Flashback, an Internet mocking tool\x22\x3e\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e在 LinkedIn，我们经常开发需要与第三方网站交互的 Web 应用程序。我们还采用自动测试，以确保我们的软件在发布到生产环境之前的质量。然而，测试只是在它可靠时才有用。\x3c\/p\x3e\n\x3cp\x3e考虑到这一点，有外部依赖关系的测试是有很大的问题的，例如在第三方网站上。这些外部网站可能会没有通知地发生改变、遭受停机，或者由于互联网的不可靠性暂时无法访问。\x3c\/p\x3e\n\x3cp\x3e如果我们的一个测试依赖于能够与第三方网站通信，那么任何故障的原因都很难确定。失败可能是因为 LinkedIn 的内部变更、第三方网站的维护人员进行的外部变更，或网络基础设施的问题。你可以想像，与第三方网站的交互可能会有很多失败的原因，因此你可能想要知道，我将如何处理这个问题？\x3c\/p\x3e\n\x3cp\x3e好消息是有许多互联网模拟工具可以帮助。其中一个是 \x3ca href=\x22https:\/\/github.com\/betamaxteam\/betamax\x22\x3eBetamax\x3c\/a\x3e。它通过拦截 Web 应用程序发起的 HTTP 连接，之后进行重放的方式来工作。对于测试，Betamax 可以用以前记录的响应替换 HTTP 上的任何交互，它可以非常可靠地提供这个服务。\x3c\/p\x3e\n\x3cp\x3e最初，我们选择在 LinkedIn 的自动化测试中使用 Betamax。它工作得很好，但我们遇到了一些问题：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e出于安全考虑，我们的测试环境没有接入互联网。然而，与大多数代理一样，Betamax 需要 Internet 连接才能正常运行。\x3c\/li\x3e\n\x3cli\x3e我们有许多需要使用身份验证协议的情况，例如 OAuth 和 OpenId。其中一些协议需要通过 HTTP 进行复杂的交互。为了模拟它们，我们需要一个复杂的模型来捕获和重放请求。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e为了应对这些挑战，我们决定基于 Betamax 的思路，构建我们自己的互联网模拟工具，名为 Flashback。我们也很自豪地宣布 Flashback 现在是开源的。\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#什么是-flashback\x22\x3e\x3c\/a\x3e什么是 Flashback?\x3c\/h3\x3e\n\x3cp\x3eFlashback 用于测试目的来模拟 HTTP 和 HTTPS 资源，如 Web 服务和 \x3ca href=\x22https:\/\/en.wikipedia.org\/wiki\/Representational_state_transfer\x22\x3eREST\x3c\/a\x3e API。它记录 HTTP\/HTTPS 请求并重放以前记录的 HTTP 事务 - 我们称之为“场景scene”，这样就不需要连接到 Internet 才能完成测试。\x3c\/p\x3e\n\x3cp\x3eFlashback 也可以根据请求的部分匹配重放场景。它使用的是“匹配规则”。匹配规则将传入请求与先前记录的请求相关联，然后将其用于生成响应。例如，以下代码片段实现了一个基本匹配规则，其中测试方法“匹配”\x3ca href=\x22https:\/\/gist.github.com\/anonymous\/91637854364287b38897c0970aad7451\x22\x3e此 URL\x3c\/a\x3e的传入请求。\x3c\/p\x3e\n\x3cp\x3eHTTP 请求通常包含 URL、方法、标头和正文。Flashback 允许为这些组件的任意组合定义匹配规则。Flashback 还允许用户向 URL 查询参数，标头和正文添加白名单或黑名单标签。\x3c\/p\x3e\n\x3cp\x3e例如，在 OAuth 授权流程中，请求查询参数可能如下所示：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs ini\x22\x3e\x3cspan class=\x22hljs-attr\x22\x3eoauth_consumer_key\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22jskdjfljsdklfjlsjdfs\x22\x3c\/span\x3e,\n\x3cspan class=\x22hljs-attr\x22\x3eoauth_nonce\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22ajskldfjalksjdflkajsdlfjasldfja;lsdkj\x22\x3c\/span\x3e,\n\x3cspan class=\x22hljs-attr\x22\x3eoauth_signature\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22asdfjaklsdjflasjdflkajsdklf\x22\x3c\/span\x3e,\n\x3cspan class=\x22hljs-attr\x22\x3eoauth_signature_method\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22HMAC-SHA1\x22\x3c\/span\x3e,\n\x3cspan class=\x22hljs-attr\x22\x3eoauth_timestamp\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x221318622958\x22\x3c\/span\x3e,\n\x3cspan class=\x22hljs-attr\x22\x3eoauth_token\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22asdjfkasjdlfajsdklfjalsdjfalksdjflajsdlfa\x22\x3c\/span\x3e,\n\x3cspan class=\x22hljs-attr\x22\x3eoauth_version\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x221.0\x22\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e这些值许多将随着每个请求而改变，因为 OAuth 要求客户端每次为 \x3ccode\x3eoauth_nonce\x3c\/code\x3e 生成一个新值。在我们的测试中，我们需要验证 \x3ccode\x3eoauth_consumer_key\x3c\/code\x3e、\x3ccode\x3eoauth_signature_method\x3c\/code\x3e 和 \x3ccode\x3eoauth_version\x3c\/code\x3e 的值，同时确保 \x3ccode\x3eoauth_nonce\x3c\/code\x3e、\x3ccode\x3eoauth_signature\x3c\/code\x3e、\x3ccode\x3eoauth_timestamp\x3c\/code\x3e 和 \x3ccode\x3eoauth_token\x3c\/code\x3e 存在于请求中。Flashback 使我们有能力创建我们自己的匹配规则来实现这一目标。此功能允许我们测试随时间变化的数据、签名、令牌等的请求，而客户端没有任何更改。\x3c\/p\x3e\n\x3cp\x3e这种灵活的匹配和在不连接互联网的情况下运行的功能是 Flashback 与其他模拟解决方案不同的特性。其他一些显著特点包括：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3eFlashback 是一种跨平台和跨语言解决方案，能够测试 JVM（Java虚拟机）和非 JVM（C\x2b\x2b、Python 等）应用程序。\x3c\/li\x3e\n\x3cli\x3eFlashback 可以随时生成 SSL\/TLS 证书，以模拟 HTTPS 请求的安全通道。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch3\x3e\x3ca href=\x22#如何记录-http-事务\x22\x3e\x3c\/a\x3e如何记录 HTTP 事务\x3c\/h3\x3e\n\x3cp\x3e使用 Flashback 记录 HTTP 事务以便稍后重放是一个比较简单的过程。在我们深入了解流程之前，我们首先列出一些术语：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3ccode\x3eScene\x3c\/code\x3e ：场景存储以前记录的 HTTP 事务 (以 JSON 格式)，它可以在以后重放。例如，这里是一个\x3ca href=\x22https:\/\/gist.github.com\/anonymous\/17d226050d8a9b79746a78eda9292382\x22\x3eFlashback 场景\x3c\/a\x3e示例。\x3c\/li\x3e\n\x3cli\x3e\x3ccode\x3eRoot Path\x3c\/code\x3e ：根路径是包含 Flashback 场景数据的目录的文件路径。\x3c\/li\x3e\n\x3cli\x3e\x3ccode\x3eScene Name\x3c\/code\x3e ：场景名称是给定场景的名称。\x3c\/li\x3e\n\x3cli\x3e\x3ccode\x3eScene Mode\x3c\/code\x3e ：场景模式是使用场景的模式, 即“录制”或“重放”。\x3c\/li\x3e\n\x3cli\x3e\x3ccode\x3eMatch Rule\x3c\/code\x3e ：匹配规则确定传入的客户端请求是否与给定场景的内容匹配的规则。\x3c\/li\x3e\n\x3cli\x3e\x3ccode\x3eFlashback Proxy\x3c\/code\x3e ：Flashback 代理是一个 HTTP 代理，共有录制和重放两种操作模式。\x3c\/li\x3e\n\x3cli\x3e\x3ccode\x3eHost\x3c\/code\x3e 和 \x3ccode\x3ePort\x3c\/code\x3e ：代理主机和端口。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e为了录制场景，你必须向目的地址发出真实的外部请求，然后 HTTPS 请求和响应将使用你指定的匹配规则存储在场景中。在录制时，Flashback 的行为与典型的 MITM（中间人）代理完全相同 - 只有在重放模式下，连接流和数据流仅限于客户端和代理之间。\x3c\/p\x3e\n\x3cp\x3e要实际看下 Flashback，让我们创建一个场景，通过执行以下操作捕获与 example.org 的交互：\x3c\/p\x3e\n\x3cp\x3e1、 取回 Flashback 的源码：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs crmsh\x22\x3egit \x3cspan class=\x22hljs-keyword\x22\x3eclone\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ehttps\x3c\/span\x3e:\/\/github.com\/linkedin\/flashback.git\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e2、 启动 Flashback 管理服务器：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs stylus\x22\x3e.\/startAdminServer\x3cspan class=\x22hljs-selector-class\x22\x3e.sh\x3c\/span\x3e -port \x3cspan class=\x22hljs-number\x22\x3e1234\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e3、 注意上面的 Flashback 将在本地端口 5555 上启动录制模式。匹配规则需要完全匹配（匹配 HTTP 正文、标题和 URL）。场景将存储在 \x3ccode\x3e\/tmp\/test1\x3c\/code\x3e 下。\x3c\/p\x3e\n\x3cp\x3e4、 Flashback 现在可以记录了，所以用它来代理对 example.org 的请求：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs groovy\x22\x3ecurl \x3cspan class=\x22hljs-string\x22\x3ehttp:\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/www.example.org -x localhost:5555 -X GET\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e5、 Flashback 可以（可选）在一个记录中记录多个请求。要完成录制，\x3ca href=\x22https:\/\/gist.github.com\/anonymous\/f899ebe7c4246904bc764b4e1b93c783\x22\x3e关闭 Flashback\x3c\/a\x3e。\x3c\/p\x3e\n\x3cp\x3e6、 要验证已记录的内容，我们可以在输出目录（\x3ccode\x3e\/tmp\/test1\x3c\/code\x3e）中查看场景的内容。它应该\x3ca href=\x22https:\/\/gist.github.com\/sf1152\/c91d6d62518fe62cc87157c9ce0e60cf\x22\x3e包含以下内容\x3c\/a\x3e。\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/gist.github.com\/anonymous\/fdd972f1dfc7363f4f683a825879ce19\x22\x3e在 Java 代码中使用 Flashback\x3c\/a\x3e也很容易。\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#如何重放-http-事务\x22\x3e\x3c\/a\x3e如何重放 HTTP 事务\x3c\/h3\x3e\n\x3cp\x3e要重放先前存储的场景，请使用与录制时使用的相同的基本设置。唯一的区别是\x3ca href=\x22https:\/\/gist.github.com\/anonymous\/ae1c519a974c3bc7de2a925254b6550e\x22\x3e将“场景模式”设置为上述步骤 3 中的“播放”\x3c\/a\x3e。\x3c\/p\x3e\n\x3cp\x3e验证响应来自场景而不是外部源的一种方法，是在你执行步骤 1 到 6 时临时禁用 Internet 连接。另一种方法是修改场景文件，看看响应是否与文件中的相同。\x3c\/p\x3e\n\x3cp\x3e这是 \x3ca href=\x22https:\/\/gist.github.com\/anonymous\/edcc1d60847d51b159c8fd8a8d0a5f8b\x22\x3eJava 中的一个例子\x3c\/a\x3e。\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#如何记录并重播-https-事务\x22\x3e\x3c\/a\x3e如何记录并重播 HTTPS 事务\x3c\/h3\x3e\n\x3cp\x3e使用 Flashback 记录并重放 HTTPS 事务的过程非常类似于 HTTP 事务的过程。但是，需要特别注意用于 HTTPS SSL 组件的安全证书。为了使 Flashback 作为 MITM 代理，必须创建证书颁发机构（CA）证书。在客户端和 Flashback 之间创建安全通道时将使用此证书，并允许 Flashback 检查其代理的 HTTPS 请求中的数据。然后将此证书存储为受信任的源，以便客户端在进行调用时能够对 Flashback 进行身份验证。有关如何创建证书的说明，有很多\x3ca href=\x22https:\/\/jamielinux.com\/docs\/openssl-certificate-authority\/introduction.html\x22\x3e类似这样\x3c\/a\x3e的资源是非常有帮助的。大多数公司都有自己的管理和获取证书的内部策略 - 请务必用你们自己的方法。\x3c\/p\x3e\n\x3cp\x3e这里值得一提的是，Flashback 仅用于测试目的。你可以随时随地将 Flashback 与你的服务集成在一起，但需要注意的是，Flashback 的记录功能将需要存储所有的数据，然后在重放模式下使用它。我们建议你特别注意确保不会无意中记录或存储敏感成员数据。任何可能违反贵公司数据保护或隐私政策的行为都是你的责任。\x3c\/p\x3e\n\x3cp\x3e一旦涉及安全证书，HTTP 和 HTTPS 之间在记录设置方面的唯一区别是添加了一些其他参数。\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3ccode\x3eRootCertificateInputStream\x3c\/code\x3e： 表示 CA 证书文件路径或流。\x3c\/li\x3e\n\x3cli\x3e\x3ccode\x3eRootCertificatePassphrase\x3c\/code\x3e： 为 CA 证书创建的密码。\x3c\/li\x3e\n\x3cli\x3e\x3ccode\x3eCertificateAuthority\x3c\/code\x3e： CA 证书的属性\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/gist.github.com\/anonymous\/091d13179377c765f63d7bf4275acc11\x22\x3e查看 Flashback 中用于记录 HTTPS 事务的代码\x3c\/a\x3e，它包括上述条目。\x3c\/p\x3e\n\x3cp\x3e用 Flashback 重放 HTTPS 事务的过程与录制相同。唯一的区别是场景模式设置为“播放”。这在\x3ca href=\x22https:\/\/gist.github.com\/anonymous\/ec6a0fd07aab63b7369bf8fde69c1f16\x22\x3e此代码\x3c\/a\x3e中演示。\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#支持动态修改\x22\x3e\x3c\/a\x3e支持动态修改\x3c\/h3\x3e\n\x3cp\x3e为了测试灵活性，Flashback 允许你动态地更改场景和匹配规则。动态更改场景允许使用不同的响应（如 \x3ccode\x3esuccess\x3c\/code\x3e、\x3ccode\x3etime_out\x3c\/code\x3e、\x3ccode\x3erate_limit\x3c\/code\x3e 等）测试相同的请求。\x3ca href=\x22https:\/\/gist.github.com\/anonymous\/1f1660280acb41277fbe2c257bab2217\x22\x3e场景更改\x3c\/a\x3e仅适用于我们已经 POST 更新外部资源的场景。以下图为例。\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/camo.githubusercontent.com\/9be5ad9c426fb58fedc4ff42b7eba358740c0172\/68747470733a2f2f6f70656e736f757263652e636f6d2f73697465732f64656661756c742f66696c65732f6368616e67696e677363656e65732e6a7067\x22\x3e\x3cimg src=\x22https:\/\/p0.ssl.qhimg.com\/t01af848bd562246552.jpg\x22 alt=\x22Scenarios where we have POSTed data to update the external resource.\x22 title=\x22Scenarios where we have POSTed data to update the external resource.\x22\x3e\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e能够动态\x3ca href=\x22https:\/\/gist.github.com\/anonymous\/0683c43f31bd916b76aff348ff87f51b\x22\x3e更改匹配规则\x3c\/a\x3e可以使我们测试复杂的场景。例如，我们有一个使用情况，要求我们测试 Twitter 的公共和私有资源的 HTTP 调用。对于公共资源，HTTP 请求是不变的，所以我们可以使用 “MatchAll” 规则。然而，对于私人资源，我们需要使用 OAuth 消费者密码和 OAuth 访问令牌来签名请求。这些请求包含大量具有不可预测值的参数，因此静态 MatchAll 规则将无法正常工作。\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#使用案例\x22\x3e\x3c\/a\x3e使用案例\x3c\/h3\x3e\n\x3cp\x3e在 LinkedIn，Flashback 主要用于在集成测试中模拟不同的互联网提供商，如下图所示。第一张图展示了 LinkedIn 生产数据中心内的一个内部服务，通过代理层，与互联网提供商（如 Google）进行交互。我们想在测试环境中测试这个内部服务。\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/camo.githubusercontent.com\/fd2997bacd65c482df5c9b40a535fe3e1736d891\/68747470733a2f2f6f70656e736f757263652e636f6d2f73697465732f64656661756c742f66696c65732f74657374696e67656e7669726f6e6d656e742e6a7067\x22\x3e\x3cimg src=\x22https:\/\/p0.ssl.qhimg.com\/t01eda2eea9a9af465f.jpg\x22 alt=\x22Testing this internal service in a testing environment.\x22 title=\x22Testing this internal service in a testing environment.\x22\x3e\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e第二和第三张图表展示了我们如何在不同的环境中录制和重放场景。记录发生在我们的开发环境中，用户在代理启动的同一端口上启动 Flashback。从内部服务到提供商的所有外部请求将通过 Flashback 而不是我们的代理层。在必要场景得到记录后，我们可以将其部署到我们的测试环境中。\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/camo.githubusercontent.com\/5581aeb16d41bb9aacc5c1d85b2965425bdd9d0f\/68747470733a2f2f6f70656e736f757263652e636f6d2f73697465732f64656661756c742f66696c65732f74657374656e7669726f6e6d656e74696d616765322e6a7067\x22\x3e\x3cimg src=\x22https:\/\/p0.ssl.qhimg.com\/t014614c80b37eaa431.jpg\x22 alt=\x22After the necessary scenes get recorded, we can deploy them to our test environment.\x22 title=\x22After the necessary scenes get recorded, we can deploy them to our test environment.\x22\x3e\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e在测试环境（隔离并且没有 Internet 访问）中，Flashback 在与开发环境相同的端口上启动。所有 HTTP 请求仍然来自内部服务，但响应将来自 Flashback 而不是 Internet 提供商。\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/camo.githubusercontent.com\/b8c5865f2bd8058361be165b9f8352c0194f79eb\/68747470733a2f2f6f70656e736f757263652e636f6d2f73697465732f64656661756c742f66696c65732f666c6173686261636b726573706f6e736573696d6167652e6a7067\x22\x3e\x3cimg src=\x22https:\/\/p0.ssl.qhimg.com\/t0142f1770ddc12d8aa.jpg\x22 alt=\x22Responses will come from Flashback instead of the Internet providers.\x22 title=\x22Responses will come from Flashback instead of the Internet providers.\x22\x3e\x3c\/a\x3e\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#未来方向\x22\x3e\x3c\/a\x3e未来方向\x3c\/h3\x3e\n\x3cp\x3e我们希望将来可以支持非 HTTP 协议（如 FTP 或 JDBC），甚至可以让用户使用 MITM 代理框架来自行注入自己的定制协议。我们将继续改进 Flashback 设置 API，使其更容易支持非 Java 语言。\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#现在为一个开源项目\x22\x3e\x3c\/a\x3e现在为一个开源项目\x3c\/h3\x3e\n\x3cp\x3e我们很幸运能够在 GTAC 2015 上发布 Flashback。在展会上，有几名观众询问是否将 Flashback 作为开源项目发布，以便他们可以将其用于自己的测试工作。\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#google-techtalksgatc-2015---模拟互联网\x22\x3e\x3c\/a\x3eGoogle TechTalks：GATC 2015 - 模拟互联网\x3c\/h3\x3e\n\x26lt;iframe allowfullscreen=\x22\x22 frameborder=\x220\x22 height=\x22315\x22 src=\x22[https:\/\/www.youtube.com\/embed\/6gPNrujpmn0?origin=https:\/\/opensource.com\x26amp;enablejsapi=1](https:\/\/www.youtube.com\/embed\/6gPNrujpmn0?origin=https:\/\/opensource.com\x26amp;enablejsapi=1)\x22 width=\x22560\x22 id=\x226gPNrujpmn0\x22 data-sdi=\x22true\x22\x26gt;\x26lt;\/iframe\x26gt;\n\n\x3cp\x3e我们很高兴地宣布，Flashback 现在以 BSD 两句版许可证开源。要开始使用，请访问 \x3ca href=\x22https:\/\/github.com\/linkedin\/flashback\x22\x3eFlashback GitHub 仓库\x3c\/a\x3e。\x3c\/p\x3e\n\x3cp\x3e\x3cem\x3e该文原始发表在\x3ca href=\x22https:\/\/engineering.linkedin.com\/blog\/2017\/03\/flashback-mocking-tool\x22\x3eLinkedIn 工程博客上\x3c\/a\x3e。获得转载许可\x3c\/em\x3e\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#致谢\x22\x3e\x3c\/a\x3e致谢\x3c\/h3\x3e\n\x3cp\x3eFlashback 由 \x3ca href=\x22https:\/\/www.linkedin.com\/in\/shangshangfeng\x22\x3eShangshang Feng\x3c\/a\x3e、\x3ca href=\x22https:\/\/www.linkedin.com\/in\/benykang\x22\x3eYabin Kang\x3c\/a\x3e 和 \x3ca href=\x22https:\/\/www.linkedin.com\/in\/danvinegrad\/\x22\x3eDan Vinegrad\x3c\/a\x3e 创建，并受到 \x3ca href=\x22https:\/\/github.com\/betamaxteam\/betamax\x22\x3eBetamax\x3c\/a\x3e 启发。特别感谢 \x3ca href=\x22https:\/\/www.linkedin.com\/in\/hwansoo\/\x22\x3eHwansoo Lee\x3c\/a\x3e、\x3ca href=\x22https:\/\/www.linkedin.com\/in\/eranl\/\x22\x3eEran Leshem\x3c\/a\x3e、\x3ca href=\x22https:\/\/www.linkedin.com\/in\/kunalkandekar\/\x22\x3eKunal Kandekar\x3c\/a\x3e、\x3ca href=\x22https:\/\/www.linkedin.com\/in\/dsouzakeith\/\x22\x3eKeith Dsouza\x3c\/a\x3e 和 \x3ca href=\x22https:\/\/www.linkedin.com\/in\/kang-wang-44960b4\/\x22\x3eKang Wang\x3c\/a\x3e 帮助审阅代码。同样感谢我们的管理层 - \x3ca href=\x22https:\/\/www.linkedin.com\/in\/byronma\/\x22\x3eByron Ma\x3c\/a\x3e、\x3ca href=\x22https:\/\/www.linkedin.com\/in\/yazshimizu\/\x22\x3eYaz Shimizu\x3c\/a\x3e、\x3ca href=\x22https:\/\/www.linkedin.com\/in\/yuliya-averbukh-818a41\/\x22\x3eYuliya Averbukh\x3c\/a\x3e、\x3ca href=\x22https:\/\/www.linkedin.com\/in\/chazlett\/\x22\x3eChristopher Hazlett\x3c\/a\x3e 和 \x3ca href=\x22https:\/\/www.linkedin.com\/in\/dudcat\/\x22\x3eBrandon Duncan\x3c\/a\x3e - 感谢他们在开发和开源 Flashback 中的支持。\x3c\/p\x3e\n\x3cp\x3e（题图：Opensource.com）\x3c\/p\x3e\n\x3chr\x3e\n\x3cp\x3e作者简介：\x3c\/p\x3e\n\x3cp\x3eShangshang Feng - Shangshang 是 LinkedIn 纽约市办公室的高级软件工程师。在 LinkedIn 他从事了三年半的网关平台工作。在加入 LinkedIn 之前，他曾在 Thomson Reuters 和 ViewTrade 证券的基础设施团队工作。\x3c\/p\x3e\n\x3chr\x3e\n\x3cp\x3evia: \x3ca href=\x22https:\/\/opensource.com\/article\/17\/4\/flashback-internet-mocking-tool\x22\x3ehttps:\/\/opensource.com\/article\/17\/4\/flashback-internet-mocking-tool\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e作者：\x3ca href=\x22https:\/\/opensource.com\/users\/shangshangfeng\x22\x3eShangshang Feng\x3c\/a\x3e 译者：\x3ca href=\x22https:\/\/github.com\/geekpi\x22\x3egeekpi\x3c\/a\x3e 校对：\x3ca href=\x22https:\/\/github.com\/jasminepeng\x22\x3ejasminepeng\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e本文由 \x3ca href=\x22https:\/\/github.com\/LCTT\/TranslateProject\x22\x3eLCTT\x3c\/a\x3e 原创编译，\x3ca href=\x22https:\/\/linux.cn\/\x22\x3eLinux中国\x3c\/a\x3e 荣誉推出\x3c\/p\x3e\n\n          \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>介绍 Flashback，一个互联网模拟工具</p><h2 id="原文链接">原文链接</h2><p><a href="https://www.zcfy.cc/article/introducing-flashback-an-internet-mocking-tool">https://www.zcfy.cc/article/introducing-flashback-an-internet-mocking-tool</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/t9ppv5ukm8h/" target="_blank">https://alili.tech/archive/t9ppv5ukm8h/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>