<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="UglifyJS中文文档"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>UglifyJS中文文档 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/q522jummsvs/",
				"appid": "1613049289050283", 
				"title": "UglifyJS中文文档 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-17T02:30:25"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/nh209k995ud/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/95a9jt04dzc/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fq522jummsvs%2f&text=UglifyJS%e4%b8%ad%e6%96%87%e6%96%87%e6%a1%a3"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fq522jummsvs%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fq522jummsvs%2f&text=UglifyJS%e4%b8%ad%e6%96%87%e6%96%87%e6%a1%a3"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fq522jummsvs%2f&title=UglifyJS%e4%b8%ad%e6%96%87%e6%96%87%e6%a1%a3"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fq522jummsvs%2f&is_video=false&description=UglifyJS%e4%b8%ad%e6%96%87%e6%96%87%e6%a1%a3"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=UglifyJS%e4%b8%ad%e6%96%87%e6%96%87%e6%a1%a3&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fq522jummsvs%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fq522jummsvs%2f&title=UglifyJS%e4%b8%ad%e6%96%87%e6%96%87%e6%a1%a3"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fq522jummsvs%2f&title=UglifyJS%e4%b8%ad%e6%96%87%e6%96%87%e6%a1%a3"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fq522jummsvs%2f&title=UglifyJS%e4%b8%ad%e6%96%87%e6%96%87%e6%a1%a3"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fq522jummsvs%2f&title=UglifyJS%e4%b8%ad%e6%96%87%e6%96%87%e6%a1%a3"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">UglifyJS中文文档</h1><div class="meta"><div class="postdate"><time datetime="2019-01-17" itemprop="datePublished">2019-01-17</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3eUglifyJS中文文档\x3c\/h2\x3e\n\x3cp\x3e译者：李平海\x3c\/p\x3e\n\x3cp\x3e转载请注明原文链接(\x3ca href=\x22https:\/\/github.com\/LiPinghai\/UglifyJSDocCN\/blob\/master\/README.md\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/LiPinghai\/...\x3c\/a\x3e )与作者信息。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e译序\x3c\/h2\x3e\n\x3cp\x3e由于webpack本身集成了UglifyJS插件（webpack.optimize.UglifyJsPlugin），其命令\x3ccode\x3ewebpack -p\x3c\/code\x3e即表示调用UglifyJS来压缩代码，还有不少webpack插件如\x3ccode\x3ehtml-webpack-plugin\x3c\/code\x3e也会默认使用UglifyJS。因此我们其实经常要用到它，但UglifyJS2本身配置较复杂\/选项繁多，又没有中文文档，使用起来如坠云雾。鉴于此特翻译此文，谬误甚多，敬请斧正。\x3c\/p\x3e\n\x3cp\x3e本文档译自\x3ca href=\x22https:\/\/github.com\/mishoo\/UglifyJS2\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eUglifyJS2文档\x3c\/a\x3e。\x3c\/p\x3e\n\x3cp\x3e另有\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000010874406\x22\x3eUglifyJS3中文文档在此\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e喜欢的话请收藏、给个赞\/star吧！谢谢！\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e词典：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22parse       解释\ncompress    压缩\nmangle      混淆\nbeautify    美化\nminify      最小化\nCLI         命令行工具\nsourcemap   编译后代码对源码的映射，用于网页调试\nAST         抽象语法树\nname        名字，包括变量名、函数名、属性名\ntoplevel    顶层作用域\nunreachable 不可达代码\noption      选项\nSTDIN       标准输入，指在命令行中直接输入\nSTDOUT      标准输出\nSTDERR      标准错误输出\nside effects函数副作用，即函数除了返回外还产生别的作用，比如改了全局变量\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs julia\x22\x3e\x3ccode\x3eparse       解释\ncompress    压缩\nmangle      混淆\nbeautify    美化\nminify      最小化\nCLI         命令行工具\nsourcemap   编译后代码对源码的映射，用于网页调试\nAST         抽象语法树\nname        名字，包括变量名、函数名、属性名\ntoplevel    顶层作用域\nunreachable 不可达代码\noption      选项\n\x3cspan class=\x22hljs-literal\x22\x3eSTDIN\x3c\/span\x3e       标准输入，指在命令行中直接输入\n\x3cspan class=\x22hljs-literal\x22\x3eSTDOUT\x3c\/span\x3e      标准输出\n\x3cspan class=\x22hljs-literal\x22\x3eSTDERR\x3c\/span\x3e      标准错误输出\nside effects函数副作用，即函数除了返回外还产生别的作用，比如改了全局变量\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e以下为正文：\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader2\x22\x3eUglifyJS 2\x3c\/h1\x3e\n\x3cp\x3eUglifyJs 是一个js 解释器、最小化器、压缩器、美化器工具集（parser, minifier, compressor or beautifier toolkit）。\x3c\/p\x3e\n\x3cp\x3e这个网页是命令行使用的文档，要看API和内部文档请到\x3ca href=\x22http:\/\/lisperator.net\/uglifyjs\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eUglifyJS作者的网站\x3c\/a\x3e。\x3cbr\x3e另外还有个\x3ca href=\x22http:\/\/lisperator.net\/uglifyjs\/#demo\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e在线demo\x3c\/a\x3e(FF、chrome，safari可能也行)\x3c\/p\x3e\n\x3ch4\x3e注意:\x3c\/h4\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3ccode\x3euglify-js\x3c\/code\x3e的发行版本只支持ES5，如果你要压缩ES6\x2b代码请使用\x3ca href=\x22#harmony\x22\x3e兼容\x3c\/a\x3e开发分支\x3c\/li\x3e\n\x3cli\x3eNode7有个已知的性能倒退问题——运行\x3ccode\x3euglify-js\x3c\/code\x3e两次导致很慢\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e安装\x3c\/h2\x3e\n\x3cp\x3e首先确认一直你已经安装了最新的\x3ca href=\x22http:\/\/nodejs.org\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3enode.js\x3c\/a\x3e(装完后或许需要重启一下电脑)\x3c\/p\x3e\n\x3cp\x3e用NPM安装CLI：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22npm install uglify-js -g\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs mipsasm\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3enpm \x3cspan class=\x22hljs-keyword\x22\x3einstall \x3c\/span\x3euglify-\x3cspan class=\x22hljs-keyword\x22\x3ejs \x3c\/span\x3e-g\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e用NPM下载给程序使用:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22npm install uglify-js\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs cmake\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3enpm \x3cspan class=\x22hljs-keyword\x22\x3einstall\x3c\/span\x3e uglify-js\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e用Git下载：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22git clone git:\/\/github.com\/mishoo\/UglifyJS2.git\ncd UglifyJS2\nnpm link \x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs crmsh\x22\x3e\x3ccode\x3egit \x3cspan class=\x22hljs-keyword\x22\x3eclone\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3egit\x3c\/span\x3e:\/\/github.com\/mishoo\/UglifyJS2.git\ncd UglifyJS2\nnpm link \x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e使用\x3c\/h2\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 uglifyjs [input files] [options]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs vim\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e uglifyjs [\x3cspan class=\x22hljs-built_in\x22\x3einput\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3efiles\x3c\/span\x3e] [\x3cspan class=\x22hljs-keyword\x22\x3eoptions\x3c\/span\x3e]\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eUglifyJS2可以输入多文件。建议你先写输入文件，再传选项。UglifyJS会根据压缩选项，把文件放在队列中依次解释。所有文件都会在同一个全局域中，假如一个文件中的变量、方法被另一文件引用，UglifyJS会合理地匹配。\x3c\/p\x3e\n\x3cp\x3e假如你不要输入文件，而是要输入字符串（STDIN），那就把文件名换成一个横线（-）\x3c\/p\x3e\n\x3cp\x3e如果你想要把选项写在文件名的前面，那要在二者之前加上双横线，防止文件名被当成了选项：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 uglifyjs --compress --mangle -- input.js\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs brainfuck\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e \x3cspan class=\x22hljs-comment\x22\x3euglifyjs\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e\x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3ecompress\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e\x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3emangle\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e\x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3einput\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e.\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3ejs\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e以下是可用的选项：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22  --source-map                  指定输出的文件产生一份sourcemap \n  --source-map-root             此路径中的源码编译后会产生sourcemap\n  --source-map-url              放在\/\/#sourceMappingURL的sourcemap路径.  默认是 \n                                --source-map传入的值.\n  --source-map-include-sources  如果你要在sourcemap中加上源文件的内容作为sourcesContent属性，\n                                就传这个参数吧。\n  --source-map-inline           把sourcemap以base64格式附在输出文件结尾\n  --in-source-map               输入sourcemap。假如的你要编译的JS是另外的源码编译出来的。\n                                假如该sourcemap包含在js内，请指定\x26quot;inline\x26quot;。\n  --screw-ie8                   是否要支持IE6\/7\/8。UglifyJS默认不兼容IE。\n  --support-ie8                 是否要支持IE6\/7\/8，等同于在`compress`, `mangle` 和\n                                 `output`选项中都设置`screw_ie8: false`\n  --expr                        编译一个表达式，而不是编译一段代码（编译JSON时用）\n  -p, --prefix                  忽略sourcemap中源码的前缀。例如`-p 3`会干掉文件名前面3层目录\n                                以及保证路径是相对路径。你也可以指定`-p relative`,让UglifyJS\n                                自己计算输出文件、sourcemap与源码之间的相对路径。\n  -o, --output                  输出文件，默认标准输出(STDOUT)\n  -b, --beautify                美化输出\/指定输出 选项\n  -m, --mangle                  Mangle的名字，或传入一个mangler选项.\n  -r, --reserved                mangle的例外，不包含在mangling的名字\n  -c, --compress                是否启用压缩功能（true\/fasle），或者传一个压缩选项对象, 例如 \n                                `-c \x27if_return=false,pure_funcs=[\x26quot;Math.pow\x26quot;,\x26quot;console.log\x26quot;]\x27`，\n                                `-c`不带参数的话就是用默认的压缩设置。\n  -d, --define                  全局定义\n  -e, --enclose                 所有代码嵌入到一个大方法中，传入参数为配置项\n  --comments                    保留版权注释。默认保留Google Closure那样的，保留JSDoc-style、\n                                包含\x26quot;@license\x26quot; 或\x26quot;@preserve\x26quot;字样的注释。你也可以传下面的参数:\n                                - \x26quot;all\x26quot; 保留所有注释\n                                - 正则（如`\/foo\/`、`\/^!\/`）保留匹配到的。要注意，如果启用了压\n                                缩，因为会移除不可达代码以及压缩连续声明，因此不是*所有*注释都能\n                                保留下来。\n  --preamble                    在输出文件开头插入的前言。你可以插入一段注释，例如版权信息。\n                                这些不会被编译，但sourcemap会改成当前的样子。\n  --stats                       在STDERR中显示操作运行时间。\n  --acorn                       用 Acorn解析。\n  --spidermonkey                假如输入文件是 SpiderMonkey AST 格式(像JSON).\n  --self                        把UglifyJS2本身也构建成一个依赖包\n                                (等同于`--wrap=UglifyJS --export-all`)\n  --wrap                        所有代码嵌入到一个大函数中,让\x26quot;exports\x26quot;和\x26quot;global\x26quot;变量有效，\n                                你需要传入一个参数指定模块被浏览器引入时的名字。\n  --export-all                  只当`--wrap`时有效,告诉UglifyJS自动把代码暴露到全局。\n  --lint                        显示一些可视警告\n  -v, --verbose                 Verbose\n  -V, --version                 打印版本号.\n  --noerr                       不要为-c,-b 或 -m选项中出现未知选项而抛出错误。\n  --bare-returns                允许返回函数的外部。当最小化CommonJs模块和Userscripts时，\n                                可能匿名函数会被.user.js引擎调用立即执行（IIFE）\n  --keep-fnames                 不要混淆、干掉的函数的名字。当代码依赖Function.prototype.name时有用。\n  --reserved-file               要保留的文件的名字\n  --reserve-domprops            保留（绝大部分？）DOM的属性，当--mangle-props\n  --mangle-props                混淆属性，默认是`0`.设置为`true`或`1`则会混淆所有属性名。\n                                设为`unquoted`或 `2`则只混淆不在引号内的属性。`2`时也会让\n                                `keep_quoted_props` 美化选项生效，保留括号内的属性；让压缩选项\n                                的`properties`失效，阻止覆写带点号（.）的属性。你可以通过在命令\n                                中明确设置来覆写它们。\n  --mangle-regex                混淆正则，只混淆匹配到的属性名。\n  --name-cache                  用来保存混淆map的文件\n  --pure-funcs                  假如返回值没被调用则可以安全移除的函数。 \n                                例如`--pure-funcs Math.floor console.info`(需要设置 `--compress`)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs haml\x22\x3e\x3ccode\x3e  -\x3cspan class=\x22ruby\x22\x3e-source-map                  指定输出的文件产生一份sourcemap \n\x3c\/span\x3e  -\x3cspan class=\x22ruby\x22\x3e-source-map-root             此路径中的源码编译后会产生sourcemap\n\x3c\/span\x3e  -\x3cspan class=\x22ruby\x22\x3e-source-map-url              放在\/\x3cspan class=\x22hljs-regexp\x22\x3e\/#sourceMappingURL的sourcemap路径.  默认是 \n\x3c\/span\x3e\x3c\/span\x3e                                -\x3cspan class=\x22ruby\x22\x3e\x3cspan class=\x22hljs-regexp\x22\x3e-source-map传入的值.\n\x3c\/span\x3e\x3c\/span\x3e  -\x3cspan class=\x22ruby\x22\x3e\x3cspan class=\x22hljs-regexp\x22\x3e-source-map-include-sources  如果你要在sourcemap中加上源文件的内容作为sourcesContent属性，\n\x3c\/span\x3e\x3c\/span\x3e                                就传这个参数吧。\n  -\x3cspan class=\x22ruby\x22\x3e\x3cspan class=\x22hljs-regexp\x22\x3e-source-map-inline           把sourcemap以base64格式附在输出文件结尾\n\x3c\/span\x3e\x3c\/span\x3e  -\x3cspan class=\x22ruby\x22\x3e\x3cspan class=\x22hljs-regexp\x22\x3e-in-source-map               输入sourcemap。假如的你要编译的JS是另外的源码编译出来的。\n\x3c\/span\x3e\x3c\/span\x3e                                假如该sourcemap包含在js内，请指定\x22inline\x22。\n  -\x3cspan class=\x22ruby\x22\x3e\x3cspan class=\x22hljs-regexp\x22\x3e-screw-ie8                   是否要支持IE6\/\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e7\x3c\/span\x3e\/\x3cspan class=\x22hljs-number\x22\x3e8\x3c\/span\x3e。UglifyJS默认不兼容IE。\n\x3c\/span\x3e  -\x3cspan class=\x22ruby\x22\x3e-support-ie8                 是否要支持IE6\/\x3cspan class=\x22hljs-number\x22\x3e7\x3c\/span\x3e\/\x3cspan class=\x22hljs-number\x22\x3e8\x3c\/span\x3e，等同于在\x3cspan class=\x22hljs-string\x22\x3e`compress`\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e`mangle`\x3c\/span\x3e 和\n\x3c\/span\x3e                                 `output`选项中都设置`screw_ie8: false`\n  -\x3cspan class=\x22ruby\x22\x3e-expr                        编译一个表达式，而不是编译一段代码（编译JSON时用）\n\x3c\/span\x3e  -\x3cspan class=\x22ruby\x22\x3ep, --prefix                  忽略sourcemap中源码的前缀。例如\x3cspan class=\x22hljs-string\x22\x3e`-p 3`\x3c\/span\x3e会干掉文件名前面\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e层目录\n\x3c\/span\x3e                                以及保证路径是相对路径。你也可以指定`-p relative`,让UglifyJS\n                                自己计算输出文件、sourcemap与源码之间的相对路径。\n  -\x3cspan class=\x22ruby\x22\x3eo, --output                  输出文件，默认标准输出(STDOUT)\n\x3c\/span\x3e  -\x3cspan class=\x22ruby\x22\x3eb, --beautify                美化输出\/指定输出 选项\n\x3c\/span\x3e  -\x3cspan class=\x22ruby\x22\x3em, --mangle                  Mangle的名字，或传入一个mangler选项.\n\x3c\/span\x3e  -\x3cspan class=\x22ruby\x22\x3er, --reserved                mangle的例外，不包含在mangling的名字\n\x3c\/span\x3e  -\x3cspan class=\x22ruby\x22\x3ec, --compress                是否启用压缩功能（\x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\/fasle），或者传一个压缩选项对象, 例如 \n\x3c\/span\x3e                                `-c \x27if_return=false,pure_funcs=[\x22Math.pow\x22,\x22console.log\x22]\x27`，\n                                `-c`不带参数的话就是用默认的压缩设置。\n  -\x3cspan class=\x22ruby\x22\x3ed, --define                  全局定义\n\x3c\/span\x3e  -\x3cspan class=\x22ruby\x22\x3ee, --enclose                 所有代码嵌入到一个大方法中，传入参数为配置项\n\x3c\/span\x3e  -\x3cspan class=\x22ruby\x22\x3e-comments                    保留版权注释。默认保留Google Closure那样的，保留JSDoc-style、\n\x3c\/span\x3e                                包含\x22@license\x22 或\x22@preserve\x22字样的注释。你也可以传下面的参数:\n                                -\x3cspan class=\x22ruby\x22\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22all\x22\x3c\/span\x3e 保留所有注释\n\x3c\/span\x3e                                -\x3cspan class=\x22ruby\x22\x3e 正则（如\x3cspan class=\x22hljs-string\x22\x3e`\/foo\/`\x3c\/span\x3e、\x3cspan class=\x22hljs-string\x22\x3e`\/^!\/`\x3c\/span\x3e）保留匹配到的。要注意，如果启用了压\n\x3c\/span\x3e                                缩，因为会移除不可达代码以及压缩连续声明，因此不是*所有*注释都能\n                                保留下来。\n  -\x3cspan class=\x22ruby\x22\x3e-preamble                    在输出文件开头插入的前言。你可以插入一段注释，例如版权信息。\n\x3c\/span\x3e                                这些不会被编译，但sourcemap会改成当前的样子。\n  -\x3cspan class=\x22ruby\x22\x3e-stats                       在STDERR中显示操作运行时间。\n\x3c\/span\x3e  -\x3cspan class=\x22ruby\x22\x3e-acorn                       用 Acorn解析。\n\x3c\/span\x3e  -\x3cspan class=\x22ruby\x22\x3e-spidermonkey                假如输入文件是 SpiderMonkey AST 格式(像JSON).\n\x3c\/span\x3e  -\x3cspan class=\x22ruby\x22\x3e-\x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e                        把UglifyJS2本身也构建成一个依赖包\n\x3c\/span\x3e                                (等同于`--wrap=UglifyJS --export-all`)\n  -\x3cspan class=\x22ruby\x22\x3e-wrap                        所有代码嵌入到一个大函数中,让\x3cspan class=\x22hljs-string\x22\x3e\x22exports\x22\x3c\/span\x3e和\x3cspan class=\x22hljs-string\x22\x3e\x22global\x22\x3c\/span\x3e变量有效，\n\x3c\/span\x3e                                你需要传入一个参数指定模块被浏览器引入时的名字。\n  -\x3cspan class=\x22ruby\x22\x3e-export-all                  只当\x3cspan class=\x22hljs-string\x22\x3e`--wrap`\x3c\/span\x3e时有效,告诉UglifyJS自动把代码暴露到全局。\n\x3c\/span\x3e  -\x3cspan class=\x22ruby\x22\x3e-lint                        显示一些可视警告\n\x3c\/span\x3e  -\x3cspan class=\x22ruby\x22\x3ev, --verbose                 Verbose\n\x3c\/span\x3e  -\x3cspan class=\x22ruby\x22\x3eV, --version                 打印版本号.\n\x3c\/span\x3e  -\x3cspan class=\x22ruby\x22\x3e-noerr                       不要为-c,-b 或 -m选项中出现未知选项而抛出错误。\n\x3c\/span\x3e  -\x3cspan class=\x22ruby\x22\x3e-bare-returns                允许返回函数的外部。当最小化CommonJs模块和Userscripts时，\n\x3c\/span\x3e                                可能匿名函数会被.user.js引擎调用立即执行（IIFE）\n  -\x3cspan class=\x22ruby\x22\x3e-keep-fnames                 不要混淆、干掉的函数的名字。当代码依赖Function.prototype.name时有用。\n\x3c\/span\x3e  -\x3cspan class=\x22ruby\x22\x3e-reserved-file               要保留的文件的名字\n\x3c\/span\x3e  -\x3cspan class=\x22ruby\x22\x3e-reserve-domprops            保留（绝大部分？）DOM的属性，当--mangle-props\n\x3c\/span\x3e  -\x3cspan class=\x22ruby\x22\x3e-mangle-props                混淆属性，默认是\x3cspan class=\x22hljs-string\x22\x3e`0`\x3c\/span\x3e.设置为\x3cspan class=\x22hljs-string\x22\x3e`true`\x3c\/span\x3e或\x3cspan class=\x22hljs-string\x22\x3e`1`\x3c\/span\x3e则会混淆所有属性名。\n\x3c\/span\x3e                                设为`unquoted`或 `2`则只混淆不在引号内的属性。`2`时也会让\n                                `keep_quoted_props` 美化选项生效，保留括号内的属性；让压缩选项\n                                的`properties`失效，阻止覆写带点号（.）的属性。你可以通过在命令\n                                中明确设置来覆写它们。\n  -\x3cspan class=\x22ruby\x22\x3e-mangle-regex                混淆正则，只混淆匹配到的属性名。\n\x3c\/span\x3e  -\x3cspan class=\x22ruby\x22\x3e-name-cache                  用来保存混淆map的文件\n\x3c\/span\x3e  -\x3cspan class=\x22ruby\x22\x3e-pure-funcs                  假如返回值没被调用则可以安全移除的函数。 \n\x3c\/span\x3e                                例如`--pure-funcs Math.floor console.info`(需要设置 `--compress`)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e指定\x3ccode\x3e--output\x3c\/code\x3e (\x3ccode\x3e-o\x3c\/code\x3e)来明确输出文件，否则将在终端输出（STDOUT）\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3esourcemap选项\x3c\/h2\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3eSource map options\x3c\/h2\x3e\n\x3cp\x3eUglifyJS2可以生成一份sourcemap文件，这对调试你压缩后的JS代码非常有用。传\x3ccode\x3e--source-map output.js.map\x3c\/code\x3e（完整路径）来获取sorcemap文件。\x3c\/p\x3e\n\x3cp\x3e另外，你可能要设置\x3ccode\x3e--source-map-root\x3c\/code\x3e传入源码所在的根目录。为了防止出现整个路径，你可以用\x3ccode\x3e--prefix\x3c\/code\x3e (\x3ccode\x3e-p\x3c\/code\x3e)指定干掉几层soucemap中路径的前缀。\x3c\/p\x3e\n\x3cp\x3e例如：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22uglifyjs \/home\/doe\/work\/foo\/src\/js\/file1.js \\\n          \/home\/doe\/work\/foo\/src\/js\/file2.js \\\n          -o foo.min.js \\\n          --source-map foo.min.js.map \\\n          --source-map-root http:\/\/foo.com\/src \\\n          -p 5 -c -m\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3euglifyjs \/home\/doe\/work\/foo\/src\/js\/file1\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e \\\n          \/home\/doe\/work\/foo\/src\/js\/file2\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e \\\n          -o foo\x3cspan class=\x22hljs-selector-class\x22\x3e.min\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e \\\n          --source-map foo\x3cspan class=\x22hljs-selector-class\x22\x3e.min\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.map\x3c\/span\x3e \\\n          --source-map-root http:\x3cspan class=\x22hljs-comment\x22\x3e\/\/foo.com\/src \\\x3c\/span\x3e\n          -\x3cspan class=\x22hljs-selector-tag\x22\x3ep\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e -c -m\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上述配置会压缩和混淆\x3ccode\x3efile1.js\x3c\/code\x3e、\x3ccode\x3efile2.js\x3c\/code\x3e，输出文件\x3ccode\x3efoo.min.js\x3c\/code\x3e 和sourcemap\x3ccode\x3efoo.min.js.map\x3c\/code\x3e，sourcemap会建立\x3ccode\x3ehttp:\/\/foo.com\/src\/js\/file1.js\x3c\/code\x3e、\x3cbr\x3e\x3ccode\x3ehttp:\/\/foo.com\/src\/js\/file2.js\x3c\/code\x3e的映射。（实际上，sourcemap根目录是\x3ccode\x3ehttp:\/\/foo.com\/src\x3c\/code\x3e，所以相当于源文件路径是\x3ccode\x3ejs\/file1.js\x3c\/code\x3e、\x3ccode\x3ejs\/file2.js\x3c\/code\x3e）\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e关联sourcemap\x3c\/h3\x3e\n\x3cp\x3e假如你的JS代码是用其他编译器（例如coffeescript）生成的，那么映射到JS代码就没什么用了，你肯定希望映射到CoffeeScript源码。UglifyJS有一个选项可以输入sourcemap，假如你有一个从CoffeeScript → 编译后JS的map的话，UglifyJS可以生成一个从CoffeeScript-\x26gt;压缩后JS的map映射到源码位置。\x3c\/p\x3e\n\x3cp\x3e你可以传入 \x3ccode\x3e--in-source-map \/path\/to\/input\/source.map\x3c\/code\x3e来尝试此特性，如果sourcemap包含在js内，则写\x3ccode\x3e--in-source-map inline\x3c\/code\x3e 。通常输入的sourcemap会指向源代码生成的JS，所以你可以忽略不写输入文件。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3e混淆选项\x3c\/h2\x3e\n\x3ch2 id=\x22articleHeader9\x22\x3eMangler options\x3c\/h2\x3e\n\x3cp\x3e你需要传入\x3ccode\x3e--mangle\x3c\/code\x3e (\x3ccode\x3e-m\x3c\/code\x3e)来使启用混淆功能。支持用逗号隔开选项：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3ccode\x3etoplevel\x3c\/code\x3e — 混淆在最高作用域中声明的变量名（默认disabled）\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eeval\x3c\/code\x3e - 混淆在\x3ccode\x3eeval\x3c\/code\x3e 或 \x3ccode\x3ewith\x3c\/code\x3e作用域出现的变量名（默认disabled）\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e当启用混淆功能时，如果你希望保留一些名字不被混淆，你可以用\x3ccode\x3e--reserved\x3c\/code\x3e (\x3ccode\x3e-r\x3c\/code\x3e) 声明一些名字，用逗号隔开。例如：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 uglifyjs ... -m -r \x27$,require,exports\x27\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs clean\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e uglifyjs ... -m -r \x3cspan class=\x22hljs-string\x22\x3e\x27$,require,exports\x27\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e防止\x3ccode\x3erequire\x3c\/code\x3e, \x3ccode\x3eexports\x3c\/code\x3e和 \x3ccode\x3e$\x3c\/code\x3e被混淆改变。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader10\x22\x3e混淆属性名 (\x3ccode\x3e--mangle-props\x3c\/code\x3e)\x3c\/h3\x3e\n\x3cp\x3e\x3cstrong\x3e警告：\x3c\/strong\x3e这能会搞崩你的代码。混淆属性名跟混淆变量名不一样，是相互独立的。传入\x3ccode\x3e--mangle-props\x3c\/code\x3e会混淆对象所有可见的属性名。例如：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var x = {\n  foo: 1\n};\n\nx.bar = 2;\nx[\x26quot;baz\x26quot;] = 3;\nx[condition ? \x26quot;moo\x26quot; : \x26quot;boo\x26quot;] = 4;\nconsole.log(x.something());\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e x = {\n  \x3cspan class=\x22hljs-attr\x22\x3efoo\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\n};\n\nx.bar = \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\nx[\x3cspan class=\x22hljs-string\x22\x3e\x22baz\x22\x3c\/span\x3e] = \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e;\nx[condition ? \x3cspan class=\x22hljs-string\x22\x3e\x22moo\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x22boo\x22\x3c\/span\x3e] = \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e;\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(x.something());\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上面代码中，\x3ccode\x3efoo\x3c\/code\x3e, \x3ccode\x3ebar\x3c\/code\x3e, \x3ccode\x3ebaz\x3c\/code\x3e, \x3ccode\x3emoo\x3c\/code\x3e 、 \x3ccode\x3eboo\x3c\/code\x3e会被替换成单字符名字，\x3ccode\x3esomething()\x3c\/code\x3e则不变。\x3c\/p\x3e\n\x3cp\x3e为了合理地使用，我们应该避免混淆一些JS标准的名字。比如，如果你代码中有\x3ccode\x3ex.length = 10\x3c\/code\x3e，那\x3ccode\x3elength\x3c\/code\x3e就将被混淆，不管这是在对象中还是访问数组的长度，它都被干掉。为了避免这种情况，你可以用 \x3ccode\x3e--reserved-file\x3c\/code\x3e来输入一个文件，里面包含不参与混淆的名字，变量名或属性名都行。就像下面这样：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n  \x26quot;vars\x26quot;: [ \x26quot;define\x26quot;, \x26quot;require\x26quot;, ... ],\n  \x26quot;props\x26quot;: [ \x26quot;length\x26quot;, \x26quot;prototype\x26quot;, ... ]\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e{\n  \x3cspan class=\x22hljs-string\x22\x3e\x22vars\x22\x3c\/span\x3e: [ \x3cspan class=\x22hljs-string\x22\x3e\x22define\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22require\x22\x3c\/span\x3e, ... ],\n  \x3cspan class=\x22hljs-string\x22\x3e\x22props\x22\x3c\/span\x3e: [ \x3cspan class=\x22hljs-string\x22\x3e\x22length\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22prototype\x22\x3c\/span\x3e, ... ]\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3e--reserved-file\x3c\/code\x3e 可以是文件名数组（用逗号隔开，你也可以传多个\x3ccode\x3e--reserved-file\x3c\/code\x3e），在上面例子中的名字将被排除在混淆中。\x3cbr\x3e\x3ccode\x3etools\/domprops.json\x3c\/code\x3e 里有一个默认的排除名单，包括绝大部分标准JS和多种浏览器中的DOM属性名。传入\x3ccode\x3e--reserve-domprops\x3c\/code\x3e 可以读取此名单生效。\x3c\/p\x3e\n\x3cp\x3e你也可以用正则表达式来定义一些应该被混淆的属性名。例如\x3ccode\x3e--mangle-regex=\x22\/^_\/\x22\x3c\/code\x3e，会只混淆以下划线开始的属性名。\x3c\/p\x3e\n\x3cp\x3e当你压缩多个文件时，为了保证让它们最终能同时工作，我们要让他们中同样的属性名混淆成相同的结果。传入`--name-cache\x3cbr\x3efilename.json`，UglifyJS会维护一个共同的映射供他们复用。这个json一开始应该是空的，例如：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22rm -f \/tmp\/cache.json  # start fresh\nuglifyjs file1.js file2.js --mangle-props --name-cache \/tmp\/cache.json -o part1.js\nuglifyjs file3.js file4.js --mangle-props --name-cache \/tmp\/cache.json -o part2.js\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dsconfig\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-string\x22\x3erm \x3c\/span\x3e-f \/\x3cspan class=\x22hljs-string\x22\x3etmp\/\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3ecache.\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3ejson \x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e# start fresh\x3c\/span\x3e\n\x3cspan class=\x22hljs-string\x22\x3euglifyjs \x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3efile1.\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3ejs \x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3efile2.\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3ejs \x3c\/span\x3e\x3cspan class=\x22hljs-built_in\x22\x3e--mangle-props\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3e--name-cache\x3c\/span\x3e \/\x3cspan class=\x22hljs-string\x22\x3etmp\/\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3ecache.\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3ejson \x3c\/span\x3e-o \x3cspan class=\x22hljs-string\x22\x3epart1.\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3ejs\n\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3euglifyjs \x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3efile3.\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3ejs \x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3efile4.\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3ejs \x3c\/span\x3e\x3cspan class=\x22hljs-built_in\x22\x3e--mangle-props\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3e--name-cache\x3c\/span\x3e \/\x3cspan class=\x22hljs-string\x22\x3etmp\/\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3ecache.\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3ejson \x3c\/span\x3e-o \x3cspan class=\x22hljs-string\x22\x3epart2.\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3ejs\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e现在，\x3ccode\x3epart1.js\x3c\/code\x3e 和 \x3ccode\x3epart2.js\x3c\/code\x3e会知晓对方混淆的属性名。\x3c\/p\x3e\n\x3cp\x3e假如你把所有文件压缩成同一个文件，那就不需要启用名字缓存了。\x3c\/p\x3e\n\x3ch4\x3e混淆括号中的名字(\x3ccode\x3e--mangle-props=unquoted\x3c\/code\x3e或 \x3ccode\x3e--mangle-props=2\x3c\/code\x3e)\x3c\/h4\x3e\n\x3cp\x3e使用括号属性名 (\x3ccode\x3eo[\x22foo\x22]\x3c\/code\x3e)以保留属性名(\x3ccode\x3efoo\x3c\/code\x3e)。这会让整个脚本中其余此属性的引用(\x3ccode\x3eo.foo\x3c\/code\x3e)也不被混淆。例如：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$ echo \x27var o={\x26quot;foo\x26quot;:1, bar:3}; o.foo \x2b= o.bar; console.log(o.foo);\x27 | uglifyjs --mangle-props=2 -mc\nvar o={\x26quot;foo\x26quot;:1,a:3};o.foo\x2b=o.a,console.log(o.foo);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs maxima\x22\x3e\x3ccode\x3e$ echo \x27\x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e o={\x3cspan class=\x22hljs-string\x22\x3e\x22foo\x22\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, bar:\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e}; o.foo \x2b= o.bar; console.\x3cspan class=\x22hljs-built_in\x22\x3elog\x3c\/span\x3e(o.foo);\x27 | uglifyjs --mangle-\x3cspan class=\x22hljs-built_in\x22\x3eprops\x3c\/span\x3e=\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e -mc\n\x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e o={\x3cspan class=\x22hljs-string\x22\x3e\x22foo\x22\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,a:\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e};o.foo\x2b=o.a,console.\x3cspan class=\x22hljs-built_in\x22\x3elog\x3c\/span\x3e(o.foo);\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e调试属性名混淆\x3c\/h4\x3e\n\x3cp\x3e为了混淆属性时不至于完全糊涂，你可以传入\x3ccode\x3e--mangle-props-debug\x3c\/code\x3e来调试。例如\x3ccode\x3eo.foo\x3c\/code\x3e会被混淆成\x3ccode\x3eo._$foo$_\x3c\/code\x3e。这让源码大量、属性被混淆时也可以debug，可以看清混淆会把哪些属性搞乱。\x3c\/p\x3e\n\x3cp\x3e你可以用\x3ccode\x3e--mangle-props-debug=XYZ\x3c\/code\x3e来传入自定义后缀。让\x3ccode\x3eo.foo\x3c\/code\x3e 混淆成 \x3ccode\x3eo._$foo$XYZ_\x3c\/code\x3e， 你可以在每次编译是都改变一下，来辨清属性名怎么被混淆的。一个小技巧，你可以每次编译时传随机数来模仿混淆操作（例如你更新了脚本，有了新的属性名），这有助于识别混淆时的出错。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader11\x22\x3e压缩器选项\x3c\/h2\x3e\n\x3ch2 id=\x22articleHeader12\x22\x3eCompressor options\x3c\/h2\x3e\n\x3cp\x3e你要传入 \x3ccode\x3e--compress\x3c\/code\x3e (\x3ccode\x3e-c\x3c\/code\x3e)来启用压缩功能。你可以用逗号隔开选项。选项的形式为\x3ccode\x3efoo=bar\x3c\/code\x3e,或者就\x3ccode\x3efoo\x3c\/code\x3e（后者等同于你要设为\x3ccode\x3etrue\x3c\/code\x3e，相当于\x3ccode\x3efoo=true\x3c\/code\x3e的缩写）。\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3ccode\x3esequences\x3c\/code\x3e(默认true) -- 连续声明变量，用逗号隔开来。可以设置为正整数来指定连续声明的最大长度。如果设为\x3ccode\x3etrue\x3c\/code\x3e 表示默认\x3ccode\x3e200\x3c\/code\x3e个，设为\x3ccode\x3efalse\x3c\/code\x3e或\x3ccode\x3e0\x3c\/code\x3e则禁用。 \x3ccode\x3esequences\x3c\/code\x3e至少要是\x3ccode\x3e2\x3c\/code\x3e,\x3ccode\x3e1\x3c\/code\x3e的话等同于\x3ccode\x3etrue\x3c\/code\x3e（即\x3ccode\x3e200\x3c\/code\x3e)。默认的sequences设置有极小几率会导致压缩很慢，所以推荐设置成\x3ccode\x3e20\x3c\/code\x3e或以下。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eproperties\x3c\/code\x3e -- 用\x3ccode\x3e.\x3c\/code\x3e来重写属性引用，例如\x3ccode\x3efoo[\x22bar\x22] → foo.bar\x3c\/code\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3edead_code\x3c\/code\x3e -- 移除没被引用的代码\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3edrop_debugger\x3c\/code\x3e -- 移除 \x3ccode\x3edebugger;\x3c\/code\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eunsafe\x3c\/code\x3e (默认 false) -- 使用 \x22unsafe\x22转换 (下面详述)\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eunsafe_comps\x3c\/code\x3e (默认 false) -- 保留\x3ccode\x3e\x26lt;\x3c\/code\x3e 和 \x3ccode\x3e\x26lt;=\x3c\/code\x3e不被换成 \x3ccode\x3e\x26gt;\x3c\/code\x3e 和 \x3ccode\x3e\x26gt;=\x3c\/code\x3e。假如某些运算对象是用\x3ccode\x3eget\x3c\/code\x3e或 \x3ccode\x3evalueOf\x3c\/code\x3eobject得出的时候，转换可能会不安全，可能会引起运算对象的改变。此选项只有当 \x3ccode\x3ecomparisons\x3c\/code\x3e和\x3ccode\x3eunsafe_comps\x3c\/code\x3e 都设为true时才会启用。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eunsafe_math\x3c\/code\x3e (默认 false) -- 优化数字表达式，例如\x3ccode\x3e2 * x * 3\x3c\/code\x3e 变成 \x3ccode\x3e6 * x\x3c\/code\x3e, 可能会导致不精确的浮点数结果。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eunsafe_proto\x3c\/code\x3e (默认 false) -- 把\x3ccode\x3eArray.prototype.slice.call(a)\x3c\/code\x3e 优化成 \x3ccode\x3e[].slice.call(a)\x3c\/code\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3econditionals\x3c\/code\x3e -- 优化\x3ccode\x3eif\x3c\/code\x3e等判断以及条件选择\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3ecomparisons\x3c\/code\x3e --  把结果必然的运算优化成二元运算，例如\x3ccode\x3e!(a \x26lt;= b) → a \x26gt; b\x3c\/code\x3e (只有设置了 \x3ccode\x3eunsafe_comps\x3c\/code\x3e时才生效)；尽量转成否运算。例如 \x3ccode\x3ea = !b \x26amp;\x26amp; !c \x26amp;\x26amp; !d \x26amp;\x26amp; !e → a=!(b||c||d||e)\x3c\/code\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eevaluate\x3c\/code\x3e -- 尝试计算常量表达式\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3ebooleans\x3c\/code\x3e -- 优化布尔运算，例如 \x3ccode\x3e!!a? b : c → a ? b : c\x3c\/code\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eloops\x3c\/code\x3e -- 当\x3ccode\x3edo\x3c\/code\x3e、\x3ccode\x3ewhile\x3c\/code\x3e 、 \x3ccode\x3efor\x3c\/code\x3e循环的判断条件可以确定是，对其进行优化。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eunused\x3c\/code\x3e -- 干掉没有被引用的函数和变量。（除非设置\x3ccode\x3e\x22keep_assign\x22\x3c\/code\x3e，否则变量的简单直接赋值也不算被引用。）\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3etoplevel\x3c\/code\x3e -- 干掉顶层作用域中没有被引用的函数 (\x3ccode\x3e\x22funcs\x22\x3c\/code\x3e)和\/或变量(\x3ccode\x3e\x22vars\x22\x3c\/code\x3e) (默认是\x3ccode\x3efalse\x3c\/code\x3e , \x3ccode\x3etrue\x3c\/code\x3e 的话即函数变量都干掉)\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3etop_retain\x3c\/code\x3e -- 当设了\x3ccode\x3eunused\x3c\/code\x3e时，保留顶层作用域中的某些函数变量。(可以写成数组，用逗号隔开，也可以用正则或函数. 参考\x3ccode\x3etoplevel\x3c\/code\x3e)\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3ehoist_funs\x3c\/code\x3e -- 提升函数声明\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3ehoist_vars\x3c\/code\x3e (默认 false) -- 提升 \x3ccode\x3evar\x3c\/code\x3e 声明 (默认是\x3ccode\x3efalse\x3c\/code\x3e,因为那会加大文件的size)\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eif_return\x3c\/code\x3e -- 优化 if\/return 和 if\/continue\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3ejoin_vars\x3c\/code\x3e -- 合并连续 \x3ccode\x3evar\x3c\/code\x3e 声明\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3ecascade\x3c\/code\x3e -- 弱弱地优化一下连续声明, 将 \x3ccode\x3ex, x\x3c\/code\x3e 转成 \x3ccode\x3ex\x3c\/code\x3e，\x3ccode\x3ex = something(), x\x3c\/code\x3e 转成 \x3ccode\x3ex = something()\x3c\/code\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3ecollapse_vars\x3c\/code\x3e -- 当 \x3ccode\x3evar\x3c\/code\x3e 和 \x3ccode\x3econst\x3c\/code\x3e 单独使用时尽量合并\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3ereduce_vars\x3c\/code\x3e -- 优化某些变量实际上是按常量值来赋值、使用的情况。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3ewarnings\x3c\/code\x3e -- 当删除没有用处的代码时，显示警告\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3enegate_iife\x3c\/code\x3e -- 当立即执行函数（IIFE）的返回值没用时，取消之。避免代码生成器会插入括号。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3epure_getters\x3c\/code\x3e -- 默认是 \x3ccode\x3efalse\x3c\/code\x3e. 如果你传入\x3ccode\x3etrue\x3c\/code\x3e，UglifyJS会假设对象属性的引用（例如\x3ccode\x3efoo.bar\x3c\/code\x3e 或 \x3ccode\x3efoo[\x22bar\x22]\x3c\/code\x3e）没有函数副作用。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3epure_funcs\x3c\/code\x3e -- 默认 \x3ccode\x3enull\x3c\/code\x3e. 你可以传入一个名字的数组，UglifyJS会假设这些函数没有函数副作用。\x3cstrong\x3e警告：\x3c\/strong\x3e假如名字在作用域中重新定义，不会再次检测。例如\x3ccode\x3evar q = Math.floor(a\/b)\x3c\/code\x3e，假如变量\x3ccode\x3eq\x3c\/code\x3e没有被引用，UglifyJS会干掉它，但 \x3ccode\x3eMath.floor(a\/b)\x3c\/code\x3e会被保留，没有人知道它是干嘛的。你可以设置\x3ccode\x3epure_funcs: [ \x27Math.floor\x27 ]\x3c\/code\x3e ，这样该函数会被认为没有函数副作用，这样整个声明会被废弃。在目前的执行情况下，会增加开销（压缩会变慢）。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3edrop_console\x3c\/code\x3e -- 默认 \x3ccode\x3efalse\x3c\/code\x3e.  传\x3ccode\x3etrue\x3c\/code\x3e的话会干掉\x3ccode\x3econsole.*\x3c\/code\x3e函数。如果你要干掉特定的函数比如\x3ccode\x3econsole.info\x3c\/code\x3e ，又想删掉后保留其参数中的副作用，那用\x3ccode\x3epure_funcs\x3c\/code\x3e来处理吧。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eexpression\x3c\/code\x3e -- 默认 \x3ccode\x3efalse\x3c\/code\x3e。传\x3ccode\x3etrue\x3c\/code\x3e来保留终端语句中没有\x22return\x22的完成值。例如在bookmarklets。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3ekeep_fargs\x3c\/code\x3e -- 默认\x3ccode\x3etrue\x3c\/code\x3e。阻止压缩器干掉那些没有用到的函数参数。你需要它来保护某些依赖\x3ccode\x3eFunction.length\x3c\/code\x3e的函数。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3ekeep_fnames\x3c\/code\x3e -- 默认 \x3ccode\x3efalse\x3c\/code\x3e。传 \x3ccode\x3etrue\x3c\/code\x3e来防止压缩器干掉函数名。对那些依赖\x3ccode\x3eFunction.prototype.name\x3c\/code\x3e的函数很有用。延展阅读：\x3ccode\x3ekeep_fnames\x3c\/code\x3e \x3ca href=\x22#mangle\x22\x3e混淆选项\x3c\/a\x3e.\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3epasses\x3c\/code\x3e -- 默认 \x3ccode\x3e1\x3c\/code\x3e。运行压缩的次数。在某些情况下，用一个大于1的数字参数可以进一步压缩代码大小。注意：数字越大压缩耗时越长。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3ekeep_infinity\x3c\/code\x3e -- 默认 \x3ccode\x3efalse\x3c\/code\x3e。传\x3ccode\x3etrue\x3c\/code\x3e以防止压缩时把\x3ccode\x3e1\/0\x3c\/code\x3e转成\x3ccode\x3eInfinity\x3c\/code\x3e，那可能会在chrome上有性能问题。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch3 id=\x22articleHeader13\x22\x3e\n\x3ccode\x3eunsafe\x3c\/code\x3e选项\x3c\/h3\x3e\n\x3cp\x3e在某些刻意营造的案例中，启用某些转换\x3cstrong\x3e有可能\x3c\/strong\x3e会打断代码的逻辑，但绝大部分情况下是安全的。你可能会想尝试一下，因为这毕竟会减少文件体积。以下是某些例子：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3ccode\x3enew Array(1, 2, 3)\x3c\/code\x3e 或 \x3ccode\x3eArray(1, 2, 3)\x3c\/code\x3e → \x3ccode\x3e[ 1, 2, 3 ]\x3c\/code\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3enew Object()\x3c\/code\x3e → \x3ccode\x3e{}\x3c\/code\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eString(exp)\x3c\/code\x3e 或 \x3ccode\x3eexp.toString()\x3c\/code\x3e → \x3ccode\x3e\x22\x22 \x2b exp\x3c\/code\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3enew Object\/RegExp\/Function\/Error\/Array (...)\x3c\/code\x3e → 我们干掉用\x3ccode\x3enew\x3c\/code\x3e的\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3etypeof foo == \x22undefined\x22\x3c\/code\x3e → \x3ccode\x3efoo === void 0\x3c\/code\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3evoid 0\x3c\/code\x3e → \x3ccode\x3eundefined\x3c\/code\x3e (假如作用域中有一个变量名叫\x22undefined\x22;我们这么做是因为变量名会被混淆成单字符）\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch3 id=\x22articleHeader14\x22\x3e编译条件语句\x3c\/h3\x3e\n\x3cp\x3eUglify会假设全局变量都是常量(不管是否在局部域中定义了)，你可以用\x3ccode\x3e--define\x3c\/code\x3e (\x3ccode\x3e-d\x3c\/code\x3e)来实现定义全局变量。例如你传\x3ccode\x3e--define DEBUG=false\x3c\/code\x3e，UglifyJS会在输出中干掉下面代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22if (DEBUG) {\nconsole.log(\x26quot;debug stuff\x26quot;);\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (DEBUG) {\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x22debug stuff\x22\x3c\/span\x3e);\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e你可以像\x3ccode\x3e--define env.DEBUG=false\x3c\/code\x3e这样写嵌套的常量。\x3c\/p\x3e\n\x3cp\x3e在干掉那些永否的条件语句以及不可达代码时，UglifyJS会给出警告。现在没有选项可以禁用此特性，但你可以设置 \x3ccode\x3ewarnings=false\x3c\/code\x3e 来禁掉\x3cem\x3e所有\x3c\/em\x3e警告。\x3c\/p\x3e\n\x3cp\x3e另一个定义全局常量的方法是，在一个独立的文档中定义，再引入到构建中。例如你有一个这样的\x3ccode\x3ebuild\/defines.js\x3c\/code\x3e：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const DEBUG = false;\nconst PRODUCTION = true;\n\/\/ 等等\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e DEBUG = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e PRODUCTION = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 等等\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e构建使用这样写：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22  uglifyjs build\/defines.js js\/foo.js js\/bar.js... -c\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e  uglifyjs build\/defines\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e js\/foo\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e js\/bar\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e... -c\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eUglifyJS会注意到这些常量。因为它们无法改变，所以它们会被认为是没被引用而被照样干掉。如果你用\x3ccode\x3econst\x3c\/code\x3e声明，构建后还会被保留。如果你的运行环境低于ES6、不支持\x3ccode\x3econst\x3c\/code\x3e，请用\x3ccode\x3evar\x3c\/code\x3e声明加上\x3ccode\x3ereduce_vars\x3c\/code\x3e设置（默认启用）来实现。\x3c\/p\x3e\n\x3ch4\x3e编译条件语句API\x3c\/h4\x3e\n\x3cp\x3e你也可以通过程序API来设置编译配置。其中有差别的是一个压缩器属性\x3ccode\x3eglobal_defs\x3c\/code\x3e：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22uglifyJS.minify([ \x26quot;input.js\x26quot;], {\n  compress: {\n      dead_code: true,\n      global_defs: {\n          DEBUG: false\n      }\n  }\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3euglifyJS.minify([ \x3cspan class=\x22hljs-string\x22\x3e\x22input.js\x22\x3c\/span\x3e], {\n  \x3cspan class=\x22hljs-attr\x22\x3ecompress\x3c\/span\x3e: {\n      \x3cspan class=\x22hljs-attr\x22\x3edead_code\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3eglobal_defs\x3c\/span\x3e: {\n          \x3cspan class=\x22hljs-attr\x22\x3eDEBUG\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n      }\n  }\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader15\x22\x3e美化器选项\x3c\/h2\x3e\n\x3ch2 id=\x22articleHeader16\x22\x3eBeautifier options\x3c\/h2\x3e\n\x3cp\x3e代码生成器默认会输出尽量简短的代码。假如你想美化一下输出代码，请设置\x3ccode\x3e--beautify\x3c\/code\x3e (\x3ccode\x3e-b\x3c\/code\x3e)。你可以传入更多可选的选项参数来控制代码生成：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3ccode\x3ebeautify\x3c\/code\x3e (默认 \x3ccode\x3etrue\x3c\/code\x3e) -- 是否美化输出代码。传\x3ccode\x3e-b\x3c\/code\x3e的话就是设成true。假如你想生成最小化的代码同时又要用其他设置来美化代码，你可以设\x3ccode\x3e-b beautify=false\x3c\/code\x3e。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eindent-level\x3c\/code\x3e (默认 4) 缩进格数\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eindent-start\x3c\/code\x3e (默认 0) -- 每行前面加几个空格\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3equote-keys\x3c\/code\x3e (默认 \x3ccode\x3efalse\x3c\/code\x3e) -- 传\x3ccode\x3etrue\x3c\/code\x3e的话会在对象所有的键加上括号\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3espace-colon\x3c\/code\x3e (默认 \x3ccode\x3etrue\x3c\/code\x3e) -- 在冒号后面加空格\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eascii-only\x3c\/code\x3e (默认 \x3ccode\x3efalse\x3c\/code\x3e) -- 避免Unicode字符在字符串\/正则中出现（非ascii字符会变不合法）。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3einline-script\x3c\/code\x3e (默认 \x3ccode\x3efalse\x3c\/code\x3e) -- 避免字符串中出现\x3ccode\x3e\x26lt;\/script\x3c\/code\x3e中的斜杠\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3ewidth\x3c\/code\x3e (默认 80) -- 仅在美化时生效，设定一个行宽让美化器尽量实现。这会影响行中文字的数量（不包括缩进）。当前本功能实现得不是非常好，但依然让美化后的代码可读性大大增强。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3emax-line-len\x3c\/code\x3e (默认 32000) -- 最大行宽（压缩后的代码）\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3ebracketize\x3c\/code\x3e (默认 \x3ccode\x3efalse\x3c\/code\x3e) -- 永远在\x3ccode\x3eif\x3c\/code\x3e, \x3ccode\x3efor\x3c\/code\x3e,\x3ccode\x3edo\x3c\/code\x3e, \x3ccode\x3ewhile\x3c\/code\x3e, \x3ccode\x3ewith\x3c\/code\x3e后面加上大括号，即使循环体只有一句。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3esemicolons\x3c\/code\x3e (默认 \x3ccode\x3etrue\x3c\/code\x3e) -- 用分号分开多个声明。如果你传\x3ccode\x3efalse\x3c\/code\x3e,则总会另起一行，增强输出文件的可读性。（gzip前体积更小，gzip后稍大一点点）\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3epreamble\x3c\/code\x3e (默认 \x3ccode\x3enull\x3c\/code\x3e) -- 如果要传的话，必须是字符串。它会被加在输出文档的前面。sourcemap会随之调整。例如可以用来插入版权信息。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3equote_style\x3c\/code\x3e (默认 \x3ccode\x3e0\x3c\/code\x3e) -- 影响字符串的括号格式（也会影响属性名和指令）。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3e0\x3c\/code\x3e -- 倾向使用双引号，字符串里还有引号的话就是单引号。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3e1\x3c\/code\x3e -- 永远单引号\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3e2\x3c\/code\x3e -- 永远双引号\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3e3\x3c\/code\x3e -- 永远是本来的引号\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3ekeep_quoted_props\x3c\/code\x3e (默认 \x3ccode\x3efalse\x3c\/code\x3e) -- 如果启用，会保留属性名的引号。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch3 id=\x22articleHeader17\x22\x3e保留版权告示和其他注释\x3c\/h3\x3e\n\x3cp\x3e你可以传入\x3ccode\x3e--comments\x3c\/code\x3e让输出文件中保留某些注释。默认时会保留JSDoc-style的注释（包含\x22@preserve\x22,\x22@license\x22 或 \x22@cc_on\x22（为IE所编译））。你可以传入\x3ccode\x3e--comments all\x3c\/code\x3e来保留全部注释，或者传一个合法的正则来保留那些匹配到的注释。例如\x3ccode\x3e--comments \x27\/foo|bar\/\x27\x3c\/code\x3e会保留那些包含\x22foo\x22 或 \x22bar\x22的注释。 \x3c\/p\x3e\n\x3cp\x3e注意，无论如何，总会有些注释在某些情况下会丢失。例如：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function f() {\n    \/** @preserve Foo Bar *\/\n    function g() {\n      \/\/ this function is never called\n    }\n    return something();\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ef\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/** @preserve Foo Bar *\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eg\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ this function is never called\x3c\/span\x3e\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e something();\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e即使里面带有\x22@preserve\x22，注释依然会被丢弃。因为内部的函数\x3ccode\x3eg\x3c\/code\x3e（注释所依附的抽象语法树节点）没有被引用、会被压缩器干掉。\x3c\/p\x3e\n\x3cp\x3e书写版权信息（或其他需要在输出文件中保留的信息）的最安全位置是全局节点。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader18\x22\x3e对SpiderMonkey的支持\x3c\/h2\x3e\n\x3cp\x3eUglifyJS2有自己的抽象语法树格式；为了某些\x3ca href=\x22http:\/\/lisperator.net\/blog\/uglifyjs-why-not-switching-to-spidermonkey-ast\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e现实的原因\x3c\/a\x3e\x3cbr\x3e我们无法在内部轻易地改成使用SpiderMonkey抽象语法树(AST)。但UglifyJS现在有了一个可以输入SpiderMonkeyAST的转换器。\x3cbr\x3e例如\x3ca href=\x22https:\/\/github.com\/ternjs\/acorn\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eAcorn\x3c\/a\x3e ，这是一个超级快的生成SpiderMonkey AST的解释器。它带有一个实用的迷你CLI，能解释一个文件、把AST转存为JSON并标准输出。可以这样用UglifyJS来压缩混淆：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    acorn file.js | uglifyjs --spidermonkey -m -c\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs applescript\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e    acorn \x3cspan class=\x22hljs-built_in\x22\x3efile\x3c\/span\x3e.js | uglifyjs \x3cspan class=\x22hljs-comment\x22\x3e--spidermonkey -m -c\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3e--spidermonkey\x3c\/code\x3e选项能让UglifyJS知道输入文件并非JavaScript，而是SpiderMonkey AST生成的JSON代码。这事我们不用自己的解释器，只把AST转成我们内部AST。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader19\x22\x3e使用 Acorn 来解释代码\x3c\/h3\x3e\n\x3cp\x3e更有趣的是，我们加了 \x3ccode\x3e--acorn\x3c\/code\x3e选项来使用Acorn解释所有代码。如果你传入这个选项，UglifyJS会\x3ccode\x3erequire(\x22acorn\x22)\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3eAcorn确实非常快（650k代码原来要380ms，现在只需250ms），但转换Acorn产生的SpiderMonkey树会额外花费150ms。所以总共比UglifyJS自己的解释器还要多花一点时间。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader20\x22\x3e使用 UglifyJS 转换 SpiderMonkey AST\x3c\/h3\x3e\n\x3cp\x3e现在你可以像使用其他中间工具一样使用UglifyJS将JS抽象语法树转换为SpiderMonkey格式。\x3c\/p\x3e\n\x3cp\x3e例如：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function uglify(ast, options, mangle) {\n  \/\/ 把SpiderMonkey AST 转成中间格式\n  var uAST = UglifyJS.AST_Node.from_mozilla_ast(ast);\n\n  \/\/ 压缩\n  uAST.figure_out_scope();\n  uAST = UglifyJS.Compressor(options).compress(uAST);\n\n  \/\/ 混淆 (可选)\n  if (mangle) {\n    uAST.figure_out_scope();\n    uAST.compute_char_frequency();\n    uAST.mangle_names();\n  }\n\n  \/\/ 转回 SpiderMonkey AST\n  return uAST.to_mozilla_ast();\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3euglify\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3east, options, mangle\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 把SpiderMonkey AST 转成中间格式\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e uAST = UglifyJS.AST_Node.from_mozilla_ast(ast);\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 压缩\x3c\/span\x3e\n  uAST.figure_out_scope();\n  uAST = UglifyJS.Compressor(options).compress(uAST);\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 混淆 (可选)\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (mangle) {\n    uAST.figure_out_scope();\n    uAST.compute_char_frequency();\n    uAST.mangle_names();\n  }\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 转回 SpiderMonkey AST\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e uAST.to_mozilla_ast();\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ca href=\x22http:\/\/rreverser.com\/using-mozilla-ast-with-uglifyjs\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e原博文\x3c\/a\x3e有更多细节。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader21\x22\x3eAPI参考\x3c\/h2\x3e\n\x3cp\x3e假如是通过NPM安装的，你可以这样在你的应用中加载UglifyJS：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var UglifyJS = require(\x26quot;uglify-js\x26quot;);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e UglifyJS = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22uglify-js\x22\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e它会输出很多模块，但我在此只介绍一下涉及解释、混淆和压缩的基础代码。按(1)\x3cbr\x3e解释, (2) 压缩, (3) 混淆, (4) 生成输出代码的顺序。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader22\x22\x3e简易使用模式\x3c\/h3\x3e\n\x3cp\x3e\x3ccode\x3eminify\x3c\/code\x3e是一个顶级的、单独、包含所有步骤的方法。如果你不需要进一步自定义的话，你应该会喜欢使用它。\x3c\/p\x3e\n\x3cp\x3e例子:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var result = UglifyJS.minify(\x26quot;\/path\/to\/file.js\x26quot;);\nconsole.log(result.code); \/\/ 最小化输出\n\/\/ 假如你不想传一个文件名，而是要传入一段代码\nvar result = UglifyJS.minify(\x26quot;var b = function () {};\x26quot;, {fromString: true});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e result = UglifyJS.minify(\x3cspan class=\x22hljs-string\x22\x3e\x22\/path\/to\/file.js\x22\x3c\/span\x3e);\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(result.code); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 最小化输出\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 假如你不想传一个文件名，而是要传入一段代码\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e result = UglifyJS.minify(\x3cspan class=\x22hljs-string\x22\x3e\x22var b = function () {};\x22\x3c\/span\x3e, {\x3cspan class=\x22hljs-attr\x22\x3efromString\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e你也可以压缩多个文件：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var result = UglifyJS.minify([ \x26quot;file1.js\x26quot;, \x26quot;file2.js\x26quot;, \x26quot;file3.js\x26quot; ]);\nconsole.log(result.code);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e result = UglifyJS.minify([ \x3cspan class=\x22hljs-string\x22\x3e\x22file1.js\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22file2.js\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22file3.js\x22\x3c\/span\x3e ]);\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(result.code);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样生成一份sourcemap：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var result = UglifyJS.minify([ \x26quot;file1.js\x26quot;, \x26quot;file2.js\x26quot;, \x26quot;file3.js\x26quot; ], {\n    outSourceMap: \x26quot;out.js.map\x26quot;\n});\nconsole.log(result.code); \/\/ 最小化输出\nconsole.log(result.map);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e result = UglifyJS.minify([ \x3cspan class=\x22hljs-string\x22\x3e\x22file1.js\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22file2.js\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22file3.js\x22\x3c\/span\x3e ], {\n    \x3cspan class=\x22hljs-attr\x22\x3eoutSourceMap\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22out.js.map\x22\x3c\/span\x3e\n});\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(result.code); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 最小化输出\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(result.map);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e你也可以用一个带fromString选项的对象来要生成sourcemap：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var result = UglifyJS.minify({\x26quot;file1.js\x26quot;: \x26quot;var a = function () {};\x26quot;}, {\n  outSourceMap: \x26quot;out.js.map\x26quot;,\n  outFileName: \x26quot;out.js\x26quot;,\n  fromString: true\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e result = UglifyJS.minify({\x3cspan class=\x22hljs-string\x22\x3e\x22file1.js\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22var a = function () {};\x22\x3c\/span\x3e}, {\n  \x3cspan class=\x22hljs-attr\x22\x3eoutSourceMap\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22out.js.map\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3eoutFileName\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22out.js\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3efromString\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e要注意，此时sourcemap并不会保存为一份文件，它只会返回在\x3ccode\x3eresult.map\x3c\/code\x3e中。\x3ccode\x3eoutSourceMap\x3c\/code\x3e 的值只用来在\x3ccode\x3eresult.code\x3c\/code\x3e中设置\x3ccode\x3e\/\/# sourceMappingURL=out.js.map\x3c\/code\x3e ，\x3ccode\x3eoutFileName\x3c\/code\x3e 的值只用来在sourcemap文件中设置 \x3ccode\x3efile\x3c\/code\x3e属性。\x3c\/p\x3e\n\x3cp\x3esourcemap（查阅\x3ca href=\x22https:\/\/docs.google.com\/document\/d\/1U1RGAehQwRypUTovF1KRlpiOFze0b-_2gc6fAH0KY0k\/edit\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e规格\x3c\/a\x3e）中的\x3ccode\x3efile\x3c\/code\x3e属性会优先使用 \x3ccode\x3eoutFileName\x3c\/code\x3e ，假如没有，会从\x3ccode\x3eoutSourceMap\x3c\/code\x3e中推导（就是去掉\x3ccode\x3e\x27.map\x27\x3c\/code\x3e）。\x3c\/p\x3e\n\x3cp\x3e你可以把\x3ccode\x3esourceMapInline\x3c\/code\x3e设为\x3ccode\x3etrue\x3c\/code\x3e ，这样sourcemap会加在代码末尾。\x3c\/p\x3e\n\x3cp\x3e你也可以指定sourcemap中的源文件根目录（sourceRoot）属性：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var result = UglifyJS.minify([ \x26quot;file1.js\x26quot;, \x26quot;file2.js\x26quot;, \x26quot;file3.js\x26quot; ], {\n    outSourceMap: \x26quot;out.js.map\x26quot;,\n    sourceRoot: \x26quot;http:\/\/example.com\/src\x26quot;\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e result = UglifyJS.minify([ \x3cspan class=\x22hljs-string\x22\x3e\x22file1.js\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22file2.js\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22file3.js\x22\x3c\/span\x3e ], {\n    \x3cspan class=\x22hljs-attr\x22\x3eoutSourceMap\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22out.js.map\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3esourceRoot\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22http:\/\/example.com\/src\x22\x3c\/span\x3e\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e如果你要压缩\x3cem\x3e从其他文件编译得来的\x3c\/em\x3e带一份sourcemap的JS文件，你可以用\x3ccode\x3einSourceMap\x3c\/code\x3e参数：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var result = UglifyJS.minify(\x26quot;compiled.js\x26quot;, {\n    inSourceMap: \x26quot;compiled.js.map\x26quot;,\n    outSourceMap: \x26quot;minified.js.map\x26quot;\n});\n\/\/ 跟之前一样，返回 `code`和 `map`\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e result = UglifyJS.minify(\x3cspan class=\x22hljs-string\x22\x3e\x22compiled.js\x22\x3c\/span\x3e, {\n    \x3cspan class=\x22hljs-attr\x22\x3einSourceMap\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22compiled.js.map\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3eoutSourceMap\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22minified.js.map\x22\x3c\/span\x3e\n});\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 跟之前一样，返回 `code`和 `map`\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e如果你要输入的sourcemap并非一份单独文件，你可以在对象参数中设置\x3ccode\x3einSourceMap\x3c\/code\x3e参数：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var result = UglifyJS.minify(\x26quot;compiled.js\x26quot;, {\n    inSourceMap: JSON.parse(my_source_map_string),\n    outSourceMap: \x26quot;minified.js.map\x26quot;\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e result = UglifyJS.minify(\x3cspan class=\x22hljs-string\x22\x3e\x22compiled.js\x22\x3c\/span\x3e, {\n    \x3cspan class=\x22hljs-attr\x22\x3einSourceMap\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3eJSON\x3c\/span\x3e.parse(my_source_map_string),\n    \x3cspan class=\x22hljs-attr\x22\x3eoutSourceMap\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22minified.js.map\x22\x3c\/span\x3e\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e只有在需要\x3ccode\x3eoutSourceMap\x3c\/code\x3e时， \x3ccode\x3einSourceMap\x3c\/code\x3e 才会被用到（否则就没用咯）。\x3c\/p\x3e\n\x3cp\x3e要设置sourcemap的url的话，请用 \x3ccode\x3esourceMapUrl\x3c\/code\x3e选项。\x3c\/p\x3e\n\x3cp\x3e如果你要用\x3ccode\x3e X-SourceMap \x3c\/code\x3e请求头，你可以把\x3ccode\x3esourceMapUrl\x3c\/code\x3e选项设为false。\x3cbr\x3e\x3ccode\x3eoutSourceMap\x3c\/code\x3e的默认设置：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var result = UglifyJS.minify([ \x26quot;file1.js\x26quot; ], {\n  outSourceMap: \x26quot;out.js.map\x26quot;,\n  sourceMapUrl: \x26quot;localhost\/out.js.map\x26quot;\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e result = UglifyJS.minify([ \x3cspan class=\x22hljs-string\x22\x3e\x22file1.js\x22\x3c\/span\x3e ], {\n  \x3cspan class=\x22hljs-attr\x22\x3eoutSourceMap\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22out.js.map\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3esourceMapUrl\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22localhost\/out.js.map\x22\x3c\/span\x3e\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e其他选项：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3ccode\x3ewarnings\x3c\/code\x3e (默认 \x3ccode\x3efalse\x3c\/code\x3e) — 传\x3ccode\x3etrue\x3c\/code\x3e来现实压缩器的警告\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3efromString\x3c\/code\x3e (默认 \x3ccode\x3efalse\x3c\/code\x3e) — 传\x3ccode\x3etrue\x3c\/code\x3e的话，你可以输入JS源码，而不是文件名。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3emangle\x3c\/code\x3e (默认 \x3ccode\x3etrue\x3c\/code\x3e) — 传\x3ccode\x3efalse\x3c\/code\x3e来跳过混淆步骤，或者传一个对象来特定指明混淆选项（下面详述）。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3emangleProperties\x3c\/code\x3e (默认 \x3ccode\x3efalse\x3c\/code\x3e) — 传一个对象来自定义指明混淆对象属性的选项。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eoutput\x3c\/code\x3e (默认 \x3ccode\x3enull\x3c\/code\x3e) — 如果你要进一步指定\x3ca href=\x22http:\/\/lisperator.net\/uglifyjs\/codegen\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e输出选项\x3c\/a\x3e,请传一个对象。默认是压缩到最优化。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3ecompress\x3c\/code\x3e (默认 \x3ccode\x3e{}\x3c\/code\x3e) — 传\x3ccode\x3efalse\x3c\/code\x3e的话就跳过整个压缩步骤。自定义的话请传一个\x3ca href=\x22http:\/\/lisperator.net\/uglifyjs\/compress\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e压缩选项\x3c\/a\x3e对象。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eparse\x3c\/code\x3e (默认 {}) — 如果你要进一步自定义解释步骤请传一个\x3ca href=\x22http:\/\/lisperator.net\/uglifyjs\/parser\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e解释选项\x3c\/a\x3e对象（不是所有选项都有效....下面再说）。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch4\x3e混淆\x3c\/h4\x3e\n\x3cul\x3e\x3cli\x3e\n\x3cp\x3e\x3ccode\x3eexcept\x3c\/code\x3e - 传一个应该排除在混淆之外的标识的数组。\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3ccode\x3etoplevel\x3c\/code\x3e — 混淆那些定义在顶层作用域的名字（默认禁用）。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eeval\x3c\/code\x3e — 混淆那些在with或eval中出现的名字（默认禁用）。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3ekeep_fnames\x3c\/code\x3e -- 默认\x3ccode\x3efalse\x3c\/code\x3e。传\x3ccode\x3etrue\x3c\/code\x3e的话就不混淆函数名。对那些依赖\x3ccode\x3eFunction.prototype.name\x3c\/code\x3e的代码有用。延展阅读：\x3ccode\x3ekeep_fnames\x3c\/code\x3e \x3ca href=\x22#compressor-options\x22\x3e压缩选项\x3c\/a\x3e.\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e例子：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22  \/\/tst.js\n  var globalVar;\n  function funcName(firstLongName, anotherLongName)\n  {\n    var myVariable = firstLongName \x2b  anotherLongName;\n  }\n\n  UglifyJS.minify(\x26quot;tst.js\x26quot;).code;\n  \/\/ \x27function funcName(a,n){}var globalVar;\x27\n\n  UglifyJS.minify(\x26quot;tst.js\x26quot;, { mangle: { except: [\x27firstLongName\x27] } }).code;\n  \/\/ \x27function funcName(firstLongName,a){}var globalVar;\x27\n\n  UglifyJS.minify(\x26quot;tst.js\x26quot;, { mangle: { toplevel: true } }).code;\n  \/\/ \x27function n(n,a){}var a;\x27\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e  \x3cspan class=\x22hljs-comment\x22\x3e\/\/tst.js\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e globalVar;\n  \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3efuncName\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3efirstLongName, anotherLongName\x3c\/span\x3e)\n  \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e myVariable = firstLongName \x2b  anotherLongName;\n  }\n\n  UglifyJS.minify(\x3cspan class=\x22hljs-string\x22\x3e\x22tst.js\x22\x3c\/span\x3e).code;\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ \x27function funcName(a,n){}var globalVar;\x27\x3c\/span\x3e\n\n  UglifyJS.minify(\x3cspan class=\x22hljs-string\x22\x3e\x22tst.js\x22\x3c\/span\x3e, { \x3cspan class=\x22hljs-attr\x22\x3emangle\x3c\/span\x3e: { \x3cspan class=\x22hljs-attr\x22\x3eexcept\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x27firstLongName\x27\x3c\/span\x3e] } }).code;\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ \x27function funcName(firstLongName,a){}var globalVar;\x27\x3c\/span\x3e\n\n  UglifyJS.minify(\x3cspan class=\x22hljs-string\x22\x3e\x22tst.js\x22\x3c\/span\x3e, { \x3cspan class=\x22hljs-attr\x22\x3emangle\x3c\/span\x3e: { \x3cspan class=\x22hljs-attr\x22\x3etoplevel\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e } }).code;\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ \x27function n(n,a){}var a;\x27\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e混淆属性名选项\x3c\/h4\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3ccode\x3eregex\x3c\/code\x3e — 传一个正则，\x3cem\x3e仅混淆\x3c\/em\x3e匹配到的名字。（与\x3ccode\x3e--mangle-regex\x3c\/code\x3e CLI参数选项关联）\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eignore_quoted\x3c\/code\x3e – 只混淆\x3cem\x3e非括号中\x3c\/em\x3e的属性名（与\x3ccode\x3e--mangle-props 2\x3c\/code\x3e CLI 参数选项关联）\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3edebug\x3c\/code\x3e – 让混淆后的名字与原名字有关。与\x3ccode\x3e--mangle-props-debug\x3c\/code\x3e CLI 参数选项关联）。默认是\x3ccode\x3efalse\x3c\/code\x3e。传一个空字符串来启用，或者传一个非空字符串来添加后缀。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch3 id=\x22articleHeader23\x22\x3e高级使用模式\x3c\/h3\x3e\n\x3cp\x3e如果\x3ccode\x3eminify\x3c\/code\x3e函数太简单不能满足你的需求，下面这些API信息有更多的细节详情：\x3c\/p\x3e\n\x3ch4\x3e解释器\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var toplevel_ast = UglifyJS.parse(code, options);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e toplevel_ast = UglifyJS.parse(code, options);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3eoptions\x3c\/code\x3e 是可选的，要传的话就必须传个对象。下面这些是有效的属性：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3ccode\x3estrict\x3c\/code\x3e — 禁用自动添加分号，禁止数组、对象末尾还有逗号。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3ebare_returns\x3c\/code\x3e — 允许函数返回外部。（与 \x3ccode\x3e--bare-returns\x3c\/code\x3e CLI参数选项关联，对\x3ccode\x3eminify\x3c\/code\x3e \x3ccode\x3eparse\x3c\/code\x3e选项对象也有效。）\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3efilename\x3c\/code\x3e — 输入的文件名。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3etoplevel\x3c\/code\x3e — 一个 \x3ccode\x3etoplevel\x3c\/code\x3e 节点。 (就是之前调用\x3ccode\x3eparse\x3c\/code\x3e返回的)\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e后面两个选项是当你要最小化多个文件成一个文件（以及正确的sourcemap）时有用。我们的CLI会像这样处理：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var toplevel = null;\nfiles.forEach(function(file){\n    var code = fs.readFileSync(file, \x26quot;utf8\x26quot;);\n    toplevel = UglifyJS.parse(code, {\n        filename: file,\n        toplevel: toplevel\n    });\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e toplevel = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\nfiles.forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3efile\x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e code = fs.readFileSync(file, \x3cspan class=\x22hljs-string\x22\x3e\x22utf8\x22\x3c\/span\x3e);\n    toplevel = UglifyJS.parse(code, {\n        \x3cspan class=\x22hljs-attr\x22\x3efilename\x3c\/span\x3e: file,\n        \x3cspan class=\x22hljs-attr\x22\x3etoplevel\x3c\/span\x3e: toplevel\n    });\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e完成后，我们就在\x3ccode\x3etoplevel\x3c\/code\x3e这个大AST里包含了我们的所有文件，每一份都带着正确的来源信息。\x3c\/p\x3e\n\x3ch4\x3e作用域信息\x3c\/h4\x3e\n\x3cp\x3eUglifyJS包含一个作用域分析器，你可以在压缩、混淆前手动调用。基本上，它添加了AST中的节点在哪里被命名、被引用了多少次、是否全局的、是否在\x3ccode\x3eeval\x3c\/code\x3e 或\x3ccode\x3ewith\x3c\/code\x3e中声明等等。我们将讨论除此之外的，那些在你对AST进行任何操作前必须知道的重要事项：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22toplevel.figure_out_scope()\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3etoplevel.figure_out_scope()\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e压缩\x3c\/h4\x3e\n\x3cp\x3e就如这样：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var compressor = UglifyJS.Compressor(options);\nvar compressed_ast = compressor.compress(toplevel);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e compressor = UglifyJS.Compressor(options);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e compressed_ast = compressor.compress(toplevel);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3eoptions\x3c\/code\x3e可以不要。之前的“压缩器选项“中已经讲过可以填什么。默认选项对大多数脚本来说应该都是最佳的。\x3c\/p\x3e\n\x3cp\x3e压缩器是破坏性的，所以不要依赖那些源树\x3ccode\x3etoplevel\x3c\/code\x3e。\x3c\/p\x3e\n\x3ch4\x3e混淆\x3c\/h4\x3e\n\x3cp\x3e压缩之后再调用一次\x3ccode\x3efigure_out_scope\x3c\/code\x3e是个好做法（因为压缩过程可能会干掉一些没用的、不可达的代码，改变标识的数量和位置），你也可以选择在Gzip（统计不可混淆的词中字符的使用频率）后调用。例如：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22compressed_ast.figure_out_scope();\ncompressed_ast.compute_char_frequency();\ncompressed_ast.mangle_names();\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3ecompressed_ast.figure_out_scope();\ncompressed_ast.compute_char_frequency();\ncompressed_ast.mangle_names();\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e生成输出代码\x3c\/h4\x3e\n\x3cp\x3eAST节点带一个\x3ccode\x3eprint\x3c\/code\x3e方法，用来生成输出流。基本上，要生成代码你只要这么做：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var stream = UglifyJS.OutputStream(options);\ncompressed_ast.print(stream);\nvar code = stream.toString(); \/\/ 这就是你最小化后的代码\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e stream = UglifyJS.OutputStream(options);\ncompressed_ast.print(stream);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e code = stream.toString(); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 这就是你最小化后的代码\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e又或者这样缩写：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var code = compressed_ast.print_to_string(options);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e code = compressed_ast.print_to_string(options);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e通常情况下\x3ccode\x3eoptions\x3c\/code\x3e是可选的。输出流可以接收一堆选项参数，绝大多数在”美化选项“中有阐述。我们所关心的是\x3ccode\x3esource_map\x3c\/code\x3e 和 \x3ccode\x3ecomments\x3c\/code\x3e选项。\x3c\/p\x3e\n\x3ch4\x3e在输出代码中保留注释\x3c\/h4\x3e\n\x3cp\x3e你需要传入\x3ccode\x3ecomments\x3c\/code\x3e选项来保留某些注释。你可以传正则表达式（以\x3ccode\x3e\/\x3c\/code\x3e包裹或正则对象）、布尔值或函数。也可以传字符串\x3ccode\x3eall\x3c\/code\x3e 或 \x3ccode\x3esome\x3c\/code\x3e，\x3ccode\x3esome\x3c\/code\x3e等同于CLI中\x3ccode\x3e--comments\x3c\/code\x3e不带任何参数。如果你传正则，只有匹配到的注释会被保留。注意，匹配的主体不包括 \x3ccode\x3e\/\/\x3c\/code\x3e 或 \x3ccode\x3e\/*\x3c\/code\x3e。如果你传函数，每遇到树中的注释都会调用一下，传入两个参数，一是注释所依附的节点，二是注释标识本身。\x3c\/p\x3e\n\x3cp\x3e注释标识有如下属性：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3ccode\x3etype\x3c\/code\x3e: 单行注释是\x22comment1\x22，多行注释 \x22comment2\x22。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3evalue\x3c\/code\x3e: 注释体本身。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3epos\x3c\/code\x3e 和 \x3ccode\x3eendpos\x3c\/code\x3e: 注释在源码中出现的起始位置\/结束位置（从0开始索引）。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eline\x3c\/code\x3e 和 \x3ccode\x3ecol\x3c\/code\x3e: 注释在源码中出现的行和列。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3efile\x3c\/code\x3e — 源码的文件名\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3enlb\x3c\/code\x3e — 在源码中，如果注释前有一空行或注释另起新一行的话是\x3ccode\x3etrue\x3c\/code\x3e\n\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e你的函数返回\x3ccode\x3etrue\x3c\/code\x3e的话就保留注释，其他返回值都代表false。\x3c\/p\x3e\n\x3ch4\x3e生成sourcemap\x3c\/h4\x3e\n\x3cp\x3e你需要在调用\x3ccode\x3eprint\x3c\/code\x3e时传\x3ccode\x3esource_map\x3c\/code\x3e参数。\x3ccode\x3esource_map\x3c\/code\x3e参数需要是\x3ccode\x3eSourceMap\x3c\/code\x3e对象（在\x3ca href=\x22https:\/\/github.com\/mozilla\/source-map\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3esource-map\x3c\/a\x3e库顶部有个小框框里说了）。\x3c\/p\x3e\n\x3cp\x3e例子：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var source_map = UglifyJS.SourceMap(source_map_options);\nvar stream = UglifyJS.OutputStream({\n    ...\n    source_map: source_map\n});\ncompressed_ast.print(stream);\n\nvar code = stream.toString();\nvar map = source_map.toString(); \/\/ 输出json格式sourcemap\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e source_map = UglifyJS.SourceMap(source_map_options);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e stream = UglifyJS.OutputStream({\n    ...\n    source_map: source_map\n});\ncompressed_ast.print(stream);\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e code = stream.toString();\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e map = source_map.toString(); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 输出json格式sourcemap\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3esource_map_options\x3c\/code\x3e（可选）包含以下属性:\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3ccode\x3efile\x3c\/code\x3e: 被输出的、sourcemap所映射的JS的文件名\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eroot\x3c\/code\x3e:  \x3ccode\x3esourceRoot\x3c\/code\x3e 属性 (详看 \x3ca href=\x22https:\/\/docs.google.com\/document\/d\/1U1RGAehQwRypUTovF1KRlpiOFze0b-_2gc6fAH0KY0k\/edit\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e规格\x3c\/a\x3e)\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eorig\x3c\/code\x3e:  \x22original source map\x22，方便你想让sourcemap映射到生成JS的源码上。此参数可以只是字符串或json，也可以是包含源码sourcemap的json对象。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch4\x3e兼容版\x3c\/h4\x3e\n\x3ch4\x3eHarmony\x3c\/h4\x3e\n\x3cp\x3e如果你想使用能最小化ES6\x2b的实验性质的\x3ca href=\x22https:\/\/github.com\/mishoo\/UglifyJS2\/commits\/harmony\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e兼容\x3c\/a\x3e分支，请在你的\x3ccode\x3epackage.json\x3c\/code\x3e 文件中加上下面代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x26quot;uglify-js\x26quot;: \x26quot;git\x2bhttps:\/\/github.com\/mishoo\/UglifyJS2.git#harmony\x26quot;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs livescript\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-string\x22\x3e\x22uglify-js\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22git\x2bhttps:\/\/github.com\/mishoo\/UglifyJS2.git\x3cspan class=\x22hljs-subst\x22\x3e#harmony\x3c\/span\x3e\x22\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e或者直接安装兼容实验版UglifyJS：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22npm install --save-dev uglify-js@github:mishoo\/UglifyJS2#harmony\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs elixir\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3enpm install --save-dev uglify-js\x3cspan class=\x22hljs-variable\x22\x3e@github\x3c\/span\x3e\x3cspan class=\x22hljs-symbol\x22\x3e:mishoo\/UglifyJS2\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e#harmony\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e更多细节请看 \x3ca href=\x22https:\/\/github.com\/mishoo\/UglifyJS2\/issues\/448\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e#448\x3c\/a\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>UglifyJS中文文档</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000008995453">https://segmentfault.com/a/1190000008995453</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/q522jummsvs/" target="_blank">https://alili.tech/archive/q522jummsvs/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>