<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="HTML5，不只是看上去很美（第四弹：可交互地铁线路图）"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>HTML5，不只是看上去很美（第四弹：可交互地铁线路图） | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/aw28vi5cfx9/",
				"appid": "1613049289050283", 
				"title": "HTML5，不只是看上去很美（第四弹：可交互地铁线路图） | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-02T02:30:10"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/aa689xb61kr/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/ihzd39s8ez/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2faw28vi5cfx9%2f&text=HTML5%ef%bc%8c%e4%b8%8d%e5%8f%aa%e6%98%af%e7%9c%8b%e4%b8%8a%e5%8e%bb%e5%be%88%e7%be%8e%ef%bc%88%e7%ac%ac%e5%9b%9b%e5%bc%b9%ef%bc%9a%e5%8f%af%e4%ba%a4%e4%ba%92%e5%9c%b0%e9%93%81%e7%ba%bf%e8%b7%af%e5%9b%be%ef%bc%89"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2faw28vi5cfx9%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2faw28vi5cfx9%2f&text=HTML5%ef%bc%8c%e4%b8%8d%e5%8f%aa%e6%98%af%e7%9c%8b%e4%b8%8a%e5%8e%bb%e5%be%88%e7%be%8e%ef%bc%88%e7%ac%ac%e5%9b%9b%e5%bc%b9%ef%bc%9a%e5%8f%af%e4%ba%a4%e4%ba%92%e5%9c%b0%e9%93%81%e7%ba%bf%e8%b7%af%e5%9b%be%ef%bc%89"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2faw28vi5cfx9%2f&title=HTML5%ef%bc%8c%e4%b8%8d%e5%8f%aa%e6%98%af%e7%9c%8b%e4%b8%8a%e5%8e%bb%e5%be%88%e7%be%8e%ef%bc%88%e7%ac%ac%e5%9b%9b%e5%bc%b9%ef%bc%9a%e5%8f%af%e4%ba%a4%e4%ba%92%e5%9c%b0%e9%93%81%e7%ba%bf%e8%b7%af%e5%9b%be%ef%bc%89"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2faw28vi5cfx9%2f&is_video=false&description=HTML5%ef%bc%8c%e4%b8%8d%e5%8f%aa%e6%98%af%e7%9c%8b%e4%b8%8a%e5%8e%bb%e5%be%88%e7%be%8e%ef%bc%88%e7%ac%ac%e5%9b%9b%e5%bc%b9%ef%bc%9a%e5%8f%af%e4%ba%a4%e4%ba%92%e5%9c%b0%e9%93%81%e7%ba%bf%e8%b7%af%e5%9b%be%ef%bc%89"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=HTML5%ef%bc%8c%e4%b8%8d%e5%8f%aa%e6%98%af%e7%9c%8b%e4%b8%8a%e5%8e%bb%e5%be%88%e7%be%8e%ef%bc%88%e7%ac%ac%e5%9b%9b%e5%bc%b9%ef%bc%9a%e5%8f%af%e4%ba%a4%e4%ba%92%e5%9c%b0%e9%93%81%e7%ba%bf%e8%b7%af%e5%9b%be%ef%bc%89&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2faw28vi5cfx9%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2faw28vi5cfx9%2f&title=HTML5%ef%bc%8c%e4%b8%8d%e5%8f%aa%e6%98%af%e7%9c%8b%e4%b8%8a%e5%8e%bb%e5%be%88%e7%be%8e%ef%bc%88%e7%ac%ac%e5%9b%9b%e5%bc%b9%ef%bc%9a%e5%8f%af%e4%ba%a4%e4%ba%92%e5%9c%b0%e9%93%81%e7%ba%bf%e8%b7%af%e5%9b%be%ef%bc%89"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2faw28vi5cfx9%2f&title=HTML5%ef%bc%8c%e4%b8%8d%e5%8f%aa%e6%98%af%e7%9c%8b%e4%b8%8a%e5%8e%bb%e5%be%88%e7%be%8e%ef%bc%88%e7%ac%ac%e5%9b%9b%e5%bc%b9%ef%bc%9a%e5%8f%af%e4%ba%a4%e4%ba%92%e5%9c%b0%e9%93%81%e7%ba%bf%e8%b7%af%e5%9b%be%ef%bc%89"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2faw28vi5cfx9%2f&title=HTML5%ef%bc%8c%e4%b8%8d%e5%8f%aa%e6%98%af%e7%9c%8b%e4%b8%8a%e5%8e%bb%e5%be%88%e7%be%8e%ef%bc%88%e7%ac%ac%e5%9b%9b%e5%bc%b9%ef%bc%9a%e5%8f%af%e4%ba%a4%e4%ba%92%e5%9c%b0%e9%93%81%e7%ba%bf%e8%b7%af%e5%9b%be%ef%bc%89"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2faw28vi5cfx9%2f&title=HTML5%ef%bc%8c%e4%b8%8d%e5%8f%aa%e6%98%af%e7%9c%8b%e4%b8%8a%e5%8e%bb%e5%be%88%e7%be%8e%ef%bc%88%e7%ac%ac%e5%9b%9b%e5%bc%b9%ef%bc%9a%e5%8f%af%e4%ba%a4%e4%ba%92%e5%9c%b0%e9%93%81%e7%ba%bf%e8%b7%af%e5%9b%be%ef%bc%89"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">HTML5，不只是看上去很美（第四弹：可交互地铁线路图）</h1><div class="meta"><div class="postdate"><time datetime="2019-02-02" itemprop="datePublished">2019-02-02</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch1 id=\x22articleHeader0\x22\x3e前言\x3c\/h1\x3e\n\x3cp\x3e最近特别忙，承蒙大伙关照，3D机房的项目一个接着一个，领了一帮小弟，搞搞传帮带，乌飞兔走，转眼已经菊黄蟹肥……有个小弟很不错，勤奋好学，很快就把API都摸透了，国庆几天自己折腾着做了个HTML5的魔都的地铁线路图，能拖能拽的，还和电子地图做了交互。哥决定把小弟的成果纳入“\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000002775741\x22\x3eHTML5，不只是看上去很美\x3c\/a\x3e”系列，以示鼓励（P.S. 其实还挺有压力的，后浪推前浪，新人赶旧人。我们这些老鸟也得注意，免得让00后给抢了饭碗）\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader1\x22\x3e效果图对比\x3c\/h1\x3e\n\x3cp\x3e网上的地铁图还是很多的，小弟选了这张比较新的做参考。想当年哥来魔都打拼时，图上可就一红一绿打个叉……暴露年龄的话不多说，看图：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVEjf3?w=533\x26amp;h=480\x22 src=\x22https:\/\/static.alili.tech\/img\/bVEjf3?w=533\x26amp;h=480\x22 alt=\x22上海地铁线路图\x22 title=\x22上海地铁线路图\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e再来看看小弟做的：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVEjgi?w=533\x26amp;h=480\x22 src=\x22https:\/\/static.alili.tech\/img\/bVEjgi?w=533\x26amp;h=480\x22 alt=\x22HTML5地铁线路图\x22 title=\x22HTML5地铁线路图\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e我是一眼看不出区别，但这可不是一张效果图，而是一个新手仅用了几天做出来的东西，而且里面许多美化和调整是通过程序自动完成的，这就不容易了。更重要的是，它并不是一张死图，而是纯矢量、可交互、有动态效果、无失真缩放的拓扑图！我们先简单看一下交互效果，后面可以详细说说代码的实现。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e文本提示弹弹弹\x3c\/h2\x3e\n\x3cp\x3e首先，把鼠标移到站点、路段、图标等位置，都会有文本提示弹出，这个比较基本，百度家的就有，小弟也就放了比较简单的弹出内容。如果加上基本介绍啊、相关提示啊、周边信息啊……要是加上广告，就可以赚钱了……反正什么都可以加嘛，就是一个setToolTip命令而已。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVEjhL?w=248\x26amp;h=152\x22 src=\x22https:\/\/static.alili.tech\/img\/bVEjhL?w=248\x26amp;h=152\x22 alt=\x22地铁图之文本提示.gif\x22 title=\x22地铁图之文本提示.gif\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e站点图标变变变\x3c\/h2\x3e\n\x3cp\x3e当鼠标移到站点上时，站点图标做了放大效果，这个效果很贴心，看了下百度家，用的是发光效果。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVEji1?w=187\x26amp;h=135\x22 src=\x22https:\/\/static.alili.tech\/img\/bVEji1?w=187\x26amp;h=135\x22 alt=\x22地铁图之动态站点.gif\x22 title=\x22地铁图之动态站点.gif\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e实现的方法也很简便，就是在注册站点矢量图形时，加入了动态判断。以下注册普通站点矢量图形的代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22twaver.Util.registerImage(\x27station\x27,{\n    w: linkWidth*1.6,\n    h: linkWidth*1.6,\n    v: function (data, view) {\n        var result = [];\n        if(data.getClient(\x27focus\x27)){\n            result.push({\n                shape: \x27circle\x27,\n                r: linkWidth*0.7,\n                lineColor:  data.getClient(\x27lineColor\x27),\n                lineWidth: linkWidth*0.2,\n                fill: \x27white\x27,\n            });\n            result.push({\n                shape: \x27circle\x27,\n                r: linkWidth*0.2,\n                fill:  data.getClient(\x27lineColor\x27),\n            });\n        }else{\n            result.push({\n                shape: \x27circle\x27,\n                r: linkWidth*0.6,\n                lineColor: data.getClient(\x27lineColor\x27),\n                lineWidth: linkWidth*0.2,\n                fill: \x27white\x27,\n            });\n        }\n        return result;\n    }\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3etwaver.Util.registerImage(\x3cspan class=\x22hljs-string\x22\x3e\x27station\x27\x3c\/span\x3e,{\n    \x3cspan class=\x22hljs-attr\x22\x3ew\x3c\/span\x3e: linkWidth*\x3cspan class=\x22hljs-number\x22\x3e1.6\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3eh\x3c\/span\x3e: linkWidth*\x3cspan class=\x22hljs-number\x22\x3e1.6\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3ev\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3edata, view\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e result = [];\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(data.getClient(\x3cspan class=\x22hljs-string\x22\x3e\x27focus\x27\x3c\/span\x3e)){\n            result.push({\n                \x3cspan class=\x22hljs-attr\x22\x3eshape\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27circle\x27\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3er\x3c\/span\x3e: linkWidth*\x3cspan class=\x22hljs-number\x22\x3e0.7\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3elineColor\x3c\/span\x3e:  data.getClient(\x3cspan class=\x22hljs-string\x22\x3e\x27lineColor\x27\x3c\/span\x3e),\n                \x3cspan class=\x22hljs-attr\x22\x3elineWidth\x3c\/span\x3e: linkWidth*\x3cspan class=\x22hljs-number\x22\x3e0.2\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3efill\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27white\x27\x3c\/span\x3e,\n            });\n            result.push({\n                \x3cspan class=\x22hljs-attr\x22\x3eshape\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27circle\x27\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3er\x3c\/span\x3e: linkWidth*\x3cspan class=\x22hljs-number\x22\x3e0.2\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3efill\x3c\/span\x3e:  data.getClient(\x3cspan class=\x22hljs-string\x22\x3e\x27lineColor\x27\x3c\/span\x3e),\n            });\n        }\x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e{\n            result.push({\n                \x3cspan class=\x22hljs-attr\x22\x3eshape\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27circle\x27\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3er\x3c\/span\x3e: linkWidth*\x3cspan class=\x22hljs-number\x22\x3e0.6\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3elineColor\x3c\/span\x3e: data.getClient(\x3cspan class=\x22hljs-string\x22\x3e\x27lineColor\x27\x3c\/span\x3e),\n                \x3cspan class=\x22hljs-attr\x22\x3elineWidth\x3c\/span\x3e: linkWidth*\x3cspan class=\x22hljs-number\x22\x3e0.2\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3efill\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27white\x27\x3c\/span\x3e,\n            });\n        }\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e result;\n    }\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e动画效果拽拽拽\x3c\/h2\x3e\n\x3cp\x3e从上图还可以看到，在换乘站图标中，除了增加了颜色，还实现了旋转效果。这个就秒杀百度家了。\x3cbr\x3e来看代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x221.    twaver.Util.registerImage(\x27rotateArrow\x27, {\n2.        w: 124,\n3.        h: 124,\n4.        v: [{\n5.            shape: \x27vector\x27,\n6.            name: \x27doubleArrow\x27,\n7.            rotate: 360,\n8.            animate: [{\n9.                attr: \x27rotate\x27,\n10.                to: 0,\n11.                dur: 2000,\n12.                reverse: false,\n13.                repeat: Number.POSITIVE_INFINITY\n14.            }]\n15.        }]\n16.    });\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs groovy\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-number\x22\x3e1.\x3c\/span\x3e    twaver.Util.registerImage(\x3cspan class=\x22hljs-string\x22\x3e\x27rotateArrow\x27\x3c\/span\x3e, {\n\x3cspan class=\x22hljs-number\x22\x3e2.\x3c\/span\x3e        \x3cspan class=\x22hljs-string\x22\x3ew:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e124\x3c\/span\x3e,\n\x3cspan class=\x22hljs-number\x22\x3e3.\x3c\/span\x3e        \x3cspan class=\x22hljs-string\x22\x3eh:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e124\x3c\/span\x3e,\n\x3cspan class=\x22hljs-number\x22\x3e4.\x3c\/span\x3e        \x3cspan class=\x22hljs-string\x22\x3ev:\x3c\/span\x3e [{\n\x3cspan class=\x22hljs-number\x22\x3e5.\x3c\/span\x3e            \x3cspan class=\x22hljs-string\x22\x3eshape:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27vector\x27\x3c\/span\x3e,\n\x3cspan class=\x22hljs-number\x22\x3e6.\x3c\/span\x3e            \x3cspan class=\x22hljs-string\x22\x3ename:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27doubleArrow\x27\x3c\/span\x3e,\n\x3cspan class=\x22hljs-number\x22\x3e7.\x3c\/span\x3e            \x3cspan class=\x22hljs-string\x22\x3erotate:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e360\x3c\/span\x3e,\n\x3cspan class=\x22hljs-number\x22\x3e8.\x3c\/span\x3e            \x3cspan class=\x22hljs-string\x22\x3eanimate:\x3c\/span\x3e [{\n\x3cspan class=\x22hljs-number\x22\x3e9.\x3c\/span\x3e                \x3cspan class=\x22hljs-string\x22\x3eattr:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27rotate\x27\x3c\/span\x3e,\n\x3cspan class=\x22hljs-number\x22\x3e10.\x3c\/span\x3e                \x3cspan class=\x22hljs-string\x22\x3eto:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n\x3cspan class=\x22hljs-number\x22\x3e11.\x3c\/span\x3e                \x3cspan class=\x22hljs-string\x22\x3edur:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e2000\x3c\/span\x3e,\n\x3cspan class=\x22hljs-number\x22\x3e12.\x3c\/span\x3e                \x3cspan class=\x22hljs-string\x22\x3ereverse:\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n\x3cspan class=\x22hljs-number\x22\x3e13.\x3c\/span\x3e                \x3cspan class=\x22hljs-string\x22\x3erepeat:\x3c\/span\x3e Number.POSITIVE_INFINITY\n\x3cspan class=\x22hljs-number\x22\x3e14.\x3c\/span\x3e            }]\n\x3cspan class=\x22hljs-number\x22\x3e15.\x3c\/span\x3e        }]\n\x3cspan class=\x22hljs-number\x22\x3e16.\x3c\/span\x3e    });\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e当然这对于TWaver来说也很容易，只不过对rotate属性进行了动态改变而已。\x3c\/p\x3e\n\x3cp\x3e另外，在单击和双击站点时，还实现了selected和loading的动画效果，值得点赞！\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVEjk9?w=256\x26amp;h=148\x22 src=\x22https:\/\/static.alili.tech\/img\/bVEjk9?w=256\x26amp;h=148\x22 alt=\x22地铁图单击.gif\x22 title=\x22地铁图单击.gif\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVEjla?w=256\x26amp;h=148\x22 src=\x22https:\/\/static.alili.tech\/img\/bVEjla?w=256\x26amp;h=148\x22 alt=\x22地铁图之缓冲.gif\x22 title=\x22地铁图之缓冲.gif\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e混合缩放炫炫炫\x3c\/h2\x3e\n\x3cp\x3e无失真缩放是矢量图的先天优势，小弟也掌握得炉火纯青，把TWaver的混合缩放模式用到极致，还有缩放比例控制、文字自动隐藏等小功能，方便订制。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVEju0?w=413\x26amp;h=255\x22 src=\x22https:\/\/static.alili.tech\/img\/bVEju0?w=413\x26amp;h=255\x22 alt=\x22地铁图缩放.gif\x22 title=\x22地铁图缩放.gif\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e代码也不复杂：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x221.    network.setZoomManager(new twaver.vector.MixedZoomManager(network));\n2.    network.setMinZoom(0.2);\n3.    network.setMaxZoom(3);\n4.    network.setZoomVisibilityThresholds({\n5.        label : 0.6,\n6.    });\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs markdown\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-bullet\x22\x3e1.    \x3c\/span\x3enetwork.setZoomManager(new twaver.vector.MixedZoomManager(network));\n\x3cspan class=\x22hljs-bullet\x22\x3e2.    \x3c\/span\x3enetwork.setMinZoom(0.2);\n\x3cspan class=\x22hljs-bullet\x22\x3e3.    \x3c\/span\x3enetwork.setMaxZoom(3);\n\x3cspan class=\x22hljs-bullet\x22\x3e4.    \x3c\/span\x3enetwork.setZoomVisibilityThresholds({\n\x3cspan class=\x22hljs-bullet\x22\x3e5.        \x3c\/span\x3elabel : 0.6,\n\x3cspan class=\x22hljs-bullet\x22\x3e6.    \x3c\/span\x3e});\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3e交互功能用起来\x3c\/h2\x3e\n\x3cp\x3e小弟很自豪地给我介绍这个功能：图标可以自由拖动，松开后会自动弹回。哥问小弟这有什么用，他一本正经地说：证明图是活的！\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVEjoB?w=256\x26amp;h=148\x22 src=\x22https:\/\/static.alili.tech\/img\/bVEjoB?w=256\x26amp;h=148\x22 alt=\x22地铁图拖拽回弹.gif\x22 title=\x22地铁图拖拽回弹.gif\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e好吧你赢了，虽然是个没什么卵用的功能，但闲的蛋疼的时候可以随便玩上几十分钟我也是信的。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3e连续单击同一站点\x3c\/h2\x3e\n\x3cp\x3e连续单击同一站点（注意不是双击），可以将经过此站点的所有线路突出显示出来。小弟说加入这个功能纯粹因为简单易做，我……竟然表示非常理解，谁年轻时没耍过这类轻松又讨好的小招数呢？\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVEjtZ?w=486\x26amp;h=325\x22 src=\x22https:\/\/static.alili.tech\/img\/bVEjtZ?w=486\x26amp;h=325\x22 alt=\x22地铁图经过线路.gif\x22 title=\x22地铁图经过线路.gif\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3e双击站点\x3c\/h2\x3e\n\x3cp\x3e双击站点，竟然弹出了本站周边的电子地图！知道引入他山之玉，看来小子可教啊。我发现他的定位方法，有的是用经纬度，有的是关键词查询。小弟狡黠地说，开始是人工查每个站点经纬度的，干了一段儿发现太麻烦，后来改路子了。马大大说的，懒人改变世界，我服!\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVEjuo?w=447\x26amp;h=336\x22 src=\x22https:\/\/static.alili.tech\/img\/bVEjuo?w=447\x26amp;h=336\x22 alt=\x22地铁图电子地图.gif\x22 title=\x22地铁图电子地图.gif\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e最后来八一八程序设计的思路吧，小弟是棵好苗子，能做出那么像样的程序，必然是深思熟虑过的。不想再听我啰嗦的朋友，也可以直接发邮件给我，\x3ca\x3etw-service@servasoft.com\x3c\/a\x3e，来鉴赏下小弟的成果。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader9\x22\x3e数据文件的整理\x3c\/h2\x3e\n\x3cp\x3e数据格式，选择了JavaScript原生支持的json文件，直观方便。\x3cbr\x3e数据结构，按照站点、线路、杂项三大块来组织，结构清晰，利于遍历、查询等操作。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x221.    {\n2.        \x26quot;stations\x26quot;:{\n3.            \x26quot;l01s01\x26quot;:{ },\n4.            …………\n5.        }\n6.        \x26quot;lines\x26quot;:{\n7.            \x26quot;l01\x26quot;:{……},\n8.            …………\n9.        }\n10.        \x26quot;sundrys\x26quot;:{\n11.            \x26quot;railwaystationshanghai\x26quot;:{……},\n12.            …………\n13.        }\n14.    }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs markdown\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-bullet\x22\x3e1.    \x3c\/span\x3e{\n\x3cspan class=\x22hljs-bullet\x22\x3e2.        \x3c\/span\x3e\x22stations\x22:{\n\x3cspan class=\x22hljs-bullet\x22\x3e3.            \x3c\/span\x3e\x22l01s01\x22:{ },\n\x3cspan class=\x22hljs-bullet\x22\x3e4.            \x3c\/span\x3e…………\n\x3cspan class=\x22hljs-bullet\x22\x3e5.        \x3c\/span\x3e}\n\x3cspan class=\x22hljs-bullet\x22\x3e6.        \x3c\/span\x3e\x22lines\x22:{\n\x3cspan class=\x22hljs-bullet\x22\x3e7.            \x3c\/span\x3e\x22l01\x22:{……},\n\x3cspan class=\x22hljs-bullet\x22\x3e8.            \x3c\/span\x3e…………\n\x3cspan class=\x22hljs-bullet\x22\x3e9.        \x3c\/span\x3e}\n\x3cspan class=\x22hljs-bullet\x22\x3e10.        \x3c\/span\x3e\x22sundrys\x22:{\n\x3cspan class=\x22hljs-bullet\x22\x3e11.            \x3c\/span\x3e\x22railwaystationshanghai\x22:{……},\n\x3cspan class=\x22hljs-bullet\x22\x3e12.            \x3c\/span\x3e…………\n\x3cspan class=\x22hljs-bullet\x22\x3e13.        \x3c\/span\x3e}\n\x3cspan class=\x22hljs-bullet\x22\x3e14.    \x3c\/span\x3e}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e命名比较规范，通过名字就可以看出基本信息（例如“l01s01”就是1号线第1个站点），甚至直接利用名字就可以进行查询和遍历。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x221.    \x26quot;l01s01\x26quot;:{\n2.        \x26quot;id\x26quot;:\x26quot;l01s01\x26quot;,\n3.        \x26quot;name\x26quot;:\x26quot;莘庄\x26quot;,\n4.        \x26quot;loc\x26quot;:{\x26quot;x\x26quot;:419,\x26quot;y\x26quot;:1330},\n5.        \x26quot;label\x26quot;:\x26quot;bottomright.bottomright\x26quot;,\n6.    },\n7.    …………\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xquery\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e.    \x3cspan class=\x22hljs-string\x22\x3e\x22l01s01\x22\x3c\/span\x3e:{\n\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e.        \x3cspan class=\x22hljs-string\x22\x3e\x22id\x22\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x22l01s01\x22\x3c\/span\x3e,\n\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e.        \x3cspan class=\x22hljs-string\x22\x3e\x22name\x22\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x22莘庄\x22\x3c\/span\x3e,\n\x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e.        \x3cspan class=\x22hljs-string\x22\x3e\x22loc\x22\x3c\/span\x3e:{\x3cspan class=\x22hljs-string\x22\x3e\x22x\x22\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e419\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x22y\x22\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e1330\x3c\/span\x3e},\n\x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e.        \x3cspan class=\x22hljs-string\x22\x3e\x22label\x22\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x22bottomright.bottomright\x22\x3c\/span\x3e,\n\x3cspan class=\x22hljs-number\x22\x3e6\x3c\/span\x3e.    },\n\x3cspan class=\x22hljs-number\x22\x3e7\x3c\/span\x3e.    …………\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader10\x22\x3e站点路线的创建\x3c\/h2\x3e\n\x3cp\x3e首先是读取json文件的数据。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x221.    function loadJSON(path,callback){\n2.        var xhr = new XMLHttpRequest();\n3.        xhr.onreadystatechange = function(){\n4.            if (xhr.readyState === 4) {\n5.                if (xhr.status === 200) {\n6.                   dataJson = JSON.parse(xhr.responseText);\n7.                   callback \x26amp;\x26amp; callback();\n8.               }\n9.           }\n10.       };\n11.       xhr.open(\x26quot;GET\x26quot;, path, true);\n12.       xhr.send();\n13.    }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-number\x22\x3e1.\x3c\/span\x3e    function loadJSON(path,callback){\n\x3cspan class=\x22hljs-number\x22\x3e2.\x3c\/span\x3e        var xhr = new XMLHttpRequest();\n\x3cspan class=\x22hljs-number\x22\x3e3.\x3c\/span\x3e        xhr.onreadystatechange = function(){\n\x3cspan class=\x22hljs-number\x22\x3e4.\x3c\/span\x3e            if (xhr.readyState === \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e) {\n\x3cspan class=\x22hljs-number\x22\x3e5.\x3c\/span\x3e                if (xhr.status === \x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e) {\n\x3cspan class=\x22hljs-number\x22\x3e6.\x3c\/span\x3e                   dataJson = JSON.parse(xhr.responseText);\n\x3cspan class=\x22hljs-number\x22\x3e7.\x3c\/span\x3e                   callback \x26amp;\x26amp; callback();\n\x3cspan class=\x22hljs-number\x22\x3e8.\x3c\/span\x3e               }\n\x3cspan class=\x22hljs-number\x22\x3e9.\x3c\/span\x3e           }\n\x3cspan class=\x22hljs-number\x22\x3e10.\x3c\/span\x3e       };\n\x3cspan class=\x22hljs-number\x22\x3e11.\x3c\/span\x3e       xhr.open(\x3cspan class=\x22hljs-string\x22\x3e\x22GET\x22\x3c\/span\x3e, path, true);\n\x3cspan class=\x22hljs-number\x22\x3e12.\x3c\/span\x3e       xhr.send();\n\x3cspan class=\x22hljs-number\x22\x3e13.\x3c\/span\x3e    }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e因为读取文件是一个异步的过程，所以要程序的展开都要放在文件读取函数的内部。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x221.    function init(){\n2.        loadJSON(\x26quot;shanghaiMetro.json\x26quot;, function(){\n3.            initNetwork(dataJson);\n4.            initNode(dataJson);\n5.        });\n6.    }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-number\x22\x3e1.\x3c\/span\x3e    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3einit\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{\n\x3cspan class=\x22hljs-number\x22\x3e2.\x3c\/span\x3e        loadJSON(\x3cspan class=\x22hljs-string\x22\x3e\x22shanghaiMetro.json\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{\n\x3cspan class=\x22hljs-number\x22\x3e3.\x3c\/span\x3e            initNetwork(dataJson);\n\x3cspan class=\x22hljs-number\x22\x3e4.\x3c\/span\x3e            initNode(dataJson);\n\x3cspan class=\x22hljs-number\x22\x3e5.\x3c\/span\x3e        });\n\x3cspan class=\x22hljs-number\x22\x3e6.\x3c\/span\x3e    }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e只要通过对站点进行一次遍历，车站的建立就完成了。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x221.    for(staId in json.stations){\n2.        var station = json.stations[staId];\n3.        staNode = new twaver.Node({\n4.            id: staId,\n5.            name: station.name,\n6.            image:\x27station\x27,\n7.        });\n8.        staNode.s(\x27label.color\x27,\x27rgba(99,99,99,1)\x27);\n9.        staNode.s(\x27label.font\x27,\x2712px 微软雅黑\x27);\n10.        staNode.s(\x27label.position\x27,station.label);\n11.        staNode.setClient(\x27location\x27,station.loc);\n12.        box.add(staNode);\n13.    }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs markdown\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-bullet\x22\x3e1.    \x3c\/span\x3efor(staId in json.stations){\n\x3cspan class=\x22hljs-bullet\x22\x3e2.        \x3c\/span\x3evar station = json.stations[staId];\n\x3cspan class=\x22hljs-bullet\x22\x3e3.        \x3c\/span\x3estaNode = new twaver.Node({\n\x3cspan class=\x22hljs-bullet\x22\x3e4.            \x3c\/span\x3eid: staId,\n\x3cspan class=\x22hljs-bullet\x22\x3e5.            \x3c\/span\x3ename: station.name,\n\x3cspan class=\x22hljs-bullet\x22\x3e6.            \x3c\/span\x3eimage:\x27station\x27,\n\x3cspan class=\x22hljs-bullet\x22\x3e7.        \x3c\/span\x3e});\n\x3cspan class=\x22hljs-bullet\x22\x3e8.        \x3c\/span\x3estaNode.s(\x27label.color\x27,\x27rgba(99,99,99,1)\x27);\n\x3cspan class=\x22hljs-bullet\x22\x3e9.        \x3c\/span\x3estaNode.s(\x27label.font\x27,\x2712px 微软雅黑\x27);\n\x3cspan class=\x22hljs-bullet\x22\x3e10.        \x3c\/span\x3estaNode.s(\x27label.position\x27,station.label);\n\x3cspan class=\x22hljs-bullet\x22\x3e11.        \x3c\/span\x3estaNode.setClient(\x27location\x27,station.loc);\n\x3cspan class=\x22hljs-bullet\x22\x3e12.        \x3c\/span\x3ebox.add(staNode);\n\x3cspan class=\x22hljs-bullet\x22\x3e13.    \x3c\/span\x3e}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e再对数据文件中的各条线路下的所有站点进行遍历，在站点间依次创建Link。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x221.    for(lineId in json.lines) {\n2.        ……\n3.        for(staSn in line.stations) {\n4.            ……\n5.            var link = new twaver.Link(linkId,prevSta,staNode);\n6.            link.s(\x27link.color\x27, line.color);\n7.            link.s(\x27link.width\x27, linkWidth);\n8.            link.setToolTip(line.name);\n9.            box.add(link);\n10.        }\n11.    }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lasso\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-number\x22\x3e1.\x3c\/span\x3e    for(lineId \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e json.lines) {\n\x3cspan class=\x22hljs-number\x22\x3e2.\x3c\/span\x3e        ……\n\x3cspan class=\x22hljs-number\x22\x3e3.\x3c\/span\x3e        for(staSn \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e line.stations) {\n\x3cspan class=\x22hljs-number\x22\x3e4.\x3c\/span\x3e            ……\n\x3cspan class=\x22hljs-number\x22\x3e5.\x3c\/span\x3e            \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3elink\x3c\/span\x3e = \x3cspan class=\x22hljs-literal\x22\x3enew\x3c\/span\x3e twaver.\x3cspan class=\x22hljs-keyword\x22\x3eLink\x3c\/span\x3e(linkId,prevSta,staNode);\n\x3cspan class=\x22hljs-number\x22\x3e6.\x3c\/span\x3e            \x3cspan class=\x22hljs-keyword\x22\x3elink\x3c\/span\x3e.s(\x3cspan class=\x22hljs-string\x22\x3e\x27link.color\x27\x3c\/span\x3e, line.color);\n\x3cspan class=\x22hljs-number\x22\x3e7.\x3c\/span\x3e            \x3cspan class=\x22hljs-keyword\x22\x3elink\x3c\/span\x3e.s(\x3cspan class=\x22hljs-string\x22\x3e\x27link.width\x27\x3c\/span\x3e, linkWidth);\n\x3cspan class=\x22hljs-number\x22\x3e8.\x3c\/span\x3e            \x3cspan class=\x22hljs-keyword\x22\x3elink\x3c\/span\x3e.setToolTip(line.name);\n\x3cspan class=\x22hljs-number\x22\x3e9.\x3c\/span\x3e            box.add(\x3cspan class=\x22hljs-keyword\x22\x3elink\x3c\/span\x3e);\n\x3cspan class=\x22hljs-number\x22\x3e10.\x3c\/span\x3e        }\n\x3cspan class=\x22hljs-number\x22\x3e11.\x3c\/span\x3e    }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e再对label位置进行调整，否则站点名称会显示的很乱。小弟是通过在原始数据中手动加入位置信息来实现的，稍显笨了一点，应该可以通过程序自动判断站点周围空间来进行智能调整。\x3c\/p\x3e\n\x3cp\x3e最后再加入图标，一张原始的地铁图就呈现出来了。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVEjwf?w=640\x26amp;h=407\x22 src=\x22https:\/\/static.alili.tech\/img\/bVEjwf?w=640\x26amp;h=407\x22 alt=\x22初始地铁图-640x407.png\x22 title=\x22初始地铁图-640x407.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader11\x22\x3e路线拐点的添加\x3c\/h2\x3e\n\x3cp\x3e基本的示意功能已经具备了，这里，小弟让我很欣赏的一点是没有就此停止，而是进一步做了调整，使线路只保留了横平竖直和正斜的走向，以达到整齐美观的效果。可能看起来与参考图稍稍有些不同，主要因为各路段基本只添加了一个拐点，这样做既大大简化了程序，又基本保证了图形的美观度。想远一点，做多一点，是块做产品的好料子。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVEjxb?w=535\x26amp;h=386\x22 src=\x22https:\/\/static.alili.tech\/img\/bVEjxb?w=535\x26amp;h=386\x22 alt=\x22智能拐点.png\x22 title=\x22智能拐点.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e当然为了提高程序的灵活性，应对必须添加两个或以上拐点的情况，也使用了人工拐点的手段。不过这里人工拐点被设成一个隐形的节点，可能利于智能拐点的判断，但也有可能在路线操作时造成混乱。如何处理更好还可以进一步推敲。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var createTurnSta = function(line, staSn){\n    staTurn = new twaver.Node(staSn);\n    staTurn.setImage();\n    staTurn.setClient(\x27lineColor\x27,line.color);\n    staTurn.setClient(\x27lines\x27,[line.id]);\n    var loc = line.stations[staSn];\n    staTurn.setClient(\x27location\x27,loc);\n    box.add(staTurn);\n    return staTurn;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs processing\x22\x3e\x3ccode\x3evar createTurnSta = function(\x3cspan class=\x22hljs-built_in\x22\x3eline\x3c\/span\x3e, staSn){\n    staTurn = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e twaver.Node(staSn);\n    staTurn.setImage();\n    staTurn.setClient(\x3cspan class=\x22hljs-string\x22\x3e\x27lineColor\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-built_in\x22\x3eline\x3c\/span\x3e.\x3cspan class=\x22hljs-built_in\x22\x3ecolor\x3c\/span\x3e);\n    staTurn.setClient(\x3cspan class=\x22hljs-string\x22\x3e\x27lines\x27\x3c\/span\x3e,[\x3cspan class=\x22hljs-built_in\x22\x3eline\x3c\/span\x3e.id]);\n    var loc = \x3cspan class=\x22hljs-built_in\x22\x3eline\x3c\/span\x3e.stations[staSn];\n    staTurn.setClient(\x3cspan class=\x22hljs-string\x22\x3e\x27location\x27\x3c\/span\x3e,loc);\n    \x3cspan class=\x22hljs-built_in\x22\x3ebox\x3c\/span\x3e.\x3cspan class=\x22hljs-built_in\x22\x3eadd\x3c\/span\x3e(staTurn);\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e staTurn;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader12\x22\x3e接点位置的调整\x3c\/h2\x3e\n\x3cp\x3e大家可以看到，并不是所有路段都直接连入站点中心，在许多情况下必须要进行偏移。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var createFollowSta = function(json, line, staNode, staId){\n    staFollow = new twaver.Follower(staId);\n    staFollow.setImage();\n    staFollow.setClient(\x27lineColor\x27,line.color);\n    staFollow.setClient(\x27lines\x27,[line.id]);\n    staFollow.setHost(staNode);\n    var az = azimuth[staId.substr(6,2)];\n    var loc0 = json.stations[staId.substr(0,6)].loc;\n    var loc = {x:loc0.x\x2baz.x, y:loc0.y\x2baz.y};\n    staFollow.setClient(\x27location\x27,loc);\n    box.add(staFollow);\n    return staFollow;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stata\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e createFollowSta = function(json, \x3cspan class=\x22hljs-keyword\x22\x3eline\x3c\/span\x3e, staNode, staId){\n    staFollow = new twaver.Follower(staId);\n    staFollow.setImage();\n    staFollow.setClient(\x27lineColor\x27,\x3cspan class=\x22hljs-keyword\x22\x3eline\x3c\/span\x3e.color);\n    staFollow.setClient(\x27lines\x27,[\x3cspan class=\x22hljs-keyword\x22\x3eline\x3c\/span\x3e.id]);\n    staFollow.setHost(staNode);\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e az = azimuth[staId.\x3cspan class=\x22hljs-built_in\x22\x3esubstr\x3c\/span\x3e(6,2)];\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e loc0 = json.stations[staId.\x3cspan class=\x22hljs-built_in\x22\x3esubstr\x3c\/span\x3e(0,6)].\x3cspan class=\x22hljs-keyword\x22\x3eloc\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eloc\x3c\/span\x3e = {x:loc0.x\x2baz.x, y:loc0.y\x2baz.y};\n    staFollow.setClient(\x27location\x27,\x3cspan class=\x22hljs-keyword\x22\x3eloc\x3c\/span\x3e);\n    box.add(staFollow);\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e staFollow;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVEjxx?w=356\x26amp;h=247\x22 src=\x22https:\/\/static.alili.tech\/img\/bVEjxx?w=356\x26amp;h=247\x22 alt=\x22并行线路.png\x22 title=\x22并行线路.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e小弟采取了虚拟节点的办法，就是在站点的旁边，添加一个Follower（但并不显示出来），让并行的不同线路连接到不同的Follower上。通过调整Follower的位置，来实现线路与站点连接点的控制。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var azimuth = {\n    bb: {x: 0, y: linkWidth*zoom\/2},\n    tt: {x: 0, y: -linkWidth*zoom\/2},\n    rr: {x: linkWidth*zoom\/2, y: 0},\n    ll: {x: -linkWidth\/2, y: 0},\n    br: {x: linkWidth*zoom*0.7\/2, y: linkWidth*zoom*0.7\/2},\n    bl: {x: -linkWidth*zoom*0.7\/2, y: linkWidth*zoom*0.7\/2},\n    tr: {x: linkWidth*zoom*0.7\/2, y: -linkWidth*zoom*0.7\/2},\n    tl: {x: -linkWidth*zoom*0.7\/2, y: -linkWidth*zoom*0.7\/2},\n    BB: {x: 0, y: linkWidth*zoom},\n    TT: {x: 0, y: -linkWidth*zoom},\n    RR: {x: linkWidth*zoom, y: 0},\n    LL: {x: -linkWidth, y: 0},\n    BR: {x: linkWidth*zoom*0.7, y: linkWidth*zoom*0.7},\n    BL: {x: -linkWidth*zoom*0.7, y: linkWidth*zoom*0.7},\n    TR: {x: linkWidth*zoom*0.7, y: -linkWidth*zoom*0.7},\n    TL: {x: -linkWidth*zoom*0.7, y: -linkWidth*zoom*0.7}\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs groovy\x22\x3e\x3ccode\x3evar azimuth = {\n\x3cspan class=\x22hljs-symbol\x22\x3e    bb:\x3c\/span\x3e {\x3cspan class=\x22hljs-string\x22\x3ex:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3ey:\x3c\/span\x3e linkWidth*zoom\/\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e},\n\x3cspan class=\x22hljs-symbol\x22\x3e    tt:\x3c\/span\x3e {\x3cspan class=\x22hljs-string\x22\x3ex:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3ey:\x3c\/span\x3e -linkWidth*zoom\/\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e},\n\x3cspan class=\x22hljs-symbol\x22\x3e    rr:\x3c\/span\x3e {\x3cspan class=\x22hljs-string\x22\x3ex:\x3c\/span\x3e linkWidth*zoom\/\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3ey:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e},\n\x3cspan class=\x22hljs-symbol\x22\x3e    ll:\x3c\/span\x3e {\x3cspan class=\x22hljs-string\x22\x3ex:\x3c\/span\x3e -linkWidth\/\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3ey:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e},\n\x3cspan class=\x22hljs-symbol\x22\x3e    br:\x3c\/span\x3e {\x3cspan class=\x22hljs-string\x22\x3ex:\x3c\/span\x3e linkWidth*zoom*\x3cspan class=\x22hljs-number\x22\x3e0.7\x3c\/span\x3e\x3cspan class=\x22hljs-regexp\x22\x3e\/2, y: linkWidth*zoom*0.7\/\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e},\n\x3cspan class=\x22hljs-symbol\x22\x3e    bl:\x3c\/span\x3e {\x3cspan class=\x22hljs-string\x22\x3ex:\x3c\/span\x3e -linkWidth*zoom*\x3cspan class=\x22hljs-number\x22\x3e0.7\x3c\/span\x3e\x3cspan class=\x22hljs-regexp\x22\x3e\/2, y: linkWidth*zoom*0.7\/\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e},\n\x3cspan class=\x22hljs-symbol\x22\x3e    tr:\x3c\/span\x3e {\x3cspan class=\x22hljs-string\x22\x3ex:\x3c\/span\x3e linkWidth*zoom*\x3cspan class=\x22hljs-number\x22\x3e0.7\x3c\/span\x3e\x3cspan class=\x22hljs-regexp\x22\x3e\/2, y: -linkWidth*zoom*0.7\/\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e},\n\x3cspan class=\x22hljs-symbol\x22\x3e    tl:\x3c\/span\x3e {\x3cspan class=\x22hljs-string\x22\x3ex:\x3c\/span\x3e -linkWidth*zoom*\x3cspan class=\x22hljs-number\x22\x3e0.7\x3c\/span\x3e\x3cspan class=\x22hljs-regexp\x22\x3e\/2, y: -linkWidth*zoom*0.7\/\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e},\n\x3cspan class=\x22hljs-symbol\x22\x3e    BB:\x3c\/span\x3e {\x3cspan class=\x22hljs-string\x22\x3ex:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3ey:\x3c\/span\x3e linkWidth*zoom},\n\x3cspan class=\x22hljs-symbol\x22\x3e    TT:\x3c\/span\x3e {\x3cspan class=\x22hljs-string\x22\x3ex:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3ey:\x3c\/span\x3e -linkWidth*zoom},\n\x3cspan class=\x22hljs-symbol\x22\x3e    RR:\x3c\/span\x3e {\x3cspan class=\x22hljs-string\x22\x3ex:\x3c\/span\x3e linkWidth*zoom, \x3cspan class=\x22hljs-string\x22\x3ey:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e},\n\x3cspan class=\x22hljs-symbol\x22\x3e    LL:\x3c\/span\x3e {\x3cspan class=\x22hljs-string\x22\x3ex:\x3c\/span\x3e -linkWidth, \x3cspan class=\x22hljs-string\x22\x3ey:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e},\n\x3cspan class=\x22hljs-symbol\x22\x3e    BR:\x3c\/span\x3e {\x3cspan class=\x22hljs-string\x22\x3ex:\x3c\/span\x3e linkWidth*zoom*\x3cspan class=\x22hljs-number\x22\x3e0.7\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3ey:\x3c\/span\x3e linkWidth*zoom*\x3cspan class=\x22hljs-number\x22\x3e0.7\x3c\/span\x3e},\n\x3cspan class=\x22hljs-symbol\x22\x3e    BL:\x3c\/span\x3e {\x3cspan class=\x22hljs-string\x22\x3ex:\x3c\/span\x3e -linkWidth*zoom*\x3cspan class=\x22hljs-number\x22\x3e0.7\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3ey:\x3c\/span\x3e linkWidth*zoom*\x3cspan class=\x22hljs-number\x22\x3e0.7\x3c\/span\x3e},\n\x3cspan class=\x22hljs-symbol\x22\x3e    TR:\x3c\/span\x3e {\x3cspan class=\x22hljs-string\x22\x3ex:\x3c\/span\x3e linkWidth*zoom*\x3cspan class=\x22hljs-number\x22\x3e0.7\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3ey:\x3c\/span\x3e -linkWidth*zoom*\x3cspan class=\x22hljs-number\x22\x3e0.7\x3c\/span\x3e},\n\x3cspan class=\x22hljs-symbol\x22\x3e    TL:\x3c\/span\x3e {\x3cspan class=\x22hljs-string\x22\x3ex:\x3c\/span\x3e -linkWidth*zoom*\x3cspan class=\x22hljs-number\x22\x3e0.7\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3ey:\x3c\/span\x3e -linkWidth*zoom*\x3cspan class=\x22hljs-number\x22\x3e0.7\x3c\/span\x3e}\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e介绍到这里就结束了，虽然是个小例子，实在是但美观性和实用性都还过得去，小弟花了心思去做，其实稍加改造就可以做出高铁图、公交图、运行图等应用。设想一下，如果能用在轨道交通列控中心大屏监控里，是多么炫酷。说到这，又想起了前两天云栖大会上刚看到的杭州城市数据大脑，不知何时，哥也能参与一把那样的项目呢？可视化，哥的强项……\x3c\/p\x3e\n\x3cp\x3e最后，想要看程序，或者想玩“地铁拖拖乐”的各位，都可以给我留言和发邮件：\x3ca\x3etw-service@servasoft.com\x3c\/a\x3e。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>HTML5，不只是看上去很美（第四弹：可交互地铁线路图）</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000007186026">https://segmentfault.com/a/1190000007186026</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/aw28vi5cfx9/" target="_blank">https://alili.tech/archive/aw28vi5cfx9/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>