<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | å‰ç«¯å¤§çˆ†ç‚¸! - WEB BANG! BANG!! BANG!!! å‰ç«¯å¤§çˆ†ç‚¸,ä¸€ä¸ªå‰ç«¯æŠ€æœ¯åšå®¢.æ¯å¤©ç¢°åˆ°é‚£ä¹ˆå¤šé—®é¢˜,ç»ˆå½’è¿˜æ˜¯éœ€è¦ä¸€ä¸ªè®°å½•çš„åœ°æ–¹. æœ¬æ–‡èµ„æºæ¥æºäº’è”ç½‘ï¼Œä»…ä¾›å­¦ä¹ ç ”ç©¶ä½¿ç”¨ï¼Œç‰ˆæƒå½’è¯¥èµ„æºçš„åˆæ³•æ‹¥æœ‰è€…æ‰€æœ‰ï¼Œ Alili, å‰ç«¯å¤§çˆ†ç‚¸, WEB BANG BANG BANG, webå‰ç«¯åšå®¢, å‰ç«¯æ¨¡å—åŒ–, å‰ç«¯å·¥ç¨‹åŒ–, å‰ç«¯æ•°æ®ç›‘æ§, æ€§èƒ½ä¼˜åŒ–, ç½‘é¡µåˆ¶ä½œ, å‰ç«¯, js"><meta name="keywords" content="Alili, å‰ç«¯å¤§çˆ†ç‚¸, WEB BANG BANG BANG, webå‰ç«¯åšå®¢, å‰ç«¯æ¨¡å—åŒ–, å‰ç«¯å·¥ç¨‹åŒ–, å‰ç«¯æ•°æ®ç›‘æ§, æ€§èƒ½ä¼˜åŒ–, ç½‘é¡µåˆ¶ä½œ, å‰ç«¯, js, html5, css, è¸©å‘å°æŠ¥å‘Š, å¾®å‰ç«¯, æ ‘è“æ´¾, å‰ç«¯å¼€å‘, åŒºå—é“¾, ç½‘ç»œ, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="ç‚«é…·ç²’å­è¡¨ç™½ï¼ŒåŒåä¸€è„±å•é å®ƒäº†ï¼"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | å‰ç«¯å¤§çˆ†ç‚¸! - WEB BANG! BANG!! BANG!!! å‰ç«¯å¤§çˆ†ç‚¸,ä¸€ä¸ªå‰ç«¯æŠ€æœ¯åšå®¢.æ¯å¤©ç¢°åˆ°é‚£ä¹ˆå¤šé—®é¢˜,ç»ˆå½’è¿˜æ˜¯éœ€è¦ä¸€ä¸ªè®°å½•çš„åœ°æ–¹. æœ¬æ–‡èµ„æºæ¥æºäº’è”ç½‘ï¼Œä»…ä¾›å­¦ä¹ ç ”ç©¶ä½¿ç”¨ï¼Œç‰ˆæƒå½’è¯¥èµ„æºçš„åˆæ³•æ‹¥æœ‰è€…æ‰€æœ‰ï¼Œ Alili, å‰ç«¯å¤§çˆ†ç‚¸, WEB BANG BANG BANG, webå‰ç«¯åšå®¢, å‰ç«¯æ¨¡å—åŒ–, å‰ç«¯å·¥ç¨‹åŒ–, å‰ç«¯æ•°æ®ç›‘æ§, æ€§èƒ½ä¼˜åŒ–, ç½‘é¡µåˆ¶ä½œ, å‰ç«¯, js"><meta property="og:site_name" content="Alili"><title>ç‚«é…·ç²’å­è¡¨ç™½ï¼ŒåŒåä¸€è„±å•é å®ƒäº†ï¼ | å‰ç«¯å¤§çˆ†ç‚¸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/hqn4m86ws07/",
				"appid": "1613049289050283", 
				"title": "ç‚«é…·ç²’å­è¡¨ç™½ï¼ŒåŒåä¸€è„±å•é å®ƒäº†ï¼ | å‰ç«¯å¤§çˆ†ç‚¸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-03-02T02:30:07"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/61sjm32irkj/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/agc809stg9a/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fhqn4m86ws07%2f&text=%e7%82%ab%e9%85%b7%e7%b2%92%e5%ad%90%e8%a1%a8%e7%99%bd%ef%bc%8c%e5%8f%8c%e5%8d%81%e4%b8%80%e8%84%b1%e5%8d%95%e9%9d%a0%e5%ae%83%e4%ba%86%ef%bc%81"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fhqn4m86ws07%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fhqn4m86ws07%2f&text=%e7%82%ab%e9%85%b7%e7%b2%92%e5%ad%90%e8%a1%a8%e7%99%bd%ef%bc%8c%e5%8f%8c%e5%8d%81%e4%b8%80%e8%84%b1%e5%8d%95%e9%9d%a0%e5%ae%83%e4%ba%86%ef%bc%81"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fhqn4m86ws07%2f&title=%e7%82%ab%e9%85%b7%e7%b2%92%e5%ad%90%e8%a1%a8%e7%99%bd%ef%bc%8c%e5%8f%8c%e5%8d%81%e4%b8%80%e8%84%b1%e5%8d%95%e9%9d%a0%e5%ae%83%e4%ba%86%ef%bc%81"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fhqn4m86ws07%2f&is_video=false&description=%e7%82%ab%e9%85%b7%e7%b2%92%e5%ad%90%e8%a1%a8%e7%99%bd%ef%bc%8c%e5%8f%8c%e5%8d%81%e4%b8%80%e8%84%b1%e5%8d%95%e9%9d%a0%e5%ae%83%e4%ba%86%ef%bc%81"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e7%82%ab%e9%85%b7%e7%b2%92%e5%ad%90%e8%a1%a8%e7%99%bd%ef%bc%8c%e5%8f%8c%e5%8d%81%e4%b8%80%e8%84%b1%e5%8d%95%e9%9d%a0%e5%ae%83%e4%ba%86%ef%bc%81&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fhqn4m86ws07%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fhqn4m86ws07%2f&title=%e7%82%ab%e9%85%b7%e7%b2%92%e5%ad%90%e8%a1%a8%e7%99%bd%ef%bc%8c%e5%8f%8c%e5%8d%81%e4%b8%80%e8%84%b1%e5%8d%95%e9%9d%a0%e5%ae%83%e4%ba%86%ef%bc%81"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fhqn4m86ws07%2f&title=%e7%82%ab%e9%85%b7%e7%b2%92%e5%ad%90%e8%a1%a8%e7%99%bd%ef%bc%8c%e5%8f%8c%e5%8d%81%e4%b8%80%e8%84%b1%e5%8d%95%e9%9d%a0%e5%ae%83%e4%ba%86%ef%bc%81"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fhqn4m86ws07%2f&title=%e7%82%ab%e9%85%b7%e7%b2%92%e5%ad%90%e8%a1%a8%e7%99%bd%ef%bc%8c%e5%8f%8c%e5%8d%81%e4%b8%80%e8%84%b1%e5%8d%95%e9%9d%a0%e5%ae%83%e4%ba%86%ef%bc%81"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fhqn4m86ws07%2f&title=%e7%82%ab%e9%85%b7%e7%b2%92%e5%ad%90%e8%a1%a8%e7%99%bd%ef%bc%8c%e5%8f%8c%e5%8d%81%e4%b8%80%e8%84%b1%e5%8d%95%e9%9d%a0%e5%ae%83%e4%ba%86%ef%bc%81"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#ç‰ˆæƒå£°æ˜">ç‰ˆæƒå£°æ˜</a><ul><li><a href="#åŸæ–‡æ ‡é¢˜">åŸæ–‡æ ‡é¢˜</a></li><li><a href="#åŸæ–‡é“¾æ¥">åŸæ–‡é“¾æ¥</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">ç‚«é…·ç²’å­è¡¨ç™½ï¼ŒåŒåä¸€è„±å•é å®ƒäº†ï¼</h1><div class="meta"><div class="postdate"><time datetime="2019-03-02" itemprop="datePublished">2019-03-02</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | å‰ç«¯å¤§çˆ†ç‚¸! - WEB BANG! BANG!! BANG!!! å‰ç«¯å¤§çˆ†ç‚¸,ä¸€ä¸ªå‰ç«¯æŠ€æœ¯åšå®¢.æ¯å¤©ç¢°åˆ°é‚£ä¹ˆå¤šé—®é¢˜,ç»ˆå½’è¿˜æ˜¯éœ€è¦ä¸€ä¸ªè®°å½•çš„åœ°æ–¹. æœ¬æ–‡èµ„æºæ¥æºäº’è”ç½‘ï¼Œä»…ä¾›å­¦ä¹ ç ”ç©¶ä½¿ç”¨ï¼Œç‰ˆæƒå½’è¯¥èµ„æºçš„åˆæ³•æ‹¥æœ‰è€…æ‰€æœ‰ï¼Œ Alili, å‰ç«¯å¤§çˆ†ç‚¸, WEB BANG BANG BANG, webå‰ç«¯åšå®¢, å‰ç«¯æ¨¡å—åŒ–, å‰ç«¯å·¥ç¨‹åŒ–, å‰ç«¯æ•°æ®ç›‘æ§, æ€§èƒ½ä¼˜åŒ–, ç½‘é¡µåˆ¶ä½œ, å‰ç«¯, js, html5, css, è¸©å‘å°æŠ¥å‘Š, å¾®å‰ç«¯, æ ‘è“æ´¾, å‰ç«¯å¼€å‘, åŒºå—é“¾, ç½‘ç»œ, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016908379?w=1100\x26amp;h=564\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016908379?w=1100\x26amp;h=564\x22 alt=\x22æˆ‘è€å©†\x22 title=\x22æˆ‘è€å©†\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3eâ€‹    åŒåä¸€å…‰æ£èŠ‚åˆè¦æ¥ä¸´äº†ï¼Œæ¯å¹´è¿™ä¸ªæ—¶å€™éƒ½æ˜¯æœ¬äººæœ€è‹¦é—·çš„æ—¶åˆ»ã€‚æ—¥æ¸æ¶ˆç˜¦çš„é’±åŒ…ï¼Œæ„ˆå‘å¹²æ¶¸çš„åŒæ‰‹ï¼Œè™½ç„¶å˜å¼ºäº†ï¼Œå¤´å´å˜å‡‰äº†ã€‚ä»Šå¹´ä¸€å®šè¦æç‚¹äº‹æƒ…ï¼\x3c\/p\x3e\n\x3cp\x3e\x26lt;img src=\x22\x3ca href=\x22https:\/\/img.alicdn.com\/tfs\/TB1vmSanhTpK1RjSZR0XXbEwXXa-400-400.gif\x26amp;quot\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/img.alicdn.com\/tfs\/TB...\x3c\/a\x3e; alt=\x22fxxking things\x22 width=\x22160\x22\x26gt;\x3c\/p\x3e\n\x3cp\x3eâ€‹    æœ€è¿‘å¬å¥³ç¥è¯´æƒ³è°ˆæ‹çˆ±äº†ï¼Œâœ§(â‰– â—¡ â‰–) å˜¿å˜¿ï¼Œä¸€å®šä¸èƒ½æ”¾è¿‡è¿™ä¸ªæœºä¼šï¼Œç»™å¥¹æ¥ä¸ªä¸ä¸€æ ·çš„è¡¨ç™½ã€‚\x3c\/p\x3e\n\x3cp\x3e\x26lt;img src=\x22\x3ca href=\x22https:\/\/img.alicdn.com\/tfs\/TB10VGcnbPpK1RjSZFFXXa5PpXa-1342-752.png\x26amp;quot\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/img.alicdn.com\/tfs\/TB...\x3c\/a\x3e; alt=\x22æˆ‘è€å©†\x22 width=\x22360\x22\x26gt;\x3c\/p\x3e\n\x3cp\x3eä½œä¸ºæ•´å¤©æå¯è§†åŒ–çš„å‰ç«¯æ”»åŸç‹®ï¼Œæœ€å…ˆæƒ³åˆ°çš„å°±æ˜¯å¸¸ç©çš„å„ç§ç²’å­ã€‚é‚£ä¹ˆå’±ä»¬å°±ä¸€èµ·æ¥æŠŠè¿™ä¸ªç²’å­ç³»ç»Ÿç©å‡ºèŠ±æ¥å§ã€‚\x3cbr\x3e\x3ca href=\x22https:\/\/es2049.studio\/work-show\/textPraticle\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eæ¼”ç¤ºåœ°å€\x3c\/a\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3eç”¨ç²’å­ç»„æˆæ–‡å­—\x3c\/h2\x3e\n\x3cp\x3eé¦–å…ˆï¼Œå’±ä»¬æƒ³ä¸‹è¦å¦‚ä½•å°†ä¸€ç³»åˆ—çš„ç²’å­ç»„æˆä¸€å¥è¡¨ç™½å‘¢ï¼Ÿ\x3c\/p\x3e\n\x3cp\x3eå®ç°åŸç†å…¶å®å¾ˆç®€å•ï¼ŒCanvas ä¸­æœ‰ä¸ª getImageData çš„æ–¹æ³•ï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ªçŸ©å½¢èŒƒå›´æ‰€æœ‰åƒç´ ç‚¹æ•°æ®ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±è¯•è¯•æ¥è·å–ä¸€ä¸ªæ–‡å­—çš„å½¢çŠ¶å§ã€‚\x3c\/p\x3e\n\x3cp\x3eç¬¬ä¸€æ­¥ï¼Œç”¨ measureText çš„æ–¹æ³•æ¥è®¡ç®—å‡ºæ–‡å­—é€‚å½“çš„å°ºå¯¸å’Œä½ç½®ã€‚\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22å…¨é€‰\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ åˆ›å»ºä¸€ä¸ªè·Ÿç”»å¸ƒç­‰æ¯”ä¾‹çš„ canvas\nconst width = 100;\nconst height = ~~(width * this.height \/ this.width); \/\/ this.width , this.height è¯´æ•´ä¸ªç”»å¸ƒçš„å°ºå¯¸\nconst offscreenCanvas = document.createElement(\x27canvas\x27);\nconst offscreenCanvasCtx = offscreenCanvas.getContext(\x272d\x27);\noffscreenCanvas.setAttribute(\x27width\x27, width);\noffscreenCanvas.setAttribute(\x27height\x27, height);\n\n\/\/ åœ¨è¿™ç¦»å± canvas ä¸­å°†æˆ‘ä»¬æƒ³è¦çš„æ–‡å­— textAll ç»˜åˆ¶å‡ºæ¥åï¼Œå†è®¡ç®—å®ƒåˆé€‚çš„å°ºå¯¸\noffscreenCanvasCtx.fillStyle = \x27#000\x27;\noffscreenCanvasCtx.font = \x27bold 10px Arial\x27;\nconst measure = offscreenCanvasCtx.measureText(textAll); \/\/ æµ‹é‡æ–‡å­—ï¼Œç”¨æ¥è·å–å®½åº¦\nconst size = 0.8;\n\/\/ å®½é«˜åˆ†åˆ«è¾¾åˆ°å±å¹•0.8æ—¶çš„size\nconst fSize = Math.min(height * size * 10 \/ lineHeight, width * size * 10 \/ measure.width);  \/\/ 10åƒç´ å­—ä½“è¡Œé«˜ lineHeight=7 magic\noffscreenCanvasCtx.font = `bold ${fSize}px Arial`;\n\n\/\/ æ ¹æ®è®¡ç®—åçš„å­—ä½“å¤§å°ï¼Œåœ¨å°†æ–‡å­—æ‘†æ”¾åˆ°é€‚åˆçš„ä½ç½®ï¼Œæ–‡å­—çš„åæ ‡èµ·å§‹ä½ç½®åœ¨å·¦ä¸‹æ–¹\nconst measureResize = offscreenCanvasCtx.measureText(textAll);\n\/\/ æ–‡å­—èµ·å§‹ä½ç½®åœ¨å·¦ä¸‹æ–¹\nlet left = (width - measureResize.width) \/ 2;\nconst bottom = (height \x2b fSize \/ 10 * lineHeight) \/ 2;\noffscreenCanvasCtx.fillText(textAll, left, bottom);\x22 title=\x22\x22 data-original-title=\x22å¤åˆ¶\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22æ”¾è¿›ç¬”è®°\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ åˆ›å»ºä¸€ä¸ªè·Ÿç”»å¸ƒç­‰æ¯”ä¾‹çš„ canvas\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e width = \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e height = ~~(width * \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.height \/ \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.width); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ this.width , this.height è¯´æ•´ä¸ªç”»å¸ƒçš„å°ºå¯¸\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e offscreenCanvas = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.createElement(\x3cspan class=\x22hljs-string\x22\x3e\x27canvas\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e offscreenCanvasCtx = offscreenCanvas.getContext(\x3cspan class=\x22hljs-string\x22\x3e\x272d\x27\x3c\/span\x3e);\noffscreenCanvas.setAttribute(\x3cspan class=\x22hljs-string\x22\x3e\x27width\x27\x3c\/span\x3e, width);\noffscreenCanvas.setAttribute(\x3cspan class=\x22hljs-string\x22\x3e\x27height\x27\x3c\/span\x3e, height);\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ åœ¨è¿™ç¦»å± canvas ä¸­å°†æˆ‘ä»¬æƒ³è¦çš„æ–‡å­— textAll ç»˜åˆ¶å‡ºæ¥åï¼Œå†è®¡ç®—å®ƒåˆé€‚çš„å°ºå¯¸\x3c\/span\x3e\noffscreenCanvasCtx.fillStyle = \x3cspan class=\x22hljs-string\x22\x3e\x27#000\x27\x3c\/span\x3e;\noffscreenCanvasCtx.font = \x3cspan class=\x22hljs-string\x22\x3e\x27bold 10px Arial\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e measure = offscreenCanvasCtx.measureText(textAll); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ æµ‹é‡æ–‡å­—ï¼Œç”¨æ¥è·å–å®½åº¦\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e size = \x3cspan class=\x22hljs-number\x22\x3e0.8\x3c\/span\x3e;\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ å®½é«˜åˆ†åˆ«è¾¾åˆ°å±å¹•0.8æ—¶çš„size\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e fSize = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.min(height * size * \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e \/ lineHeight, width * size * \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e \/ measure.width);  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 10åƒç´ å­—ä½“è¡Œé«˜ lineHeight=7 magic\x3c\/span\x3e\noffscreenCanvasCtx.font = \x3cspan class=\x22hljs-string\x22\x3e`bold \x3cspan class=\x22hljs-subst\x22\x3e${fSize}\x3c\/span\x3epx Arial`\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ æ ¹æ®è®¡ç®—åçš„å­—ä½“å¤§å°ï¼Œåœ¨å°†æ–‡å­—æ‘†æ”¾åˆ°é€‚åˆçš„ä½ç½®ï¼Œæ–‡å­—çš„åæ ‡èµ·å§‹ä½ç½®åœ¨å·¦ä¸‹æ–¹\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e measureResize = offscreenCanvasCtx.measureText(textAll);\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ æ–‡å­—èµ·å§‹ä½ç½®åœ¨å·¦ä¸‹æ–¹\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e left = (width - measureResize.width) \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e bottom = (height \x2b fSize \/ \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e * lineHeight) \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\noffscreenCanvasCtx.fillText(textAll, left, bottom);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eå’±ä»¬å¯ä»¥ appendChild åˆ° body é‡Œçœ‹çœ¼\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016908380\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016908380\x22 alt=\x22textAll\x22 title=\x22textAll\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3eå¥½çš„ã€‚åŒå­¦ä»¬æ³¨æ„ï¼Œæˆ‘è¦å¼€å§‹å˜å½¢äº† [æ¨çœ¼é•œ] ã€‚\x3c\/p\x3e\n\x3cp\x3egetImageData è·å–çš„åƒç´ æ•°æ®æ˜¯ä¸€ä¸ª Uint8ClampedArray ï¼ˆå€¼æ˜¯ 0 - 255 çš„æ•°ç»„ï¼‰ï¼Œ4 ä¸ªæ•°ä¸€ç»„åˆ†åˆ«å¯¹åº”ä¸€ä¸ªåƒç´ ç‚¹çš„ R G B A å€¼ã€‚æˆ‘ä»¬åªéœ€è¦åˆ¤æ–­ i * 4 \x2b 3 ä¸ä¸º 0 å°±å¯ä»¥å¾—åˆ°éœ€è¦çš„å­—ä½“å½¢çŠ¶æ•°æ®äº†ã€‚\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22å…¨é€‰\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ texts æ‰€æœ‰çš„å•è¯åˆ†åˆ«è·å– data ï¼Œä¸Šæ–‡çš„ textAll æ˜¯ texts åŠ ä¸€èµ·\nObject.values(texts).forEach(item =\x3e {\n    offscreenCanvasCtx.clearRect(0, 0, width, height);\n    offscreenCanvasCtx.fillText(item.text, left, bottom);\n    left \x2b= offscreenCanvasCtx.measureText(item.text).width;\n    const data = offscreenCanvasCtx.getImageData(0, 0, width, height);\n    const points = [];\n    \/\/ åˆ¤æ–­ç¬¬ i * 4 \x2b 3 ä½æ˜¯å¦ä¸º0ï¼Œè·å¾—ç›¸å¯¹çš„ x,y åæ ‡(ä½¿ç”¨æ—¶éœ€ä¹˜ç”»å¸ƒçš„å®é™…é•¿å®½, y åæ ‡ä¹Ÿéœ€è¦å–åå‘)\n    for (let i = 0, max = data.width * data.height; i \x3c max; i\x2b\x2b) {\n        if (data.data[i * 4 \x2b 3]) {\n            points.push({\n                x: (i % data.width) \/ data.width,\n                y: (i \/ data.width) \/ data.height\n            });\n        }\n    }\n    \/\/ ä¿å­˜åˆ°ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨äºåé¢çš„ç»˜åˆ¶\n    geometry.push({\n        color: item.hsla,\n        points\n    });\n})\x22 title=\x22\x22 data-original-title=\x22å¤åˆ¶\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22æ”¾è¿›ç¬”è®°\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ texts æ‰€æœ‰çš„å•è¯åˆ†åˆ«è·å– data ï¼Œä¸Šæ–‡çš„ textAll æ˜¯ texts åŠ ä¸€èµ·\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.values(texts).forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eitem\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n    offscreenCanvasCtx.clearRect(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, width, height);\n    offscreenCanvasCtx.fillText(item.text, left, bottom);\n    left \x2b= offscreenCanvasCtx.measureText(item.text).width;\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e data = offscreenCanvasCtx.getImageData(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, width, height);\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e points = [];\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ åˆ¤æ–­ç¬¬ i * 4 \x2b 3 ä½æ˜¯å¦ä¸º0ï¼Œè·å¾—ç›¸å¯¹çš„ x,y åæ ‡(ä½¿ç”¨æ—¶éœ€ä¹˜ç”»å¸ƒçš„å®é™…é•¿å®½, y åæ ‡ä¹Ÿéœ€è¦å–åå‘)\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, max = data.width * data.height; i \x26lt; max; i\x2b\x2b) {\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (data.data[i * \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e \x2b \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e]) {\n            points.push({\n                \x3cspan class=\x22hljs-attr\x22\x3ex\x3c\/span\x3e: (i % data.width) \/ data.width,\n                \x3cspan class=\x22hljs-attr\x22\x3ey\x3c\/span\x3e: (i \/ data.width) \/ data.height\n            });\n        }\n    }\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ä¿å­˜åˆ°ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨äºåé¢çš„ç»˜åˆ¶\x3c\/span\x3e\n    geometry.push({\n        \x3cspan class=\x22hljs-attr\x22\x3ecolor\x3c\/span\x3e: item.hsla,\n        points\n    });\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3eåˆ¶å®šåœºæ™¯ï¼Œç»˜åˆ¶å›¾å½¢\x3c\/h2\x3e\n\x3cp\x3eæ–‡å­—å›¾å½¢çš„è·å–æ–¹å¼ä»¥åŠæå®šäº†ï¼Œé‚£ä¹ˆå’±ä»¬å°±å¯ä»¥æŠŠå†…å®¹æ•´ä½“è¾“å‡ºäº†ã€‚å’±ä»¬å®šä¹‰ä¸€ä¸ªç®€å•çš„è„šæœ¬æ ¼å¼ã€‚\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22å…¨é€‰\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ hsla æ ¼å¼æ–¹ä¾¿ä»¥ååšè‰²å½©å˜åŒ–çš„æ‰©å±•\nconst color1 = {h:197,s:\x27100%\x27,l:\x2750%\x27,a:\x2780%\x27};\nconst color2 = {h:197,s:\x27100%\x27,l:\x2750%\x27,a:\x2780%\x27};\n\/\/ lifeTime ç¥¯æ•°\nconst Actions = [\n    {lifeTime:60,text:[{text:3,hsla:color1}]},\n    {lifeTime:60,text:[{text:2,hsla:color1}]},\n    {lifeTime:60,text:[{text:1,hsla:color1}]},\n    {lifeTime:120,text:[\n        {text:\x27I\x27,hsla:color1},\n        {text:\x27â¤ï¸\x27,hsla:color2},\n        {text:\x27Y\x27,hsla:color1},\n        {text:\x27O\x27,hsla:color1},\n        {text:\x27U\x27,hsla:color1}\n    ]},\n];\x22 title=\x22\x22 data-original-title=\x22å¤åˆ¶\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22æ”¾è¿›ç¬”è®°\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ hsla æ ¼å¼æ–¹ä¾¿ä»¥ååšè‰²å½©å˜åŒ–çš„æ‰©å±•\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e color1 = {\x3cspan class=\x22hljs-attr\x22\x3eh\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e197\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3es\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27100%\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3el\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x2750%\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3ea\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x2780%\x27\x3c\/span\x3e};\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e color2 = {\x3cspan class=\x22hljs-attr\x22\x3eh\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e197\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3es\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27100%\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3el\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x2750%\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3ea\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x2780%\x27\x3c\/span\x3e};\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ lifeTime ç¥¯æ•°\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e Actions = [\n    {\x3cspan class=\x22hljs-attr\x22\x3elifeTime\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e60\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3etext\x3c\/span\x3e:[{\x3cspan class=\x22hljs-attr\x22\x3etext\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3ehsla\x3c\/span\x3e:color1}]},\n    {\x3cspan class=\x22hljs-attr\x22\x3elifeTime\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e60\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3etext\x3c\/span\x3e:[{\x3cspan class=\x22hljs-attr\x22\x3etext\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3ehsla\x3c\/span\x3e:color1}]},\n    {\x3cspan class=\x22hljs-attr\x22\x3elifeTime\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e60\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3etext\x3c\/span\x3e:[{\x3cspan class=\x22hljs-attr\x22\x3etext\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3ehsla\x3c\/span\x3e:color1}]},\n    {\x3cspan class=\x22hljs-attr\x22\x3elifeTime\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e120\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3etext\x3c\/span\x3e:[\n        {\x3cspan class=\x22hljs-attr\x22\x3etext\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27I\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3ehsla\x3c\/span\x3e:color1},\n        {\x3cspan class=\x22hljs-attr\x22\x3etext\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27â¤ï¸\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3ehsla\x3c\/span\x3e:color2},\n        {\x3cspan class=\x22hljs-attr\x22\x3etext\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27Y\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3ehsla\x3c\/span\x3e:color1},\n        {\x3cspan class=\x22hljs-attr\x22\x3etext\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27O\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3ehsla\x3c\/span\x3e:color1},\n        {\x3cspan class=\x22hljs-attr\x22\x3etext\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27U\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3ehsla\x3c\/span\x3e:color1}\n    ]},\n];\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eæ ¹æ®é¢„è®¾çš„è„šæœ¬è§£æå‡ºæ¯ä¸ªåœºæ™¯çš„å›¾å½¢ï¼ŒåŠ ä¸€ä¸ª tick åˆ¤æ–­æ˜¯å¦åˆ°äº† lifeTime åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªå›¾å½¢é‡æ–°ç»˜åˆ¶å›¾å½¢ã€‚\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22å…¨é€‰\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function draw() {\n    this.tick\x2b\x2b;\n    if (this.tick \x3e= this.actions[this.actionIndex].lifeTime) {\n        this.nextAction();\n    }\n    this.clear();\n    this.renderParticles(); \/\/ ç»˜åˆ¶ç‚¹\n    this.raf = requestAnimationFrame(this.draw);\n}\n\nfunction nextAction() {\n    ....\/\/åˆ‡æ¢åœºæ™¯ balabala..\n    this.setParticle(); \/\/ éšæœºå°†ç‚¹è®¾ç½®åˆ°ä¹‹å‰å¾—åˆ°çš„ action.geometry.points ä¸Š\n}\x22 title=\x22\x22 data-original-title=\x22å¤åˆ¶\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22æ”¾è¿›ç¬”è®°\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edraw\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.tick\x2b\x2b;\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.tick \x26gt;= \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.actions[\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.actionIndex].lifeTime) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.nextAction();\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.clear();\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.renderParticles(); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ç»˜åˆ¶ç‚¹\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.raf = requestAnimationFrame(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.draw);\n}\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3enextAction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    ....\x3cspan class=\x22hljs-comment\x22\x3e\/\/åˆ‡æ¢åœºæ™¯ balabala..\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.setParticle(); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ éšæœºå°†ç‚¹è®¾ç½®åˆ°ä¹‹å‰å¾—åˆ°çš„ action.geometry.points ä¸Š\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016908381\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016908381\x22 alt=\x221\x22 title=\x221\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3eè¿™æ ·å’±ä»¬åŸºæœ¬çš„åŠŸèƒ½å·²ç»å®Œæˆäº†ã€‚\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3eèƒ½ä¸èƒ½å†ç»™åŠ›ä¸€ç‚¹\x3c\/h2\x3e\n\x3cp\x3eè¯´å¥½çš„ç²’å­ç³»ç»Ÿï¼Œç°åœ¨åªæ˜¯ context.arc ç®€å•çš„ç”»äº†ä¸€ç‚¹ã€‚é‚£å’±ä»¬å°±æ¥åŠ ä¸ªç²’å­ç³»ç»Ÿå§ã€‚\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22å…¨é€‰\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22class PARTICLE {\n    \/\/ x,y,z ä¸ºå½“å‰çš„åæ ‡ï¼Œvx,vy,vz åˆ™æ˜¯3ä¸ªæ–¹å‘çš„é€Ÿåº¦\n    constructor(center) {\n        this.center = center;\n        this.x = 0;\n        this.y = 0;\n        this.z = 0;\n        this.vx = 0;\n        this.vy = 0;\n        this.vz = 0;\n    }\n    \/\/ è®¾ç½®è¿™äº›ç²’å­éœ€è¦è¿åŠ¨åˆ°çš„ç»ˆç‚¹(ä¸‹ä¸€ä¸ªä½ç½®)\n    setAxis(axis) {\n        this.nextX = axis.x;\n        this.nextY = axis.y;\n        this.nextZ = axis.z;\n        this.color = axis.color;\n    }\n    step() {\n        \/\/ å¼¹åŠ›æ¨¡å‹ è·ç¦»ç›®æ ‡è¶Šè¿œé€Ÿåº¦è¶Šå¿«\n        this.vx \x2b= (this.nextX - this.x) * SPRING;\n        this.vy \x2b= (this.nextY - this.y) * SPRING;\n        this.vz \x2b= (this.nextZ - this.z) * SPRING;\n        \/\/ æ‘©æ“¦ç³»æ•° è®©ç²’å­å¯ä»¥è¶‹å‘ç¨³å®š\n        this.vx *= FRICTION;\n        this.vy *= FRICTION;\n        this.vz *= FRICTION;\n        \n        this.x \x2b= this.vx;\n        this.y \x2b= this.vy;\n        this.z \x2b= this.vz;\n    }\n    getAxis2D() {\n        this.step();\n        \/\/ 3D åæ ‡ä¸‹çš„ 2D åç§»ï¼Œæš‚ä¸”åªè€ƒè™‘ä½ç½®ï¼Œä¸è€ƒè™‘å¤§å°å˜åŒ–\n        const scale = FOCUS_POSITION \/ (FOCUS_POSITION \x2b this.z);\n        return {\n            x: this.center.x \x2b (this.x * scale),\n            y: this.center.y - (this.y * scale),\n        };\n    }\n}\x22 title=\x22\x22 data-original-title=\x22å¤åˆ¶\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22æ”¾è¿›ç¬”è®°\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ePARTICLE\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ x,y,z ä¸ºå½“å‰çš„åæ ‡ï¼Œvx,vy,vz åˆ™æ˜¯3ä¸ªæ–¹å‘çš„é€Ÿåº¦\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e(center) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.center = center;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.x = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.y = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.z = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.vx = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.vy = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.vz = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n    }\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ è®¾ç½®è¿™äº›ç²’å­éœ€è¦è¿åŠ¨åˆ°çš„ç»ˆç‚¹(ä¸‹ä¸€ä¸ªä½ç½®)\x3c\/span\x3e\n    setAxis(axis) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.nextX = axis.x;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.nextY = axis.y;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.nextZ = axis.z;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.color = axis.color;\n    }\n    step() {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ å¼¹åŠ›æ¨¡å‹ è·ç¦»ç›®æ ‡è¶Šè¿œé€Ÿåº¦è¶Šå¿«\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.vx \x2b= (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.nextX - \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.x) * SPRING;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.vy \x2b= (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.nextY - \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.y) * SPRING;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.vz \x2b= (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.nextZ - \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.z) * SPRING;\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ æ‘©æ“¦ç³»æ•° è®©ç²’å­å¯ä»¥è¶‹å‘ç¨³å®š\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.vx *= FRICTION;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.vy *= FRICTION;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.vz *= FRICTION;\n        \n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.x \x2b= \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.vx;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.y \x2b= \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.vy;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.z \x2b= \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.vz;\n    }\n    getAxis2D() {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.step();\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 3D åæ ‡ä¸‹çš„ 2D åç§»ï¼Œæš‚ä¸”åªè€ƒè™‘ä½ç½®ï¼Œä¸è€ƒè™‘å¤§å°å˜åŒ–\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e scale = FOCUS_POSITION \/ (FOCUS_POSITION \x2b \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.z);\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-attr\x22\x3ex\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.center.x \x2b (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.x * scale),\n            \x3cspan class=\x22hljs-attr\x22\x3ey\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.center.y - (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.y * scale),\n        };\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016908382?w=426\x26amp;h=170\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016908382?w=426\x26amp;h=170\x22 alt=\x222\x22 title=\x222\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3eå¤§åŠŸå‘Šæˆï¼\x3c\/p\x3e\n\x3cp\x3eæ—¢ç„¶æ˜¯ 3D çš„ç²’å­ï¼Œå…¶å®è¿™ä¸Šé¢è¿˜æœ‰ä¸æ˜¯æ–‡ç« å¯åšï¼ŒåŒå­¦ä»¬å¯ä»¥å‘æŒ¥æƒ³è±¡åŠ›æ¥ç‚¹æ›´é…·ç‚«çš„ã€‚\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3eè¿˜æœ‰ä»€ä¹ˆå¥½ç©çš„\x3c\/h2\x3e\n\x3cp\x3eä¸Šé¢æ˜¯å°†ç²’å­æ‘†æˆæ–‡å­—ã€‚é‚£å’±ä»¬å½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥å†™å…¬å¼æ‘†å‡ºä¸ªé€ å‹ã€‚\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22å…¨é€‰\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ Actions ä¸­ç”¨ func ä»£æ›¿ texts\n{\n    lifeTime: 100,\n    func: (radius) =\x3e {\n        const i = Math.random() * 1200;\n        let x = (i - 1200 \/ 2) \/ 300;\n        let y = Math.sqrt(Math.abs(x)) - Math.sqrt(Math.cos(x)) * Math.cos(30 * x);\n        return {\n            x: x * radius \/ 2,\n            y: y * radius \/ 2,\n            z: ~~(Math.random() * 30),\n            color: color3\n        };\n    }\n}\x22 title=\x22\x22 data-original-title=\x22å¤åˆ¶\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22æ”¾è¿›ç¬”è®°\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ Actions ä¸­ç”¨ func ä»£æ›¿ texts\x3c\/span\x3e\n{\n    \x3cspan class=\x22hljs-attr\x22\x3elifeTime\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3efunc\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eradius\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e i = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.random() * \x3cspan class=\x22hljs-number\x22\x3e1200\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e x = (i - \x3cspan class=\x22hljs-number\x22\x3e1200\x3c\/span\x3e \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e) \/ \x3cspan class=\x22hljs-number\x22\x3e300\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e y = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.sqrt(\x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.abs(x)) - \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.sqrt(\x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.cos(x)) * \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.cos(\x3cspan class=\x22hljs-number\x22\x3e30\x3c\/span\x3e * x);\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-attr\x22\x3ex\x3c\/span\x3e: x * radius \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3ey\x3c\/span\x3e: y * radius \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3ez\x3c\/span\x3e: ~~(\x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.random() * \x3cspan class=\x22hljs-number\x22\x3e30\x3c\/span\x3e),\n            \x3cspan class=\x22hljs-attr\x22\x3ecolor\x3c\/span\x3e: color3\n        };\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eå†æŠŠåˆšæ‰æ–‡å­—è½¬æ¢å½¢çŠ¶çš„æ–¹æ³•ç”¨ä¸€ä¸‹\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22å…¨é€‰\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n    lifeTime: Infinity,\n        func: (width, height) =\x3e {\n            if(!points.length){\n                const img = document.getElementById(\x26quot;tulip\x26quot;);\n                const offscreenCanvas = document.createElement(\x27canvas\x27);\n                const offscreenCanvasCtx = offscreenCanvas.getContext(\x272d\x27);\n                const imgWidth = 200;\n                const imgHeight = 200;\n                offscreenCanvas.setAttribute(\x27width\x27, imgWidth);\n                offscreenCanvas.setAttribute(\x27height\x27, imgHeight);\n                offscreenCanvasCtx.drawImage(img, 0, 0, imgWidth, imgHeight);\n                let imgData = offscreenCanvasCtx.getImageData(0, 0, imgWidth, imgHeight);\n                for (let i = 0, max = imgData.width * imgData.height; i \x3c max; i\x2b\x2b) {\n                    if (imgData.data[i * 4 \x2b 3]) {\n                        points.push({\n                            x: (i % imgData.width) \/ imgData.width,\n                            y: (i \/ imgData.width) \/ imgData.height\n                        });\n                    }\n                }\n            }\n\n            const p = points[~~(Math.random() * points.length)]\n            const radius = Math.min(width * 0.8, height * 0.8);\n            return {\n                x: p.x * radius - radius \/ 2,\n                y: (1 - p.y) * radius - radius \/ 2,\n                z: ~~(Math.random() * 30),\n                color: color3\n            };\n        }\n}\x22 title=\x22\x22 data-original-title=\x22å¤åˆ¶\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22æ”¾è¿›ç¬”è®°\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e{\n    \x3cspan class=\x22hljs-attr\x22\x3elifeTime\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3eInfinity\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3efunc\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3ewidth, height\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(!points.length){\n                \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e img = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x22tulip\x22\x3c\/span\x3e);\n                \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e offscreenCanvas = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.createElement(\x3cspan class=\x22hljs-string\x22\x3e\x27canvas\x27\x3c\/span\x3e);\n                \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e offscreenCanvasCtx = offscreenCanvas.getContext(\x3cspan class=\x22hljs-string\x22\x3e\x272d\x27\x3c\/span\x3e);\n                \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e imgWidth = \x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e;\n                \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e imgHeight = \x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e;\n                offscreenCanvas.setAttribute(\x3cspan class=\x22hljs-string\x22\x3e\x27width\x27\x3c\/span\x3e, imgWidth);\n                offscreenCanvas.setAttribute(\x3cspan class=\x22hljs-string\x22\x3e\x27height\x27\x3c\/span\x3e, imgHeight);\n                offscreenCanvasCtx.drawImage(img, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, imgWidth, imgHeight);\n                \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e imgData = offscreenCanvasCtx.getImageData(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, imgWidth, imgHeight);\n                \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, max = imgData.width * imgData.height; i \x26lt; max; i\x2b\x2b) {\n                    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (imgData.data[i * \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e \x2b \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e]) {\n                        points.push({\n                            \x3cspan class=\x22hljs-attr\x22\x3ex\x3c\/span\x3e: (i % imgData.width) \/ imgData.width,\n                            \x3cspan class=\x22hljs-attr\x22\x3ey\x3c\/span\x3e: (i \/ imgData.width) \/ imgData.height\n                        });\n                    }\n                }\n            }\n\n            \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e p = points[~~(\x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.random() * points.length)]\n            \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e radius = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.min(width * \x3cspan class=\x22hljs-number\x22\x3e0.8\x3c\/span\x3e, height * \x3cspan class=\x22hljs-number\x22\x3e0.8\x3c\/span\x3e);\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n                \x3cspan class=\x22hljs-attr\x22\x3ex\x3c\/span\x3e: p.x * radius - radius \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3ey\x3c\/span\x3e: (\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e - p.y) * radius - radius \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3ez\x3c\/span\x3e: ~~(\x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.random() * \x3cspan class=\x22hljs-number\x22\x3e30\x3c\/span\x3e),\n                \x3cspan class=\x22hljs-attr\x22\x3ecolor\x3c\/span\x3e: color3\n            };\n        }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016908383\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016908383\x22 alt=\x223\x22 title=\x223\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3eâ€‹å®Œç¾ ğŸ˜ã€‚\x3c\/p\x3e\n\x3cp\x3eç„¶åå’±ä¹Ÿå¯ä»¥ç”¨ drawImage ç»˜åˆ¶å›¾ç‰‡æ¥ä»£æ›¿ arc ç”»ç‚¹ã€‚\x3c\/p\x3e\n\x3cp\x3e\x26lt;img src=\x22\x3ca href=\x22https:\/\/img.alicdn.com\/tfs\/TB1_JffnirpK1RjSZFhXXXSdXXa-916-750.png\x26amp;quot\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/img.alicdn.com\/tfs\/TB...\x3c\/a\x3e; width=\x22160\x22\x26gt;\x3c\/p\x3e\n\x3cp\x3eç­‰ç­‰ï¼ï¼å‰é¢çš„æ•ˆæœæ€»è§‰å¾—å“ªé‡Œä¸å¯¹åŠ²ï¼Œå¥½åƒæœ‰äº›å¡ ã€‚\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016908384?w=440\x26amp;h=339\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016908384?w=440\x26amp;h=339\x22 alt=\x22ç¨³å¾—ä¸€ç¬”\x22 title=\x22ç¨³å¾—ä¸€ç¬”\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3eä¼˜åŒ–å°æç¤º\x3c\/h2\x3e\n\x3col\x3e\n\x3cli\x3eåˆ†å±‚ã€‚å¦‚æœè¿˜éœ€è¦å¢åŠ ä¸€äº›å…¶ä»–çš„å†…å®¹åˆ° Canvas ä¸­çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‹†å‡ºå¤šä¸ª Canvas æ¥åšã€‚\x3c\/li\x3e\n\x3cli\x3eå‡å°‘å±æ€§è®¾ç½®ã€‚åŒ…æ‹¬ lineWidthã€fillStyle ç­‰ç­‰ã€‚Canvas ä¸Šä¸‹æ–‡æ˜¯å¾ˆå¤æ‚çš„ä¸€ä¸ªå¯¹è±¡ï¼Œå½“ä½ è°ƒå®ƒçš„ä¸€äº›å±æ€§è®¾ç½®æ—¶æ¶ˆè€—çš„æ€§èƒ½è¿˜æ˜¯ä¸å°‘çš„ã€‚arc ä¹‹ç±»çš„ç”»å›¾æ–¹æ³•ä¹Ÿè¦å‡å°‘ã€‚\x3c\/li\x3e\n\x3cli\x3eç¦»å±ç»˜åˆ¶ã€‚ä¸ç”¨ arc ç”»ç‚¹ï¼Œè¦æ€ä¹ˆåŠã€‚ä¸Šé¢çš„å»¶è¿Ÿå…¶å®å°±æ˜¯æ¯æ¬¡ç”»ç‚¹æ—¶éƒ½è°ƒç”¨äº†ä¸€é fillStyleã€arcã€‚ä½†æ˜¯å½“æˆ‘ä»¬ç»˜åˆ¶å›¾ç‰‡ drawImage æ—¶ï¼Œæ€§èƒ½æ˜æ˜¾ä¼šå¥½ä¸Šå¾ˆå¤šã€‚drawImage é™¤äº†ç›´æ¥ç»˜å›¾ç‰‡å¤–ï¼Œè¿˜èƒ½ç»˜åˆ¶å¦ä¸€ä¸ª Canvasï¼Œæ‰€ä»¥æˆ‘ä»¬æå‰å°†è¿™äº›ç‚¹ç”»åˆ°ä¸€ä¸ªä¸åœ¨å±å¹•ä¸Šçš„ Canvas é‡Œå°±å¯ä»¥äº†ã€‚\x3c\/li\x3e\n\x3cli\x3eå‡å°‘ js è®¡ç®—ï¼Œé¿å…å µå¡è¿›ç¨‹ï¼Œå¯ä»¥ä½¿ç”¨ web workerã€‚å½“ç„¶å’±ä»¬ç›®å‰çš„è®¡ç®—å®Œå…¨ç”¨ä¸ä¸Šè¿™ä¸ªã€‚\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3eæˆ‘è¿™ä½¿ç”¨äº† 3000 ä¸ªç²’å­ï¼Œå¯¹æ¯”ä¸‹ä½¿ç”¨ç¦»å±ç»˜åˆ¶å‰åçš„å¸§ç‡ã€‚\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016908385?w=382\x26amp;h=256\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016908385?w=382\x26amp;h=256\x22 alt=\x22æ–¹ä¸æ–¹\x22 title=\x22æ–¹ä¸æ–¹\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016908386\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016908386\x22 alt=\x22åœ†äº†\x22 title=\x22åœ†äº†\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3eæ€»ç»“\x3c\/h2\x3e\n\x3cp\x3eç°åœ¨å”¯ä¸€é™åˆ¶ä½ çš„å°±æ˜¯æƒ³è±¡åŠ›äº†ã€‚å¤§å®¶ä¸€èµ·å»å¾æœè€æ¿ï¼Œå¾æœå¥³ç¥ï¼\x3c\/p\x3e\n\x3cp\x3eè¿™ä¸ªåŒåä¸€è„±è´«è„±å•ä¸è„±å‘ï¼\x3c\/p\x3e\n\x3cp\x3eå¥½äº†ä¸è¯´äº†ï¼Œå¥³ç¥å–Šæˆ‘ä¿®ç”µè„‘å»äº†ã€‚\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3eå‚è€ƒ\x3c\/h2\x3e\n\x3cul\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/codepen.io\/airen\/pen\/owRMoY\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3edeformable particles\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22airen\/pen\/owRMoY\x22 data-typeid=\x223\x22\x3eç‚¹å‡»é¢„è§ˆ\x3c\/button\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/pixabay.com\/zh\/%E5%BF%83%E8%84%8F-%E7%88%B1-%E7%BA%A2%E8%89%B2%E7%9A%84%E5%BF%83-%E6%83%85%E4%BA%BA%E8%8A%82%E9%82%A3%E5%A4%A9-%E8%AE%A2%E5%A9%9A-%E6%BF%80%E6%83%85-%E7%BA%A2%E8%89%B2-%E6%84%9F%E8%A7%89-%E7%9C%9F%E7%88%B1-2402086\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eheart.png\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22http:\/\/www.w3school.com.cn\/tags\/html_ref_canvas.asp\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eCanvas å‚è€ƒæ‰‹å†Œ\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3ey=sqrt(abs(x))-sqrt(cos(x))*cos(40x)\x3cp\x3eâ€‹\x3c\/p\x3e\n\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cblockquote\x3eæ–‡ç« å¯éšæ„è½¬è½½ï¼Œä½†è¯·ä¿ç•™æ­¤ \x3ca href=\x22https:\/\/www.yuque.com\/es2049\/blog\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eåŸæ–‡é“¾æ¥\x3c\/a\x3eã€‚\x3cbr\x3eéå¸¸æ¬¢è¿æœ‰æ¿€æƒ…çš„ä½ åŠ å…¥ \x3ca href=\x22https:\/\/es2049.studio\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eES2049 Studio\x3c\/a\x3eï¼Œç®€å†è¯·å‘é€è‡³ caijun.hcj(at)alibaba-inc.com ã€‚\x3c\/blockquote\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="ç‰ˆæƒå£°æ˜">ç‰ˆæƒå£°æ˜</h1><p>æœ¬æ–‡èµ„æºæ¥æºäº’è”ç½‘ï¼Œä»…ä¾›å­¦ä¹ ç ”ç©¶ä½¿ç”¨ï¼Œç‰ˆæƒå½’è¯¥èµ„æºçš„åˆæ³•æ‹¥æœ‰è€…æ‰€æœ‰ï¼Œ</p><p>æœ¬æ–‡ä»…ç”¨äºå­¦ä¹ ã€ç ”ç©¶å’Œäº¤æµç›®çš„ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€å®Œæ•´é“¾æ¥ä»¥åŠåŸä½œè€…ã€‚</p><p>åŸä½œè€…è‹¥è®¤ä¸ºæœ¬ç«™ä¾µçŠ¯äº†æ‚¨çš„ç‰ˆæƒï¼Œè¯·è”ç³»æˆ‘ä»¬ï¼Œæˆ‘ä»¬ä¼šç«‹å³åˆ é™¤ï¼</p><h2 id="åŸæ–‡æ ‡é¢˜">åŸæ–‡æ ‡é¢˜</h2><p>ç‚«é…·ç²’å­è¡¨ç™½ï¼ŒåŒåä¸€è„±å•é å®ƒäº†ï¼</p><h2 id="åŸæ–‡é“¾æ¥">åŸæ–‡é“¾æ¥</h2><p><a href="https://segmentfault.com/a/1190000016908376">https://segmentfault.com/a/1190000016908376</a></p><h2>æœ¬æ–‡é“¾æ¥ï¼š</h2><a href="https://alili.tech/archive/hqn4m86ws07/" target="_blank">https://alili.tech/archive/hqn4m86ws07/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: 'è¯´ç‚¹ä»€ä¹ˆ?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>å…¶ä»–æ¨è</h3><li><a href="/archive/9xuojm75d2a/">å‰ç«¯å¾®æœåŠ¡åŒ–è¿›é˜¶1 - åŸºäºumiçš„å­æ¨¡å—æ–¹æ¡ˆ<aside class="dates">2019-04-13</aside></a></li><li><a href="/archive/ol9qis0n8xe/">2019å¹´04æœˆGithub Javascriptå¼€æºé¡¹ç›®ç²¾é€‰<aside class="dates">2019-04-08</aside></a></li><li><a href="/archive/7815p445rtf/">è®°ä¸€æ¬¡MongoDBè¿ç§» - å¤‡ä»½ä¸æ¢å¤<aside class="dates">2019-03-27</aside></a></li><li><a href="/archive/a5ficy1jp7n/">2019å¹´03æœˆGithub Javascriptå¼€æºé¡¹ç›®ç²¾é€‰<aside class="dates">2019-03-08</aside></a></li><li><a href="/archive/nyhmtbanv2e/">Alili Weekly å‰ç«¯å‘¨åˆŠ ç¬¬äºŒåä¸€æœŸ<aside class="dates">2019-03-08</aside></a></li><li><a href="/archive/304a32r2py8/">30åˆ†é’Ÿç²¾é€šReactä»Šå¹´æœ€åŠ²çˆ†çš„æ–°ç‰¹æ€§â€”â€”React Hooks<aside class="dates">2019-03-02</aside></a></li><li><a href="/archive/sj4oqgzx0rk/">CSS6ï¼šflexå¸ƒå±€<aside class="dates">2019-03-02</aside></a></li><li><a href="/archive/wedm7eypuhb/">ES6 ç³»åˆ—ä¹‹ Babel å°† Async ç¼–è¯‘æˆäº†ä»€ä¹ˆæ ·å­<aside class="dates">2019-03-02</aside></a></li><li><a href="/archive/cazifdrck0u/">ES6 ç³»åˆ—ä¹‹æˆ‘ä»¬æ¥èŠèŠ Async<aside class="dates">2019-03-02</aside></a></li><li><a href="/archive/0dlsi4qmvsvf/">Expressçš„åŸºæœ¬ä½¿ç”¨<aside class="dates">2019-03-02</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright Â© 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">æµ™ICPå¤‡18045521å·</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>