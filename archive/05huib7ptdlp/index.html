<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="WEB缓存探究"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>WEB缓存探究 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/05huib7ptdlp/",
				"appid": "1613049289050283", 
				"title": "WEB缓存探究 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-06T02:30:10"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/ofcifkg6yp/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/pqcvzrawkwk/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f05huib7ptdlp%2f&text=WEB%e7%bc%93%e5%ad%98%e6%8e%a2%e7%a9%b6"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f05huib7ptdlp%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f05huib7ptdlp%2f&text=WEB%e7%bc%93%e5%ad%98%e6%8e%a2%e7%a9%b6"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f05huib7ptdlp%2f&title=WEB%e7%bc%93%e5%ad%98%e6%8e%a2%e7%a9%b6"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f05huib7ptdlp%2f&is_video=false&description=WEB%e7%bc%93%e5%ad%98%e6%8e%a2%e7%a9%b6"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=WEB%e7%bc%93%e5%ad%98%e6%8e%a2%e7%a9%b6&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f05huib7ptdlp%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f05huib7ptdlp%2f&title=WEB%e7%bc%93%e5%ad%98%e6%8e%a2%e7%a9%b6"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f05huib7ptdlp%2f&title=WEB%e7%bc%93%e5%ad%98%e6%8e%a2%e7%a9%b6"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f05huib7ptdlp%2f&title=WEB%e7%bc%93%e5%ad%98%e6%8e%a2%e7%a9%b6"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f05huib7ptdlp%2f&title=WEB%e7%bc%93%e5%ad%98%e6%8e%a2%e7%a9%b6"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">WEB缓存探究</h1><div class="meta"><div class="postdate"><time datetime="2019-01-06" itemprop="datePublished">2019-01-06</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3e前言\x3c\/h2\x3e\n\x3cp\x3e由于项目越来越大，即使了使用代码压缩工具减少文件大小，js文件还是不可避免的越变越大。\x3cbr\x3e而对于用户来说每次重新下载都有可能会消耗大量时间，让我们的首屏展示有较长时间的空白。\x3cbr\x3e为了提升网站性能，有效利用缓存能够提升用户体验，提高访问效率。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e浏览器缓存\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3eHTML中的Meta标签\x3c\/h3\x3e\n\x3cp\x3ehttp-equiv属性，相当于http的文件头中的参数，而content的内容则是对应参数的值\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c!-- 告诉浏览器不缓存当前页面 --\x3e\n\x3cmeta http-equiv=\x26quot;pragma\x26quot; content=\x26quot;no-cache\x26quot;\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- 告诉浏览器不缓存当前页面 --\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3emeta\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ehttp-equiv\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22pragma\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3econtent\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22no-cache\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然而设置\x3ccode\x3epragma: no-cache\x3c\/code\x3e并不能应用于HTTP1.1及以上规范，\x3cbr\x3e而且因为这个方法太老了，如果你不需要估计那些史前客户的感受，完全可以不加?\x3c\/p\x3e\n\x3cp\x3e当然可以不用太方，还有其他的参数可以选择使用\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cmeta http-equiv=\x26quot;Cache-Control\x26quot; content=\x26quot;no-cache\x26quot; \/\x3e \x3c!-- HTTP1.1 在1.1中优先于expires--\x3e\n\x3cmeta http-equiv=\x26quot;pragma\x26quot; content=\x26quot;no-cache\x26quot; \/\x3e \x3c!-- HTTP1.0 --\x3e\n\x3cmeta http-equiv=\x26quot;Expires\x26quot; content=\x26quot;0\x26quot; \/\x3e \x3c!-- 示意到期时间 HTTP1.0 \x26amp; 1.1 --\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3emeta\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ehttp-equiv\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22Cache-Control\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3econtent\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22no-cache\x22\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- HTTP1.1 在1.1中优先于expires--\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3emeta\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ehttp-equiv\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22pragma\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3econtent\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22no-cache\x22\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- HTTP1.0 --\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3emeta\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ehttp-equiv\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22Expires\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3econtent\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x220\x22\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- 示意到期时间 HTTP1.0 \x26amp; 1.1 --\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e但是使用meta标签设置的参数优先级低于http请求中声明的，如果你同时设置了http头，那么就没有必要加上meta标签了。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e当然，最后还有一个重要的一点，就是根据叉烧包的实验，meta制定这些内容可以说基本没有什么卵用:)\x3c\/strong\x3e\x3cbr\x3e\x3cstrong\x3e悲伤的故事……当然可能你的浏览器还可以用哦\x3c\/strong\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3eHeader参数\x3c\/h3\x3e\n\x3cp\x3e最保险的显然是配置Header参数来保证资源的缓存\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\n\x3cp\x3e\x3cstrong\x3eCache-Control\x3c\/strong\x3e\x3cbr\x3eCache-Control 标头是在 HTTP\/1.1 规范中定义的，取代了之前用来定义响应缓存策略的标头例如 Expires。\x3cbr\x3e所有现代浏览器都支持 Cache-Control。\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e\x3cstrong\x3emax-age\x3c\/strong\x3e     指从请求的时间开始，允许缓存有效的最长时间(单位是s)\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3cstrong\x3epublic\x3c\/strong\x3e      可被任何对象缓存。它不是必须的，因为明确的缓存信息已表示响应是可以缓存的\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3cstrong\x3eprivate\x3c\/strong\x3e     通常只为单个用户缓存，不允许任何中间缓存对其进行缓存\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3cstrong\x3eno-cache\x3c\/strong\x3e    表示必须先与服务器确认返回的响应是否发生了变化\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3cstrong\x3eno-store\x3c\/strong\x3e    禁止浏览器以及所有中间缓存存储任何版本的返回响应，每次请求必须重新下载\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e借用谷歌爸爸的一张图来展示一下Cache-Control的选择策略\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVuuoZ\x22 src=\x22https:\/\/static.alili.tech\/img\/bVuuoZ\x22 alt=\x22最佳Cache-Control策略树\x22 title=\x22最佳Cache-Control策略树\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3cstrong\x3eExpires\x3c\/strong\x3e\x3cbr\x3e   它代表一个缓存过期的绝对时间，在HTTP\/1.0中实现，在HTTP\/1.1中优先级低于Cache-Control。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e它的缺点就是如果服务器与客户端误差较大，那么它的误差也会变大\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e\x3cstrong\x3eLast-Modified\x3c\/strong\x3e\x3cbr\x3e   标记的是资源的最后修改时间，需要配合Cache-Control使用。只能精确到秒级，如果某些文件在1秒内修改多次，则无法及时更新\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3cstrong\x3eETag\x3c\/strong\x3e\x3cbr\x3e   相当于验证令牌。通过它可以可实现高效的资源更新检查：资源未发生变化时不会传送任何数据。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3eETag通常是服务器生成的文件内容的哈希值或某个其他指纹。如果请求时指纹仍然相同，则表示资源未发生变化，则可跳过下载。\x3c\/p\x3e\n\x3ch4\x3e参数弃用小指南\x3c\/h4\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e如果你不考虑ie6和\x3ccode\x3eHTTP 1.0\x3c\/code\x3e客户端，那么你可以无视\x3ccode\x3ePragma\x3c\/code\x3e\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22Cache-Control: no-store, must-revalidate\nExpires: 0\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22http hljs\x22\x3e\x3ccode class=\x22http\x22\x3e\x3cspan class=\x22hljs-attribute\x22\x3eCache-Control\x3c\/span\x3e: no-store, must-revalidate\n\x3cspan class=\x22hljs-attribute\x22\x3eExpires\x3c\/span\x3e: 0\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e如果你也不打算管\x3ccode\x3eHTTP 1.0\x3c\/code\x3e代理，那么你可以无视\x3ccode\x3eExpires\x3c\/code\x3e\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22Cache-Control: no-store, must-revalidate\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22http hljs\x22\x3e\x3ccode class=\x22http\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-attribute\x22\x3eCache-Control\x3c\/span\x3e: no-store, must-revalidate\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e如果服务器自动包含有效的\x3ccode\x3eDate\x3c\/code\x3e标头，则理论上也可以省略\x3ccode\x3eCache-Control\x3c\/code\x3e，并仅依赖于\x3ccode\x3eExpires\x3c\/code\x3e。不过如果客户端和服务端时间有差别，就可能会失败哦\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22Date: Wed, 24 Aug 2016 18:32:02 GMT\nExpires: 0\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22http hljs\x22\x3e\x3ccode class=\x22http\x22\x3e\x3cspan class=\x22hljs-attribute\x22\x3eDate\x3c\/span\x3e: Wed, 24 Aug 2016 18:32:02 GMT\n\x3cspan class=\x22hljs-attribute\x22\x3eExpires\x3c\/span\x3e: 0\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e总的来说还是使用\x3ccode\x3eCache-Control\x3c\/code\x3e最妥妥的(如果不打算考虑\x3ccode\x3eHTTP 1.0\x3c\/code\x3e)\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e项目实践\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e更新文件\x26amp;弃用缓存\x3c\/h3\x3e\n\x3cp\x3e在项目中，当我们使用本地缓存后又会遇到另一个问题——如何更新文件、弃用缓存。\x3cbr\x3e通常，我们通过对文件名加入指纹来实现。\x3c\/p\x3e\n\x3cp\x3e以webpack为例，\x3cbr\x3e写配置文件时\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n    output: {\n        filename: \x26quot;bundle.[hash].js\x26quot;\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e{\n    \x3cspan class=\x22hljs-attr\x22\x3eoutput\x3c\/span\x3e: {\n        \x3cspan class=\x22hljs-attr\x22\x3efilename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22bundle.[hash].js\x22\x3c\/span\x3e\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e为打包后的文件名加上hash，使文件更新之后会生成新的hash，以达到弃用原来缓存的效果。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e定制缓存策略\x3c\/h3\x3e\n\x3cp\x3e可以为不同类型的文件定义不同的缓存策略，以达到最高效的结果\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e将HTML被标记为“no-cache”，使浏览器在每次请求时都始终会重新验证文档，并在内容变化时能够及时获取最新版本，即使下载新资源。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e允许浏览器和中间缓存（如CDN）缓存CSS，并将CSS设置为1年后到期，超长的缓存时间可以让用户避免每次都从服务端获取响应。同时不要忘记给文件名加上指纹，以便及时更新改动\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eJavaScript同样设置为1年后到期，但标记为private，因为它可能会包含某些用户私人数据，这是CDN不应缓存的。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e图像缓存时不包含版本或唯一指纹，并设置为1天后到期。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e其他技巧\x3c\/h3\x3e\n\x3col\x3e\x3cli\x3e\x3cp\x3e减少对Cookie的依赖，因为每次HTTP请求都会带上Cookie，这回增大传输流量（当然将静态资源挂载在其他域名下，也可以达到cookie free的效果）\x3c\/p\x3e\x3c\/li\x3e\x3c\/ol\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>WEB缓存探究</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000010367680">https://segmentfault.com/a/1190000010367680</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/05huib7ptdlp/" target="_blank">https://alili.tech/archive/05huib7ptdlp/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>