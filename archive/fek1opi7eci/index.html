<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="Web Storage实用指南"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>Web Storage实用指南 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/fek1opi7eci/",
				"appid": "1613049289050283", 
				"title": "Web Storage实用指南 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-29T02:30:10"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/9afqailsan6/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/546qtmt98vb/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2ffek1opi7eci%2f&text=Web%20Storage%e5%ae%9e%e7%94%a8%e6%8c%87%e5%8d%97"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2ffek1opi7eci%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2ffek1opi7eci%2f&text=Web%20Storage%e5%ae%9e%e7%94%a8%e6%8c%87%e5%8d%97"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2ffek1opi7eci%2f&title=Web%20Storage%e5%ae%9e%e7%94%a8%e6%8c%87%e5%8d%97"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2ffek1opi7eci%2f&is_video=false&description=Web%20Storage%e5%ae%9e%e7%94%a8%e6%8c%87%e5%8d%97"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=Web%20Storage%e5%ae%9e%e7%94%a8%e6%8c%87%e5%8d%97&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2ffek1opi7eci%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2ffek1opi7eci%2f&title=Web%20Storage%e5%ae%9e%e7%94%a8%e6%8c%87%e5%8d%97"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2ffek1opi7eci%2f&title=Web%20Storage%e5%ae%9e%e7%94%a8%e6%8c%87%e5%8d%97"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2ffek1opi7eci%2f&title=Web%20Storage%e5%ae%9e%e7%94%a8%e6%8c%87%e5%8d%97"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2ffek1opi7eci%2f&title=Web%20Storage%e5%ae%9e%e7%94%a8%e6%8c%87%e5%8d%97"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">Web Storage实用指南</h1><div class="meta"><div class="postdate"><time datetime="2019-01-29" itemprop="datePublished">2019-01-29</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch1 id=\x22articleHeader0\x22\x3eWeb Storage\x3c\/h1\x3e\n\x3cblockquote\x3e\x3cp\x3e如有不当之处，欢迎指出，如需转载，请注明出处\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e本文一共分为两章。\x3c\/p\x3e\n\x3cp\x3e第一章讲Web Storage的使用，目标是让大家看完第一章后基本能应对80%的使用场景。\x3c\/p\x3e\n\x3cp\x3e第二章会讲一些Web Storage的进阶知识，包括一些标准，没有太多看的必要，但是也会有点小用。\x3c\/p\x3e\n\x3cp\x3e还有，这是一篇推Web Storage的文章，所以也不给大家挂Cookie相关的链接或者教程，也不去多讲Cookie了，就是这么任性，哼╭(╯^╰)╮！\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader1\x22\x3eWeb Storage使用\x3c\/h1\x3e\n\x3cp\x3e当一个新的技术出现时（已经不新了=。=），我们都会想知道：这个技术的出现是为了解决什么问题的？所以，Web Storage的出现又是为了解决什么问题咧？\x3c\/p\x3e\n\x3cp\x3e顾名思义，Web Storage的出现就是为了解决客户端\x3cstrong\x3e数据\x3c\/strong\x3e存储问题的。那有人就问了，存储不是有Cookie, userData, Flash等等解决方案吗？需要这个Web Storage吗？\x3c\/p\x3e\n\x3cp\x3e其实Web Storage的出现是为了克服Cookie的一些限制，如果你的数据不需要服务端处理，只需要存储在客户端，根本就不需要持续的将数据发回服务器（Cookie会跟在每次HTTP请求里）。Web Storage的两个主要目标是：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e提供一种在Cookie之外存储会话数据的途径\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e提供一种存储大量可以跨会话存在的数据的机制\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e所以，虽然现在的技术方案确实能解决很多存储问题，但是，既然出现了这么个新的东西，肯定也是有它存在的意义的，我们不妨\x3cstrong\x3e深入\x3c\/strong\x3e的了解和尝试一下，说不定就会发现还是挺好用的。\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e目前的情况是Cookie和localStorage用的比较多，我们也可以尝试用sessionStorage做一些Cookie现在做的事情。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e兼容性\x3c\/h2\x3e\n\x3cp\x3e既然要使用它，那我们首先要知道各大浏览器对它的支持情况，如果满足业务需要，那我们就可以放心大胆的用了。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e桌面浏览器\x3c\/h3\x3e\n\x3ctable\x3e\n\x3cthead\x3e\x3ctr\x3e\n\x3cth\x3e浏览器\x3c\/th\x3e\n\x3cth\x3eIE\x3c\/th\x3e\n\x3cth\x3eFirefox\x3c\/th\x3e\n\x3cth\x3eChrome\x3c\/th\x3e\n\x3cth\x3eSafari\x3c\/th\x3e\n\x3cth\x3eOpera\x3c\/th\x3e\n\x3c\/tr\x3e\x3c\/thead\x3e\n\x3ctbody\x3e\x3ctr\x3e\n\x3ctd\x3e版本\x3c\/td\x3e\n\x3ctd\x3e8\x3c\/td\x3e\n\x3ctd\x3e3.5\x3c\/td\x3e\n\x3ctd\x3e4\x3c\/td\x3e\n\x3ctd\x3e4\x3c\/td\x3e\n\x3ctd\x3e10.5\x3c\/td\x3e\n\x3c\/tr\x3e\x3c\/tbody\x3e\n\x3c\/table\x3e\n\x3cp\x3e从上面的图可以看出来，桌面浏览器只有\x3ccode\x3eIE7及以下\x3c\/code\x3e不支持Web Storage。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e移动浏览器\x3c\/h3\x3e\n\x3ctable\x3e\n\x3cthead\x3e\x3ctr\x3e\n\x3cth\x3e浏览器\x3c\/th\x3e\n\x3cth\x3eAndriod\x3c\/th\x3e\n\x3cth\x3eUC\x3c\/th\x3e\n\x3cth\x3eSafari\x3c\/th\x3e\n\x3cth\x3eOpera Mini\x3c\/th\x3e\n\x3c\/tr\x3e\x3c\/thead\x3e\n\x3ctbody\x3e\x3ctr\x3e\n\x3ctd\x3e版本\x3c\/td\x3e\n\x3ctd\x3e2.1\x3c\/td\x3e\n\x3ctd\x3e11\x3c\/td\x3e\n\x3ctd\x3e3.2\x3c\/td\x3e\n\x3ctd\x3e不支持\x3c\/td\x3e\n\x3c\/tr\x3e\x3c\/tbody\x3e\n\x3c\/table\x3e\n\x3cp\x3e移动端浏览器除了\x3ccode\x3eOpera Mini不支持\x3c\/code\x3e外，其他都是支持的\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e数据来源: \x3ca href=\x22http:\/\/caniuse.com\/#search=storage\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ecaniuse.com\x3c\/a\x3e\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e综合以上的信息，Web Storage的兼容性其实是很好的，基本可以放心大胆的用它了。（如果你的项目需要兼容IE7及以下，可以考虑用\x3ccode\x3euserData\x3c\/code\x3e代替，本文不展开介绍Web Storage以外的知识）。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e分类\x3c\/h2\x3e\n\x3cp\x3e我们已经确定了Web Storage可用了，现在可以具体的讲讲它的使用。Web Storage有两种实现，一个是\x3ccode\x3elocalStorage\x3c\/code\x3e，一个是\x3ccode\x3esessionStorage\x3c\/code\x3e。在讲它们之前我们先解释一个概念：\x3cstrong\x3e文档源\x3c\/strong\x3e。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e文档源\x3c\/h3\x3e\n\x3cp\x3e文档源是通过\x3cstrong\x3e协议\x3c\/strong\x3e，\x3cstrong\x3e主机名\x3c\/strong\x3e，\x3cstrong\x3e端口\x3c\/strong\x3e来确定的。如图：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000007842726?w=1170\x26amp;h=327\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000007842726?w=1170\x26amp;h=327\x22 alt=\x22文档源\x22 title=\x22文档源\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e只要有任何一项不同，它们就是非同源文档，下面的每个URL都有不同的文档源：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22http:\/\/www.example.com        \/\/ 协议：http; 主机名：www.example.com\nhttps:\/\/www.example.com       \/\/ 不同协议\nhttp:\/\/static.example.com     \/\/ 不同主机名\nhttp:\/\/www.example.com:8000   \/\/ 不同端口\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs awk\x22\x3e\x3ccode\x3ehttp:\x3cspan class=\x22hljs-regexp\x22\x3e\/\/\x3c\/span\x3ewww.example.com        \x3cspan class=\x22hljs-regexp\x22\x3e\/\/\x3c\/span\x3e 协议：http; 主机名：www.example.com\nhttps:\x3cspan class=\x22hljs-regexp\x22\x3e\/\/\x3c\/span\x3ewww.example.com       \x3cspan class=\x22hljs-regexp\x22\x3e\/\/\x3c\/span\x3e 不同协议\nhttp:\x3cspan class=\x22hljs-regexp\x22\x3e\/\/\x3c\/span\x3estatic.example.com     \x3cspan class=\x22hljs-regexp\x22\x3e\/\/\x3c\/span\x3e 不同主机名\nhttp:\x3cspan class=\x22hljs-regexp\x22\x3e\/\/\x3c\/span\x3ewww.example.com:\x3cspan class=\x22hljs-number\x22\x3e8000\x3c\/span\x3e   \x3cspan class=\x22hljs-regexp\x22\x3e\/\/\x3c\/span\x3e 不同端口\x3c\/code\x3e\x3c\/pre\x3e\n\x3cblockquote\x3e\x3cp\x3e参考链接：\x3ca href=\x22https:\/\/developer.mozilla.org\/zh-CN\/docs\/Web\/Security\/Same-origin_policy\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eMDN-浏览器的同源策略\x3c\/a\x3e\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3elocalStorage\x3c\/h3\x3e\n\x3cp\x3elocalStorage是用来做\x3ccode\x3e永久性\x3c\/code\x3e存储的。\x3c\/p\x3e\n\x3ch4\x3e时效\x3c\/h4\x3e\n\x3cp\x3elocalStorage里的数据的时效是永久的！只要你不删，它就一直在那。除非web应用需要删除或者\x3cstrong\x3e用户需要\x3c\/strong\x3e删掉它。\x3c\/p\x3e\n\x3ch4\x3e作用域\x3c\/h4\x3e\n\x3cp\x3elocalStorage的作用域是限定在文档源级别的，\x3cbr\x3e不同的文档源之间是不能读取和修改对方的数据的，而相同的文档源是可以的。但是不同的浏览器是不共享Storage的，也就是说你在Chorme浏览器里存的数据，在Firefox里是访问不到的，即使它们是同一文档源。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader8\x22\x3esessionStorage\x3c\/h3\x3e\n\x3cp\x3esessionStorage是用来做\x3ccode\x3e临时性\x3c\/code\x3e存储的。\x3c\/p\x3e\n\x3ch4\x3e时效\x3c\/h4\x3e\n\x3cp\x3esessionStorage的时效只存在于标签页存在的时间，一旦标签被关闭了，sessionStorage存储的数据也会被删除掉。\x3c\/p\x3e\n\x3ch4\x3e作用域\x3c\/h4\x3e\n\x3cp\x3esessionStorage的作用域同样是限定在文档源级别的，不仅如此，它还被限制在标签页中，不同标签页的同一个页面拥有各自的sessionStorage，数据不能共享。如果是一个页面里有两个\x3ccode\x3e\x26lt;iframe\x26gt;\x3c\/code\x3e元素，它们是共享sessionStorage的。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader9\x22\x3eWeb Storage API\x3c\/h2\x3e\n\x3cp\x3e好，简要的讲完了Web Storage的特性之后呢，接下来该讲讲怎么操作Web Storage了。\x3c\/p\x3e\n\x3cp\x3eStorage对象提供了操作\x3ccode\x3ekey\/value\x3c\/code\x3e对（下面我们称之为item）的方法，key和value都是\x3cstrong\x3estring\x3c\/strong\x3e类型的值（包括\x3cstrong\x3e空字符串\x3c\/strong\x3e），如果存的不是字符串，会在存储前被转换成字符串，要小心哦！\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader10\x22\x3elength\x3c\/h3\x3e\n\x3cp\x3elength返回Storage对象内item的数量，这是一个\x3cstrong\x3e只读\x3c\/strong\x3e属性。\x3c\/p\x3e\n\x3cp\x3e下面的代码可以在Chorme控制台里给localStorage增加一个判断是否为空的方法\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22localStorage.__proto__.isEmpty = function isEmpty() {\n    return localStorage.length === 0;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3elocalStorage.__proto__.isEmpty = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eisEmpty\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e localStorage.length === \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader11\x22\x3ekey(index)\x3c\/h3\x3e\n\x3cp\x3ekey(index)返回第n项的key。当index的值超出了length，返回null。\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e注意：存入Storage对象内的item的排序顺序由浏览器厂商自己决定，\x3cstrong\x3e不一定是按照你存入的顺序排序的哦\x3c\/strong\x3e,当你增加或者删除item时，index对应的值可能会变化\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e下面的代码可以遍历localStorage里的所有key\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22for (let i = 0, len = localStorage.length; i \x3c len; i\x2b\x2b) {\n    console.log(localStorage.key(i));\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, len = localStorage.length; i \x26lt; len; i\x2b\x2b) {\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(localStorage.key(i));\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader12\x22\x3egetItem(key)\x3c\/h3\x3e\n\x3cp\x3e返回对应key值的value，如果没有，返回null。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22localStorage.getItem(\x27gameRemainingTime\x27);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3elocalStorage.getItem(\x3cspan class=\x22hljs-string\x22\x3e\x27gameRemainingTime\x27\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader13\x22\x3esetItem(key, value)\x3c\/h3\x3e\n\x3cp\x3esetItem方法首先检查要设置的item是否存在，如果不存在，在Storage里加入该item；如果存在，更新这个item的value。如果无法存入新item，该方法会抛出\x3ccode\x3eQuotaExceedeError\x3c\/code\x3eDOMException异常，不改变Storage内的任何内容（表示Storage已经存满了，Storage目前推荐的存储容量上限为5M）\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22localStorage.setItem(\x27gameRemainingTime\x27, \x2710\x27);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3elocalStorage.setItem(\x3cspan class=\x22hljs-string\x22\x3e\x27gameRemainingTime\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x2710\x27\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader14\x22\x3eremoveItem(key)\x3c\/h3\x3e\n\x3cp\x3eremoveItem方法会删除指定的item，如果不存在指定的item，什么都不做\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22localStorage.removeItem(\x27gameRemainingTime\x27);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3elocalStorage.removeItem(\x3cspan class=\x22hljs-string\x22\x3e\x27gameRemainingTime\x27\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader15\x22\x3eclear()\x3c\/h3\x3e\n\x3cp\x3eclear方法会清空Storage里的所有item，如果Storage本来就是空的，什么都不做\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22localStorage.clear();\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3elocalStorage.clear();\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader16\x22\x3eWeb Storage 存储事件\x3c\/h2\x3e\n\x3cp\x3e当localStorage或者sessionStorage的数据发生变化的时候，浏览器都会在其他对该数据可见的窗口对象上触发\x3ccode\x3estorage\x3c\/code\x3e事件（本窗口除外）。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e重要\x3c\/strong\x3e：只有当存储数据真正发生变化时才会触发存储事件，比如给一个item重新设置一个和原来一样的value，或者是删除一个不存在的item是不会触发存储事件的。\x3c\/p\x3e\n\x3cp\x3eStorageEvent的几个属性：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3ekey：item的key，没有则为null\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3enewValue: item的新值，没有则为null\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eoldValue: item的旧值，没有则为null\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3estorageArea: sessionStorage或者localStorage\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eurl: 触发存储事件的脚本所在文档的url\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22window.addEventListener(\x27storage\x27, function(e) {\n  console.log(e.key, e.oldValue,  e.newValue, e.storageArea, e.url);\n}, false);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27storage\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ee\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(e.key, e.oldValue,  e.newValue, e.storageArea, e.url);\n}, \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch1 id=\x22articleHeader17\x22\x3eWeb Storage 进阶\x3c\/h1\x3e\n\x3cp\x3e这一章主要讲一些不那么重要，零碎的小知识点，可看可不看，有发现一些新东西会慢慢补充进来。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader18\x22\x3esessionStorage\x3c\/h2\x3e\n\x3cp\x3e对于存在sessionStorage里的数据，浏览器是不应该给它设置过期时间的，它有自己的生命周期。除非用户要求删掉数据，或者存储空间不足，或者处于完全原因。\x3c\/p\x3e\n\x3cp\x3e现在有些浏览器有\x3cstrong\x3e打开上次关闭的标签页\x3c\/strong\x3e的功能，所以sessionStorage的生命周期可能并不是在标签页关闭之后就立马结束，可能会延时一段时间。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader19\x22\x3elocalStorage\x3c\/h2\x3e\n\x3cp\x3e如果用户禁用了缓存，那么在我们存入数据时会抛出\x3ccode\x3eSecurityError\x3c\/code\x3e DOMException\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader20\x22\x3e磁盘空间\x3c\/h2\x3e\n\x3cp\x3e目前推荐的磁盘空间是5M，但是不同的浏览器厂商有不同的设定，这个设定会由实际检验合理性，比较合理的大小可以反馈给W3C，然后他们来修改这个推荐的大小。\x3c\/p\x3e\n\x3cp\x3e当存储空间即将达到上限的时候，浏览器可以提醒用户授权增加一点存储空间，剩余的存储空间浏览器也应该能让用户知道。\x3c\/p\x3e\n\x3cp\x3eIE对数据的存储是异步的，Firefox和WebKit是同步的。在数据量少的时候是看不出区别的。除非存储的数据量达到一定的量级，你会发现IE执行的会比较快，因为它跳过了写到磁盘的过程。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader21\x22\x3e参考文献\x3c\/h1\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/html.spec.whatwg.org\/multipage\/webstorage.html#webstorage\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eHTML Standard - Web Storage\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e《JavaScript 权威指南》\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e《JavaScript 高级程序设计》\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e《HTML5 权威指南》\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>Web Storage实用指南</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000007811307">https://segmentfault.com/a/1190000007811307</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/fek1opi7eci/" target="_blank">https://alili.tech/archive/fek1opi7eci/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>