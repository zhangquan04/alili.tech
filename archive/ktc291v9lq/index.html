<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="V8 Object 内存结构与属性访问详解"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>V8 Object 内存结构与属性访问详解 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/ktc291v9lq/",
				"appid": "1613049289050283", 
				"title": "V8 Object 内存结构与属性访问详解 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-27T02:31:00"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/62hk7sdq93k/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/9gngp6sg77/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fktc291v9lq%2f&text=V8%20Object%20%e5%86%85%e5%ad%98%e7%bb%93%e6%9e%84%e4%b8%8e%e5%b1%9e%e6%80%a7%e8%ae%bf%e9%97%ae%e8%af%a6%e8%a7%a3"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fktc291v9lq%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fktc291v9lq%2f&text=V8%20Object%20%e5%86%85%e5%ad%98%e7%bb%93%e6%9e%84%e4%b8%8e%e5%b1%9e%e6%80%a7%e8%ae%bf%e9%97%ae%e8%af%a6%e8%a7%a3"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fktc291v9lq%2f&title=V8%20Object%20%e5%86%85%e5%ad%98%e7%bb%93%e6%9e%84%e4%b8%8e%e5%b1%9e%e6%80%a7%e8%ae%bf%e9%97%ae%e8%af%a6%e8%a7%a3"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fktc291v9lq%2f&is_video=false&description=V8%20Object%20%e5%86%85%e5%ad%98%e7%bb%93%e6%9e%84%e4%b8%8e%e5%b1%9e%e6%80%a7%e8%ae%bf%e9%97%ae%e8%af%a6%e8%a7%a3"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=V8%20Object%20%e5%86%85%e5%ad%98%e7%bb%93%e6%9e%84%e4%b8%8e%e5%b1%9e%e6%80%a7%e8%ae%bf%e9%97%ae%e8%af%a6%e8%a7%a3&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fktc291v9lq%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fktc291v9lq%2f&title=V8%20Object%20%e5%86%85%e5%ad%98%e7%bb%93%e6%9e%84%e4%b8%8e%e5%b1%9e%e6%80%a7%e8%ae%bf%e9%97%ae%e8%af%a6%e8%a7%a3"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fktc291v9lq%2f&title=V8%20Object%20%e5%86%85%e5%ad%98%e7%bb%93%e6%9e%84%e4%b8%8e%e5%b1%9e%e6%80%a7%e8%ae%bf%e9%97%ae%e8%af%a6%e8%a7%a3"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fktc291v9lq%2f&title=V8%20Object%20%e5%86%85%e5%ad%98%e7%bb%93%e6%9e%84%e4%b8%8e%e5%b1%9e%e6%80%a7%e8%ae%bf%e9%97%ae%e8%af%a6%e8%a7%a3"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fktc291v9lq%2f&title=V8%20Object%20%e5%86%85%e5%ad%98%e7%bb%93%e6%9e%84%e4%b8%8e%e5%b1%9e%e6%80%a7%e8%ae%bf%e9%97%ae%e8%af%a6%e8%a7%a3"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">V8 Object 内存结构与属性访问详解</h1><div class="meta"><div class="postdate"><time datetime="2019-01-27" itemprop="datePublished">2019-01-27</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e\x3cp\x3e\x3ca href=\x22https:\/\/zhuanlan.zhihu.com\/p\/24982678\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eV8 Object 内存结构与属性访问详解\x3c\/a\x3e从属于笔者的\x3ca href=\x22https:\/\/github.com\/wxyyxc1992\/Web-Frontend-Introduction-And-Engineering-Practices\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eWeb 前端入门与工程实践\x3c\/a\x3e，推荐阅读\x3ca href=\x22https:\/\/zhuanlan.zhihu.com\/p\/24575395\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e2016-我的前端之路:工具化与工程化\x3c\/a\x3e。更多关于 JavaScript 引擎文章参考\x3ca href=\x22https:\/\/github.com\/wxyyxc1992\/Web-Frontend-Introduction-And-Engineering-Practices\/blob\/master\/Syntax\/JavaScript\/Advanced\/Engine\/JavaScript-Engine-Reference.md\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e这里\x3c\/a\x3e。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch1 id=\x22articleHeader0\x22\x3eV8 Object 内存结构与属性访问\x3c\/h1\x3e\n\x3cp\x3e上世纪九十年代，随着网景浏览器的发行，JavaScript 首次进入人们的视线。之后随着 AJAX 的大规模应用与富客户端、单页应用时代的到来，JavaScript 在 Web 开发中占据了越来越重要的地位。在早期的 JavaScript 引擎中，性能越发成为了开发网页应用的瓶颈。而 V8 引擎设计的目标就是为了保证大型 JavaScript 应用的执行效率，在\x3ca href=\x22https:\/\/developers.google.com\/v8\/benchmarks\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e很多测试\x3c\/a\x3e中可以明显发现 V8 的性能优于 JScript (Internet Explorer), SpiderMonkey (Firefox), 以及 JavaScriptCore(Safari). 根据 V8 的官方文档介绍，其主要是从属性访问、动态机器码生成以及高效的垃圾回收这三个方面着手性能优化。Obejct 当属 JavaScript 最重要的数据类型之一，本文我们对其内部结构进行详细阐述。其继承关系图如下所示：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008188651?w=835\x26amp;h=924\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008188651?w=835\x26amp;h=924\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e在 V8 中新分配的 JavaScript 对象结构如下所示：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22[ class \/ map ] -\x3e ... ; 指向内部类\n[ properties  ] -\x3e [empty array]\n[ elements    ] -\x3e [empty array] ; 数值类型名称的属性\n[ reserved #1 ] -\\\n[ reserved #2 ]  |\n[ reserved #3 ]  }- in object properties,即预分配的内存空间\n...............  |\n[ reserved #N ] -\/\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs clean\x22\x3e\x3ccode\x3e[ \x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \/ map ] -\x26gt; ... ; 指向内部类\n[ properties  ] -\x26gt; [empty array]\n[ elements    ] -\x26gt; [empty array] ; 数值类型名称的属性\n[ reserved #\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ] -\\\n[ reserved #\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e ]  |\n[ reserved #\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e ]  }- \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e object properties,即预分配的内存空间\n...............  |\n[ reserved #N ] -\/\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在创建新的对象时，V8 会创建某个预分配的内存区域来存放所谓的 in-object 属性，预分配区域的大小由构造函数中的参数数目决定（\x3ccode\x3ethis.field = expr\x3c\/code\x3e）。当你打算向对象中添加某个新属性时，V8 首先会尝试放入所谓的 in-order 槽位中，当 in-object 槽位过载之后，V8 会尝试将新的属性添加到 out-of-object 属性列表。而属性名与属性下标的映射关系即存放在所谓隐藏类中，譬如\x3ccode\x3e{ a: 1, b: 2, c: 3, d: 4}\x3c\/code\x3e对象的存储方式可能如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22[ class       ] -\x3e [a: in obj #1, b: in obj #2, c: out obj #1, d: out obj #2]\n[ properties  ] -\x3e [  3  ][  4  ] ; this is linear array\n[ elements    ]    \n[ 1           ]\n[ 2           ]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs markdown\x22\x3e\x3ccode\x3e[ class       ] -\x26gt; [a: in obj #1, b: in obj #2, c: out obj #1, d: out obj #2]\n[\x3cspan class=\x22hljs-string\x22\x3e properties  \x3c\/span\x3e] -\x26gt; [\x3cspan class=\x22hljs-string\x22\x3e  3  \x3c\/span\x3e][\x3cspan class=\x22hljs-symbol\x22\x3e  4  \x3c\/span\x3e] ; this is linear array\n[ elements    ]    \n[ 1           ]\n[ 2           ]\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e随着属性数目的增加，V8 会转回到传统的字典模式\/哈希表模式：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22[ class       ] -\x3e [ OBJECT IS IN DICTIONARY MODE ]\n[ properties  ] -\x3e [a: 1, b: 2, c: 3, d: 4, e: 5] ; this is classical hash table\n[ elements    ]  \x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs inform7\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e[ class       ]\x3c\/span\x3e -\x26gt; \x3cspan class=\x22hljs-comment\x22\x3e[ OBJECT IS IN DICTIONARY MODE ]\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e[ properties  ]\x3c\/span\x3e -\x26gt; \x3cspan class=\x22hljs-comment\x22\x3e[a: 1, b: 2, c: 3, d: 4, e: 5]\x3c\/span\x3e ; this \x3cspan class=\x22hljs-keyword\x22\x3eis\x3c\/span\x3e classical hash table\n\x3cspan class=\x22hljs-comment\x22\x3e[ elements    ]\x3c\/span\x3e  \x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3eReference\x3c\/h2\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/v8\/v8\/wiki\/Design%20Elements\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eV8 Design Elements\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/www.jayconrod.com\/posts\/52\/a-tour-of-v8-object-representation\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eA tour of V8: object representation\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/thlorenz.com\/talks\/demystifying-v8\/talk.pdf\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eDemystifying v8 and JavaScript Performance\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/v8docs.nodesource.com\/node-7.2\/db\/d85\/classv8_1_1_object.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eV8 Docs:Object Class Reference\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/stackoverflow.com\/questions\/7413168\/how-does-v8-manage-the-memory-of-object-instances\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eHow does V8 manage the memory of object instances?\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch1 id=\x22articleHeader2\x22\x3eProperty Name:属性名\x3c\/h1\x3e\n\x3cp\x3e作为动态语言，JavaScript 允许我们以非常灵活的方式来定义对象，譬如：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22obj.prop\nobj[\x26quot;prop\x26quot;]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3eobj\x3cspan class=\x22hljs-selector-class\x22\x3e.prop\x3c\/span\x3e\nobj[\x3cspan class=\x22hljs-string\x22\x3e\x22prop\x22\x3c\/span\x3e]\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e参照 JavaScript 定义规范中的描述，属性名恒为字符串，即使你使用了某个非字符串的名字，也会隐式地转化为字符串类型。譬如你创建的是个数组，以数值下标进行访问，然而 V8 还是将其转化为了字符串再进行索引，因此以下的方式就会获得相同的效果：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22obj[1];    \/\/\nobj[\x26quot;1\x26quot;];  \/\/ names for the same property\nobj[1.0];  \/\/\n\nvar o = { toString: function () { return \x26quot;-1.5\x26quot;; } };\n\nobj[-1.5];  \/\/ also equivalent\nobj[o];     \/\/ since o is converted to string\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3eobj[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e];    \x3cspan class=\x22hljs-comment\x22\x3e\/\/\x3c\/span\x3e\nobj[\x3cspan class=\x22hljs-string\x22\x3e\x221\x22\x3c\/span\x3e];  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ names for the same property\x3c\/span\x3e\nobj[\x3cspan class=\x22hljs-number\x22\x3e1.0\x3c\/span\x3e];  \x3cspan class=\x22hljs-comment\x22\x3e\/\/\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e o = { toString: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e \x3c\/span\x3e{ \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22-1.5\x22\x3c\/span\x3e; } };\n\nobj[\x3cspan class=\x22hljs-number\x22\x3e-1.5\x3c\/span\x3e];  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ also equivalent\x3c\/span\x3e\nobj[o];     \x3cspan class=\x22hljs-comment\x22\x3e\/\/ since o is converted to string\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e而 JavaScript 中的 Array 只是包含了额外的\x3ccode\x3elength\x3c\/code\x3e属性的对象而已，\x3ccode\x3elength\x3c\/code\x3e会返回当前最大下标加一的结果（此时字符串下标会被转化为数值类型计算）:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var a = new Array();\na[100] = \x26quot;foo\x26quot;;\na.length;  \/\/101\na[undefined] = \x27a\x27;\na.length; \/\/0\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e a = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eArray\x3c\/span\x3e();\na[\x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e] = \x3cspan class=\x22hljs-string\x22\x3e\x22foo\x22\x3c\/span\x3e;\na.length;  \x3cspan class=\x22hljs-comment\x22\x3e\/\/101\x3c\/span\x3e\na[\x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e] = \x3cspan class=\x22hljs-string\x22\x3e\x27a\x27\x3c\/span\x3e;\na.length; \x3cspan class=\x22hljs-comment\x22\x3e\/\/0\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3eFunction\x3c\/code\x3e本质上也是对象，只不过\x3ccode\x3elength\x3c\/code\x3e属性会返回参数的长度而已：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3e a = ()=\x3e{}\n[Function: a]\n\x3e a.length\n0\n\x3e a = (b)=\x3e{}\n[Function: a]\n\x3e a.length\n1\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3e\x26gt; \x3cspan class=\x22hljs-selector-tag\x22\x3ea\x3c\/span\x3e = ()=\x26gt;{}\n[Function: a]\n\x26gt; \x3cspan class=\x22hljs-selector-tag\x22\x3ea\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.length\x3c\/span\x3e\n\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e\n\x26gt; \x3cspan class=\x22hljs-selector-tag\x22\x3ea\x3c\/span\x3e = (b)=\x26gt;{}\n[Function: a]\n\x26gt; \x3cspan class=\x22hljs-selector-tag\x22\x3ea\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.length\x3c\/span\x3e\n\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch1 id=\x22articleHeader3\x22\x3eIn-Object Properties \x26amp; Fast Property Access:对象内属性与访问优化\x3c\/h1\x3e\n\x3cp\x3e作为动态类型语言，JavaScript 中的对象属性可以在运行时动态地增删，意味着整个对象的结构会频繁地改变。大部分 JavaScript 引擎倾向于使用字典类型的数据结构来存放对象属性（ Object Properties），每次进行属性访问的时候引擎都需要在内层中先动态定位属性对应的下标地址然后读取值。这种方式实现上比较容易，但是会导致较差的性能表现。其他的类似于 Java 与 Smalltalk 这样的静态语言中，成员变量在编译阶段即确定了其在内存中的固定偏移地址，进行属性访问的时候只需要单指令从内存中加载即可。而 V8 则利用动态创建隐藏内部类的方式动态地将属性的内存地址记录在对象内，从而提升整体的属性访问速度。总结而言，每当为某个对象添加新的属性时，V8 会自动修正其隐藏内部类。我们先通过某个\x3ca href=\x22https:\/\/github.com\/wxyyxc1992\/Webpack2-React-Redux-Boilerplate\/blob\/master\/playground\/v8\/hidden_classes.js\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e实验\x3c\/a\x3e来感受下隐藏类的存在：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var PROPERTIES = 10000000;\nvar o = {};\n\nvar start = \x2bnew Date;\n\nfor (var i = 0; i \x3c PROPERTIES; i\x2b\x2b) {\n  o[i] = i;\n}\n\nconsole.log(\x2bnew Date - start);\n\nfunction O(size) {\n  for (var i = 0; i \x3c size; i\x2b\x2b) {\n    this[i] = null;\n  }\n}\n\nvar o = new O(PROPERTIES);\n\nvar start = \x2bnew Date;\n\nfor (var i = 0; i \x3c PROPERTIES; i\x2b\x2b) {\n  o[i] = i;\n}\n\nconsole.log(\x2bnew Date - start);\n\nclass OClass {\n\n    constructor(size){\n        for (var i = 0; i \x3c size; i\x2b\x2b) {\n            this[i] = null;\n        }\n    }\n\n}\n\nvar o = new OClass(PROPERTIES);\n\nvar start = \x2bnew Date;\n\nfor (var i = 0; i \x3c PROPERTIES; i\x2b\x2b) {\n  o[i] = i;\n}\n\nconsole.log(\x2bnew Date - start);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e PROPERTIES = \x3cspan class=\x22hljs-number\x22\x3e10000000\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e o = {};\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e start = \x2b\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; PROPERTIES; i\x2b\x2b) {\n  o[i] = i;\n}\n\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x2b\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e - start);\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eO\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3esize\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; size; i\x2b\x2b) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e[i] = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n  }\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e o = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e O(PROPERTIES);\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e start = \x2b\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; PROPERTIES; i\x2b\x2b) {\n  o[i] = i;\n}\n\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x2b\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e - start);\n\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eOClass\x3c\/span\x3e \x3c\/span\x3e{\n\n    \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e(size){\n        \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; size; i\x2b\x2b) {\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e[i] = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n        }\n    }\n\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e o = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e OClass(PROPERTIES);\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e start = \x2b\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; PROPERTIES; i\x2b\x2b) {\n  o[i] = i;\n}\n\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x2b\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e - start);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e该程序的执行结果如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ Babel 下结果\n385\n37\n49\n\/\/ Chrome 下结果\n416\n32\n31\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ Babel 下结果\x3c\/span\x3e\n\x3cspan class=\x22hljs-number\x22\x3e385\x3c\/span\x3e\n\x3cspan class=\x22hljs-number\x22\x3e37\x3c\/span\x3e\n\x3cspan class=\x22hljs-number\x22\x3e49\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ Chrome 下结果\x3c\/span\x3e\n\x3cspan class=\x22hljs-number\x22\x3e416\x3c\/span\x3e\n\x3cspan class=\x22hljs-number\x22\x3e32\x3c\/span\x3e\n\x3cspan class=\x22hljs-number\x22\x3e31\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e第一种实现中，每次为对象\x3ccode\x3eo\x3c\/code\x3e设置新的属性时，V8 都会创建新的隐藏内部类（内部称为 Map）来存储新的内存地址以优化属性查找速度。而第二种实现时，我们在创建新的对象时即初始化了内部类，这样在赋值属性时 V8 以及能够高性能地定位这些属性。第三种实现则是用的 ES6 Class，在纯正的 V8 下性能最好。接下来我们具体阐述下隐藏类的工作原理，假设我们定义了描述点的函数：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function Point(x, y) {\n  this.x = x;\n  this.y = y;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ePoint\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(x, y)\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.x = x;\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.y = y;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e当我们执行\x3ccode\x3enew Point(x,y)\x3c\/code\x3e语句时，V8 会创建某个新的\x3ccode\x3ePoint\x3c\/code\x3e对象。创建的过程中，V8 首先会创建某个所谓\x3ccode\x3eC0\x3c\/code\x3e的隐藏内部类，因为尚未为对象添加任何属性，此时隐藏类还是空的：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008188652?w=474\x26amp;h=117\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008188652?w=474\x26amp;h=117\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e接下来调用首个赋值语句\x3ccode\x3ethis.x = x;\x3c\/code\x3e为当前\x3ccode\x3ePoint\x3c\/code\x3e对象创建了新的属性\x3ccode\x3ex\x3c\/code\x3e，此时 V8 会基于\x3ccode\x3eC0\x3c\/code\x3e创建另一个隐藏类\x3ccode\x3eC1\x3c\/code\x3e来替换\x3ccode\x3eC0\x3c\/code\x3e，然后在\x3ccode\x3eC1\x3c\/code\x3e中存放对象属性\x3ccode\x3ex\x3c\/code\x3e的内存位置信息：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008188653?w=474\x26amp;h=198\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008188653?w=474\x26amp;h=198\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e这里从\x3ccode\x3eC0\x3c\/code\x3e到\x3ccode\x3eC1\x3c\/code\x3e的变化称为转换（Transitions），当我们为同一个类型的对象添加新的属性时，并不是每次都会创建新的隐藏类，而是多个对象会共用某个符合转换条件的隐藏类。接下来继续执行\x3ccode\x3ethis.y = y\x3c\/code\x3e 这一条语句，会为\x3ccode\x3ePoint\x3c\/code\x3e对象创建新的属性。此时 V8 会进行以下步骤：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e基于\x3ccode\x3eC1\x3c\/code\x3e创建另一个隐藏类\x3ccode\x3eC1\x3c\/code\x3e，并且将关于属性\x3ccode\x3ey\x3c\/code\x3e的位置信息写入到\x3ccode\x3eC2\x3c\/code\x3e中。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e更新\x3ccode\x3eC1\x3c\/code\x3e为其添加转换信息，即当为\x3ccode\x3ePoint\x3c\/code\x3e对象添加属性 \x3ccode\x3ey\x3c\/code\x3e 时，应该转换到隐藏类 \x3ccode\x3eC2\x3c\/code\x3e。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008188654?w=474\x26amp;h=237\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008188654?w=474\x26amp;h=237\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e整个过程的伪代码描述如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cPoint object is allocated\x3e\n\n  Class C0\n    \x26quot;x\x26quot;: TRANSITION to C1 at offset 0\n\nthis.x = x;\n\n  Class C1\n    \x26quot;x\x26quot;: FIELD at offset 0\n    \x26quot;y\x26quot;: TRANSITION to C2 at offset 1\n\nthis.y = y;\n\n  Map C2\n    \x26quot;x\x26quot;: FIELD at offset 0\n    \x26quot;y\x26quot;: FIELD at offset 1\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs applescript\x22\x3e\x3ccode\x3e\x26lt;Point object \x3cspan class=\x22hljs-keyword\x22\x3eis\x3c\/span\x3e allocated\x26gt;\n\n  Class C0\n    \x3cspan class=\x22hljs-string\x22\x3e\x22x\x22\x3c\/span\x3e: TRANSITION \x3cspan class=\x22hljs-keyword\x22\x3eto\x3c\/span\x3e C1 \x3cspan class=\x22hljs-keyword\x22\x3eat\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eoffset\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e\n\nthis.x = x;\n\n  Class C1\n    \x3cspan class=\x22hljs-string\x22\x3e\x22x\x22\x3c\/span\x3e: FIELD \x3cspan class=\x22hljs-keyword\x22\x3eat\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eoffset\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e\n    \x3cspan class=\x22hljs-string\x22\x3e\x22y\x22\x3c\/span\x3e: TRANSITION \x3cspan class=\x22hljs-keyword\x22\x3eto\x3c\/span\x3e C2 \x3cspan class=\x22hljs-keyword\x22\x3eat\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eoffset\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\n\nthis.y = y;\n\n  Map C2\n    \x3cspan class=\x22hljs-string\x22\x3e\x22x\x22\x3c\/span\x3e: FIELD \x3cspan class=\x22hljs-keyword\x22\x3eat\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eoffset\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e\n    \x3cspan class=\x22hljs-string\x22\x3e\x22y\x22\x3c\/span\x3e: FIELD \x3cspan class=\x22hljs-keyword\x22\x3eat\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eoffset\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3eReused Hidden Class:重复使用的隐藏类\x3c\/h2\x3e\n\x3cp\x3e我们在上文中提及，如果每次添加新的属性时都创建新的隐藏类无疑是极大的性能浪费，实际上当我们再次创建新的\x3ccode\x3ePoint\x3c\/code\x3e对象时，V8 并不会创建新的隐藏类而是使用已有的，过程描述如下：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e初始化新的\x3ccode\x3ePoint\x3c\/code\x3e对象，并将隐藏类指向\x3ccode\x3eC0\x3c\/code\x3e。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e添加\x3ccode\x3ex\x3c\/code\x3e属性时，遵循隐藏类的转换原则指向到\x3ccode\x3eC1\x3c\/code\x3e , 并且根据\x3ccode\x3eC1\x3c\/code\x3e指定的偏移地址写入\x3ccode\x3ex\x3c\/code\x3e。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e添加\x3ccode\x3ey\x3c\/code\x3e属性时，遵循隐藏类的转换原则指向到\x3ccode\x3eC2\x3c\/code\x3e，并且根据\x3ccode\x3eC2\x3c\/code\x3e指定的偏移地址写入\x3ccode\x3ey\x3c\/code\x3e。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e另外我们在上文以链表的方式描述转换，实际上真实场景中 V8 会以树的结构来描述转换及其之间的关系，这样就能够用于类似于下面的属性一致而赋值顺序颠倒的场景：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function Point(x, y, reverse) {\n  if (reverse) {\n    this.x = x;\n    this.y = y;\n  } else {\n    this.y = x;\n    this.x = y;\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs kotlin\x22\x3e\x3ccode\x3efunction Point(x, y, reverse) {\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (reverse) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.x = x;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.y = y;\n  } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.y = x;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.x = y;\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3eMethods \x26amp; Prototypes:方法与原型\x3c\/h2\x3e\n\x3cp\x3eJavaScript 中并没有类的概念（语法糖除外），因此对于方法的调用处理会难于 C\x2b\x2b 或者 Java。下面这个例子中，\x3ccode\x3edistance\x3c\/code\x3e方法可以被看做\x3ccode\x3ePoint\x3c\/code\x3e的普通属性之一，不过其并非原始类型的数据，而是指向了另一个函数：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function Point(x, y) {\n  this.x = x;\n  this.y = y;\n  this.distance = PointDistance;\n}\n\nfunction PointDistance(p) {\n  var dx = this.x - p.x;\n  var dy = this.y - p.y;\n  return Math.sqrt(dx*dx \x2b dy*dy);\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ePoint\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ex, y\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.x = x;\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.y = y;\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.distance = PointDistance;\n}\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ePointDistance\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ep\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e dx = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.x - p.x;\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e dy = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.y - p.y;\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.sqrt(dx*dx \x2b dy*dy);\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e如果我们像上文介绍的普通的 in-object 域一样来处理\x3ccode\x3edistance\x3c\/code\x3e属性，那么无疑会带来较大的内存浪费，毕竟每个对象都要存放一段外部函数引用（Reference 的内存占用往往大于原始类型）。C\x2b\x2b 中则是以指向多个虚函数的虚函数表（V-Tables）解决这个问题。每个包含虚函数的类的实例都会指向这个虚函数表，当调用某个虚函数时，程序会自动从虚函数表中加载该函数的地址信息然后转向到该地址调用。V8 中我们已经使用了隐藏类这一共享数据结构，因此可以很方便地改造下就可以。我们引入了所谓 Constant Functions 的概念，某个 Constant Function 即代表了对象中仅包含某个名字，而具体的属性值存放在描述符本身的概念：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cPoint object is allocated\x3e\n\n  Class C0\n    \x26quot;x\x26quot;: TRANSITION to C1 at offset 0\n\nthis.x = x;\n\n  Class C1\n    \x26quot;x\x26quot;: FIELD at offset 0\n    \x26quot;y\x26quot;: TRANSITION to C2 at offset 1\n\nthis.y = y;\n\n  Class C2\n    \x26quot;x\x26quot;: FIELD at offset 0\n    \x26quot;y\x26quot;: FIELD at offset 1\n    \x26quot;distance\x26quot;: TRANSITION to C3 \x3cPointDistance\x3e\n\nthis.distance = PointDistance;\n\n  Class C3\n    \x26quot;x\x26quot;: FIELD at offset 0\n    \x26quot;y\x26quot;: FIELD at offset 1\n    \x26quot;distance\x26quot;: CONSTANT_FUNCTION \x3cPointDistance\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs applescript\x22\x3e\x3ccode\x3e\x26lt;Point object \x3cspan class=\x22hljs-keyword\x22\x3eis\x3c\/span\x3e allocated\x26gt;\n\n  Class C0\n    \x3cspan class=\x22hljs-string\x22\x3e\x22x\x22\x3c\/span\x3e: TRANSITION \x3cspan class=\x22hljs-keyword\x22\x3eto\x3c\/span\x3e C1 \x3cspan class=\x22hljs-keyword\x22\x3eat\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eoffset\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e\n\nthis.x = x;\n\n  Class C1\n    \x3cspan class=\x22hljs-string\x22\x3e\x22x\x22\x3c\/span\x3e: FIELD \x3cspan class=\x22hljs-keyword\x22\x3eat\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eoffset\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e\n    \x3cspan class=\x22hljs-string\x22\x3e\x22y\x22\x3c\/span\x3e: TRANSITION \x3cspan class=\x22hljs-keyword\x22\x3eto\x3c\/span\x3e C2 \x3cspan class=\x22hljs-keyword\x22\x3eat\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eoffset\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\n\nthis.y = y;\n\n  Class C2\n    \x3cspan class=\x22hljs-string\x22\x3e\x22x\x22\x3c\/span\x3e: FIELD \x3cspan class=\x22hljs-keyword\x22\x3eat\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eoffset\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e\n    \x3cspan class=\x22hljs-string\x22\x3e\x22y\x22\x3c\/span\x3e: FIELD \x3cspan class=\x22hljs-keyword\x22\x3eat\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eoffset\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\n    \x3cspan class=\x22hljs-string\x22\x3e\x22distance\x22\x3c\/span\x3e: TRANSITION \x3cspan class=\x22hljs-keyword\x22\x3eto\x3c\/span\x3e C3 \x26lt;PointDistance\x26gt;\n\nthis.distance = PointDistance;\n\n  Class C3\n    \x3cspan class=\x22hljs-string\x22\x3e\x22x\x22\x3c\/span\x3e: FIELD \x3cspan class=\x22hljs-keyword\x22\x3eat\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eoffset\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e\n    \x3cspan class=\x22hljs-string\x22\x3e\x22y\x22\x3c\/span\x3e: FIELD \x3cspan class=\x22hljs-keyword\x22\x3eat\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eoffset\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\n    \x3cspan class=\x22hljs-string\x22\x3e\x22distance\x22\x3c\/span\x3e: CONSTANT_FUNCTION \x26lt;PointDistance\x26gt;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e注意，在这里如果我们将\x3ccode\x3ePointDistance \x3c\/code\x3e重定义指向了其他函数，那么这个转换也会自动失效，V8 会创建新的隐藏类。另一种解决这个问题的方法就是使用原型，每个构造函数都会有所谓的\x3ccode\x3ePrototype\x3c\/code\x3e属性，该属性会自动成为对象的原型链上的一环，上面的例子可以改写为以下方式：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function Point(x, y) {\n  this.x = x;\n  this.y = y;\n}\n\nPoint.prototype.distance = function(p) {\n  var dx = this.x - p.x;\n  var dy = this.y - p.y;\n  return Math.sqrt(dx*dx \x2b dy*dy);\n}\n\n...\nvar u = new Point(1, 2);\nvar v = new Point(3, 4);\nvar d = u.distance(v);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs qml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ePoint\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ex, y\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.x = x;\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.y = y;\n}\n\nPoint.prototype.distance = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ep\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e dx = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.x - p.x;\n  \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e dy = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.y - p.y;\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.sqrt(dx*dx \x2b dy*dy);\n}\n\n...\n\x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e u = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Point(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e);\n\x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e v = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Point(\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e);\n\x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e d = u.distance(v);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eV8 同样会把原型链上的方法在隐藏类中映射为 Constant Function 描述符，而调用原型方法往往会比调用自身方法慢一点，毕竟引擎不仅要去扫描自身的隐藏类，还要去扫描原型链上对象的隐藏类才能得知真正的函数调用地址。不过这个不会对于代码的性能造成明显的影响，因此写代码的时候也不必小心翼翼的避免这个。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader6\x22\x3eDictionary Mode\x3c\/h1\x3e\n\x3cp\x3e对于复杂属性的对象，V8 会使用所谓的字典模式（Dictionary Mode）来存储对象，也就是使用哈希表来存放键值信息，这种方式存储开销会小于上文提到的包含了隐藏类的方式，不过查询速度会远小于前者。初始状态下，哈希表中的所有的键与值都被设置为了\x3ccode\x3eundefined\x3c\/code\x3e，当插入新的数据时，计算得出的键名的哈希值的低位会被当做初始的存储索引地址。如果此地址已经被占用了，V8 会尝试向下一个地址进行插入，直到插入成功，伪代码表述如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 插入\ninsert(table, key, value):\n  table = ensureCapacity(table, length(table) \x2b 1)\n  code = hash(key)\n  n = capacity(table)\n  index = code (mod n)\n  while getKey(table, index) is not undefined:\n    index \x2b= 1 (mod n)\n  set(table, index, key, value)\n\n\/\/查找\nlookup(table, key):\n  code = hash(key)\n  n = capacity(table)\n  index = code (mod n)\n  k = getKey(table, index)\n  while k is not null or undefined\n        and k != key: \n    index \x2b= 1 (mod n)\n    k = getKey(table, index)\n  if k == key:\n    return getValue(table, index)\n  else:\n    return undefined\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs sql\x22\x3e\x3ccode\x3e\/\/ 插入\n\x3cspan class=\x22hljs-keyword\x22\x3einsert\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3etable\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3ekey\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3evalue\x3c\/span\x3e):\n  \x3cspan class=\x22hljs-keyword\x22\x3etable\x3c\/span\x3e = ensureCapacity(\x3cspan class=\x22hljs-keyword\x22\x3etable\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3elength\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3etable\x3c\/span\x3e) \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e)\n  code = \x3cspan class=\x22hljs-keyword\x22\x3ehash\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3ekey\x3c\/span\x3e)\n  n = \x3cspan class=\x22hljs-keyword\x22\x3ecapacity\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3etable\x3c\/span\x3e)\n  \x3cspan class=\x22hljs-keyword\x22\x3eindex\x3c\/span\x3e = code (\x3cspan class=\x22hljs-keyword\x22\x3emod\x3c\/span\x3e n)\n  \x3cspan class=\x22hljs-keyword\x22\x3ewhile\x3c\/span\x3e getKey(\x3cspan class=\x22hljs-keyword\x22\x3etable\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3eindex\x3c\/span\x3e) \x3cspan class=\x22hljs-keyword\x22\x3eis\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enot\x3c\/span\x3e undefined:\n    \x3cspan class=\x22hljs-keyword\x22\x3eindex\x3c\/span\x3e \x2b= \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3emod\x3c\/span\x3e n)\n  \x3cspan class=\x22hljs-keyword\x22\x3eset\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3etable\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3eindex\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3ekey\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3evalue\x3c\/span\x3e)\n\n\/\/查找\nlookup(\x3cspan class=\x22hljs-keyword\x22\x3etable\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3ekey\x3c\/span\x3e):\n  code = \x3cspan class=\x22hljs-keyword\x22\x3ehash\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3ekey\x3c\/span\x3e)\n  n = \x3cspan class=\x22hljs-keyword\x22\x3ecapacity\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3etable\x3c\/span\x3e)\n  \x3cspan class=\x22hljs-keyword\x22\x3eindex\x3c\/span\x3e = code (\x3cspan class=\x22hljs-keyword\x22\x3emod\x3c\/span\x3e n)\n  k = getKey(\x3cspan class=\x22hljs-keyword\x22\x3etable\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3eindex\x3c\/span\x3e)\n  \x3cspan class=\x22hljs-keyword\x22\x3ewhile\x3c\/span\x3e k \x3cspan class=\x22hljs-keyword\x22\x3eis\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enot\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eor\x3c\/span\x3e undefined\n        \x3cspan class=\x22hljs-keyword\x22\x3eand\x3c\/span\x3e k != \x3cspan class=\x22hljs-keyword\x22\x3ekey\x3c\/span\x3e: \n    \x3cspan class=\x22hljs-keyword\x22\x3eindex\x3c\/span\x3e \x2b= \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3emod\x3c\/span\x3e n)\n    k = getKey(\x3cspan class=\x22hljs-keyword\x22\x3etable\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3eindex\x3c\/span\x3e)\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e k == \x3cspan class=\x22hljs-keyword\x22\x3ekey\x3c\/span\x3e:\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e getValue(\x3cspan class=\x22hljs-keyword\x22\x3etable\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3eindex\x3c\/span\x3e)\n  \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e:\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e undefined\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e尽管计算键名哈希值与比较的速度会比较快，但是每次读写属性的时候都进行这么多步骤无疑会大大拉低速度，因此 V8 尽可能地会避免使用这种存储方式。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader7\x22\x3eFast Elements:数值下标的属性\x3c\/h1\x3e\n\x3cp\x3eV8 中将属性名为非负整数（0、1、2……）的属性称为Element，每个对象都有一个指向Element数组的指针，其存放和其他属性是分开的。注意，隐藏类中并不包含 Element 的描述符，但可能包含其它有着不同 Element 类型的同一种隐藏类的转换描述符。大多数情况下，对象都会有 Fast Element，也就是说这些 Element 以连续数组的形式存放。有三种不同的 Fast Element：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3eFast small integers\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eFast doubles\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eFast values\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e根据标准，JavaScript 中的所有数字都理应以64位浮点数形式出现。因此 V8 尽可能以31位带符号整数来表达数字（最低位总是0，这有助于垃圾回收器区分数字和指针）。因此含有Fast small integers类型的对象，其 Element 类型只会包含这样的数字。如果需要存储小数、大整数或其他特殊值，如-0，则需要将数组提升为 Fast doubles。于是这引入了潜在的昂贵的复制-转换操作，但通常不会频繁发生。Fast doubles 仍然是很快的，因为所有的数字都是无封箱存储的。但如果我们要存储的是其他类型，比如字符串或者对象，则必须将其提升为普通的 Fast Element 数组。\x3c\/p\x3e\n\x3cp\x3eJavaScript 不提供任何确定存储元素多少的办法。你可能会说像这样的办法，\x3ccode\x3enew Array(100)\x3c\/code\x3e，但实际上这仅仅针对\x3ccode\x3eArray\x3c\/code\x3e构造函数有用。如果你将值存在一个不存在的下标上，V8会重新开辟更大的内存，将原有元素复制到新内存。V8 可以处理带空洞的数组，也就是只有某些下标是存有元素，而期间的下标都是空的。其内部会安插特殊的哨兵值，因此试图访问未赋值的下标，会得到\x3ccode\x3eundefined\x3c\/code\x3e。当然，Fast Element 也有其限制。如果你在远远超过当前数组大小的下标赋值，V8 会将数组转换为字典模式，将值以哈希表的形式存储。这对于稀疏数组来说很有用，但性能上肯定打了折扣，无论是从转换这一过程来说，还是从之后的访问来说。如果你需要复制整个数组，不要逆向复制（索引从高到低），因为这几乎必然触发字典模式。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    \/\/ 这会大大降低大数组的性能\n    function copy(a) {\n        var b = new Array();\n        for (var i = a.length - 1; i \x3e= 0; i--)\n            b[i] = a[i];\n        return b;\n    }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 这会大大降低大数组的性能\x3c\/span\x3e\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ecopy\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ea\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e b = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eArray\x3c\/span\x3e();\n        \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = a.length - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e; i \x26gt;= \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i--)\n            b[i] = a[i];\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e b;\n    }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e由于普通的属性和数字式属性分开存放，即使数组退化为字典模式，也不会影响到其他属性的访问速度（反之亦然）。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader8\x22\x3eObject 代码声明\x3c\/h1\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ https:\/\/v8docs.nodesource.com\/node-7.2\/d4\/da0\/v8_8h_source.html#l02660\nclass V8_EXPORT Object : public Value {\n  public:\n   V8_DEPRECATE_SOON(\x26quot;Use maybe version\x26quot;,\n                     bool Set(Local\x3cValue\x3e key, Local\x3cValue\x3e value));\n   V8_WARN_UNUSED_RESULT Maybe\x3cbool\x3e Set(Local\x3cContext\x3e context,\n                                         Local\x3cValue\x3e key, Local\x3cValue\x3e value);\n \n   V8_DEPRECATE_SOON(\x26quot;Use maybe version\x26quot;,\n                     bool Set(uint32_t index, Local\x3cValue\x3e value));\n   V8_WARN_UNUSED_RESULT Maybe\x3cbool\x3e Set(Local\x3cContext\x3e context, uint32_t index,\n                                         Local\x3cValue\x3e value);\n \n   \/\/ Implements CreateDataProperty (ECMA-262, 7.3.4).\n   \/\/\n   \/\/ Defines a configurable, writable, enumerable property with the given value\n   \/\/ on the object unless the property already exists and is not configurable\n   \/\/ or the object is not extensible.\n   \/\/\n   \/\/ Returns true on success.\n   V8_WARN_UNUSED_RESULT Maybe\x3cbool\x3e CreateDataProperty(Local\x3cContext\x3e context,\n                                                        Local\x3cName\x3e key,\n                                                        Local\x3cValue\x3e value);\n   V8_WARN_UNUSED_RESULT Maybe\x3cbool\x3e CreateDataProperty(Local\x3cContext\x3e context,\n                                                        uint32_t index,\n                                                        Local\x3cValue\x3e value);\n \n   \/\/ Implements DefineOwnProperty.\n   \/\/\n   \/\/ In general, CreateDataProperty will be faster, however, does not allow\n   \/\/ for specifying attributes.\n   \/\/\n   \/\/ Returns true on success.\n   V8_WARN_UNUSED_RESULT Maybe\x3cbool\x3e DefineOwnProperty(\n       Local\x3cContext\x3e context, Local\x3cName\x3e key, Local\x3cValue\x3e value,\n       PropertyAttribute attributes = None);\n \n   \/\/ Sets an own property on this object bypassing interceptors and\n   \/\/ overriding accessors or read-only properties.\n   \/\/\n   \/\/ Note that if the object has an interceptor the property will be set\n   \/\/ locally, but since the interceptor takes precedence the local property\n   \/\/ will only be returned if the interceptor doesn\x27t return a value.\n   \/\/\n   \/\/ Note also that this only works for named properties.\n   V8_DEPRECATED(\x26quot;Use CreateDataProperty \/ DefineOwnProperty\x26quot;,\n                 bool ForceSet(Local\x3cValue\x3e key, Local\x3cValue\x3e value,\n                               PropertyAttribute attribs = None));\n   V8_DEPRECATE_SOON(\x26quot;Use CreateDataProperty \/ DefineOwnProperty\x26quot;,\n                     Maybe\x3cbool\x3e ForceSet(Local\x3cContext\x3e context,\n                                          Local\x3cValue\x3e key, Local\x3cValue\x3e value,\n                                          PropertyAttribute attribs = None));\n \n   V8_DEPRECATE_SOON(\x26quot;Use maybe version\x26quot;, Local\x3cValue\x3e Get(Local\x3cValue\x3e key));\n   V8_WARN_UNUSED_RESULT MaybeLocal\x3cValue\x3e Get(Local\x3cContext\x3e context,\n                                               Local\x3cValue\x3e key);\n \n   V8_DEPRECATE_SOON(\x26quot;Use maybe version\x26quot;, Local\x3cValue\x3e Get(uint32_t index));\n   V8_WARN_UNUSED_RESULT MaybeLocal\x3cValue\x3e Get(Local\x3cContext\x3e context,\n                                               uint32_t index);\n \n   V8_DEPRECATED(\x26quot;Use maybe version\x26quot;,\n                 PropertyAttribute GetPropertyAttributes(Local\x3cValue\x3e key));\n   V8_WARN_UNUSED_RESULT Maybe\x3cPropertyAttribute\x3e GetPropertyAttributes(\n       Local\x3cContext\x3e context, Local\x3cValue\x3e key);\n \n   V8_DEPRECATED(\x26quot;Use maybe version\x26quot;,\n                 Local\x3cValue\x3e GetOwnPropertyDescriptor(Local\x3cString\x3e key));\n   V8_WARN_UNUSED_RESULT MaybeLocal\x3cValue\x3e GetOwnPropertyDescriptor(\n       Local\x3cContext\x3e context, Local\x3cString\x3e key);\n \n   V8_DEPRECATE_SOON(\x26quot;Use maybe version\x26quot;, bool Has(Local\x3cValue\x3e key));\n   V8_WARN_UNUSED_RESULT Maybe\x3cbool\x3e Has(Local\x3cContext\x3e context,\n                                         Local\x3cValue\x3e key);\n \n   V8_DEPRECATE_SOON(\x26quot;Use maybe version\x26quot;, bool Delete(Local\x3cValue\x3e key));\n   \/\/ TODO(dcarney): mark V8_WARN_UNUSED_RESULT\n   Maybe\x3cbool\x3e Delete(Local\x3cContext\x3e context, Local\x3cValue\x3e key);\n \n   V8_DEPRECATED(\x26quot;Use maybe version\x26quot;, bool Has(uint32_t index));\n   V8_WARN_UNUSED_RESULT Maybe\x3cbool\x3e Has(Local\x3cContext\x3e context, uint32_t index);\n \n   V8_DEPRECATED(\x26quot;Use maybe version\x26quot;, bool Delete(uint32_t index));\n   \/\/ TODO(dcarney): mark V8_WARN_UNUSED_RESULT\n   Maybe\x3cbool\x3e Delete(Local\x3cContext\x3e context, uint32_t index);\n \n   V8_DEPRECATED(\x26quot;Use maybe version\x26quot;,\n                 bool SetAccessor(Local\x3cString\x3e name,\n                                  AccessorGetterCallback getter,\n                                  AccessorSetterCallback setter = 0,\n                                  Local\x3cValue\x3e data = Local\x3cValue\x3e(),\n                                  AccessControl settings = DEFAULT,\n                                  PropertyAttribute attribute = None));\n   V8_DEPRECATED(\x26quot;Use maybe version\x26quot;,\n                 bool SetAccessor(Local\x3cName\x3e name,\n                                  AccessorNameGetterCallback getter,\n                                  AccessorNameSetterCallback setter = 0,\n                                  Local\x3cValue\x3e data = Local\x3cValue\x3e(),\n                                  AccessControl settings = DEFAULT,\n                                  PropertyAttribute attribute = None));\n   \/\/ TODO(dcarney): mark V8_WARN_UNUSED_RESULT\n   Maybe\x3cbool\x3e SetAccessor(Local\x3cContext\x3e context, Local\x3cName\x3e name,\n                           AccessorNameGetterCallback getter,\n                           AccessorNameSetterCallback setter = 0,\n                           MaybeLocal\x3cValue\x3e data = MaybeLocal\x3cValue\x3e(),\n                           AccessControl settings = DEFAULT,\n                           PropertyAttribute attribute = None);\n \n   void SetAccessorProperty(Local\x3cName\x3e name, Local\x3cFunction\x3e getter,\n                            Local\x3cFunction\x3e setter = Local\x3cFunction\x3e(),\n                            PropertyAttribute attribute = None,\n                            AccessControl settings = DEFAULT);\n \n   Maybe\x3cbool\x3e HasPrivate(Local\x3cContext\x3e context, Local\x3cPrivate\x3e key);\n   Maybe\x3cbool\x3e SetPrivate(Local\x3cContext\x3e context, Local\x3cPrivate\x3e key,\n                          Local\x3cValue\x3e value);\n   Maybe\x3cbool\x3e DeletePrivate(Local\x3cContext\x3e context, Local\x3cPrivate\x3e key);\n   MaybeLocal\x3cValue\x3e GetPrivate(Local\x3cContext\x3e context, Local\x3cPrivate\x3e key);\n \n   V8_DEPRECATE_SOON(\x26quot;Use maybe version\x26quot;, Local\x3cArray\x3e GetPropertyNames());\n   V8_WARN_UNUSED_RESULT MaybeLocal\x3cArray\x3e GetPropertyNames(\n       Local\x3cContext\x3e context);\n   V8_WARN_UNUSED_RESULT MaybeLocal\x3cArray\x3e GetPropertyNames(\n       Local\x3cContext\x3e context, KeyCollectionMode mode,\n       PropertyFilter property_filter, IndexFilter index_filter);\n \n   V8_DEPRECATE_SOON(\x26quot;Use maybe version\x26quot;, Local\x3cArray\x3e GetOwnPropertyNames());\n   V8_WARN_UNUSED_RESULT MaybeLocal\x3cArray\x3e GetOwnPropertyNames(\n       Local\x3cContext\x3e context);\n \n   V8_WARN_UNUSED_RESULT MaybeLocal\x3cArray\x3e GetOwnPropertyNames(\n       Local\x3cContext\x3e context, PropertyFilter filter);\n \n   Local\x3cValue\x3e GetPrototype();\n \n   V8_DEPRECATED(\x26quot;Use maybe version\x26quot;, bool SetPrototype(Local\x3cValue\x3e prototype));\n   V8_WARN_UNUSED_RESULT Maybe\x3cbool\x3e SetPrototype(Local\x3cContext\x3e context,\n                                                  Local\x3cValue\x3e prototype);\n \n   Local\x3cObject\x3e FindInstanceInPrototypeChain(Local\x3cFunctionTemplate\x3e tmpl);\n \n   V8_DEPRECATED(\x26quot;Use maybe version\x26quot;, Local\x3cString\x3e ObjectProtoToString());\n   V8_WARN_UNUSED_RESULT MaybeLocal\x3cString\x3e ObjectProtoToString(\n       Local\x3cContext\x3e context);\n \n   Local\x3cString\x3e GetConstructorName();\n \n   Maybe\x3cbool\x3e SetIntegrityLevel(Local\x3cContext\x3e context, IntegrityLevel level);\n \n   int InternalFieldCount();\n \n   V8_INLINE static int InternalFieldCount(\n       const PersistentBase\x3cObject\x3e\x26amp; object) {\n     return object.val_-\x3eInternalFieldCount();\n   }\n \n   V8_INLINE Local\x3cValue\x3e GetInternalField(int index);\n \n   void SetInternalField(int index, Local\x3cValue\x3e value);\n \n   V8_INLINE void* GetAlignedPointerFromInternalField(int index);\n \n   V8_INLINE static void* GetAlignedPointerFromInternalField(\n       const PersistentBase\x3cObject\x3e\x26amp; object, int index) {\n     return object.val_-\x3eGetAlignedPointerFromInternalField(index);\n   }\n \n   void SetAlignedPointerInInternalField(int index, void* value);\n   void SetAlignedPointerInInternalFields(int argc, int indices[],\n                                          void* values[]);\n \n   \/\/ Testers for local properties.\n   V8_DEPRECATED(\x26quot;Use maybe version\x26quot;, bool HasOwnProperty(Local\x3cString\x3e key));\n   V8_WARN_UNUSED_RESULT Maybe\x3cbool\x3e HasOwnProperty(Local\x3cContext\x3e context,\n                                                    Local\x3cName\x3e key);\n   V8_WARN_UNUSED_RESULT Maybe\x3cbool\x3e HasOwnProperty(Local\x3cContext\x3e context,\n                                                    uint32_t index);\n   V8_DEPRECATE_SOON(\x26quot;Use maybe version\x26quot;,\n                     bool HasRealNamedProperty(Local\x3cString\x3e key));\n   V8_WARN_UNUSED_RESULT Maybe\x3cbool\x3e HasRealNamedProperty(Local\x3cContext\x3e context,\n                                                          Local\x3cName\x3e key);\n   V8_DEPRECATE_SOON(\x26quot;Use maybe version\x26quot;,\n                     bool HasRealIndexedProperty(uint32_t index));\n   V8_WARN_UNUSED_RESULT Maybe\x3cbool\x3e HasRealIndexedProperty(\n       Local\x3cContext\x3e context, uint32_t index);\n   V8_DEPRECATE_SOON(\x26quot;Use maybe version\x26quot;,\n                     bool HasRealNamedCallbackProperty(Local\x3cString\x3e key));\n   V8_WARN_UNUSED_RESULT Maybe\x3cbool\x3e HasRealNamedCallbackProperty(\n       Local\x3cContext\x3e context, Local\x3cName\x3e key);\n \n   V8_DEPRECATED(\n       \x26quot;Use maybe version\x26quot;,\n       Local\x3cValue\x3e GetRealNamedPropertyInPrototypeChain(Local\x3cString\x3e key));\n   V8_WARN_UNUSED_RESULT MaybeLocal\x3cValue\x3e GetRealNamedPropertyInPrototypeChain(\n       Local\x3cContext\x3e context, Local\x3cName\x3e key);\n \n   V8_DEPRECATED(\n       \x26quot;Use maybe version\x26quot;,\n       Maybe\x3cPropertyAttribute\x3e GetRealNamedPropertyAttributesInPrototypeChain(\n           Local\x3cString\x3e key));\n   V8_WARN_UNUSED_RESULT Maybe\x3cPropertyAttribute\x3e\n   GetRealNamedPropertyAttributesInPrototypeChain(Local\x3cContext\x3e context,\n                                                  Local\x3cName\x3e key);\n \n   V8_DEPRECATED(\x26quot;Use maybe version\x26quot;,\n                 Local\x3cValue\x3e GetRealNamedProperty(Local\x3cString\x3e key));\n   V8_WARN_UNUSED_RESULT MaybeLocal\x3cValue\x3e GetRealNamedProperty(\n       Local\x3cContext\x3e context, Local\x3cName\x3e key);\n \n   V8_DEPRECATED(\x26quot;Use maybe version\x26quot;,\n                 Maybe\x3cPropertyAttribute\x3e GetRealNamedPropertyAttributes(\n                     Local\x3cString\x3e key));\n   V8_WARN_UNUSED_RESULT Maybe\x3cPropertyAttribute\x3e GetRealNamedPropertyAttributes(\n       Local\x3cContext\x3e context, Local\x3cName\x3e key);\n \n   bool HasNamedLookupInterceptor();\n \n   bool HasIndexedLookupInterceptor();\n \n   int GetIdentityHash();\n \n   \/\/ TODO(dcarney): take an isolate and optionally bail out?\n   Local\x3cObject\x3e Clone();\n \n   Local\x3cContext\x3e CreationContext();\n \n   bool IsCallable();\n \n   bool IsConstructor();\n \n   V8_DEPRECATED(\x26quot;Use maybe version\x26quot;,\n                 Local\x3cValue\x3e CallAsFunction(Local\x3cValue\x3e recv, int argc,\n                                             Local\x3cValue\x3e argv[]));\n   V8_WARN_UNUSED_RESULT MaybeLocal\x3cValue\x3e CallAsFunction(Local\x3cContext\x3e context,\n                                                          Local\x3cValue\x3e recv,\n                                                          int argc,\n                                                          Local\x3cValue\x3e argv[]);\n \n   V8_DEPRECATED(\x26quot;Use maybe version\x26quot;,\n                 Local\x3cValue\x3e CallAsConstructor(int argc, Local\x3cValue\x3e argv[]));\n   V8_WARN_UNUSED_RESULT MaybeLocal\x3cValue\x3e CallAsConstructor(\n       Local\x3cContext\x3e context, int argc, Local\x3cValue\x3e argv[]);\n \n   V8_DEPRECATE_SOON(\x26quot;Keep track of isolate correctly\x26quot;, Isolate* GetIsolate());\n \n   static Local\x3cObject\x3e New(Isolate* isolate);\n \n   V8_INLINE static Object* Cast(Value* obj);\n \n  private:\n   Object();\n   static void CheckCast(Value* obj);\n   Local\x3cValue\x3e SlowGetInternalField(int index);\n   void* SlowGetAlignedPointerFromInternalField(int index);\n };\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre\x3e\x3ccode\x3e\/\/ https:\/\/v8docs.nodesource.com\/node-7.2\/d4\/da0\/v8_8h_source.html#l02660\nclass V8_EXPORT Object : public Value {\n  public:\n   V8_DEPRECATE_SOON(\x22Use maybe version\x22,\n                     bool Set(Local\x26lt;Value\x26gt; key, Local\x26lt;Value\x26gt; value));\n   V8_WARN_UNUSED_RESULT Maybe\x26lt;bool\x26gt; Set(Local\x26lt;Context\x26gt; context,\n                                         Local\x26lt;Value\x26gt; key, Local\x26lt;Value\x26gt; value);\n \n   V8_DEPRECATE_SOON(\x22Use maybe version\x22,\n                     bool Set(uint32_t index, Local\x26lt;Value\x26gt; value));\n   V8_WARN_UNUSED_RESULT Maybe\x26lt;bool\x26gt; Set(Local\x26lt;Context\x26gt; context, uint32_t index,\n                                         Local\x26lt;Value\x26gt; value);\n \n   \/\/ Implements CreateDataProperty (ECMA-262, 7.3.4).\n   \/\/\n   \/\/ Defines a configurable, writable, enumerable property with the given value\n   \/\/ on the object unless the property already exists and is not configurable\n   \/\/ or the object is not extensible.\n   \/\/\n   \/\/ Returns true on success.\n   V8_WARN_UNUSED_RESULT Maybe\x26lt;bool\x26gt; CreateDataProperty(Local\x26lt;Context\x26gt; context,\n                                                        Local\x26lt;Name\x26gt; key,\n                                                        Local\x26lt;Value\x26gt; value);\n   V8_WARN_UNUSED_RESULT Maybe\x26lt;bool\x26gt; CreateDataProperty(Local\x26lt;Context\x26gt; context,\n                                                        uint32_t index,\n                                                        Local\x26lt;Value\x26gt; value);\n \n   \/\/ Implements DefineOwnProperty.\n   \/\/\n   \/\/ In general, CreateDataProperty will be faster, however, does not allow\n   \/\/ for specifying attributes.\n   \/\/\n   \/\/ Returns true on success.\n   V8_WARN_UNUSED_RESULT Maybe\x26lt;bool\x26gt; DefineOwnProperty(\n       Local\x26lt;Context\x26gt; context, Local\x26lt;Name\x26gt; key, Local\x26lt;Value\x26gt; value,\n       PropertyAttribute attributes = None);\n \n   \/\/ Sets an own property on this object bypassing interceptors and\n   \/\/ overriding accessors or read-only properties.\n   \/\/\n   \/\/ Note that if the object has an interceptor the property will be set\n   \/\/ locally, but since the interceptor takes precedence the local property\n   \/\/ will only be returned if the interceptor doesn\x27t return a value.\n   \/\/\n   \/\/ Note also that this only works for named properties.\n   V8_DEPRECATED(\x22Use CreateDataProperty \/ DefineOwnProperty\x22,\n                 bool ForceSet(Local\x26lt;Value\x26gt; key, Local\x26lt;Value\x26gt; value,\n                               PropertyAttribute attribs = None));\n   V8_DEPRECATE_SOON(\x22Use CreateDataProperty \/ DefineOwnProperty\x22,\n                     Maybe\x26lt;bool\x26gt; ForceSet(Local\x26lt;Context\x26gt; context,\n                                          Local\x26lt;Value\x26gt; key, Local\x26lt;Value\x26gt; value,\n                                          PropertyAttribute attribs = None));\n \n   V8_DEPRECATE_SOON(\x22Use maybe version\x22, Local\x26lt;Value\x26gt; Get(Local\x26lt;Value\x26gt; key));\n   V8_WARN_UNUSED_RESULT MaybeLocal\x26lt;Value\x26gt; Get(Local\x26lt;Context\x26gt; context,\n                                               Local\x26lt;Value\x26gt; key);\n \n   V8_DEPRECATE_SOON(\x22Use maybe version\x22, Local\x26lt;Value\x26gt; Get(uint32_t index));\n   V8_WARN_UNUSED_RESULT MaybeLocal\x26lt;Value\x26gt; Get(Local\x26lt;Context\x26gt; context,\n                                               uint32_t index);\n \n   V8_DEPRECATED(\x22Use maybe version\x22,\n                 PropertyAttribute GetPropertyAttributes(Local\x26lt;Value\x26gt; key));\n   V8_WARN_UNUSED_RESULT Maybe\x26lt;PropertyAttribute\x26gt; GetPropertyAttributes(\n       Local\x26lt;Context\x26gt; context, Local\x26lt;Value\x26gt; key);\n \n   V8_DEPRECATED(\x22Use maybe version\x22,\n                 Local\x26lt;Value\x26gt; GetOwnPropertyDescriptor(Local\x26lt;String\x26gt; key));\n   V8_WARN_UNUSED_RESULT MaybeLocal\x26lt;Value\x26gt; GetOwnPropertyDescriptor(\n       Local\x26lt;Context\x26gt; context, Local\x26lt;String\x26gt; key);\n \n   V8_DEPRECATE_SOON(\x22Use maybe version\x22, bool Has(Local\x26lt;Value\x26gt; key));\n   V8_WARN_UNUSED_RESULT Maybe\x26lt;bool\x26gt; Has(Local\x26lt;Context\x26gt; context,\n                                         Local\x26lt;Value\x26gt; key);\n \n   V8_DEPRECATE_SOON(\x22Use maybe version\x22, bool Delete(Local\x26lt;Value\x26gt; key));\n   \/\/ TODO(dcarney): mark V8_WARN_UNUSED_RESULT\n   Maybe\x26lt;bool\x26gt; Delete(Local\x26lt;Context\x26gt; context, Local\x26lt;Value\x26gt; key);\n \n   V8_DEPRECATED(\x22Use maybe version\x22, bool Has(uint32_t index));\n   V8_WARN_UNUSED_RESULT Maybe\x26lt;bool\x26gt; Has(Local\x26lt;Context\x26gt; context, uint32_t index);\n \n   V8_DEPRECATED(\x22Use maybe version\x22, bool Delete(uint32_t index));\n   \/\/ TODO(dcarney): mark V8_WARN_UNUSED_RESULT\n   Maybe\x26lt;bool\x26gt; Delete(Local\x26lt;Context\x26gt; context, uint32_t index);\n \n   V8_DEPRECATED(\x22Use maybe version\x22,\n                 bool SetAccessor(Local\x26lt;String\x26gt; name,\n                                  AccessorGetterCallback getter,\n                                  AccessorSetterCallback setter = 0,\n                                  Local\x26lt;Value\x26gt; data = Local\x26lt;Value\x26gt;(),\n                                  AccessControl settings = DEFAULT,\n                                  PropertyAttribute attribute = None));\n   V8_DEPRECATED(\x22Use maybe version\x22,\n                 bool SetAccessor(Local\x26lt;Name\x26gt; name,\n                                  AccessorNameGetterCallback getter,\n                                  AccessorNameSetterCallback setter = 0,\n                                  Local\x26lt;Value\x26gt; data = Local\x26lt;Value\x26gt;(),\n                                  AccessControl settings = DEFAULT,\n                                  PropertyAttribute attribute = None));\n   \/\/ TODO(dcarney): mark V8_WARN_UNUSED_RESULT\n   Maybe\x26lt;bool\x26gt; SetAccessor(Local\x26lt;Context\x26gt; context, Local\x26lt;Name\x26gt; name,\n                           AccessorNameGetterCallback getter,\n                           AccessorNameSetterCallback setter = 0,\n                           MaybeLocal\x26lt;Value\x26gt; data = MaybeLocal\x26lt;Value\x26gt;(),\n                           AccessControl settings = DEFAULT,\n                           PropertyAttribute attribute = None);\n \n   void SetAccessorProperty(Local\x26lt;Name\x26gt; name, Local\x26lt;Function\x26gt; getter,\n                            Local\x26lt;Function\x26gt; setter = Local\x26lt;Function\x26gt;(),\n                            PropertyAttribute attribute = None,\n                            AccessControl settings = DEFAULT);\n \n   Maybe\x26lt;bool\x26gt; HasPrivate(Local\x26lt;Context\x26gt; context, Local\x26lt;Private\x26gt; key);\n   Maybe\x26lt;bool\x26gt; SetPrivate(Local\x26lt;Context\x26gt; context, Local\x26lt;Private\x26gt; key,\n                          Local\x26lt;Value\x26gt; value);\n   Maybe\x26lt;bool\x26gt; DeletePrivate(Local\x26lt;Context\x26gt; context, Local\x26lt;Private\x26gt; key);\n   MaybeLocal\x26lt;Value\x26gt; GetPrivate(Local\x26lt;Context\x26gt; context, Local\x26lt;Private\x26gt; key);\n \n   V8_DEPRECATE_SOON(\x22Use maybe version\x22, Local\x26lt;Array\x26gt; GetPropertyNames());\n   V8_WARN_UNUSED_RESULT MaybeLocal\x26lt;Array\x26gt; GetPropertyNames(\n       Local\x26lt;Context\x26gt; context);\n   V8_WARN_UNUSED_RESULT MaybeLocal\x26lt;Array\x26gt; GetPropertyNames(\n       Local\x26lt;Context\x26gt; context, KeyCollectionMode mode,\n       PropertyFilter property_filter, IndexFilter index_filter);\n \n   V8_DEPRECATE_SOON(\x22Use maybe version\x22, Local\x26lt;Array\x26gt; GetOwnPropertyNames());\n   V8_WARN_UNUSED_RESULT MaybeLocal\x26lt;Array\x26gt; GetOwnPropertyNames(\n       Local\x26lt;Context\x26gt; context);\n \n   V8_WARN_UNUSED_RESULT MaybeLocal\x26lt;Array\x26gt; GetOwnPropertyNames(\n       Local\x26lt;Context\x26gt; context, PropertyFilter filter);\n \n   Local\x26lt;Value\x26gt; GetPrototype();\n \n   V8_DEPRECATED(\x22Use maybe version\x22, bool SetPrototype(Local\x26lt;Value\x26gt; prototype));\n   V8_WARN_UNUSED_RESULT Maybe\x26lt;bool\x26gt; SetPrototype(Local\x26lt;Context\x26gt; context,\n                                                  Local\x26lt;Value\x26gt; prototype);\n \n   Local\x26lt;Object\x26gt; FindInstanceInPrototypeChain(Local\x26lt;FunctionTemplate\x26gt; tmpl);\n \n   V8_DEPRECATED(\x22Use maybe version\x22, Local\x26lt;String\x26gt; ObjectProtoToString());\n   V8_WARN_UNUSED_RESULT MaybeLocal\x26lt;String\x26gt; ObjectProtoToString(\n       Local\x26lt;Context\x26gt; context);\n \n   Local\x26lt;String\x26gt; GetConstructorName();\n \n   Maybe\x26lt;bool\x26gt; SetIntegrityLevel(Local\x26lt;Context\x26gt; context, IntegrityLevel level);\n \n   int InternalFieldCount();\n \n   V8_INLINE static int InternalFieldCount(\n       const PersistentBase\x26lt;Object\x26gt;\x26amp; object) {\n     return object.val_-\x26gt;InternalFieldCount();\n   }\n \n   V8_INLINE Local\x26lt;Value\x26gt; GetInternalField(int index);\n \n   void SetInternalField(int index, Local\x26lt;Value\x26gt; value);\n \n   V8_INLINE void* GetAlignedPointerFromInternalField(int index);\n \n   V8_INLINE static void* GetAlignedPointerFromInternalField(\n       const PersistentBase\x26lt;Object\x26gt;\x26amp; object, int index) {\n     return object.val_-\x26gt;GetAlignedPointerFromInternalField(index);\n   }\n \n   void SetAlignedPointerInInternalField(int index, void* value);\n   void SetAlignedPointerInInternalFields(int argc, int indices[],\n                                          void* values[]);\n \n   \/\/ Testers for local properties.\n   V8_DEPRECATED(\x22Use maybe version\x22, bool HasOwnProperty(Local\x26lt;String\x26gt; key));\n   V8_WARN_UNUSED_RESULT Maybe\x26lt;bool\x26gt; HasOwnProperty(Local\x26lt;Context\x26gt; context,\n                                                    Local\x26lt;Name\x26gt; key);\n   V8_WARN_UNUSED_RESULT Maybe\x26lt;bool\x26gt; HasOwnProperty(Local\x26lt;Context\x26gt; context,\n                                                    uint32_t index);\n   V8_DEPRECATE_SOON(\x22Use maybe version\x22,\n                     bool HasRealNamedProperty(Local\x26lt;String\x26gt; key));\n   V8_WARN_UNUSED_RESULT Maybe\x26lt;bool\x26gt; HasRealNamedProperty(Local\x26lt;Context\x26gt; context,\n                                                          Local\x26lt;Name\x26gt; key);\n   V8_DEPRECATE_SOON(\x22Use maybe version\x22,\n                     bool HasRealIndexedProperty(uint32_t index));\n   V8_WARN_UNUSED_RESULT Maybe\x26lt;bool\x26gt; HasRealIndexedProperty(\n       Local\x26lt;Context\x26gt; context, uint32_t index);\n   V8_DEPRECATE_SOON(\x22Use maybe version\x22,\n                     bool HasRealNamedCallbackProperty(Local\x26lt;String\x26gt; key));\n   V8_WARN_UNUSED_RESULT Maybe\x26lt;bool\x26gt; HasRealNamedCallbackProperty(\n       Local\x26lt;Context\x26gt; context, Local\x26lt;Name\x26gt; key);\n \n   V8_DEPRECATED(\n       \x22Use maybe version\x22,\n       Local\x26lt;Value\x26gt; GetRealNamedPropertyInPrototypeChain(Local\x26lt;String\x26gt; key));\n   V8_WARN_UNUSED_RESULT MaybeLocal\x26lt;Value\x26gt; GetRealNamedPropertyInPrototypeChain(\n       Local\x26lt;Context\x26gt; context, Local\x26lt;Name\x26gt; key);\n \n   V8_DEPRECATED(\n       \x22Use maybe version\x22,\n       Maybe\x26lt;PropertyAttribute\x26gt; GetRealNamedPropertyAttributesInPrototypeChain(\n           Local\x26lt;String\x26gt; key));\n   V8_WARN_UNUSED_RESULT Maybe\x26lt;PropertyAttribute\x26gt;\n   GetRealNamedPropertyAttributesInPrototypeChain(Local\x26lt;Context\x26gt; context,\n                                                  Local\x26lt;Name\x26gt; key);\n \n   V8_DEPRECATED(\x22Use maybe version\x22,\n                 Local\x26lt;Value\x26gt; GetRealNamedProperty(Local\x26lt;String\x26gt; key));\n   V8_WARN_UNUSED_RESULT MaybeLocal\x26lt;Value\x26gt; GetRealNamedProperty(\n       Local\x26lt;Context\x26gt; context, Local\x26lt;Name\x26gt; key);\n \n   V8_DEPRECATED(\x22Use maybe version\x22,\n                 Maybe\x26lt;PropertyAttribute\x26gt; GetRealNamedPropertyAttributes(\n                     Local\x26lt;String\x26gt; key));\n   V8_WARN_UNUSED_RESULT Maybe\x26lt;PropertyAttribute\x26gt; GetRealNamedPropertyAttributes(\n       Local\x26lt;Context\x26gt; context, Local\x26lt;Name\x26gt; key);\n \n   bool HasNamedLookupInterceptor();\n \n   bool HasIndexedLookupInterceptor();\n \n   int GetIdentityHash();\n \n   \/\/ TODO(dcarney): take an isolate and optionally bail out?\n   Local\x26lt;Object\x26gt; Clone();\n \n   Local\x26lt;Context\x26gt; CreationContext();\n \n   bool IsCallable();\n \n   bool IsConstructor();\n \n   V8_DEPRECATED(\x22Use maybe version\x22,\n                 Local\x26lt;Value\x26gt; CallAsFunction(Local\x26lt;Value\x26gt; recv, int argc,\n                                             Local\x26lt;Value\x26gt; argv[]));\n   V8_WARN_UNUSED_RESULT MaybeLocal\x26lt;Value\x26gt; CallAsFunction(Local\x26lt;Context\x26gt; context,\n                                                          Local\x26lt;Value\x26gt; recv,\n                                                          int argc,\n                                                          Local\x26lt;Value\x26gt; argv[]);\n \n   V8_DEPRECATED(\x22Use maybe version\x22,\n                 Local\x26lt;Value\x26gt; CallAsConstructor(int argc, Local\x26lt;Value\x26gt; argv[]));\n   V8_WARN_UNUSED_RESULT MaybeLocal\x26lt;Value\x26gt; CallAsConstructor(\n       Local\x26lt;Context\x26gt; context, int argc, Local\x26lt;Value\x26gt; argv[]);\n \n   V8_DEPRECATE_SOON(\x22Keep track of isolate correctly\x22, Isolate* GetIsolate());\n \n   static Local\x26lt;Object\x26gt; New(Isolate* isolate);\n \n   V8_INLINE static Object* Cast(Value* obj);\n \n  private:\n   Object();\n   static void CheckCast(Value* obj);\n   Local\x26lt;Value\x26gt; SlowGetInternalField(int index);\n   void* SlowGetAlignedPointerFromInternalField(int index);\n };\x3c\/code\x3e\x3c\/pre\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>V8 Object 内存结构与属性访问详解</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000008188648">https://segmentfault.com/a/1190000008188648</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/ktc291v9lq/" target="_blank">https://alili.tech/archive/ktc291v9lq/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>