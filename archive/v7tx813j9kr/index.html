<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="Web性能优化"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>Web性能优化 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/v7tx813j9kr/",
				"appid": "1613049289050283", 
				"title": "Web性能优化 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-18T02:30:35"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/esqn1cpwmzn/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/3o4ybmkw7s4/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fv7tx813j9kr%2f&text=Web%e6%80%a7%e8%83%bd%e4%bc%98%e5%8c%96"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fv7tx813j9kr%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fv7tx813j9kr%2f&text=Web%e6%80%a7%e8%83%bd%e4%bc%98%e5%8c%96"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fv7tx813j9kr%2f&title=Web%e6%80%a7%e8%83%bd%e4%bc%98%e5%8c%96"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fv7tx813j9kr%2f&is_video=false&description=Web%e6%80%a7%e8%83%bd%e4%bc%98%e5%8c%96"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=Web%e6%80%a7%e8%83%bd%e4%bc%98%e5%8c%96&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fv7tx813j9kr%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fv7tx813j9kr%2f&title=Web%e6%80%a7%e8%83%bd%e4%bc%98%e5%8c%96"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fv7tx813j9kr%2f&title=Web%e6%80%a7%e8%83%bd%e4%bc%98%e5%8c%96"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fv7tx813j9kr%2f&title=Web%e6%80%a7%e8%83%bd%e4%bc%98%e5%8c%96"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fv7tx813j9kr%2f&title=Web%e6%80%a7%e8%83%bd%e4%bc%98%e5%8c%96"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">Web性能优化</h1><div class="meta"><div class="postdate"><time datetime="2019-01-18" itemprop="datePublished">2019-01-18</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch1 id=\x22articleHeader0\x22\x3e1 Web性能优化\x3c\/h1\x3e\n\x3cp\x3eWeb网站的性能细线在几个方面：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e网站首页加载速度\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e动画的流畅度\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e通过分析浏览器的渲染原理、资源对渲染的影响，得出优化网站性能的办法。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader1\x22\x3e2 查看性能的工具\x3c\/h1\x3e\n\x3cp\x3eChrome的\x3ccode\x3eTimeline\x3c\/code\x3e面板录制网页加载的过程，分析记录浏览器渲染过程中每个过程的耗时。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e2.1 录制时注意事项\x3c\/h2\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e禁用浏览器缓存：\x3ccode\x3eNetwork Tab\x3c\/code\x3e下的\x3ccode\x3edisable cache\x3c\/code\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e关闭Chrome扩展或者启用隐身模式\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e根据使用场景，模拟真实的网络加载情况：\x3ccode\x3eNetwork Tab\x3c\/code\x3e下的\x3ccode\x3ethrottling\x3c\/code\x3e下拉按钮\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e2.2 \x3ccode\x3eTimeline\x3c\/code\x3e工具的各个组成\x3c\/h2\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e在\x3ccode\x3eMain Thread\x3c\/code\x3e中可以看到页面渲染的整个过程及耗时\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVKCRb?w=1524\x26amp;h=940\x22 src=\x22https:\/\/static.alili.tech\/img\/bVKCRb?w=1524\x26amp;h=940\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader4\x22\x3e3 浏览器渲染原理\x3c\/h1\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVKCRZ?w=301\x26amp;h=300\x22 src=\x22https:\/\/static.alili.tech\/img\/bVKCRZ?w=301\x26amp;h=300\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e3.1 DOM树构建\x3c\/h2\x3e\n\x3cp\x3eDOM树的构建过程\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e根据HTML文档的内容，根据标签进行分词\x3ccode\x3eToken\x3c\/code\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e根据\x3ccode\x3eToken\x3c\/code\x3e生产对应的节点\x3ccode\x3eNode\x3c\/code\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e将节点根据嵌套关系组合为一棵对象节点树\x3ccode\x3eDOM\x3c\/code\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cblockquote\x3e\n\x3cp\x3e浏览器解析文档对象模型\x3ccode\x3eDOM\x3c\/code\x3e是\x3cstrong\x3e增量进行\x3c\/strong\x3e的，无需等待整个HTML文档加载完毕，便可以开始解析\x3ccode\x3eDOM\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3eCSSOM\x3c\/code\x3e解析会阻塞\x3ccode\x3eHTML Parser\x3c\/code\x3e；JavaScript脚本文件\x3cstrong\x3e执行\x3c\/strong\x3e会阻塞HTML解析；\x3cstrong\x3eCSS、JavaScript、Images和Font等静态资源的异步加载的，渲染页面与CSS解析与JavaScript执行会有相互的依赖\x3c\/strong\x3e\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVKCTM?w=574\x26amp;h=250\x22 src=\x22https:\/\/static.alili.tech\/img\/bVKCTM?w=574\x26amp;h=250\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVKCTp?w=544\x26amp;h=289\x22 src=\x22https:\/\/static.alili.tech\/img\/bVKCTp?w=544\x26amp;h=289\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3e3.2 CSSOM树的构建\x3c\/h2\x3e\n\x3cp\x3e\x3ccode\x3eCSSOM\x3c\/code\x3e的解析依赖于\x3cstrong\x3e选择器\x3c\/strong\x3e，选择器的匹配是从内到外的。所以选择器嵌套层次越深，匹配的时间会越长。\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e\x3ccode\x3eCSSOM\x3c\/code\x3e只解析可视部分\x3ccode\x3ebody\x3c\/code\x3e标签中的内容，将所有匹配的元素共同构建一个\x3ccode\x3eCSSOM\x3c\/code\x3e树，\x3cstrong\x3e从根节点一次向下，所有节点的属性向下继承\x3c\/strong\x3e\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVKCVK?w=500\x26amp;h=248\x22 src=\x22https:\/\/static.alili.tech\/img\/bVKCVK?w=500\x26amp;h=248\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3e3.3 RenderTree树的构建\x3c\/h2\x3e\n\x3cp\x3e\x3cstrong\x3e利用DOM和CSSOM组合构建生成RenderTree\x3c\/strong\x3e，对应\x3ccode\x3eRecaculate Style\x3c\/code\x3e\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3cp\x3eRenderTree中包含所有渲染网页必须的节点\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e无需渲染的节点不会被添加到RenderTree中，如\x3ccode\x3ehead\x3c\/code\x3e和\x3ccode\x3edisplay:none;\x3c\/code\x3e的节点\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3evisibility: hidden;\x3c\/code\x3e的节点会添加到RenderTree中\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVKCYd?w=551\x26amp;h=341\x22 src=\x22https:\/\/static.alili.tech\/img\/bVKCYd?w=551\x26amp;h=341\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3e3.4 Layout\x3c\/h2\x3e\n\x3cp\x3e\x3ccode\x3eLayout\x3c\/code\x3e利用渲染树的信息，计算渲染树中所有节点在页面上的\x3cstrong\x3e位置和大小\x3c\/strong\x3e。\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e类似绘画中各个元素位置摆放及尺寸规划\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e会引起页面重新Layout的操作：\x3cstrong\x3e所有改变节点位置和大小的操作\x3c\/strong\x3e\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e屏幕旋转\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e浏览器视窗改变\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e与大小、位置相关的CSS属性\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e增加与删除DOM元素\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cblockquote\x3e\x3cp\x3eLayout操作比较耗时，对于动画中频繁引起Layout的操作（元素位置移动），\x3cstrong\x3e最好使用transform代替，可以使用GPU进行动画处理（将Layout重绘在GPU完成）\x3c\/strong\x3e\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVKC1h?w=403\x26amp;h=250\x22 src=\x22https:\/\/static.alili.tech\/img\/bVKC1h?w=403\x26amp;h=250\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader9\x22\x3e\x3ccode\x3eviewport\x3c\/code\x3e\x3c\/h3\x3e\n\x3cp\x3e如果页面\x3ccode\x3ebody\x3c\/code\x3e元素设置的宽度为\x3ccode\x3e100%\x3c\/code\x3e，并且根元素\x3ccode\x3ehtml\x3c\/code\x3e没有明确设置宽度绝对值，\x3cstrong\x3e此时\x3ccode\x3ebody\x3c\/code\x3e元素的宽度等于\x3ccode\x3eviewport\x3c\/code\x3e的宽度\x3ccode\x3evw\x3c\/code\x3e\x3c\/strong\x3e\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e使用\x3ccode\x3emeta\x3c\/code\x3e标签可以设置浏览器\x3ccode\x3eviewport\x3c\/code\x3e的尺寸。\x3ccode\x3e\x26lt;meta name=\x22viewport\x22 content=\x22width=device-width\x22\x26gt;\x3c\/code\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3edevice-width\x3c\/code\x3e为浏览器的理想视口（屏幕的物理分辨率）\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e在移动端，如果不设置\x3ccode\x3edevice-width\x3c\/code\x3e，默认\x3ccode\x3eviewport\x3c\/code\x3e宽度为980px，\x3cstrong\x3e导致文字很小，需要放大\x3c\/strong\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cblockquote\x3e\x3cp\x3e\x3ccode\x3eviewport\x3c\/code\x3e相当于可视内容布局的容器\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader10\x22\x3e3.5 Paint\x3c\/h2\x3e\n\x3cp\x3e填充Layout中的具体内容和样式，将Layout生成的区域填充为最终显示在屏幕上的像素\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader11\x22\x3e3.6 总结\x3c\/h2\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e浏览器通过\x3ccode\x3eGET\x3c\/code\x3e请求获取网页HTML，同时将增量解析HTML文档，生成\x3ccode\x3eDOM\x3c\/code\x3e树\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e解析\x3ccode\x3eDOM\x3c\/code\x3e节点树时，对于需要加载的资源\x3cstrong\x3e全部执行异步加载，但是\x3ccode\x3eCSS\x3c\/code\x3e的解析、\x3ccode\x3eJavaScript\x3c\/code\x3e的执行与\x3ccode\x3efont\x3c\/code\x3e文件的下载会阻塞HTML Parser\x3c\/strong\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e局部\x3ccode\x3eDOM\x3c\/code\x3e树与\x3ccode\x3eCSSOM\x3c\/code\x3e树构建完成后，\x3cstrong\x3e立即组装\x3ccode\x3eRenderTree\x3c\/code\x3e进行渲染\x3c\/strong\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVKC70?w=1366\x26amp;h=768\x22 src=\x22https:\/\/static.alili.tech\/img\/bVKC70?w=1366\x26amp;h=768\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader12\x22\x3e4 资源对渲染的影响\x3c\/h1\x3e\n\x3cp\x3e页面中加载的资源主要包括：\x3ccode\x3ecss\x3c\/code\x3e、\x3ccode\x3ejs\x3c\/code\x3e脚本文件和\x3ccode\x3efont\x3c\/code\x3e字体与\x3ccode\x3eimages\x3c\/code\x3e静态资源，不同资源类型对渲染的影响不同。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader13\x22\x3e4.1 浏览器渲染页面的时机\x3c\/h2\x3e\n\x3cp\x3e增量解析解析\x3ccode\x3eDOM\x3c\/code\x3e树，并且完成相应\x3ccode\x3eCSSOM\x3c\/code\x3e解析后（RenderTree依赖于\x3ccode\x3eDOM\x3c\/code\x3e树，\x3ccode\x3eCSSOM\x3c\/code\x3e树），开始直接渲染页面。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader14\x22\x3e4.2 CSS加载会阻塞初次渲染\x3c\/h2\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVKDvw?w=437\x26amp;h=293\x22 src=\x22https:\/\/static.alili.tech\/img\/bVKDvw?w=437\x26amp;h=293\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader15\x22\x3e4.3 非关键资源\x3c\/h2\x3e\n\x3cp\x3e对于首页无关的样式，需要使用适当的方式避免其阻塞初次渲染：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3edocument.write()\x3c\/code\x3e会阻塞页面初次渲染\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e使用\x3ccode\x3emedia=print\x3c\/code\x3e媒体查询，虽然加载样式表，但只针对打印时才应用该样式，不会阻塞初次渲染。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e通过\x3ccode\x3eDOM\x3c\/code\x3eAPI引入CSS，可以避免阻塞。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eCSS中\x3ccode\x3e\x26lt;link rel=\x22preload\x22 href=\x22index_print.css\x22 as=\x22style\x22 onload=\x22this.rel=\x27stylesheet\x27\x22\x26gt;\x3c\/code\x3e。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVKDwC?w=510\x26amp;h=272\x22 src=\x22https:\/\/static.alili.tech\/img\/bVKDwC?w=510\x26amp;h=272\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVKDw6?w=420\x26amp;h=202\x22 src=\x22https:\/\/static.alili.tech\/img\/bVKDw6?w=420\x26amp;h=202\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVKDxM?w=455\x26amp;h=278\x22 src=\x22https:\/\/static.alili.tech\/img\/bVKDxM?w=455\x26amp;h=278\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVKDxW?w=504\x26amp;h=172\x22 src=\x22https:\/\/static.alili.tech\/img\/bVKDxW?w=504\x26amp;h=172\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader16\x22\x3e4.4 JS文件\x3c\/h2\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVKDye?w=431\x26amp;h=147\x22 src=\x22https:\/\/static.alili.tech\/img\/bVKDye?w=431\x26amp;h=147\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e输出：先输出\x3ccode\x3eHello\x3c\/code\x3e，10s之后再输出\x3ccode\x3eWorld\x3c\/code\x3e。JS脚本\x3cstrong\x3e执行\x3c\/strong\x3e会阻塞\x3ccode\x3eHTML Parser\x3c\/code\x3e，但是\x3ccode\x3eHTML Parser\x3c\/code\x3e是增量解析的，\x3cstrong\x3e并且CSS样式的解析会阻塞JS脚本执行\x3c\/strong\x3e，当解析完\x3ccode\x3eHello\x3c\/code\x3e时，生成对应\x3ccode\x3eDOM\x3c\/code\x3e节点，并且完成其\x3ccode\x3eCSSOM\x3c\/code\x3e，直接开始渲染\x3ccode\x3eHello\x3c\/code\x3e节点。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e脚本执行完成后再解析后续的\x3ccode\x3eWorld\x3c\/code\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cblockquote\x3e\n\x3cp\x3eJS脚本执行会阻塞HTML Parser；\x3c\/p\x3e\n\x3cp\x3eCSS解析会阻塞JS脚本执行：js可能会读、写CSSOM\x3c\/p\x3e\n\x3cp\x3e虽然JS会阻塞HTML Parser解析；\x3cstrong\x3e但是浏览器的资源异步加载机制\x3ccode\x3ePreload\x3c\/code\x3e会异步加载\x3ccode\x3ehead\x3c\/code\x3e标签内的资源\x3c\/strong\x3e\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVKDyQ?w=423\x26amp;h=252\x22 src=\x22https:\/\/static.alili.tech\/img\/bVKDyQ?w=423\x26amp;h=252\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVKDzu?w=500\x26amp;h=238\x22 src=\x22https:\/\/static.alili.tech\/img\/bVKDzu?w=500\x26amp;h=238\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVKDAm?w=500\x26amp;h=182\x22 src=\x22https:\/\/static.alili.tech\/img\/bVKDAm?w=500\x26amp;h=182\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader17\x22\x3e4.5 非关键JS资源解析阻塞的优化方案\x3c\/h2\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e将JS资源文件放在文档底部，延迟JS的执行（但是存在必须解析完HTML才能加载JS资源，相较于\x3ccode\x3ehead\x3c\/code\x3e标签中加载会慢）\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e使用\x3ccode\x3edefer\x3c\/code\x3e延迟脚本执行：\x3ccode\x3escipt\x3c\/code\x3e标签的\x3ccode\x3edefer\x3c\/code\x3e属性，脚本会在HTML文档解析完毕后再开始执行；\x3cstrong\x3e被\x3ccode\x3edefer\x3c\/code\x3e的脚本在执行时严格按照HTML文档中出现的顺序执行\x3c\/strong\x3e---优势可以提早加载JS资源，但是解析完HTML再执行\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3e使用\x3ccode\x3easync\x3c\/code\x3e异步执行脚本：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e当\x3ccode\x3escript\x3c\/code\x3e标签有\x3ccode\x3easync\x3c\/code\x3e属性时，脚本执行不会阻塞HTML  Parser，只要脚本加载完毕便开始执行\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e被\x3ccode\x3easync\x3c\/code\x3e的脚本，不会严格按照在HTML文档中的顺序执行\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3easync\x3c\/code\x3e适用于无依赖的外部独立资源（注意不要错误操作状态）\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVKDB7?w=724\x26amp;h=276\x22 src=\x22https:\/\/static.alili.tech\/img\/bVKDB7?w=724\x26amp;h=276\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVKDB9?w=629\x26amp;h=230\x22 src=\x22https:\/\/static.alili.tech\/img\/bVKDB9?w=629\x26amp;h=230\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader18\x22\x3e4.6 \x3ccode\x3efont\x3c\/code\x3e字体文件\x3c\/h2\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e\x3ccode\x3efont\x3c\/code\x3e字体文件会阻塞内容渲染\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVKDCt?w=467\x26amp;h=243\x22 src=\x22https:\/\/static.alili.tech\/img\/bVKDCt?w=467\x26amp;h=243\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader19\x22\x3e4.7 图片资源\x3c\/h2\x3e\n\x3cp\x3e\x3cstrong\x3e图片资源的加载不会阻塞渲染，但是最好在HTML标签中设置图片的高度和宽度，可以在\x3ccode\x3eLayout\x3c\/code\x3e时留出图片渲染的空间，避免页面的抖动\x3c\/strong\x3e\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader20\x22\x3e5 优化关键渲染路径\x3c\/h1\x3e\n\x3cp\x3e\x3cstrong\x3e优化目标是将下列三个指标压缩到最低：\x3c\/strong\x3e\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e关键资源数---初次渲染时依赖的资源\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e关键资源的体积最小---压缩文件或图片\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e关键资源网络来回数---网络传输资源消耗很多时间\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVKDDj?w=855\x26amp;h=455\x22 src=\x22https:\/\/static.alili.tech\/img\/bVKDDj?w=855\x26amp;h=455\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVKDDw?w=785\x26amp;h=439\x22 src=\x22https:\/\/static.alili.tech\/img\/bVKDDw?w=785\x26amp;h=439\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVKDDF?w=608\x26amp;h=371\x22 src=\x22https:\/\/static.alili.tech\/img\/bVKDDF?w=608\x26amp;h=371\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVKDEb?w=662\x26amp;h=141\x22 src=\x22https:\/\/static.alili.tech\/img\/bVKDEb?w=662\x26amp;h=141\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader21\x22\x3e6 其余优化过程\x3c\/h1\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3eHTTP2可以在传输HTML页面后向客户端推送页面内包含的资源\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e减少资源的大小：压缩\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e减少请求的来回时间\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVKDEw?w=325\x26amp;h=224\x22 src=\x22https:\/\/static.alili.tech\/img\/bVKDEw?w=325\x26amp;h=224\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVKDEH?w=503\x26amp;h=194\x22 src=\x22https:\/\/static.alili.tech\/img\/bVKDEH?w=503\x26amp;h=194\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e参考：奇舞团瓜瓜老师\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>Web性能优化</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000008693178">https://segmentfault.com/a/1190000008693178</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/v7tx813j9kr/" target="_blank">https://alili.tech/archive/v7tx813j9kr/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>