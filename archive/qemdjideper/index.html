<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="H5与Native交互之JSBridge技术"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>H5与Native交互之JSBridge技术 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/qemdjideper/",
				"appid": "1613049289050283", 
				"title": "H5与Native交互之JSBridge技术 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-07T02:30:10"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/djpjoqkdej8/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/gz1nufo256e/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fqemdjideper%2f&text=H5%e4%b8%8eNative%e4%ba%a4%e4%ba%92%e4%b9%8bJSBridge%e6%8a%80%e6%9c%af"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fqemdjideper%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fqemdjideper%2f&text=H5%e4%b8%8eNative%e4%ba%a4%e4%ba%92%e4%b9%8bJSBridge%e6%8a%80%e6%9c%af"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fqemdjideper%2f&title=H5%e4%b8%8eNative%e4%ba%a4%e4%ba%92%e4%b9%8bJSBridge%e6%8a%80%e6%9c%af"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fqemdjideper%2f&is_video=false&description=H5%e4%b8%8eNative%e4%ba%a4%e4%ba%92%e4%b9%8bJSBridge%e6%8a%80%e6%9c%af"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=H5%e4%b8%8eNative%e4%ba%a4%e4%ba%92%e4%b9%8bJSBridge%e6%8a%80%e6%9c%af&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fqemdjideper%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fqemdjideper%2f&title=H5%e4%b8%8eNative%e4%ba%a4%e4%ba%92%e4%b9%8bJSBridge%e6%8a%80%e6%9c%af"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fqemdjideper%2f&title=H5%e4%b8%8eNative%e4%ba%a4%e4%ba%92%e4%b9%8bJSBridge%e6%8a%80%e6%9c%af"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fqemdjideper%2f&title=H5%e4%b8%8eNative%e4%ba%a4%e4%ba%92%e4%b9%8bJSBridge%e6%8a%80%e6%9c%af"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fqemdjideper%2f&title=H5%e4%b8%8eNative%e4%ba%a4%e4%ba%92%e4%b9%8bJSBridge%e6%8a%80%e6%9c%af"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">H5与Native交互之JSBridge技术</h1><div class="meta"><div class="postdate"><time datetime="2019-01-07" itemprop="datePublished">2019-01-07</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e做过混合开发的很多人都知道Ionic和PhoneGap之类的框架，这些框架在web基础上包了一层Native，然后通过Bridge技术使得js可以调用视频、位置、音频等功能。本文就是介绍这层Bridge的交互原理，通过阅读本文你可以了解到js与ios及android底层的通讯原理及JSBridge的封装技术及调试方法。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e一、原理篇\x3c\/h2\x3e\n\x3cp\x3e下面分别介绍IOS和Android与Javascript的底层交互原理\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3eIOS\x3c\/h3\x3e\n\x3cp\x3e在讲解原理之前，首先来了解下iOS的UIWebView组件，先来看一下苹果官方的介绍：\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3eYou can use the UIWebView class to embed web content in your application. To do so, you simply create a UIWebView object, attach it to a window, and send it a request to load web content. You can also use this class to move back and forward in the history of webpages, and you can even set some web content properties programmatically.\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e上面的意思是说UIWebView是一个可加载网页的对象，它有浏览记录功能，且对加载的网页内容是可编程的。说白了UIWebView有类似浏览器的功能，我们使用可以它来打开页面，并做一些定制化的功能，如可以让js调某个方法可以取到手机的GPS信息。\x3c\/p\x3e\n\x3cp\x3e但需要注意的是，Safari浏览器使用的浏览器控件和UIwebView组件并不是同一个，两者在性能上有很大的差距。幸运的是，苹果发布iOS8的时候，新增了一个WKWebView组件，如果你的APP只考虑支持iOS8及以上版本，那么你就可以使用这个新的浏览器控件了。\x3c\/p\x3e\n\x3cp\x3e原生的UIWebView类提供了下面一些属性和方法\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e属性：\x3c\/strong\x3e\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3eloading：是否处于加载中\x3c\/li\x3e\n\x3cli\x3ecanGoBack：A Boolean value indicating whether the receiver can move backward. (只读)\x3c\/li\x3e\n\x3cli\x3ecanGoForward：A Boolean value indicating whether the receiver can move forward. (只读)\x3c\/li\x3e\n\x3cli\x3erequest：The URL request identifying the location of the content to load. (read-only)\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e\x3cstrong\x3e方法：\x3c\/strong\x3e\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3eloadData：Sets the main page contents, MIME type, content encoding, and base URL.\x3c\/li\x3e\n\x3cli\x3eloadRequest：加载网络内容\x3c\/li\x3e\n\x3cli\x3eloadHTMLString：加载本地HTML文件\x3c\/li\x3e\n\x3cli\x3estopLoading：停止加载\x3c\/li\x3e\n\x3cli\x3egoBack：后退\x3c\/li\x3e\n\x3cli\x3egoForward：前进\x3c\/li\x3e\n\x3cli\x3ereload：重新加载\x3c\/li\x3e\n\x3cli\x3estringByEvaluatingJavaScriptFromString：执行一段js脚本，并且返回执行结果\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch4\x3eNative（Objective-C或Swift）调用Javascript方法\x3c\/h4\x3e\n\x3cp\x3eNative调用Javascript语言，是通过\x3ccode\x3eUIWebView\x3c\/code\x3e组件的\x3ccode\x3estringByEvaluatingJavaScriptFromString\x3c\/code\x3e方法来实现的，该方法返回js脚本的执行结果。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ Swift\nwebview.stringByEvaluatingJavaScriptFromString(\x26quot;Math.random()\x26quot;)\n\/\/ OC\n[webView stringByEvaluatingJavaScriptFromString:@\x26quot;Math.random();\x26quot;];\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22swift hljs\x22\x3e\x3ccode class=\x22swift\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ Swift\x3c\/span\x3e\nwebview.stringByEvaluatingJavaScriptFromString(\x3cspan class=\x22hljs-string\x22\x3e\x22Math.random()\x22\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ OC\x3c\/span\x3e\n[webView stringByEvaluatingJavaScriptFromString:@\x3cspan class=\x22hljs-string\x22\x3e\x22Math.random();\x22\x3c\/span\x3e];\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e从上面代码可以看出它其实就是调用了\x3ccode\x3ewindow\x3c\/code\x3e下的一个对象，如果我们要让native来调用我们js写的方法，那这个方法就要在\x3ccode\x3ewindow\x3c\/code\x3e下能访问到。但从全局考虑，我们只要暴露一个对象如JSBridge对native调用就好了，所以在这里可以对native的代码做一个简单的封装：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/下面为伪代码\nwebview.setDataToJs(somedata);\nwebview.setDataToJs = function(data) {\n webview.stringByEvaluatingJavaScriptFromString(\x26quot;JSBridge.trigger(event, data)\x26quot;)\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22swift hljs\x22\x3e\x3ccode class=\x22swift\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/下面为伪代码\x3c\/span\x3e\nwebview.setDataToJs(somedata);\nwebview.setDataToJs = function(data) {\n webview.stringByEvaluatingJavaScriptFromString(\x3cspan class=\x22hljs-string\x22\x3e\x22JSBridge.trigger(event, data)\x22\x3c\/span\x3e)\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3eJavascript调用Native（Objective-C或Swift）方法\x3c\/h4\x3e\n\x3cp\x3e反过来，Javascript调用Native，并没有现成的API可以直接拿来用，而是需要间接地通过一些方法来实现。UIWebView有个特性：在UIWebView内发起的所有网络请求，都可以通过delegate函数在Native层得到通知。这样，我们就可以在UIWebView内发起一个自定义的网络请求，通常是这样的格式：jsbridge:\/\/methodName?param1=value1\x26amp;param2=value2\x3c\/p\x3e\n\x3cp\x3e于是在UIWebView的delegate函数中，我们只要发现是jsbridge:\/\/开头的地址，就不进行内容的加载，转而执行相应的调用逻辑。\x3c\/p\x3e\n\x3cp\x3e发起这样一个网络请求有两种方式：1. 通过localtion.href；2. 通过iframe方式；\x3cbr\x3e通过location.href有个问题，就是如果我们连续多次修改window.location.href的值，在Native层只能接收到最后一次请求，前面的请求都会被忽略掉。\x3c\/p\x3e\n\x3cp\x3e使用iframe方式，以唤起Native APP的分享组件为例，简单的封闭如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var url = \x27jsbridge:\/\/doAction?title=分享标题\x26amp;desc=分享描述\x26amp;link=http%3A%2F%2Fwww.baidu.com\x27;\nvar iframe = document.createElement(\x27iframe\x27);\niframe.style.width = \x271px\x27;\niframe.style.height = \x271px\x27;\niframe.style.display = \x27none\x27;\niframe.src = url;\ndocument.body.appendChild(iframe);\nsetTimeout(function() {\n    iframe.remove();\n}, 100);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e url = \x3cspan class=\x22hljs-string\x22\x3e\x27jsbridge:\/\/doAction?title=分享标题\x26amp;desc=分享描述\x26amp;link=http%3A%2F%2Fwww.baidu.com\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e iframe = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.createElement(\x3cspan class=\x22hljs-string\x22\x3e\x27iframe\x27\x3c\/span\x3e);\niframe.style.width = \x3cspan class=\x22hljs-string\x22\x3e\x271px\x27\x3c\/span\x3e;\niframe.style.height = \x3cspan class=\x22hljs-string\x22\x3e\x271px\x27\x3c\/span\x3e;\niframe.style.display = \x3cspan class=\x22hljs-string\x22\x3e\x27none\x27\x3c\/span\x3e;\niframe.src = url;\n\x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.body.appendChild(iframe);\nsetTimeout(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    iframe.remove();\n}, \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后Webview就可以拦截这个请求，并且解析出相应的方法和参数。如下代码所示：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22func webView(webView: UIWebView, shouldStartLoadWithRequest request: NSURLRequest, navigationType: UIWebViewNavigationType) -\x3e Bool {\n        print(\x26quot;shouldStartLoadWithRequest\x26quot;)\n        let url = request.URL\n        let scheme = url?.scheme\n        let method = url?.host\n        let query = url?.query\n        \n        if url != nil \x26amp;\x26amp; scheme == \x26quot;jsbridge\x26quot; {\n            print(\x26quot;scheme == \\(scheme)\x26quot;)\n            print(\x26quot;method == \\(method)\x26quot;)\n            print(\x26quot;query == \\(query)\x26quot;)\n\n            switch method! {\n                case \x26quot;getData\x26quot;:\n                    self.getData()\n                case \x26quot;putData\x26quot;:\n                    self.putData()\n                case \x26quot;gotoWebview\x26quot;:\n                    self.gotoWebview()\n                case \x26quot;gotoNative\x26quot;:\n                    self.gotoNative()\n                case \x26quot;doAction\x26quot;:\n                    self.doAction()\n                case \x26quot;configNative\x26quot;:\n                    self.configNative()\n                default:\n                    print(\x26quot;default\x26quot;)\n            }\n    \n            return false\n        } else {\n            return true\n        }\n    }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22swift hljs\x22\x3e\x3ccode class=\x22swift\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunc\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ewebView\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(webView: UIWebView, shouldStartLoadWithRequest request: NSURLRequest, navigationType: UIWebViewNavigationType)\x3c\/span\x3e\x3c\/span\x3e -\x26gt; \x3cspan class=\x22hljs-type\x22\x3eBool\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-built_in\x22\x3eprint\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22shouldStartLoadWithRequest\x22\x3c\/span\x3e)\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e url = request.\x3cspan class=\x22hljs-type\x22\x3eURL\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e scheme = url?.scheme\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e method = url?.host\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e query = url?.query\n        \n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e url != \x3cspan class=\x22hljs-literal\x22\x3enil\x3c\/span\x3e \x26amp;\x26amp; scheme == \x3cspan class=\x22hljs-string\x22\x3e\x22jsbridge\x22\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-built_in\x22\x3eprint\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22scheme == \x3cspan class=\x22hljs-subst\x22\x3e\\(scheme)\x3c\/span\x3e\x22\x3c\/span\x3e)\n            \x3cspan class=\x22hljs-built_in\x22\x3eprint\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22method == \x3cspan class=\x22hljs-subst\x22\x3e\\(method)\x3c\/span\x3e\x22\x3c\/span\x3e)\n            \x3cspan class=\x22hljs-built_in\x22\x3eprint\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22query == \x3cspan class=\x22hljs-subst\x22\x3e\\(query)\x3c\/span\x3e\x22\x3c\/span\x3e)\n\n            \x3cspan class=\x22hljs-keyword\x22\x3eswitch\x3c\/span\x3e method! {\n                \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22getData\x22\x3c\/span\x3e:\n                    \x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e.getData()\n                \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22putData\x22\x3c\/span\x3e:\n                    \x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e.putData()\n                \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22gotoWebview\x22\x3c\/span\x3e:\n                    \x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e.gotoWebview()\n                \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22gotoNative\x22\x3c\/span\x3e:\n                    \x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e.gotoNative()\n                \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22doAction\x22\x3c\/span\x3e:\n                    \x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e.doAction()\n                \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22configNative\x22\x3c\/span\x3e:\n                    \x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e.configNative()\n                \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e:\n                    \x3cspan class=\x22hljs-built_in\x22\x3eprint\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22default\x22\x3c\/span\x3e)\n            }\n    \n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n        }\n    }\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3eAndroid\x3c\/h3\x3e\n\x3cp\x3e在android中，native与js的通讯方式与ios类似，ios中的通过schema方式在android中也是支持的。\x3c\/p\x3e\n\x3ch4\x3ejavascript调用native方式\x3c\/h4\x3e\n\x3cp\x3e目前在android中有三种调用native的方式：\x3c\/p\x3e\n\x3cp\x3e1.通过schema方式，使用\x3ccode\x3eshouldOverrideUrlLoading\x3c\/code\x3e方法对url协议进行解析。这种js的调用方式与ios的一样，使用iframe来调用native代码。\x3cbr\x3e2.通过在webview页面里直接注入原生js代码方式，使用\x3ccode\x3eaddJavascriptInterface\x3c\/code\x3e方法来实现。\x3cbr\x3e在android里实现如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22class JSInterface {\n    @JavascriptInterface \/\/注意这个代码一定要加上\n    public String getUserData() {\n        return \x26quot;UserData\x26quot;;\n    }\n}\nwebView.addJavascriptInterface(new JSInterface(), \x26quot;AndroidJS\x26quot;);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22java hljs\x22\x3e\x3ccode class=\x22java\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eJSInterface\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-meta\x22\x3e@JavascriptInterface\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/注意这个代码一定要加上\x3c\/span\x3e\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3epublic\x3c\/span\x3e String \x3cspan class=\x22hljs-title\x22\x3egetUserData\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22UserData\x22\x3c\/span\x3e;\n    }\n}\nwebView.addJavascriptInterface(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e JSInterface(), \x3cspan class=\x22hljs-string\x22\x3e\x22AndroidJS\x22\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上面的代码就是在页面的window对象里注入了\x3ccode\x3eAndroidJS\x3c\/code\x3e对象。在js里可以直接调用\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22alert(AndroidJS.getUserData()) \/\/UserDate\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3ealert(AndroidJS.getUserData()) \x3cspan class=\x22hljs-comment\x22\x3e\/\/UserDate\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e3.使用prompt,console.log,alert方式，这三个方法对js里是属性原生的，在android webview这一层是可以重写这三个方法的。一般我们使用prompt，因为这个在js里使用的不多，用来和native通讯副作用比较少。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22class YouzanWebChromeClient extends WebChromeClient {\n    @Override\n    public boolean onJsPrompt(WebView view, String url, String message, String defaultValue, JsPromptResult result) {\n        \/\/ 这里就可以对js的prompt进行处理，通过result返回结果\n    }\n    @Override\n    public boolean onConsoleMessage(ConsoleMessage consoleMessage) {\n\n    }\n    @Override\n    public boolean onJsAlert(WebView view, String url, String message, JsResult result) {\n\n    }\n\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22java hljs\x22\x3e\x3ccode class=\x22java\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eYouzanWebChromeClient\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eWebChromeClient\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-meta\x22\x3e@Override\x3c\/span\x3e\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3epublic\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eboolean\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eonJsPrompt\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(WebView view, String url, String message, String defaultValue, JsPromptResult result)\x3c\/span\x3e \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 这里就可以对js的prompt进行处理，通过result返回结果\x3c\/span\x3e\n    }\n    \x3cspan class=\x22hljs-meta\x22\x3e@Override\x3c\/span\x3e\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3epublic\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eboolean\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eonConsoleMessage\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(ConsoleMessage consoleMessage)\x3c\/span\x3e \x3c\/span\x3e{\n\n    }\n    \x3cspan class=\x22hljs-meta\x22\x3e@Override\x3c\/span\x3e\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3epublic\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eboolean\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eonJsAlert\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(WebView view, String url, String message, JsResult result)\x3c\/span\x3e \x3c\/span\x3e{\n\n    }\n\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3eNative调用javascript方式\x3c\/h4\x3e\n\x3cp\x3e在android里是使用webview的\x3ccode\x3eloadUrl\x3c\/code\x3e进行调用的，如：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 调用js中的JSBridge.trigger方法\nwebView.loadUrl(\x26quot;javascript:JSBridge.trigger(\x27webviewReady\x27)\x26quot;);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22java hljs\x22\x3e\x3ccode class=\x22java\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 调用js中的JSBridge.trigger方法\x3c\/span\x3e\nwebView.loadUrl(\x3cspan class=\x22hljs-string\x22\x3e\x22javascript:JSBridge.trigger(\x27webviewReady\x27)\x22\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e二、库的封装\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3ejs调用native的封装\x3c\/h3\x3e\n\x3cp\x3e上面我们了解了js与native通讯的底层原理，所以我们可以封装一个基础的通讯方法\x3ccode\x3edoCall\x3c\/code\x3e来屏蔽android与ios的差异。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22YouzanJsBridge = {\n    doCall: function(functionName, data, callback) {\n        var _this = this;\n        \/\/ 解决连续调用问题\n        if (this.lastCallTime \x26amp;\x26amp; (Date.now() - this.lastCallTime) \x3c 100) {\n            setTimeout(function() {\n                _this.doCall(functionName, data, callback);\n            }, 100);\n            return;\n        }\n        this.lastCallTime = Date.now();\n    \n        data = data || {};\n        if (callback) {\n            $.extend(data, { callback: callback });\n        }\n    \n        if (UA.isIOS()) {\n            $.each(data, function(key, value) {\n                if ($.isPlainObject(value) || $.isArray(value)) {\n                    data[key] = JSON.stringify(value);\n                }\n            });\n            var url = Args.addParameter(\x27youzanjs:\/\/\x27 \x2b functionName, data);\n            var iframe = document.createElement(\x27iframe\x27);\n            iframe.style.width = \x271px\x27;\n            iframe.style.height = \x271px\x27;\n            iframe.style.display = \x27none\x27;\n            iframe.src = url;\n            document.body.appendChild(iframe);\n            setTimeout(function() {\n                iframe.remove();\n            }, 100);\n        } else if (UA.isAndroid()) {\n            window.androidJS \x26amp;\x26amp; window.androidJS[functionName] \x26amp;\x26amp; window.androidJS[functionName](JSON.stringify(data));\n        } else {\n            console.error(\x27未获取platform信息，调取api失败\x27);\n        }\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3eYouzanJsBridge = {\n    \x3cspan class=\x22hljs-attr\x22\x3edoCall\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3efunctionName, data, callback\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e _this = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 解决连续调用问题\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.lastCallTime \x26amp;\x26amp; (\x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e.now() - \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.lastCallTime) \x26lt; \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e) {\n            setTimeout(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n                _this.doCall(functionName, data, callback);\n            }, \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e);\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n        }\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.lastCallTime = \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e.now();\n    \n        data = data || {};\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (callback) {\n            $.extend(data, { \x3cspan class=\x22hljs-attr\x22\x3ecallback\x3c\/span\x3e: callback });\n        }\n    \n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (UA.isIOS()) {\n            $.each(data, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ekey, value\x3c\/span\x3e) \x3c\/span\x3e{\n                \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e ($.isPlainObject(value) || $.isArray(value)) {\n                    data[key] = \x3cspan class=\x22hljs-built_in\x22\x3eJSON\x3c\/span\x3e.stringify(value);\n                }\n            });\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e url = Args.addParameter(\x3cspan class=\x22hljs-string\x22\x3e\x27youzanjs:\/\/\x27\x3c\/span\x3e \x2b functionName, data);\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e iframe = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.createElement(\x3cspan class=\x22hljs-string\x22\x3e\x27iframe\x27\x3c\/span\x3e);\n            iframe.style.width = \x3cspan class=\x22hljs-string\x22\x3e\x271px\x27\x3c\/span\x3e;\n            iframe.style.height = \x3cspan class=\x22hljs-string\x22\x3e\x271px\x27\x3c\/span\x3e;\n            iframe.style.display = \x3cspan class=\x22hljs-string\x22\x3e\x27none\x27\x3c\/span\x3e;\n            iframe.src = url;\n            \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.body.appendChild(iframe);\n            setTimeout(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n                iframe.remove();\n            }, \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e);\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (UA.isAndroid()) {\n            \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.androidJS \x26amp;\x26amp; \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.androidJS[functionName] \x26amp;\x26amp; \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.androidJS[functionName](\x3cspan class=\x22hljs-built_in\x22\x3eJSON\x3c\/span\x3e.stringify(data));\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.error(\x3cspan class=\x22hljs-string\x22\x3e\x27未获取platform信息，调取api失败\x27\x3c\/span\x3e);\n        }\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上面android端我们使用了addJavascriptInterface方法来注入一个AndroidJS对象。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e项目通用方法抽象\x3c\/h3\x3e\n\x3cp\x3e在项目的实践中，我们逐渐抽象出一些通用的方法，这些方法基本上都是可以满足项目的需求。如下所示：\x3c\/p\x3e\n\x3ch4\x3e1.getData(datatype, callback, extra) H5从Native APP获取数据\x3c\/h4\x3e\n\x3cp\x3e使用场景：H5需要从Native APP获取某些数据的时候，可以调用这个方法。\x3c\/p\x3e\n\x3ctable class=\x22table table-striped-white table-bordered\x22\x3e\n\x3cthead\x3e\x3ctr\x3e\n\x3cth\x3e参数\x3c\/th\x3e\n \x3cth\x3e类型\x3c\/th\x3e\n \x3cth\x3e是否必须\x3c\/th\x3e\n \x3cth\x3e示例值\x3c\/th\x3e\n \x3cth\x3e说明\x3c\/th\x3e\n\x3c\/tr\x3e\x3c\/thead\x3e\n\x3ctbody\x3e\n\x3ctr\x3e\n\x3ctd\x3edatatype\x3c\/td\x3e\n \x3ctd\x3eString\x3c\/td\x3e\n \x3ctd\x3e是\x3c\/td\x3e\n \x3ctd\x3euserInfo\x3c\/td\x3e\n \x3ctd\x3e数据类型\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3ecallback\x3c\/td\x3e\n \x3ctd\x3eFunction\x3c\/td\x3e\n \x3ctd\x3e是\x3c\/td\x3e\n \x3ctd\x3e\x3c\/td\x3e\n \x3ctd\x3e回调函数\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3eextra\x3c\/td\x3e\n \x3ctd\x3eObject\x3c\/td\x3e\n \x3ctd\x3e否\x3c\/td\x3e\n \x3ctd\x3e\x3c\/td\x3e\n \x3ctd\x3e传递给Native APP的数据对象\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3c\/tbody\x3e\n\x3c\/table\x3e\n\x3cp\x3e示例代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22JSBridge.getData(\x27userInfo\x27,function(data) {\n    console.log(data);\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3eJSBridge.getData(\x3cspan class=\x22hljs-string\x22\x3e\x27userInfo\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edata\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(data);\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e2.putData(datatype, data) H5告诉Native APP一些数据\x3c\/h4\x3e\n\x3cp\x3e使用场景：H5告诉Native APP一些数据，可以调用这个方法。\x3c\/p\x3e\n\x3ctable class=\x22table table-striped-white table-bordered\x22\x3e\n\x3cthead\x3e\x3ctr\x3e\n\x3cth\x3e参数\x3c\/th\x3e\n \x3cth\x3e类型\x3c\/th\x3e\n \x3cth\x3e是否必须\x3c\/th\x3e\n \x3cth\x3e示例值\x3c\/th\x3e\n \x3cth\x3e说明\x3c\/th\x3e\n\x3c\/tr\x3e\x3c\/thead\x3e\n\x3ctbody\x3e\n\x3ctr\x3e\n\x3ctd\x3edatatype\x3c\/td\x3e\n \x3ctd\x3eString\x3c\/td\x3e\n \x3ctd\x3e是\x3c\/td\x3e\n \x3ctd\x3euserInfo\x3c\/td\x3e\n \x3ctd\x3e数据类型\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3edata\x3c\/td\x3e\n \x3ctd\x3eObject\x3c\/td\x3e\n \x3ctd\x3e是\x3c\/td\x3e\n \x3ctd\x3e{ username: \x27zhangsan\x27, age: 20 }\x3c\/td\x3e\n \x3ctd\x3e传递给Native APP的数据对象\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3c\/tbody\x3e\n\x3c\/table\x3e\n\x3cp\x3e示例代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22JSBridge.putData(\x27userInfo\x27, {\n    username: \x27zhangsan\x27,\n    age: 20\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3eJSBridge.putData(\x3cspan class=\x22hljs-string\x22\x3e\x27userInfo\x27\x3c\/span\x3e, {\n    \x3cspan class=\x22hljs-attr\x22\x3eusername\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27zhangsan\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3eage\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e3.gotoWebview(url, page, data) Native APP新开一个Webview窗口，并打开相应网页\x3c\/h4\x3e\n\x3ctable class=\x22table table-striped-white table-bordered\x22\x3e\n\x3cthead\x3e\x3ctr\x3e\n\x3cth\x3e参数\x3c\/th\x3e\n \x3cth\x3e类型\x3c\/th\x3e\n \x3cth\x3e是否必须\x3c\/th\x3e\n \x3cth\x3e示例值\x3c\/th\x3e\n \x3cth\x3e说明\x3c\/th\x3e\n\x3c\/tr\x3e\x3c\/thead\x3e\n\x3ctbody\x3e\n\x3ctr\x3e\n\x3ctd\x3eurl\x3c\/td\x3e\n \x3ctd\x3eString\x3c\/td\x3e\n \x3ctd\x3e是\x3c\/td\x3e\n \x3ctd\x3e\n\x3ca href=\x22http:\/\/www.youzan.com\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e\x3c\/a\x3e\x3ca href=\x22http:\/\/www.youzan.com\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/www.youzan.com\x3c\/a\x3e\n\x3c\/td\x3e\n \x3ctd\x3e网页链接地址，一般都只要传递URL参数就可以了\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3epage\x3c\/td\x3e\n \x3ctd\x3eString\x3c\/td\x3e\n \x3ctd\x3e否\x3c\/td\x3e\n \x3ctd\x3eweb\x3c\/td\x3e\n \x3ctd\x3e网页page类型，默认为web\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3edata\x3c\/td\x3e\n \x3ctd\x3eObject\x3c\/td\x3e\n \x3ctd\x3e否\x3c\/td\x3e\n \x3ctd\x3e\x3c\/td\x3e\n \x3ctd\x3e额外参数对象\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3c\/tbody\x3e\n\x3c\/table\x3e\n\x3cp\x3e示例代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 示例1：打开一个网页\nJSBridge.gotoWebview(\x27http:\/\/www.youzan.com\x27);\n\n\/\/ 示例2：打开一个网页，并且传递额外的参数给Native APP\nJSBridge.gotoWebview(\x27http:\/\/www.youzan.com\x27, \x27goodsDetail\x27, {\n    goods_id: 10000,\n    title: \x27这是商品的标题\x27,\n    desc: \x27这是商品的描述\x27\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 示例1：打开一个网页\x3c\/span\x3e\nJSBridge.gotoWebview(\x3cspan class=\x22hljs-string\x22\x3e\x27http:\/\/www.youzan.com\x27\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 示例2：打开一个网页，并且传递额外的参数给Native APP\x3c\/span\x3e\nJSBridge.gotoWebview(\x3cspan class=\x22hljs-string\x22\x3e\x27http:\/\/www.youzan.com\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27goodsDetail\x27\x3c\/span\x3e, {\n    \x3cspan class=\x22hljs-attr\x22\x3egoods_id\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e10000\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3etitle\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27这是商品的标题\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3edesc\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27这是商品的描述\x27\x3c\/span\x3e\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e4.gotoNative(page, data) 从H5页面跳转到Native APP的某个原生界面\x3c\/h4\x3e\n\x3ctable class=\x22table table-striped-white table-bordered\x22\x3e\n\x3cthead\x3e\x3ctr\x3e\n\x3cth\x3e参数\x3c\/th\x3e\n \x3cth\x3e类型\x3c\/th\x3e\n \x3cth\x3e是否必须\x3c\/th\x3e\n \x3cth\x3e示例值\x3c\/th\x3e\n \x3cth\x3e说明\x3c\/th\x3e\n\x3c\/tr\x3e\x3c\/thead\x3e\n\x3ctbody\x3e\n\x3ctr\x3e\n\x3ctd\x3epage\x3c\/td\x3e\n \x3ctd\x3eString\x3c\/td\x3e\n \x3ctd\x3e是\x3c\/td\x3e\n \x3ctd\x3eloginPage\x3c\/td\x3e\n \x3ctd\x3eNative页面标示符，例如loginPage\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3edata\x3c\/td\x3e\n \x3ctd\x3eObject\x3c\/td\x3e\n \x3ctd\x3e否\x3c\/td\x3e\n \x3ctd\x3e{ username: \x27zhangsan\x27, age: 20 }\x3c\/td\x3e\n \x3ctd\x3e额外参数对象\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3c\/tbody\x3e\n\x3c\/table\x3e\n\x3cp\x3e示例代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 示例1：打开Native APP登录页面\nJSBridge.gotoNative(\x27loginPage\x27);\n\n\/\/ 示例2：打开Native APP登录页面，并且传递用户名给Native APP\nJSBridge.gotoNative(\x27loginPage\x27, {\n    username: \x27张三\x27\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 示例1：打开Native APP登录页面\x3c\/span\x3e\nJSBridge.gotoNative(\x3cspan class=\x22hljs-string\x22\x3e\x27loginPage\x27\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 示例2：打开Native APP登录页面，并且传递用户名给Native APP\x3c\/span\x3e\nJSBridge.gotoNative(\x3cspan class=\x22hljs-string\x22\x3e\x27loginPage\x27\x3c\/span\x3e, {\n    \x3cspan class=\x22hljs-attr\x22\x3eusername\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27张三\x27\x3c\/span\x3e\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e5.doAction(action, data) 功能上的一些操作\x3c\/h4\x3e\n\x3ctable class=\x22table table-striped-white table-bordered\x22\x3e\n\x3cthead\x3e\x3ctr\x3e\n\x3cth\x3e参数\x3c\/th\x3e\n \x3cth\x3e类型\x3c\/th\x3e\n \x3cth\x3e是否必须\x3c\/th\x3e\n \x3cth\x3e示例值\x3c\/th\x3e\n \x3cth\x3e说明\x3c\/th\x3e\n\x3c\/tr\x3e\x3c\/thead\x3e\n\x3ctbody\x3e\n\x3ctr\x3e\n\x3ctd\x3eaction\x3c\/td\x3e\n \x3ctd\x3eString\x3c\/td\x3e\n \x3ctd\x3e是\x3c\/td\x3e\n \x3ctd\x3ecopy\x3c\/td\x3e\n \x3ctd\x3e操作功能类型，例如分享、复制\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3edata\x3c\/td\x3e\n \x3ctd\x3eObject\x3c\/td\x3e\n \x3ctd\x3e否\x3c\/td\x3e\n \x3ctd\x3e{ content: \x27这是要复制的内容\x27 }\x3c\/td\x3e\n \x3ctd\x3e额外参数\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3c\/tbody\x3e\n\x3c\/table\x3e\n\x3cp\x3e示例代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 示例1：调用Native APP复制一段文本到剪切板\nJSBridge.doAction(\x27copy\x27, {\n    content: \x27这是要复制的内容\x27\n});\n\n\/\/ 示例2：调用Native APP的分享组件，分享当前网页到微信\nJSBridge.doAction(\x27share\x27, {\n    title: \x27分享标题\x27,\n    desc: \x27分享描述\x27,\n    link: \x27http:\/\/www.youzan.com\x27,\n    imgs_url: \x27http:\/\/wap.koudaitong.com\/v2\/common\/url\/create?type=homepage\x26amp;index%2Findex=\x26amp;kdt_id=63077\x26amp;alias=63077\x27\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 示例1：调用Native APP复制一段文本到剪切板\x3c\/span\x3e\nJSBridge.doAction(\x3cspan class=\x22hljs-string\x22\x3e\x27copy\x27\x3c\/span\x3e, {\n    \x3cspan class=\x22hljs-attr\x22\x3econtent\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27这是要复制的内容\x27\x3c\/span\x3e\n});\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 示例2：调用Native APP的分享组件，分享当前网页到微信\x3c\/span\x3e\nJSBridge.doAction(\x3cspan class=\x22hljs-string\x22\x3e\x27share\x27\x3c\/span\x3e, {\n    \x3cspan class=\x22hljs-attr\x22\x3etitle\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27分享标题\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3edesc\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27分享描述\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3elink\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27http:\/\/www.youzan.com\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3eimgs_url\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27http:\/\/wap.koudaitong.com\/v2\/common\/url\/create?type=homepage\x26amp;index%2Findex=\x26amp;kdt_id=63077\x26amp;alias=63077\x27\x3c\/span\x3e\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3e三、调试篇\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e使用Safari进行UIWebView的调试\x3c\/h3\x3e\n\x3cp\x3e（1）首先需要打开Safari的调试模式，在Safari的菜单中，选择“Safari”→“Preference”→“Advanced”，勾选上“Show Develop menu in menu bar”选项，如下图所示。\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000007058892?w=792\x26amp;h=592\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000007058892?w=792\x26amp;h=592\x22 alt=\x222-1\x22 title=\x222-1\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e（2）打开真机或iPhone模拟器的调试模式，在真机或iPhone模拟器中打开设置界面，选择“Safari”→“高级”→“Web检查器”，选择开启即可，如下图所示。\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000007058893?w=459\x26amp;h=773\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000007058893?w=459\x26amp;h=773\x22 alt=\x222-2\x22 title=\x222-2\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e（3）将真机通过USB连上电脑，或者开启模拟器，Safari的“Develop”菜单下便会多出相应的菜单项，如图所示。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000007058894?w=646\x26amp;h=235\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000007058894?w=646\x26amp;h=235\x22 alt=\x22Paste_Image.png\x22 title=\x22Paste_Image.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e（4）Safari连接上UIWebView之后，我们就可以直接在Safari中直接修改HTML、CSS，以及调试Javascript。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000007058895?w=1084\x26amp;h=734\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000007058895?w=1084\x26amp;h=734\x22 alt=\x22Paste_Image.png\x22 title=\x22Paste_Image.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3e四、参考链接\x3c\/h2\x3e\n\x3cul\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/developer.apple.com\/library\/prerelease\/ios\/documentation\/UIKit\/Reference\/UIWebView_Class\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eUIWebView Class Reference\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22\/library\/prerelease\/ios\/documentation\/WebKit\/Reference\/WKWebView_Ref\/\x22\x3eWKWebView Class Reference\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/github.com\/marcuswestin\/WebViewJavascriptBridge\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/marcuswestin\/WebViewJavascriptBridge\x3c\/a\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cblockquote\x3e\x3cp\x3e本文由 @kk @劲风 共同创作，首发于有赞技术博客: \x3ca href=\x22http:\/\/tech.youzan.com\/jsbridge\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/tech.youzan.com\/jsbridge\/\x3c\/a\x3e\x3c\/p\x3e\x3c\/blockquote\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>H5与Native交互之JSBridge技术</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000010356403">https://segmentfault.com/a/1190000010356403</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/qemdjideper/" target="_blank">https://alili.tech/archive/qemdjideper/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>