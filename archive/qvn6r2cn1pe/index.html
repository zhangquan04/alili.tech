<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="如何在 Docker 中设置 Go 并部署应用"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>如何在 Docker 中设置 Go 并部署应用 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/qvn6r2cn1pe/",
				"appid": "1613049289050283", 
				"title": "如何在 Docker 中设置 Go 并部署应用 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-24T02:30:11"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/ue5tin0yqgp/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/346wbzi9jkk/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fqvn6r2cn1pe%2f&text=%e5%a6%82%e4%bd%95%e5%9c%a8%20Docker%20%e4%b8%ad%e8%ae%be%e7%bd%ae%20Go%20%e5%b9%b6%e9%83%a8%e7%bd%b2%e5%ba%94%e7%94%a8"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fqvn6r2cn1pe%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fqvn6r2cn1pe%2f&text=%e5%a6%82%e4%bd%95%e5%9c%a8%20Docker%20%e4%b8%ad%e8%ae%be%e7%bd%ae%20Go%20%e5%b9%b6%e9%83%a8%e7%bd%b2%e5%ba%94%e7%94%a8"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fqvn6r2cn1pe%2f&title=%e5%a6%82%e4%bd%95%e5%9c%a8%20Docker%20%e4%b8%ad%e8%ae%be%e7%bd%ae%20Go%20%e5%b9%b6%e9%83%a8%e7%bd%b2%e5%ba%94%e7%94%a8"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fqvn6r2cn1pe%2f&is_video=false&description=%e5%a6%82%e4%bd%95%e5%9c%a8%20Docker%20%e4%b8%ad%e8%ae%be%e7%bd%ae%20Go%20%e5%b9%b6%e9%83%a8%e7%bd%b2%e5%ba%94%e7%94%a8"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%a6%82%e4%bd%95%e5%9c%a8%20Docker%20%e4%b8%ad%e8%ae%be%e7%bd%ae%20Go%20%e5%b9%b6%e9%83%a8%e7%bd%b2%e5%ba%94%e7%94%a8&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fqvn6r2cn1pe%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fqvn6r2cn1pe%2f&title=%e5%a6%82%e4%bd%95%e5%9c%a8%20Docker%20%e4%b8%ad%e8%ae%be%e7%bd%ae%20Go%20%e5%b9%b6%e9%83%a8%e7%bd%b2%e5%ba%94%e7%94%a8"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fqvn6r2cn1pe%2f&title=%e5%a6%82%e4%bd%95%e5%9c%a8%20Docker%20%e4%b8%ad%e8%ae%be%e7%bd%ae%20Go%20%e5%b9%b6%e9%83%a8%e7%bd%b2%e5%ba%94%e7%94%a8"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fqvn6r2cn1pe%2f&title=%e5%a6%82%e4%bd%95%e5%9c%a8%20Docker%20%e4%b8%ad%e8%ae%be%e7%bd%ae%20Go%20%e5%b9%b6%e9%83%a8%e7%bd%b2%e5%ba%94%e7%94%a8"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fqvn6r2cn1pe%2f&title=%e5%a6%82%e4%bd%95%e5%9c%a8%20Docker%20%e4%b8%ad%e8%ae%be%e7%bd%ae%20Go%20%e5%b9%b6%e9%83%a8%e7%bd%b2%e5%ba%94%e7%94%a8"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">如何在 Docker 中设置 Go 并部署应用</h1><div class="meta"><div class="postdate"><time datetime="2019-01-24" itemprop="datePublished">2019-01-24</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n            \x3ch1\x3e\x3ca href=\x22#如何在-docker-中设置-go-并部署应用\x22\x3e\x3c\/a\x3e如何在 Docker 中设置 Go 并部署应用\x3c\/h1\x3e\n\x3cp\x3e嗨，在本教程中，我们将学习如何使用 docker 部署 golang web 应用程序。 你可能已经知道，由于 golang 的高性能和可靠性，docker 是完全是用 golang 写的。在我们详细介绍之前，请确保你已经安装了 docker 以及 golang 并对它们有基本了解。\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#关于-docker\x22\x3e\x3c\/a\x3e关于 docker\x3c\/h3\x3e\n\x3cp\x3eDocker 是一个开源程序，它可以将应用及其完整的依赖包捆绑到一起，并打包为容器，与宿主机共享相同的 Linux 内核。另一方面，像 VMware 这样的基于 hypervisor 的虚拟化操作系统容器提供了高级别的隔离和安全性，这是由于客户机和主机之间的通信是通过 hypervisor 来实现的，它们不共享内核空间。但是硬件仿真也导致了性能的开销，所以容器虚拟化诞生了，以提供一个轻量级的虚拟环境，它将一组进程和资源与主机以及其它容器分组及隔离，因此，容器内部的进程无法看到容器外部的进程或资源。\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#用-go-语言创建一个-hello-world-web-应用\x22\x3e\x3c\/a\x3e用 Go 语言创建一个 “Hello World” web 应用\x3c\/h3\x3e\n\x3cp\x3e首先我们为 Go 应用创建一个目录，它会在浏览器中显示 “Hello World”。创建一个 \x3ccode\x3eweb-app\x3c\/code\x3e 目录并使它成为当前目录。进入 \x3ccode\x3eweb-app\x3c\/code\x3e 应用目录并编辑一个名为 \x3ccode\x3emain.go\x3c\/code\x3e 的文件。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs elixir\x22\x3eroot\x3cspan class=\x22hljs-variable\x22\x3e@demohost\x3c\/span\x3e\x3cspan class=\x22hljs-symbol\x22\x3e:~\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e# mkdir web-app\x3c\/span\x3e\nroot\x3cspan class=\x22hljs-variable\x22\x3e@demohost\x3c\/span\x3e\x3cspan class=\x22hljs-symbol\x22\x3e:~\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e# cd web-app\/\x3c\/span\x3e\nroot\x3cspan class=\x22hljs-variable\x22\x3e@demohost\x3c\/span\x3e\x3cspan class=\x22hljs-symbol\x22\x3e:~\/web-app\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e# vim.tiny main.go\x3c\/span\x3e\n\npackage main\nimport (\n    \x3cspan class=\x22hljs-string\x22\x3e\x22fmt\x22\x3c\/span\x3e\n    \x3cspan class=\x22hljs-string\x22\x3e\x22net\/http\x22\x3c\/span\x3e\n)\n\nfunc handler(w http.ResponseWriter, r *http.Request) {\n    fmt.Fprintf(w, \x3cspan class=\x22hljs-string\x22\x3e\x22Hello %s\x22\x3c\/span\x3e, r.URL.Path[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\x3cspan class=\x22hljs-symbol\x22\x3e:\x3c\/span\x3e])\n}\n\nfunc main() {\n    http.HandleFunc(\x3cspan class=\x22hljs-string\x22\x3e\x22\/World\x22\x3c\/span\x3e, handler)\n    http.ListenAndServe(\x3cspan class=\x22hljs-string\x22\x3e\x22:8080\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3enil\x3c\/span\x3e)\n}\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e使用下面的命令运行上面的 “Hello World” Go 程序。在浏览器中输入 \x3ccode\x3ehttp:\/\/127.0.0.1:8080\/World\x3c\/code\x3e 测试，你会在浏览器中看到 “Hello World”。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs elixir\x22\x3eroot\x3cspan class=\x22hljs-variable\x22\x3e@demohost\x3c\/span\x3e\x3cspan class=\x22hljs-symbol\x22\x3e:~\/web-app\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e# PORT=8080 go run main.go\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e下一步是将上面的应用在 docker 中容器化。因此我们会创建一个 dockerfile 文件，它会告诉 docker 如何容器化我们的 web 应用。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs dockerfile\x22\x3eroot@demohost:~\/web-app\x3cspan class=\x22hljs-comment\x22\x3e# vim.tiny Dockerfile\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e# 得到最新的 golang docker 镜像\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eFROM\x3c\/span\x3e golang:latest\n\n\x3cspan class=\x22hljs-comment\x22\x3e# 在容器内部创建一个目录来存储我们的 web 应用，接着使它成为工作目录。\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eRUN\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e mkdir -p \/go\/src\/web-app\n\x3c\/span\x3e\x3cspan class=\x22hljs-keyword\x22\x3eWORKDIR\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e \/go\/src\/web-app\n\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e# 复制 web-app 目录到容器中\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eCOPY\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e . \/go\/src\/web-app\n\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e# 下载并安装第三方依赖到容器中\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eRUN\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e go-wrapper download\n\x3c\/span\x3e\x3cspan class=\x22hljs-keyword\x22\x3eRUN\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e go-wrapper install\n\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e# 设置 PORT 环境变量\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eENV\x3c\/span\x3e PORT \x3cspan class=\x22hljs-number\x22\x3e8080\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e# 给主机暴露 8080 端口，这样外部网络可以访问你的应用\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eEXPOSE\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e8080\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e# 告诉 Docker 启动容器运行的命令\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eCMD\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e [\x3cspan class=\x22hljs-string\x22\x3e\x22go-wrapper\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22run\x22\x3c\/span\x3e]\n\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\x3ch3\x3e\x3ca href=\x22#构建运行容器\x22\x3e\x3c\/a\x3e构建\/运行容器\x3c\/h3\x3e\n\x3cp\x3e使用下面的命令构建你的 Go web-app，你会在成功构建后获得确认。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs routeros\x22\x3eroot@demohost:~\/web-app# docker build --rm -t web-app .\nSending build context \x3cspan class=\x22hljs-keyword\x22\x3eto\x3c\/span\x3e Docker daemon 3.584 kB\n\x3cspan class=\x22hljs-keyword\x22\x3eStep\x3c\/span\x3e 1 : \x3cspan class=\x22hljs-keyword\x22\x3eFROM\x3c\/span\x3e golang:latest\nlatest: Pulling \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e library\/golang\n386a066cd84a: Already exists\n75ea84187083: Pull complete\n88b459c9f665: Pull complete\na31e17eb9485: Pull complete\n1b272d7ab8a4: Pull complete\neca636a985c1: Pull complete\n08158782d330: Pull complete\nDigest: sha256:02718aef869a8b00d4a36883c82782b47fc01e774d0ac1afd434934d8ccfee8c\nStatus: Downloaded newer image \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e golang:latest\n---\x26gt; 9752d71739d2\n\x3cspan class=\x22hljs-keyword\x22\x3eStep\x3c\/span\x3e 2 : \x3cspan class=\x22hljs-builtin-name\x22\x3eRUN\x3c\/span\x3e mkdir -p \/go\/src\/web-app\n---\x26gt; Running \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e 9aef92fff9e8\n---\x26gt; 49936ff4f50c\nRemoving intermediate container 9aef92fff9e8\n\x3cspan class=\x22hljs-keyword\x22\x3eStep\x3c\/span\x3e 3 : WORKDIR \/go\/src\/web-app\n---\x26gt; Running \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e 58440a93534c\n---\x26gt; 0703574296dd\nRemoving intermediate container 58440a93534c\n\x3cspan class=\x22hljs-keyword\x22\x3eStep\x3c\/span\x3e 4 : COPY . \/go\/src\/web-app\n---\x26gt; 82be55bc8e9f\nRemoving intermediate container cae309ac7757\n\x3cspan class=\x22hljs-keyword\x22\x3eStep\x3c\/span\x3e 5 : \x3cspan class=\x22hljs-builtin-name\x22\x3eRUN\x3c\/span\x3e go-wrapper download\n---\x26gt; Running \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e 6168e4e96ab1\n\x2b exec go \x3cspan class=\x22hljs-builtin-name\x22\x3eget\x3c\/span\x3e -v -d\n---\x26gt; 59664b190fee\nRemoving intermediate container 6168e4e96ab1\n\x3cspan class=\x22hljs-keyword\x22\x3eStep\x3c\/span\x3e 6 : \x3cspan class=\x22hljs-builtin-name\x22\x3eRUN\x3c\/span\x3e go-wrapper install\n---\x26gt; Running \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e e56f093b6f03\n\x2b exec go install -v\nweb-app\n---\x26gt; 584cd410fdcd\nRemoving intermediate container e56f093b6f03\n\x3cspan class=\x22hljs-keyword\x22\x3eStep\x3c\/span\x3e 7 : ENV\x3cspan class=\x22hljs-built_in\x22\x3e PORT \x3c\/span\x3e8080\n---\x26gt; Running \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e 298e2a415819\n---\x26gt; c87fd2b43977\nRemoving intermediate container 298e2a415819\n\x3cspan class=\x22hljs-keyword\x22\x3eStep\x3c\/span\x3e 8 : EXPOSE 8080\n---\x26gt; Running \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e 4f639a3790a7\n---\x26gt; 291167229d6f\nRemoving intermediate container 4f639a3790a7\n\x3cspan class=\x22hljs-keyword\x22\x3eStep\x3c\/span\x3e 9 : CMD go-wrapper \x3cspan class=\x22hljs-builtin-name\x22\x3erun\x3c\/span\x3e\n---\x26gt; Running \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e 6cb6bc28e406\n---\x26gt; b32ca91bdfe0\nRemoving intermediate container 6cb6bc28e406\nSuccessfully built b32ca91bdfe0\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e现在可以运行我们的 web-app 了，可以执行下面的命令。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs elixir\x22\x3eroot\x3cspan class=\x22hljs-variable\x22\x3e@demohost\x3c\/span\x3e\x3cspan class=\x22hljs-symbol\x22\x3e:~\/web-app\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e# docker run -p 8080:8080 --name=\x22test\x22 -d web-app\x3c\/span\x3e\n\x3cspan class=\x22hljs-number\x22\x3e7644606\x3c\/span\x3eb9af28a3ef1befd926f216f3058f500ffad44522c1d4756c576cfa85b\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e进入 \x3ccode\x3ehttp:\/\/localhost:8080\/World\x3c\/code\x3e 浏览你的 web 应用。你已经成功容器化了一个可重复的\/确定性的 Go web 应用。使用下面的命令来启动、停止并检查容器的状态。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs elixir\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e### 列出所有容器\x3c\/span\x3e\nroot\x3cspan class=\x22hljs-variable\x22\x3e@demohost\x3c\/span\x3e\x3cspan class=\x22hljs-symbol\x22\x3e:~\/\x3c\/span\x3e docker ps -a\n\n\x3cspan class=\x22hljs-comment\x22\x3e### 使用 id 启动容器\x3c\/span\x3e\nroot\x3cspan class=\x22hljs-variable\x22\x3e@demohost\x3c\/span\x3e\x3cspan class=\x22hljs-symbol\x22\x3e:~\/\x3c\/span\x3e docker start CONTAINER_ID_OF_WEB_APP\n\n\x3cspan class=\x22hljs-comment\x22\x3e### 使用 id 停止容器\x3c\/span\x3e\nroot\x3cspan class=\x22hljs-variable\x22\x3e@demohost\x3c\/span\x3e\x3cspan class=\x22hljs-symbol\x22\x3e:~\/\x3c\/span\x3e docker stop CONTAINER_ID_OF_WEB_APP\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3ch3\x3e\x3ca href=\x22#重新构建镜像\x22\x3e\x3c\/a\x3e重新构建镜像\x3c\/h3\x3e\n\x3cp\x3e假设你正在开发 web 应用程序并在更改代码。现在要在更新代码后查看结果，你需要重新生成 docker 镜像、停止旧镜像并运行新镜像，并且每次更改代码时都要这样做。为了使这个过程自动化，我们将使用 docker 卷在主机和容器之间共享一个目录。这意味着你不必为在容器内进行更改而重新构建镜像。容器如何检测你是否对 web 程序的源码进行了更改？答案是有一个名为 “Gin” 的好工具 \x3ca href=\x22https:\/\/github.com\/codegangsta\/gin\x22\x3ehttps:\/\/github.com\/codegangsta\/gin\x3c\/a\x3e，它能检测是否对源码进行了任何更改，然后重建镜像\/二进制文件并在容器内运行更新过代码的进程。\x3c\/p\x3e\n\x3cp\x3e要使这个过程自动化，我们将编辑 Dockerfile 并安装 Gin 将其作为入口命令来执行。我们将开放 \x3ccode\x3e3030\x3c\/code\x3e 端口（Gin 代理），而不是 \x3ccode\x3e8080\x3c\/code\x3e。 Gin 代理将转发流量到 web 程序的 \x3ccode\x3e8080\x3c\/code\x3e 端口。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs dockerfile\x22\x3eroot@demohost:~\/web-app\x3cspan class=\x22hljs-comment\x22\x3e# vim.tiny Dockerfile\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e# 得到最新的 golang docker 镜像\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eFROM\x3c\/span\x3e golang:latest\n\n\x3cspan class=\x22hljs-comment\x22\x3e# 在容器内部创建一个目录来存储我们的 web 应用，接着使它称为工作目录。\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eRUN\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e mkdir -p \/go\/src\/web-app\n\x3c\/span\x3e\x3cspan class=\x22hljs-keyword\x22\x3eWORKDIR\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e \/go\/src\/web-app\n\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e# 复制 web 程序到容器中\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eCOPY\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e . \/go\/src\/web-app\n\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e# 下载并安装第三方依赖到容器中\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eRUN\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e go get github.com\/codegangsta\/gin\n\x3c\/span\x3e\x3cspan class=\x22hljs-keyword\x22\x3eRUN\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e go-wrapper download\n\x3c\/span\x3e\x3cspan class=\x22hljs-keyword\x22\x3eRUN\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e go-wrapper install\n\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e# 设置 PORT 环境变量\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eENV\x3c\/span\x3e PORT \x3cspan class=\x22hljs-number\x22\x3e8080\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e# 给主机暴露 8080 端口，这样外部网络可以访问你的应用\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eEXPOSE\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e3030\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e# 启动容器时运行 Gin\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eCMD\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e gin run\n\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e# 告诉 Docker 启动容器运行的命令\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eCMD\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e [\x3cspan class=\x22hljs-string\x22\x3e\x22go-wrapper\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22run\x22\x3c\/span\x3e]\n\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e现在构建镜像并启动容器：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs elixir\x22\x3eroot\x3cspan class=\x22hljs-variable\x22\x3e@demohost\x3c\/span\x3e\x3cspan class=\x22hljs-symbol\x22\x3e:~\/web-app\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e# docker build --rm -t web-app .\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e我们会在当前 web 程序的根目录下运行 docker，并通过暴露的 \x3ccode\x3e3030\x3c\/code\x3e 端口链接 CWD （当前工作目录）到容器中的应用目录下。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs elixir\x22\x3eroot\x3cspan class=\x22hljs-variable\x22\x3e@demohost\x3c\/span\x3e\x3cspan class=\x22hljs-symbol\x22\x3e:~\/web-app\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e# docker run -p 3030:3030 -v `pwd`:\/go\/src\/web-app --name=\x22test\x22 -d web-app\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e打开 \x3ccode\x3ehttp:\/\/localhost:3030\/World\x3c\/code\x3e， 你就能看到你的 web 程序了。现在如果你改变了任何代码，会在浏览器刷新后反映在你的浏览器中。\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#总结\x22\x3e\x3c\/a\x3e总结\x3c\/h3\x3e\n\x3cp\x3e就是这样，我们的 Go web 应用已经运行在 Ubuntu 16.04 Docker 容器中运行了！你可以通过使用 Go 框架来快速开发 API、网络应用和后端服务，从而扩展当前的网络应用。\x3c\/p\x3e\n\x3chr\x3e\n\x3cp\x3evia: \x3ca href=\x22http:\/\/linoxide.com\/containers\/setup-go-docker-deploy-application\/\x22\x3ehttp:\/\/linoxide.com\/containers\/setup-go-docker-deploy-application\/\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e作者：\x3ca href=\x22http:\/\/linoxide.com\/author\/dwijadasd\/\x22\x3eDwijadas Dey\x3c\/a\x3e 译者：\x3ca href=\x22https:\/\/github.com\/geekpi\x22\x3egeekpi\x3c\/a\x3e 校对：\x3ca href=\x22https:\/\/github.com\/jasminepeng\x22\x3ejasminepeng\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e本文由 \x3ca href=\x22https:\/\/github.com\/LCTT\/TranslateProject\x22\x3eLCTT\x3c\/a\x3e 原创编译，\x3ca href=\x22https:\/\/linux.cn\/\x22\x3eLinux中国\x3c\/a\x3e 荣誉推出\x3c\/p\x3e\n\n          \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>如何在 Docker 中设置 Go 并部署应用</p><h2 id="原文链接">原文链接</h2><p><a href="https://www.zcfy.cc/article/how-setup-go-in-docker-and-deploy-an-application">https://www.zcfy.cc/article/how-setup-go-in-docker-and-deploy-an-application</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/qvn6r2cn1pe/" target="_blank">https://alili.tech/archive/qvn6r2cn1pe/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>