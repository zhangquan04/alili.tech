<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="老生常谈的跨域问题JSONP解决方式"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>老生常谈的跨域问题JSONP解决方式 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/qjr1nljjpvm/",
				"appid": "1613049289050283", 
				"title": "老生常谈的跨域问题JSONP解决方式 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-26T02:30:18"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/0j58in6148/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/rpo1kj36q29/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fqjr1nljjpvm%2f&text=%e8%80%81%e7%94%9f%e5%b8%b8%e8%b0%88%e7%9a%84%e8%b7%a8%e5%9f%9f%e9%97%ae%e9%a2%98JSONP%e8%a7%a3%e5%86%b3%e6%96%b9%e5%bc%8f"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fqjr1nljjpvm%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fqjr1nljjpvm%2f&text=%e8%80%81%e7%94%9f%e5%b8%b8%e8%b0%88%e7%9a%84%e8%b7%a8%e5%9f%9f%e9%97%ae%e9%a2%98JSONP%e8%a7%a3%e5%86%b3%e6%96%b9%e5%bc%8f"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fqjr1nljjpvm%2f&title=%e8%80%81%e7%94%9f%e5%b8%b8%e8%b0%88%e7%9a%84%e8%b7%a8%e5%9f%9f%e9%97%ae%e9%a2%98JSONP%e8%a7%a3%e5%86%b3%e6%96%b9%e5%bc%8f"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fqjr1nljjpvm%2f&is_video=false&description=%e8%80%81%e7%94%9f%e5%b8%b8%e8%b0%88%e7%9a%84%e8%b7%a8%e5%9f%9f%e9%97%ae%e9%a2%98JSONP%e8%a7%a3%e5%86%b3%e6%96%b9%e5%bc%8f"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e8%80%81%e7%94%9f%e5%b8%b8%e8%b0%88%e7%9a%84%e8%b7%a8%e5%9f%9f%e9%97%ae%e9%a2%98JSONP%e8%a7%a3%e5%86%b3%e6%96%b9%e5%bc%8f&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fqjr1nljjpvm%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fqjr1nljjpvm%2f&title=%e8%80%81%e7%94%9f%e5%b8%b8%e8%b0%88%e7%9a%84%e8%b7%a8%e5%9f%9f%e9%97%ae%e9%a2%98JSONP%e8%a7%a3%e5%86%b3%e6%96%b9%e5%bc%8f"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fqjr1nljjpvm%2f&title=%e8%80%81%e7%94%9f%e5%b8%b8%e8%b0%88%e7%9a%84%e8%b7%a8%e5%9f%9f%e9%97%ae%e9%a2%98JSONP%e8%a7%a3%e5%86%b3%e6%96%b9%e5%bc%8f"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fqjr1nljjpvm%2f&title=%e8%80%81%e7%94%9f%e5%b8%b8%e8%b0%88%e7%9a%84%e8%b7%a8%e5%9f%9f%e9%97%ae%e9%a2%98JSONP%e8%a7%a3%e5%86%b3%e6%96%b9%e5%bc%8f"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fqjr1nljjpvm%2f&title=%e8%80%81%e7%94%9f%e5%b8%b8%e8%b0%88%e7%9a%84%e8%b7%a8%e5%9f%9f%e9%97%ae%e9%a2%98JSONP%e8%a7%a3%e5%86%b3%e6%96%b9%e5%bc%8f"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">老生常谈的跨域问题JSONP解决方式</h1><div class="meta"><div class="postdate"><time datetime="2019-01-26" itemprop="datePublished">2019-01-26</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3e起因\x3c\/h2\x3e\n\x3cp\x3e说起来源...今天去茶水间倒水时，偶然听到公司面试官在问面试者前端跨域的如何解决。我心中默默想了一想，啪啪啪瞬间想出几个关键词，iframe，cors，同源策略，jsonp...转念一想，虽然这是很常见的面试题，然而我在开发过程中，还真没有用过jsonp这种方式...就连原理也说不好。一阵冷汗，? ，赶紧去找了相关资料。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e同源策略\x3c\/h2\x3e\n\x3cp\x3e对于同源策略，在这里我就不多累赘叙述了，简单来说，如果以下三项：\x3cstrong\x3e同一协议\x3c\/strong\x3e、\x3cstrong\x3e同一域名\x3c\/strong\x3e、\x3cstrong\x3e同一端口\x3c\/strong\x3e但凡有一项不满足，浏览器就会把\x3ccode\x3e No \x27Access-Control-Allow-Origin\x27 header is present on the requested resource\x3c\/code\x3e甩你一脸。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e解决方案\x3c\/h2\x3e\n\x3cp\x3e跨域问题可以说在前端方面不可避免，但同源策略毕竟在保护网络信息安全方面起到很大的作用。试想如果没有同源策略，别的网页可以轻松窃取你的cookie，而假如你的cookie中存有你的个人信息...太可怕了，不过话说回来同源策略带来的跨域问题也很头疼，幸好现在已经有多种方式能够解决。\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3eCORS 跨域资源共享策略（\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eJSONP\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3ewindow.name\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3edocument.domain(主域相同的情况下可用）\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3epostMessage(h5新引入）\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3ewebsocket(h5新引入，不受同源策略限制，所以说h5真是个好东西...?)\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e...\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e由于篇幅有限（好吧...其实是我写不了那么多），在这里对于其他解决方式就不一一详解了。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e正主来了，JSONP\x3c\/h2\x3e\n\x3cp\x3e\x3ccode\x3eJSONP\x3c\/code\x3e 是 \x3ccode\x3eJSON with Padding\x3c\/code\x3e的简称，是一种较为常用的解决跨域访问的方式。我们先来看一段示例代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ajax({\/\/此ajax方法是封装了XMLHttpRequest对象实现，具体代码与本文无关就不贴了\n  method : \x27get\x27,\n  url : \x27http:\/\/127.0.0.1:8787\x27,\n  data : {\n  \x27name\x27 : \x27小明\x27,\/\/此ajax方法会自动将数据以get方式提交\n  \x27age\x27 : 22\n  },\n  success : function (message) {\n    alert(message);\n  },\n  async : true\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs less\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-selector-tag\x22\x3eajax\x3c\/span\x3e({\x3cspan class=\x22hljs-comment\x22\x3e\/\/此ajax方法是封装了XMLHttpRequest对象实现，具体代码与本文无关就不贴了\x3c\/span\x3e\n  \x3cspan class=\x22hljs-attribute\x22\x3emethod \x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27get\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attribute\x22\x3eurl \x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27http:\/\/127.0.0.1:8787\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attribute\x22\x3edata \x3c\/span\x3e: {\n  \x3cspan class=\x22hljs-string\x22\x3e\x27name\x27\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x27小明\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-comment\x22\x3e\/\/此ajax方法会自动将数据以get方式提交\x3c\/span\x3e\n  \x3cspan class=\x22hljs-string\x22\x3e\x27age\x27\x3c\/span\x3e : \x3cspan class=\x22hljs-number\x22\x3e22\x3c\/span\x3e\n  },\n  \x3cspan class=\x22hljs-attribute\x22\x3esuccess \x3c\/span\x3e: function (message) {\n    alert(message);\n  },\n  \x3cspan class=\x22hljs-attribute\x22\x3easync \x3c\/span\x3e: true\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上面的代码很简单，浏览器端发起了一个异步ajax请求，让我们来看看服务端代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22app.get(\x27*\x27, function(req, res) {\/\/这里只截取了关键代码\n  res.send(\x26quot;测试数据\x26quot;);\n});\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3eapp.get(\x3cspan class=\x22hljs-string\x22\x3e\x27*\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(req, res)\x3c\/span\x3e \x3c\/span\x3e{\x3cspan class=\x22hljs-comment\x22\x3e\/\/这里只截取了关键代码\x3c\/span\x3e\n  res.send(\x3cspan class=\x22hljs-string\x22\x3e\x22测试数据\x22\x3c\/span\x3e);\n});\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e清晰，易懂～so，what happend？\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVJBiA?w=544\x26amp;h=88\x22 src=\x22https:\/\/static.alili.tech\/img\/bVJBiA?w=544\x26amp;h=88\x22 alt=\x22跨域报错\x22 title=\x22跨域报错\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e不出所料，浏览器甩了我一脸...\x3cbr\x3e易地再战！JSONP炸裂出场～\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function showJsonp(obj){\n  console.log(obj.message);\n}\nvar url = \x27http:\/\/127.0.0.1:8787\/?func=showJsonp\x27\nvar script = document.createElement(\x27script\x27);\nscript.setAttribute(\x27src\x27,url);\nscript.setAttribute(\x27type\x27,\x27text\/javascript\x27);\ndocument.getElementsByTagName(\x27head\x27)[0].appendChild(script);\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs qml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eshowJsonp\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eobj\x3c\/span\x3e)\x3c\/span\x3e{\n  \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(obj.message);\n}\n\x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eurl\x3c\/span\x3e = \x3cspan class=\x22hljs-string\x22\x3e\x27http:\/\/127.0.0.1:8787\/?func=showJsonp\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e script = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.createElement(\x3cspan class=\x22hljs-string\x22\x3e\x27script\x27\x3c\/span\x3e);\nscript.setAttribute(\x3cspan class=\x22hljs-string\x22\x3e\x27src\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-built_in\x22\x3eurl\x3c\/span\x3e);\nscript.setAttribute(\x3cspan class=\x22hljs-string\x22\x3e\x27type\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x27text\/javascript\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementsByTagName(\x3cspan class=\x22hljs-string\x22\x3e\x27head\x27\x3c\/span\x3e)[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].appendChild(script);\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e再来后台代码～\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22app.get(\x27*\x27, function(req, res) {\n  let callback = req.query.func;\n  let content = callback\x2b\x26quot;({\x27message\x27:\x27测试数据2\x27})\x26quot;;\n  res.send(content);\n});\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs haxe\x22\x3e\x3ccode\x3eapp.\x3cspan class=\x22hljs-keyword\x22\x3eget\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27*\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3c\/span\x3e(req, res) {\n  let \x3cspan class=\x22hljs-keyword\x22\x3ecallback\x3c\/span\x3e = req.query.func;\n  let content = \x3cspan class=\x22hljs-keyword\x22\x3ecallback\x3c\/span\x3e\x2b\x3cspan class=\x22hljs-string\x22\x3e\x22({\x27message\x27:\x27测试数据2\x27})\x22\x3c\/span\x3e;\n  res.send(content);\n});\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e结果：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVJBjD?w=543\x26amp;h=78\x22 src=\x22https:\/\/static.alili.tech\/img\/bVJBjD?w=543\x26amp;h=78\x22 alt=\x22jsonp解决跨域\x22 title=\x22jsonp解决跨域\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e大！获！全！胜！\x3cbr\x3e是时候分析一波战术策略了～在平常写代码的时候，可能很多人没有注意，浏览器对于script，iframe等标签的src等属性，是没有同源策略限制的。而jsonp就很好的利用了这一点～在我们发起请求时，url后跟了一个名为\x3ccode\x3efunc\x3c\/code\x3e的参数，而这个参数就是之后需要用到的回调函数名称。\x3cbr\x3e我们通过动态插入\x3ccode\x3escript\x3c\/code\x3e标签的方式，利用script标签的src属性发起请求，浏览器不会以同源策略来找事...而后台根据请求构造出的数据长啥样呢？\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22showJsonp({\x27message\x27:\x27测试数据2\x27})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-title\x22\x3eshowJsonp\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e({\x3cspan class=\x22hljs-string\x22\x3e\x27message\x27\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27测试数据2\x27\x3c\/span\x3e})\x3c\/span\x3e\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e告诉我！这段代码插入你的script标签内后，会发生啥？！\x3cbr\x3e当然是执行早就定义好的showJsonp函数啊～\x3cbr\x3ebingo，完美解决跨域问题～～\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e最后\x3c\/h2\x3e\n\x3cp\x3ejsonp的方式兼容性非常好，即便是那些老古董浏览器，也可以用jsonp的方式解决跨域问题，但是它也有所限制，它只能使用get方式发起请求，并且对于不同域之间页面的js互相调用无能为力。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>老生常谈的跨域问题JSONP解决方式</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000008445998">https://segmentfault.com/a/1190000008445998</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/qjr1nljjpvm/" target="_blank">https://alili.tech/archive/qjr1nljjpvm/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>