<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="JavaScript 中的错误处理机制"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>JavaScript 中的错误处理机制 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/h1hfvr2a2nj/",
				"appid": "1613049289050283", 
				"title": "JavaScript 中的错误处理机制 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-01T02:30:10"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/a0ukpm125gm/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/hjgkntbgqek/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fh1hfvr2a2nj%2f&text=JavaScript%20%e4%b8%ad%e7%9a%84%e9%94%99%e8%af%af%e5%a4%84%e7%90%86%e6%9c%ba%e5%88%b6"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fh1hfvr2a2nj%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fh1hfvr2a2nj%2f&text=JavaScript%20%e4%b8%ad%e7%9a%84%e9%94%99%e8%af%af%e5%a4%84%e7%90%86%e6%9c%ba%e5%88%b6"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fh1hfvr2a2nj%2f&title=JavaScript%20%e4%b8%ad%e7%9a%84%e9%94%99%e8%af%af%e5%a4%84%e7%90%86%e6%9c%ba%e5%88%b6"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fh1hfvr2a2nj%2f&is_video=false&description=JavaScript%20%e4%b8%ad%e7%9a%84%e9%94%99%e8%af%af%e5%a4%84%e7%90%86%e6%9c%ba%e5%88%b6"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=JavaScript%20%e4%b8%ad%e7%9a%84%e9%94%99%e8%af%af%e5%a4%84%e7%90%86%e6%9c%ba%e5%88%b6&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fh1hfvr2a2nj%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fh1hfvr2a2nj%2f&title=JavaScript%20%e4%b8%ad%e7%9a%84%e9%94%99%e8%af%af%e5%a4%84%e7%90%86%e6%9c%ba%e5%88%b6"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fh1hfvr2a2nj%2f&title=JavaScript%20%e4%b8%ad%e7%9a%84%e9%94%99%e8%af%af%e5%a4%84%e7%90%86%e6%9c%ba%e5%88%b6"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fh1hfvr2a2nj%2f&title=JavaScript%20%e4%b8%ad%e7%9a%84%e9%94%99%e8%af%af%e5%a4%84%e7%90%86%e6%9c%ba%e5%88%b6"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fh1hfvr2a2nj%2f&title=JavaScript%20%e4%b8%ad%e7%9a%84%e9%94%99%e8%af%af%e5%a4%84%e7%90%86%e6%9c%ba%e5%88%b6"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">JavaScript 中的错误处理机制</h1><div class="meta"><div class="postdate"><time datetime="2019-02-01" itemprop="datePublished">2019-02-01</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e错误处理在开发和调试过程中都显得尤为重要。有些没有进行错误处理的应用，直接就将浏览器的错误展示给了用户，极大的降低了用户体验。比如有些很 low 的网站，打开某些页面就直接弹出 \x22object\x22 这样的错误，用户看到之后一脸懵逼，心想这是什么鬼？让人感觉极其的不专业。可见错误处理对一个应用来说是多么的重要。\x3c\/p\x3e\n\x3cp\x3e这篇文章主要是给大家科普一些关于错误处理的知识，让大家在脑海中有一个概览。下一篇文章中我会结合具体的项目以及当前主流的一些框架，比如react, redux，来更深入的介绍如何运用这些框架去封装一整套错误处理的解决方案。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3eerror 对象\x3c\/h2\x3e\n\x3cp\x3eError 构造对象可以实例化一个 \x3ccode\x3eerror\x3c\/code\x3e 对象 (也就是Error 实例)，而 error 对象就是一个包含了错误信息的对象。当代码解析或者运行时发生错误，javascript 引擎就会自动产生并抛出一个 error 对象, 然后程序就中断在发生错误的地方。\x3c\/p\x3e\n\x3cp\x3e示例：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const error = new Error(\x27Whoop!\x27);\nerror.message; \/\/ Whoop!\nerror.name; \/\/ Error\nerror.stack; \/\/ \x26quot;Error: Whoops! at \x3canonymous\x3e:1:13\x26quot;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e error = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eError\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27Whoop!\x27\x3c\/span\x3e);\nerror.message; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Whoop!\x3c\/span\x3e\nerror.name; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Error\x3c\/span\x3e\nerror.stack; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ \x22Error: Whoops! at \x26lt;anonymous\x26gt;:1:13\x22\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们常用的 \x3ccode\x3emessage\x3c\/code\x3e 和 \x3ccode\x3ename\x3c\/code\x3e 都是 \x3ccode\x3eerror\x3c\/code\x3e 的标准属性，由于各个浏览器厂商对 error 进行了不同的扩展，所以在不同的浏览器中，error 也有不同的属性和方法, 非标准属性中我们常用的是 \x3ccode\x3estack\x3c\/code\x3e 属性（很多浏览器都扩展了这一属性), 它用来表示栈跟踪信息。\x3c\/p\x3e\n\x3ctable\x3e\n\x3cthead\x3e\x3ctr\x3e\n\x3cth align=\x22left\x22\x3e属性\x3c\/th\x3e\n\x3cth align=\x22left\x22\x3e含义\x3c\/th\x3e\n\x3c\/tr\x3e\x3c\/thead\x3e\n\x3ctbody\x3e\n\x3ctr\x3e\n\x3ctd align=\x22left\x22\x3emessage\x3c\/td\x3e\n\x3ctd align=\x22left\x22\x3e错误信息\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22left\x22\x3ename\x3c\/td\x3e\n\x3ctd align=\x22left\x22\x3e错误类型\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22left\x22\x3econstructor\x3c\/td\x3e\n\x3ctd align=\x22left\x22\x3e指定一个函数用来创建实例的原型，也就是指定构造器（创建自定义 Error 会用到）\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22left\x22\x3estack (非标准)\x3c\/td\x3e\n\x3ctd align=\x22left\x22\x3e栈跟踪信息\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3c\/tbody\x3e\n\x3c\/table\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3eerror 类型\x3c\/h2\x3e\n\x3cp\x3e除了普通的 \x3ccode\x3eError\x3c\/code\x3e 构造对象以外， javascript 还实现了其他几种主要的 error 构造对象\x3csup id=\x22fnref-1\x22\x3e\x3ca href=\x22#fn-1\x22 class=\x22footnote-ref\x22\x3e1\x3c\/a\x3e\x3c\/sup\x3e.\x3c\/p\x3e\n\x3ctable\x3e\n\x3cthead\x3e\x3ctr\x3e\n\x3cth align=\x22center\x22\x3e类型\x3c\/th\x3e\n\x3cth align=\x22left\x22\x3e解析\x3c\/th\x3e\n\x3cth align=\x22center\x22\x3e实例\x3c\/th\x3e\n\x3c\/tr\x3e\x3c\/thead\x3e\n\x3ctbody\x3e\n\x3ctr\x3e\n\x3ctd align=\x22center\x22\x3eEvalError\x3c\/td\x3e\n\x3ctd align=\x22left\x22\x3eeval错误。跟全局函数 eval() 有关的错误，在 ES5 之后已经不再出现了\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22center\x22\x3eInternalError\x3c\/td\x3e\n\x3ctd align=\x22left\x22\x3e内部错误。由 JavaScript 引擎抛出的错误\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22center\x22\x3eRangeError\x3c\/td\x3e\n\x3ctd align=\x22left\x22\x3e范围错误。发生在一个数值或参数超出其合法范围，主要包括超出数组范围或者超出数字取值范围\x3c\/td\x3e\n\x3ctd align=\x22center\x22\x3enew Array(-1); (1234).toExponential(21);\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22center\x22\x3eReferenceError\x3c\/td\x3e\n\x3ctd align=\x22left\x22\x3e引用错误。通常是由于引用了一个不存在的值。\x3c\/td\x3e\n\x3ctd align=\x22center\x22\x3ea.toString();\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22center\x22\x3eSyntaxError\x3c\/td\x3e\n\x3ctd align=\x22left\x22\x3e语法错误。\x3c\/td\x3e\n\x3ctd align=\x22center\x22\x3ea ? a\x2b1;\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22center\x22\x3eTypeError\x3c\/td\x3e\n\x3ctd align=\x22left\x22\x3e类型错误。通常是因为在执行特定的类型操作时，变量的类型不符合要求。例如变量中保存着意外类型，访问不存在的方法等。\x3c\/td\x3e\n\x3ctd align=\x22center\x22\x3evar a = new {}; var a = {a:1}; a.reverse(); \/\/ 对象并没有 reverser 方法\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22center\x22\x3eURIError\x3c\/td\x3e\n\x3ctd align=\x22left\x22\x3edecodeURI() 或者 encodeURI() 传入非法参数时，也包括 encodeURIComponent() 和 decodeURIComponent()\x3c\/td\x3e\n\x3ctd align=\x22center\x22\x3edecodeURI(\x27\x3ca href=\x22http:\/\/www.test.com\x26amp;%\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/www.test.com\x26amp;%\x3c\/a\x3e\x27); encodeURIComponent(\x27uD800\x27);\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3c\/tbody\x3e\n\x3c\/table\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3eencodeURI 和 encodeURIComponent 的区别\x3c\/h3\x3e\n\x3cp\x3e这里顺便说一下 \x3ccode\x3eencodeURI\x3c\/code\x3e 和 \x3ccode\x3eencodeURIComponent\x3c\/code\x3e 的区别。已经了解的同学可以忽略这一小部分，继续往前面看。\x3c\/p\x3e\n\x3cblockquote\x3e\x3cstrong\x3eencodeURI 是对统一资源标识符 (URI) \x3ccode\x3e全部编码\x3c\/code\x3e，而 encodeURIComponent 对统一资源标识符 (URI) \x3ccode\x3e部分编码\x3c\/code\x3e。\x3c\/strong\x3e\x3c\/blockquote\x3e\n\x3cp\x3e假设一个 URI 是一个完整的 URI, 那么我们不必对那些在 URI 中保留的并且带有特殊含义的字符进行编码。由于 encodeURI 会替换掉所有字符，但是却不包含一些保留字符，如 \x22\x26amp;\x22, \x22\x2b\x22, \x22=\x22 等（这些字符在 GET 和 POST 请求中是特殊字符，需要被编码），所以 \x3ccode\x3eencodeURI\x3c\/code\x3e 本身无法产生能使用与 HTTP GET 或者 POST 请求的 URI。但是我们可以使用 \x3ccode\x3eencodeURIComponent\x3c\/code\x3e 来对这些字符进行编码。\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3ccode\x3eencodeURIComponent\x3c\/code\x3e 转义除了字母、数字、(、)、.、!、~、*、\x27、-和_之外的所有字符。\x3cbr\x3e 为了避免服务器收到不可预知的请求，对任何用户输入的作为 URI 部分的内容都需要用 encodeURIComponent 进行转义。\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e抛出和捕获错误 throw and try...catch\x3c\/h2\x3e\n\x3cp\x3e通常使用 \x3ccode\x3ethrow\x3c\/code\x3e 语句抛出错误，并用 \x3ccode\x3etry...catch\x3c\/code\x3e 进行捕获。通常会把所有可能会抛出错误的代码都放在 \x3ccode\x3etry\x3c\/code\x3e 语句块中，而把那些用于错误处理的代码放在 \x3ccode\x3ecatch\x3c\/code\x3e 块中。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3ethrow 语句\x3c\/h3\x3e\n\x3cp\x3e\x3ccode\x3ethrow\x3c\/code\x3e 过程是阻塞的，程序会中断在第一个抛出错误的地方，所以后面的代码不会执行。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22throw new SyntaxError(\x27this is syntax error\x27); \nthrow 123; \/\/ 不执行\nthrow \x27hi there\x27; \/\/ 不执行\nthrow true;  \/\/ 不执行\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eSyntaxError\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27this is syntax error\x27\x3c\/span\x3e); \n\x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e123\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 不执行\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27hi there\x27\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 不执行\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 不执行\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3ecatch 语句\x3c\/h3\x3e\n\x3cp\x3e\x3ccode\x3ecatch\x3c\/code\x3e 代码块捕获错误之后，程序不会中断，会按照正常流程继续执行下去。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22try {\n  throw new Error(\x27Whoops!\x27);\n} catch (e) {\n  console.log(e.name \x2b \x27:\x27 \x2b e.message);\n}\nconsole.log(\x27hello!\x27);\n\n\/\/ Error:Whoops!\n\/\/ hello!\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3etry\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eError\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27Whoops!\x27\x3c\/span\x3e);\n} \x3cspan class=\x22hljs-keyword\x22\x3ecatch\x3c\/span\x3e (e) {\n  \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(e.name \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27:\x27\x3c\/span\x3e \x2b e.message);\n}\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27hello!\x27\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ Error:Whoops!\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ hello!\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3efinally 语句\x3c\/h3\x3e\n\x3cp\x3e\x3ccode\x3efinally\x3c\/code\x3e 在 \x3ccode\x3etry...catch\x3c\/code\x3e 中是可选的，但是一旦使用了它，它里面的代码就一定会被执行，也就是说不管 \x3ccode\x3etry\x3c\/code\x3e 语句块中的代码是否正常执行，\x3ccode\x3efinnaly\x3c\/code\x3e 都会被执行。正如下面的代码, 即使在 \x3ccode\x3etry\x3c\/code\x3e 中资源被阻塞，由于我们在 \x3ccode\x3efinnaly\x3c\/code\x3e 中执行了关闭操作，文件最后还是会被关闭。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22openMyFile()\ntry {\n   \/\/ 阻塞资源\n   writeMyFile(theData);\n} finally {\n   closeMyFile(); \/\/ 始终会关闭资源\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3eopenMyFile()\n\x3cspan class=\x22hljs-keyword\x22\x3etry\x3c\/span\x3e {\n   \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 阻塞资源\x3c\/span\x3e\n   writeMyFile(theData);\n} \x3cspan class=\x22hljs-keyword\x22\x3efinally\x3c\/span\x3e {\n   closeMyFile(); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 始终会关闭资源\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e处理一个特定的错误。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    try {\n      foo.bar();\n    } catch (e) {\n      switch (e.name) {\n        case \x27RangeError\x27:\n          \/\/do something\n          console.log(\x27RangeError: \x27 \x2b e.message);\n          break;\n        case \x27ReferenceError\x27:\n          \/\/do something\n          console.log(\x27ReferenceError: \x27 \x2b e.message);\n          break;\n        default:\n          console.log(e.name \x2b \x27:\x27 \x2b e.message);\n      }\n    }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e    \x3cspan class=\x22hljs-keyword\x22\x3etry\x3c\/span\x3e {\n      foo.bar();\n    } \x3cspan class=\x22hljs-keyword\x22\x3ecatch\x3c\/span\x3e (e) {\n      \x3cspan class=\x22hljs-keyword\x22\x3eswitch\x3c\/span\x3e (e.name) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27RangeError\x27\x3c\/span\x3e:\n          \x3cspan class=\x22hljs-comment\x22\x3e\/\/do something\x3c\/span\x3e\n          \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27RangeError: \x27\x3c\/span\x3e \x2b e.message);\n          \x3cspan class=\x22hljs-keyword\x22\x3ebreak\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27ReferenceError\x27\x3c\/span\x3e:\n          \x3cspan class=\x22hljs-comment\x22\x3e\/\/do something\x3c\/span\x3e\n          \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27ReferenceError: \x27\x3c\/span\x3e \x2b e.message);\n          \x3cspan class=\x22hljs-keyword\x22\x3ebreak\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e:\n          \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(e.name \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27:\x27\x3c\/span\x3e \x2b e.message);\n      }\n    }\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3eerror 事件\x3c\/h2\x3e\n\x3cblockquote\x3e\x3cstrong\x3e任何没有 catch 的错误都会触发 window 对象的 error 事件。\x3c\/strong\x3e\x3c\/blockquote\x3e\n\x3cp\x3eerror 事件可以接收三个参数：错误消息、错误所在的 URL 和行号。你可以通过以下两种方式给 window 绑上 error 事件\x3csup id=\x22fnref-2\x22\x3e\x3ca href=\x22#fn-2\x22 class=\x22footnote-ref\x22\x3e2\x3c\/a\x3e\x3c\/sup\x3e。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22  \/\/ message: 错误消息, source: 发生错误文件的 URL, lineno: 错误行号\n\n  \/\/ 方法一\n  window.onerror = function(messageOrEvent, source, lineno, colno, error) {\n    alert(messageOrEvent, source, lineno, colno, error);\n  }\n  \n  or \n  \n  window.onerror = console.log;\n  throw new Error(\x27whoops!\x27);\n  \n  \/\/ 方法二 \n  window.addEventListener(\x27error\x27, function(errorEvent){\n      alert(errorEvent.error);\n  });\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ message: 错误消息, source: 发生错误文件的 URL, lineno: 错误行号\x3c\/span\x3e\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 方法一\x3c\/span\x3e\n  \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.onerror = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3emessageOrEvent, source, lineno, colno, error\x3c\/span\x3e) \x3c\/span\x3e{\n    alert(messageOrEvent, source, lineno, colno, error);\n  }\n  \n  or \n  \n  \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.onerror = \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log;\n  \x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eError\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27whoops!\x27\x3c\/span\x3e);\n  \n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 方法二 \x3c\/span\x3e\n  \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27error\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eerrorEvent\x3c\/span\x3e)\x3c\/span\x3e{\n      alert(errorEvent.error);\n  });\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在实际情况中，error 事件并不常用（但是在某些情况下，如微信端的调试，error 事件还是挺有用的），因为我们还是希望所有的异常都能得到很好的处理，而不是把错误交给浏览器。但有的时候并不是所有的错误都能够被扑获，并且某些业务场景会使用到追踪浏览器报错的工具，这时候可能就需要将浏览器的错误抛出去，所以在这种情况下也需要去全局监听 error 事件。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3e自定义错误类型 Custom Error Types\x3c\/h2\x3e\n\x3cp\x3e创建一个自定义类 CustomError, 以方便去扩展更多的自定义 Error\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3eCustomError.js\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22class CustomError extends Error {\n  constructor(message) {\n    super(message);\n    this.name = this.constructor.name;\n    if (typeof Error.captureStackTrace === \x27function\x27) {\n      \/\/ 在浏览器领域，除了使用V8引擎的 Chrome，\n      \/\/ 其它浏览器中不存在 Error.captureStackTrace()这一接口,\n      \/\/ 所以在这里做一个条件判断。\n      Error.captureStackTrace(this, this.constructor); \/\/ 返回调用堆栈信息, 用于在 error 对象上添加合理的 stack 属性。\n    } else {\n      this.stack = new Error(message).stack;\n    }\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs scala\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eCustomError\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eError\x3c\/span\x3e \x3c\/span\x3e{\n  constructor(message) {\n    \x3cspan class=\x22hljs-keyword\x22\x3esuper\x3c\/span\x3e(message);\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.name = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.constructor.name;\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (typeof \x3cspan class=\x22hljs-type\x22\x3eError\x3c\/span\x3e.captureStackTrace === \x3cspan class=\x22hljs-symbol\x22\x3e\x27functio\x3c\/span\x3en\x27) {\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 在浏览器领域，除了使用V8引擎的 Chrome，\x3c\/span\x3e\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 其它浏览器中不存在 Error.captureStackTrace()这一接口,\x3c\/span\x3e\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 所以在这里做一个条件判断。\x3c\/span\x3e\n      \x3cspan class=\x22hljs-type\x22\x3eError\x3c\/span\x3e.captureStackTrace(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.constructor); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 返回调用堆栈信息, 用于在 error 对象上添加合理的 stack 属性。\x3c\/span\x3e\n    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.stack = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eError\x3c\/span\x3e(message).stack;\n    }\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader9\x22\x3eError.captureStackTrace\x3c\/h3\x3e\n\x3cp\x3eError.captureStackTrace 是用来在 targetObject 中添加一个 \x3ccode\x3e.stack\x3c\/code\x3e 属性。对该属性进行访问时，将以字符串的形式返回 Error.captureStackTrace() 语句被调用时的代码位置信息(即：调用栈历史)。\x3c\/p\x3e\n\x3cblockquote\x3e\x3ccode\x3eError.captureStackTrace(targetObject[, constructorOpt])\x3c\/code\x3e\x3c\/blockquote\x3e\n\x3cp\x3e除了 targetObject, captureStackTrace 还接受一个类型为 function 的可选参数 constructorOpt，当传递该参数时，调用栈中所有 constructorOpt 函数之上的信息(包括 constructorOpt 函数自身)，都会在访问 targetObject.stack 时被忽略。当需要对终端用户隐藏内部的技术细节时, constructorOpt 参数会很有用。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader10\x22\x3e扩展自定义 Error 类型\x3c\/h3\x3e\n\x3cp\x3e通过基类 \x3ccode\x3eCustomError\x3c\/code\x3e，我们可以创建出更多的自定义 \x3cstrong\x3eError\x3c\/strong\x3e, 比如下面的 \x3ccode\x3eHttpRequestError\x3c\/code\x3e 和 \x3ccode\x3eLoginExpiredError\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3eHttpRequestError.js\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22class HttpRequestError extends CustomError {\n  constructor(message, requestId, code, httpStatusCode) {\n    const defaultAPIErrorMessage = () =\x3e {\n      \/\/ 检查是否有网\n      return window.navigator.onLine ? \x27Something wrong\x27 : \x27No connection\x27;\n    };\n\n    message = message || defaultAPIErrorMessage();\n    super(message);\n\n    this.requestId = requestId;\n    this.code = code;\n    this.httpStatusCode = httpStatusCode;\n  }\n}\n\nthrow new HttpRequestError(null, \x27requestId\x27, \x27code\x27, \x27httpStatusCode\x27);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs scala\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eHttpRequestError\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eCustomError\x3c\/span\x3e \x3c\/span\x3e{\n  constructor(message, requestId, code, httpStatusCode) {\n    const defaultAPIErrorMessage = () =\x26gt; {\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 检查是否有网\x3c\/span\x3e\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e window.navigator.onLine ? \x3cspan class=\x22hljs-symbol\x22\x3e\x27Something\x3c\/span\x3e wrong\x27 : \x3cspan class=\x22hljs-symbol\x22\x3e\x27No\x3c\/span\x3e connection\x27;\n    };\n\n    message = message || defaultAPIErrorMessage();\n    \x3cspan class=\x22hljs-keyword\x22\x3esuper\x3c\/span\x3e(message);\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.requestId = requestId;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.code = code;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.httpStatusCode = httpStatusCode;\n  }\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eHttpRequestError\x3c\/span\x3e(\x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e, \x3cspan class=\x22hljs-symbol\x22\x3e\x27requestI\x3c\/span\x3ed\x27, \x3cspan class=\x22hljs-symbol\x22\x3e\x27cod\x3c\/span\x3ee\x27, \x3cspan class=\x22hljs-symbol\x22\x3e\x27httpStatusCod\x3c\/span\x3ee\x27);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3eLoginExpiredError.js\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22class LoginExpiredError extends CustomError {\n  constructor(message) {\n    message = message || \x27Your session has expired!\x27;\n\n    super(message);\n  }\n}\n\nthrow new LoginExpiredError();\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs scala\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eLoginExpiredError\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eCustomError\x3c\/span\x3e \x3c\/span\x3e{\n  constructor(message) {\n    message = message || \x3cspan class=\x22hljs-symbol\x22\x3e\x27Your\x3c\/span\x3e session has expired!\x27;\n\n    \x3cspan class=\x22hljs-keyword\x22\x3esuper\x3c\/span\x3e(message);\n  }\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eLoginExpiredError\x3c\/span\x3e();\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e当我们创建了各种自定义 Error 之后，我们可以在不同的场景去使用它们了，比如在 http 请求失败的时候抛出 HttpRequestError，并弹出对话框提示用户。在用户登录过期之后，抛出 LoginExpiredError，弹出对话框，并自动 logout 等等。通过抛出不同的 Error 类型，才能让我们进行不同的扑获处理。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22  const deffer = Q.deffer();\n\n  if (expired) {\n    deffer.reject(new LoginExpiredError()); \/\/ 通过 promise 抛出异常\n  }\n\n  if (error instanceof LoginExpiredError) { \/\/ 扑获异常\n    logout();\n  }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs aspectj\x22\x3e\x3ccode\x3e  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e deffer = Q.deffer();\n\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (expired) {\n    deffer.reject(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e LoginExpiredError()); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 通过 promise 抛出异常\x3c\/span\x3e\n  }\n\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3eerror\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3einstanceof\x3c\/span\x3e LoginExpiredError) { \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 扑获异常\x3c\/span\x3e\n    logout();\n  }\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader11\x22\x3e结尾\x3c\/h2\x3e\n\x3cp\x3e关于 Error 的介绍就先讲到这里。\x3c\/p\x3e\n\x3chr\x3e\n\x3col\x3e\n\x3cli id=\x22fn-1\x22\x3e \x3ca href=\x22https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/JavaScript\/Reference\/Global_Objects\/Error\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eError in MDN\x3c\/a\x3e \x3ca href=\x22#fnref-1\x22 class=\x22footnote-backref\x22\x3e↩\x3c\/a\x3e\n\x3c\/li\x3e\n\x3cli id=\x22fn-2\x22\x3e \x3ca href=\x22https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/API\/GlobalEventHandlers\/onerror\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ewindow.onerror\x3c\/a\x3e \x3ca href=\x22#fnref-2\x22 class=\x22footnote-backref\x22\x3e↩\x3c\/a\x3e\n\x3c\/li\x3e\n\x3c\/ol\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>JavaScript 中的错误处理机制</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000007384055">https://segmentfault.com/a/1190000007384055</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/h1hfvr2a2nj/" target="_blank">https://alili.tech/archive/h1hfvr2a2nj/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>