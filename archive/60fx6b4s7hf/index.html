<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="jsonp 跨域原理分析"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>jsonp 跨域原理分析 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/60fx6b4s7hf/",
				"appid": "1613049289050283", 
				"title": "jsonp 跨域原理分析 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-12T02:30:24"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/6splyzrz2df/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/bexb3ap9p7i/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f60fx6b4s7hf%2f&text=jsonp%20%e8%b7%a8%e5%9f%9f%e5%8e%9f%e7%90%86%e5%88%86%e6%9e%90"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f60fx6b4s7hf%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f60fx6b4s7hf%2f&text=jsonp%20%e8%b7%a8%e5%9f%9f%e5%8e%9f%e7%90%86%e5%88%86%e6%9e%90"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f60fx6b4s7hf%2f&title=jsonp%20%e8%b7%a8%e5%9f%9f%e5%8e%9f%e7%90%86%e5%88%86%e6%9e%90"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f60fx6b4s7hf%2f&is_video=false&description=jsonp%20%e8%b7%a8%e5%9f%9f%e5%8e%9f%e7%90%86%e5%88%86%e6%9e%90"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=jsonp%20%e8%b7%a8%e5%9f%9f%e5%8e%9f%e7%90%86%e5%88%86%e6%9e%90&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f60fx6b4s7hf%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f60fx6b4s7hf%2f&title=jsonp%20%e8%b7%a8%e5%9f%9f%e5%8e%9f%e7%90%86%e5%88%86%e6%9e%90"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f60fx6b4s7hf%2f&title=jsonp%20%e8%b7%a8%e5%9f%9f%e5%8e%9f%e7%90%86%e5%88%86%e6%9e%90"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f60fx6b4s7hf%2f&title=jsonp%20%e8%b7%a8%e5%9f%9f%e5%8e%9f%e7%90%86%e5%88%86%e6%9e%90"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f60fx6b4s7hf%2f&title=jsonp%20%e8%b7%a8%e5%9f%9f%e5%8e%9f%e7%90%86%e5%88%86%e6%9e%90"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">jsonp 跨域原理分析</h1><div class="meta"><div class="postdate"><time datetime="2019-01-12" itemprop="datePublished">2019-01-12</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch3 id=\x22articleHeader0\x22\x3e本篇文章借鉴自 \x3ca href=\x22http:\/\/www.cnblogs.com\/yunfeifei\/p\/4138632.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e博客园文章\x3c\/a\x3e\n\x3c\/h3\x3e\n\x3ch6\x3e\x3ca href=\x22https:\/\/hugeorange.github.io\/2017\/06\/13\/jsonp%E5%8E%9F%E7%90%86\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e原文地址\x3c\/a\x3e\x3c\/h6\x3e\n\x3cblockquote\x3e\n\x3cp\x3eAJAX即“Asynchronous Javascript And XML”（异步JavaScript和XML），是指一种创建交互式网页应用的网页开发技术。\x3c\/p\x3e\n\x3cp\x3eAJAX 的出现使得网页可以通过在后台与服务器进行少量数据交换，实现网页的局部刷新。\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e但是出于安全的考虑，ajax不允许跨域通信(浏览器同源策略)。\x3cbr\x3e如果尝试从不同的域请求数据，就会出现错误（跨域错误）。\x3cbr\x3e在实际开发中，往往需要进行跨于请求，这时要怎么办呢？\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e关于ajax跨域请求？\x3c\/h3\x3e\n\x3cp\x3e1、Ajax为什么不能跨域？到底是卡在哪个环节了？。 （请求成功了，但客户端浏览器拿不到请求结果）\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22Ajax其实就是向服务器发送一个GET或POST请求，然后取得服务器响应结果，返回客户端。\n\n理论上这是没有任何问题的，然而普通ajax跨域请求，在服务器端不会有任何问题，只是服务端响应数据返回给浏览器的时候，\n\n浏览器根据响应头的Access-Control-Allow-Origin字段的值来判断是否有权限获取数据，\n\n一般情况下，服务器端如果没有在这个字段做特殊处理的话，跨域是没有权限访问的，所以响应数据被浏览器给拦截了，\n\n所以在ajax回调函数里是获取不到数据的。所以现在ajax跨域的问题可以转化为数据怎么拿回客户端的问题。\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs ada\x22\x3e\x3ccode\x3eAjax其实就是向服务器发送一个GET或POST请求，然后取得服务器响应结果，返回客户端。\n\n理论上这是没有任何问题的，然而普通ajax跨域请求，在服务器端不会有任何问题，只是服务端响应数据返回给浏览器的时候，\n\n浏览器根据响应头的\x3cspan class=\x22hljs-keyword\x22\x3eAccess\x3c\/span\x3e-Control-Allow-Origin字段的值来判断是否有权限获取数据，\n\n一般情况下，服务器端如果没有在这个字段做特殊处理的话，跨域是没有权限访问的，所以响应数据被浏览器给拦截了，\n\n所以在ajax回调函数里是获取不到数据的。所以现在ajax跨域的问题可以转化为数据怎么拿回客户端的问题。\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e2、  html的script标签，img标签，iframe标签，可以请求第三方的资源（不受同源策略影响）\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22web页面可以加载放在任意站点的js、css、图片等资源，不会受到\x26quot;跨域\x26quot;的影响。\n\n这个时候，我们会想到：既然我们可以调用第三方站点的js,那么如果我们将数据放到第三方站点的js中不就可以将数据带到客户端了吗？\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs x86asm\x22\x3e\x3ccode\x3eweb页面可以加载放在任意站点的\x3cspan class=\x22hljs-keyword\x22\x3ejs\x3c\/span\x3e、css、图片等资源，不会受到\x3cspan class=\x22hljs-string\x22\x3e\x22跨域\x22\x3c\/span\x3e的影响。\n\n这个时候，我们会想到：既然我们可以调用第三方站点的\x3cspan class=\x22hljs-keyword\x22\x3ejs\x3c\/span\x3e,那么如果我们将数据放到第三方站点的\x3cspan class=\x22hljs-keyword\x22\x3ejs\x3c\/span\x3e中不就可以将数据带到客户端了吗？\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3eJSONP\x3c\/h3\x3e\n\x3cp\x3e1、什么是JSONP？\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22JSONP(JSON with Padding（填充）)是JSON的一种“使用模式”，可用于解决主流浏览器的跨域数据访问的问题。\n\n其核心思想是利用JS标签里面的跨域特性进行跨域数据访问，\n在JS标签里面存在的是一个跨域的URL，实际执行的时候通过这个URL获得一段字符串，\n这段返回的字符串必须是一个合法的JS调用，通过EVAL这个字符串来完成对获得的数据的处理。\n\n即： \x3cscript src=\x27url\x27\x3e\x3c\/script\x3e\n\nJSONP是一个非官方的协议，它允许在服务器端集成Script tags返回至客户端，\n通过javascript callback的形式实现跨域访问（这仅仅是JSONP简单的实现形式）。\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3eJSONP(\x3cspan class=\x22hljs-built_in\x22\x3eJSON\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ewith\x3c\/span\x3e Padding（填充）)是\x3cspan class=\x22hljs-built_in\x22\x3eJSON\x3c\/span\x3e的一种“使用模式”，可用于解决主流浏览器的跨域数据访问的问题。\n\n其核心思想是利用JS标签里面的跨域特性进行跨域数据访问，\n在JS标签里面存在的是一个跨域的URL，实际执行的时候通过这个URL获得一段字符串，\n这段返回的字符串必须是一个合法的JS调用，通过EVAL这个字符串来完成对获得的数据的处理。\n\n即： \x26lt;script src=\x3cspan class=\x22hljs-string\x22\x3e\x27url\x27\x3c\/span\x3e\x26gt;\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n\nJSONP是一个非官方的协议，它允许在服务器端集成Script tags返回至客户端，\n通过javascript callback的形式实现跨域访问（这仅仅是JSONP简单的实现形式）。\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e2、JSONP的粗糙实现\x3c\/p\x3e\n\x3cp\x3e下面我们通过一个例子来说明一下JSONP是如何实现ajax跨域请求的。\x3c\/p\x3e\n\x3ch4\x3ehtml 代码\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c!DOCTYPE html\x3e\n\x3chtml lang=\x26quot;en\x26quot;\x3e\n\x3chead\x3e\n    \x3cmeta charset=\x26quot;UTF-8\x26quot;\x3e\n    \x3ctitle\x3eTitle\x3c\/title\x3e\n\x3c\/head\x3e\n\x3cbody\x3e\n    \x3cdiv\x3ejsonp\x3c\/div\x3e\n\x3c\/body\x3e\n\x3cscript\x3e\n    function getremotedata(data) {\n        console.log(data);\n    }\n    var div = document.getElementsByTagName(\x27div\x27);\n\n    div[0].onclick = function(){\n        var url = \x26quot;.\/getdata.js\x26quot;;\n        var script = document.createElement(\x27script\x27);\n        script.setAttribute(\x27src\x27, url);\n        document.getElementsByTagName(\x27head\x27)[0].appendChild(script);\n    };\n\x3c\/script\x3e\n\x3c\/html\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x26lt;!DOCTYPE html\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3elang\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22en\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3emeta\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3echarset\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22UTF-8\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etitle\x3c\/span\x3e\x26gt;\x3c\/span\x3eTitle\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etitle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3ejsonp\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3egetremotedata\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edata\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(data);\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e div = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementsByTagName(\x3cspan class=\x22hljs-string\x22\x3e\x27div\x27\x3c\/span\x3e);\n\n    div[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].onclick = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e url = \x3cspan class=\x22hljs-string\x22\x3e\x22.\/getdata.js\x22\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e script = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.createElement(\x3cspan class=\x22hljs-string\x22\x3e\x27script\x27\x3c\/span\x3e);\n        script.setAttribute(\x3cspan class=\x22hljs-string\x22\x3e\x27src\x27\x3c\/span\x3e, url);\n        \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementsByTagName(\x3cspan class=\x22hljs-string\x22\x3e\x27head\x27\x3c\/span\x3e)[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].appendChild(script);\n    };\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e远程的getdata.js\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22getremotedata({\n    code:0,\n    result:\x27success\x27\n});\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs css\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-selector-tag\x22\x3egetremotedata\x3c\/span\x3e({\n    \x3cspan class=\x22hljs-attribute\x22\x3ecode\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n    result:\x3cspan class=\x22hljs-string\x22\x3e\x27success\x27\x3c\/span\x3e\n});\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e得到的结果：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVPaJO?w=786\x26amp;h=388\x22 src=\x22https:\/\/static.alili.tech\/img\/bVPaJO?w=786\x26amp;h=388\x22 alt=\x22动态添加的script标签\x22 title=\x22动态添加的script标签\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVPaKn?w=626\x26amp;h=196\x22 src=\x22https:\/\/static.alili.tech\/img\/bVPaKn?w=626\x26amp;h=196\x22 alt=\x22得到结果\x22 title=\x22得到结果\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3ejsonp前端及后台php的写法\x3c\/h3\x3e\n\x3cp\x3ehtml代码还是和上面一样，只要改变 url就可以了\x3cbr\x3e\x3ccode\x3e url= \x27localhsot:8080\/search.php?callback=getremotedata\x27 \x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22后台 php 代码\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e后台 php 代码\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    \x3c?php\n    $callback = $_GET[\x27callback\x27];\n\n    if($callback == \x27getremotedata\x27 ){\n        echo $_GET[\x27$callback\x27]).\x27(\x27. json_encode({code:0,msg:\x26quot;success\x26quot;}) .\x27)\x27;\n    }\n    ?\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e    \x3cspan class=\x22php\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x26lt;?php\x3c\/span\x3e\n    $callback = $_GET[\x3cspan class=\x22hljs-string\x22\x3e\x27callback\x27\x3c\/span\x3e];\n\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e($callback == \x3cspan class=\x22hljs-string\x22\x3e\x27getremotedata\x27\x3c\/span\x3e ){\n        \x3cspan class=\x22hljs-keyword\x22\x3eecho\x3c\/span\x3e $_GET[\x3cspan class=\x22hljs-string\x22\x3e\x27$callback\x27\x3c\/span\x3e]).\x3cspan class=\x22hljs-string\x22\x3e\x27(\x27\x3c\/span\x3e. json_encode({code:\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,msg:\x3cspan class=\x22hljs-string\x22\x3e\x22success\x22\x3c\/span\x3e}) .\x3cspan class=\x22hljs-string\x22\x3e\x27)\x27\x3c\/span\x3e;\n    }\n    \x3cspan class=\x22hljs-meta\x22\x3e?\x26gt;\x3c\/span\x3e\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e看到这里清楚了吧，就是第三方站点生成一个对回调函数的调用，传入查询结果，\x3cbr\x3e然后通过 \x3ccode\x3e\x26lt;script\x26gt;\x3c\/code\x3e 加载到客户端执行\x3c\/p\x3e\n\x3cp\x3e下图是 jsonp请求的流程图\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVPaKF?w=1410\x26amp;h=562\x22 src=\x22https:\/\/static.alili.tech\/img\/bVPaKF?w=1410\x26amp;h=562\x22 alt=\x22jsonp请求的流程图\x22 title=\x22jsonp请求的流程图\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3ejquery 封装在 ajax方法 里面的jsonp\x3c\/h3\x3e\n\x3cp\x3ejquery 是如何把 jsonp 封装到ajax里面的？\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cscript type=\x26quot;text\/javascript\x26quot;\x3e\n    function GetAjaxData() {\n        $.ajax({\n            type: \x26quot;get\x26quot;,\n            async: false,\n            url: \x26quot;http:\/\/localhost:8080\/getdata.php\x26quot;,\n            dataType: \x26quot;jsonp\x26quot;,\n            jsonp: \x26quot;callback\x26quot;,\/\/传递给请求处理程序或页面的，标识jsonp回调函数名(一般为:callback)\n            jsonpCallback: \x26quot;GetData\x26quot;,\/\/callback的function名称\n            success: function (data) {\n                console.log(data);\n            },\n            error: function () {\n                alert(\x27fail\x27);\n            }\n        });\n    }\n\x3c\/script\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/javascript\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eGetAjaxData\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        $.ajax({\n            \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22get\x22\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3easync\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3eurl\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22http:\/\/localhost:8080\/getdata.php\x22\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3edataType\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22jsonp\x22\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3ejsonp\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22callback\x22\x3c\/span\x3e,\x3cspan class=\x22hljs-comment\x22\x3e\/\/传递给请求处理程序或页面的，标识jsonp回调函数名(一般为:callback)\x3c\/span\x3e\n            jsonpCallback: \x3cspan class=\x22hljs-string\x22\x3e\x22GetData\x22\x3c\/span\x3e,\x3cspan class=\x22hljs-comment\x22\x3e\/\/callback的function名称\x3c\/span\x3e\n            success: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3edata\x3c\/span\x3e) \x3c\/span\x3e{\n                \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(data);\n            },\n            \x3cspan class=\x22hljs-attr\x22\x3eerror\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n                alert(\x3cspan class=\x22hljs-string\x22\x3e\x27fail\x27\x3c\/span\x3e);\n            }\n        });\n    }\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e一般情况下jqury 生成的访问 远程站点的 url\x3cbr\x3e默认情况下：（我所在的实际项目中的使用）\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3ehttp:\/\/web.k3k.net\/haila3\/pt\/tp\/index.php\/Home\/User\/getusergoto\/?callback=jQuery191028614189839964865_1497261919344\x26amp;token=420171c8-031a58667e64\x26amp;_=1497261919346\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e上述代码请求生成的url（设置 \x3ccode\x3ejsonpCallback\x3c\/code\x3e的值为 \x3ccode\x3eGetData\x3c\/code\x3e ）\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3ehttp:\/\/web.k3k.net\/haila3\/pt\/tp\/index.php\/Home\/User\/getusergoto\/?callback=GetData\x26amp;token=420171c8-00b8-031a58667e64\x26amp;_=1497261919346\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e最后 一个 \x3ccode\x3e_=1497261919346\x3c\/code\x3e k v 是为了防止浏览器缓存，而由 jquery 自动增加上的。\x3c\/p\x3e\n\x3cp\x3e所以相当于 在 前端文件中引入了 一个这样的js文件\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3e\x26lt;script src=\x22http:\/\/web.k3k.net\/haila3\/pt\/tp\/index.php\/Home\/User\/getusergoto\/?callback=GetData\x26amp;token=420171c8-00b8-031a58667e64\x26amp;_=1497261919346\x22\x26gt;\x26lt;\/script\x26gt;\x3c\/code\x3e\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e这里有2个重要的参数\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e\x3ccode\x3ejsonp\x3c\/code\x3e：\x3cbr\x3e在一个jsonp请求中重写回调函数的名字。这个值用来替代在\x22callback=?\x22这种GET或POST请求中URL参数里的\x22callback\x22部分，\x3cbr\x3e比如{jsonp:\x27onJsonPLoad\x27}会导致将\x22onJsonPLoad=?\x22传给服务器。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3ejsonpCallback\x3c\/code\x3e：\x3cbr\x3e为jsonp请求指定一个回调函数名。这个值将用来取代jQuery自动生成的随机函数名。\x3cbr\x3e这主要用来让jQuery生成一个独特的函数名，这样管理请求更容易，也能方便地提供回调函数和错误处理。\x3c\/p\x3e\n\x3cp\x3e你也可以在想让浏览器缓存GET请求的时候，指定这个回调函数名。\x3c\/p\x3e\n\x3cp\x3e从jQuery 1.5开始，你也可以使用一个函数作为该参数设置，在这种情况下，该函数的返回值就是jsonpCallback的结果。\x3c\/p\x3e\n\x3chr\x3e\n\x3cblockquote\x3e\x3cp\x3e通过一开始 \x3ccode\x3ejsonp\x3c\/code\x3e 原理的分析，可以得出：\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e当我们正常地请求一个JSON数据的时候，服务端返回的是一串JSON类型的数据。\x3cbr\x3e而我们使用JSONP模式来请求数据的时候，服务端返回的是一段可执行的JavaScript代码\x3c\/p\x3e\n\x3cp\x3e所以我们可见服务器代码最后一行\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3eecho $_GET[\x27$callback\x27]).\x27(\x27. json_encode({code:0,msg:\x22success\x22}) .\x27)\x27;\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e就是执行的\x3ccode\x3e getdata\x3c\/code\x3e，然后把数据通过回调的方式传递过去\x3c\/p\x3e\n\x3cp\x3eOK，就是整个流程就是：\x3c\/p\x3e\n\x3cp\x3e客户端发送一个请求，规定一个可执行的函数名\x3cbr\x3e（这里就是jQuery做了封装的处理，自动帮你生成回调函数并把数据取出来供success属性方法来调用,不是传递的一个回调句柄），\x3cbr\x3e服务端接受了这个\x3ccode\x3e getdata \x3c\/code\x3e函数名，然后把数据通过实参的形式发送出去\x3c\/p\x3e\n\x3chr\x3e\n\x3cblockquote\x3e\x3cp\x3e以上是 jquery 封装的 ajax方法里面的 \x3ccode\x3ejsonp\x3c\/code\x3e 请求，说来说去，自己都好像忘记了普通的 \x3ccode\x3eajax\x3c\/code\x3e请求\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch5\x3ejs原生 ajax 请求\x3c\/h5\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22        \/\/1.创建对象\n        var ajax = \x27\x27;\n\n        if(window.XMLHttpRequest){\n            ajax = new XMLHttpRequest();    \/* 现代浏览器 *／\n        }else if(window.ActiveXObject){\n            ajax = new ActiveXObject(\x26quot;Microsoft.XMLHTTP\x26quot;);  \/* 万恶的ie浏览器 *／\n        }\n\n        \/\/2.创建请求\n\n        \/\/get请求方法(拼接url参数)\n\/\/      var url=\x26quot;login.php?name=\x26quot;\x2bname\x2b\x26quot;\x26amp;password=\x26quot;\x2bpass;\n\/\/      ajax.open(\x26quot;GET\x26quot;,url,true);\n\n        \/\/post请求\n        ajax.open(\x26quot;POST\x26quot;,\x26quot;login.php\x26quot;,true);\n        ajax.setRequestHeader(\x26quot;Content-Type\x26quot;,\x26quot;application\/x-www-form-urlencoded\x26quot;);\n        var data=\x26quot;name=\x26quot;\x2bname\x2b\x26quot;\x26amp;password=\x26quot;\x2bpass;\n\n        \/\/3.发送请求\n\/\/      ajax.send();        \/\/get 方式发送请求\n        ajax.send(data);    \/\/post 方式发送请求\n\n        \/\/4.捕获请求状态、onreadystatechange表示当前请求状态\n\n        ajax.onreadystatechange=function(){\n            \/\/5.判断请求状态\n            if(ajax.readyState==4){\n                \/\/6.判断请求结果\n                if(ajax.status==200){\n                    \/\/请求成功将结果 responseText 放入回调函数中\n                    succ(ajax.responseText);\n                }\n            }\n        }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs accesslog\x22\x3e\x3ccode\x3e        \/\/\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e.创建对象\n        var ajax = \x27\x27;\n\n        if(window.XMLHttpRequest){\n            ajax = new XMLHttpRequest();    \/* 现代浏览器 *／\n        }else if(window.ActiveXObject){\n            ajax = new ActiveXObject(\x3cspan class=\x22hljs-string\x22\x3e\x22Microsoft.XMLHTTP\x22\x3c\/span\x3e);  \/* 万恶的ie浏览器 *／\n        }\n\n        \/\/\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e.创建请求\n\n        \/\/get请求方法(拼接url参数)\n\/\/      var url=\x3cspan class=\x22hljs-string\x22\x3e\x22login.php?name=\x22\x3c\/span\x3e\x2bname\x2b\x3cspan class=\x22hljs-string\x22\x3e\x22\x26amp;password=\x22\x3c\/span\x3e\x2bpass;\n\/\/      ajax.open(\x3cspan class=\x22hljs-string\x22\x3e\x22\x3cspan class=\x22hljs-keyword\x22\x3eGET\x3c\/span\x3e\x22\x3c\/span\x3e,url,true);\n\n        \/\/post请求\n        ajax.open(\x3cspan class=\x22hljs-string\x22\x3e\x22\x3cspan class=\x22hljs-keyword\x22\x3ePOST\x3c\/span\x3e\x22\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x22login.php\x22\x3c\/span\x3e,true);\n        ajax.setRequestHeader(\x3cspan class=\x22hljs-string\x22\x3e\x22Content-Type\x22\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x22application\/x-www-form-urlencoded\x22\x3c\/span\x3e);\n        var data=\x3cspan class=\x22hljs-string\x22\x3e\x22name=\x22\x3c\/span\x3e\x2bname\x2b\x3cspan class=\x22hljs-string\x22\x3e\x22\x26amp;password=\x22\x3c\/span\x3e\x2bpass;\n\n        \/\/\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e.发送请求\n\/\/      ajax.send();        \/\/get 方式发送请求\n        ajax.send(data);    \/\/post 方式发送请求\n\n        \/\/\x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e.捕获请求状态、onreadystatechange表示当前请求状态\n\n        ajax.onreadystatechange=function(){\n            \/\/\x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e.判断请求状态\n            if(ajax.readyState==\x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e){\n                \/\/\x3cspan class=\x22hljs-number\x22\x3e6\x3c\/span\x3e.判断请求结果\n                if(ajax.status==\x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e){\n                    \/\/请求成功将结果 responseText 放入回调函数中\n                    succ(ajax.responseText);\n                }\n            }\n        }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cblockquote\x3e\x3cp\x3e注意\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e通过检测window对象是否有XMLHttpRequest属性来确定浏览器是否支持标准的XMLHttpRequest。\x3cbr\x3e注意，不要根据浏览器的navigator.userAgent来检测浏览器是否支持某个JavaScript特性，一是因为这个字符串本身可以伪造，二是通过IE版本判断JavaScript特性将非常复杂。\x3c\/p\x3e\n\x3cp\x3e当创建了XMLHttpRequest对象后，要先设置onreadystatechange的回调函数。在回调函数中，通常我们只需通过readyState === 4判断请求是否完成，\x3cbr\x3e如果已完成，再根据status === 200判断是否是一个成功的响应。\x3c\/p\x3e\n\x3cp\x3eXMLHttpRequest对象的open()方法有3个参数，\x3cbr\x3e第一个参数指定是GET还是POST，\x3cbr\x3e第二个参数指定URL地址，\x3cbr\x3e第三个参数指定是否使用异步，默认是true，所以不用写。\x3c\/p\x3e\n\x3cp\x3e注意，千万不要把第三个参数指定为false，否则浏览器将停止响应，直到AJAX请求完成。\x3cbr\x3e如果这个请求耗时10秒，那么10秒内你会发现浏览器处于“假死”状态。\x3c\/p\x3e\n\x3cp\x3e最后调用send()方法才真正发送请求。\x3cbr\x3eGET请求不需要参数，\x3cbr\x3ePOST请求需要把body部分以字符串或者FormData对象传进去。\x3c\/p\x3e\n\x3ch4\x3ejquery实现普通ajax\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cscript type=\x26quot;text\/javascript\x26quot;\x3e\n    $(\x26quot;#btn\x26quot;).on(\x26quot;click\x26quot;,function(){\n        var name=$(\x26quot;#name\x26quot;).val();\n        var pass=$(\x26quot;#password\x26quot;).val();\n\n        $.ajax({\n            type:\x26quot;post\x26quot;,\n            url:\x26quot;login\x26amp;jq.php\x26quot;,\n            async:true,        \/\/异步简写\n            dataType:\x26quot;json\x26quot;,   \/\/转化为json类型\n            data:{\n                name:name,\n                password:pass,\n            },\n            success:function(data){\n                console.log(data);\n            },\n            error:function(data){\n                alert(data);\n            }\n        });\n    })\n    \x3c\/script\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/javascript\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n    $(\x3cspan class=\x22hljs-string\x22\x3e\x22#btn\x22\x3c\/span\x3e).on(\x3cspan class=\x22hljs-string\x22\x3e\x22click\x22\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e name=$(\x3cspan class=\x22hljs-string\x22\x3e\x22#name\x22\x3c\/span\x3e).val();\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e pass=$(\x3cspan class=\x22hljs-string\x22\x3e\x22#password\x22\x3c\/span\x3e).val();\n\n        $.ajax({\n            \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x22post\x22\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3eurl\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x22login\x26amp;jq.php\x22\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3easync\x3c\/span\x3e:\x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,        \x3cspan class=\x22hljs-comment\x22\x3e\/\/异步简写\x3c\/span\x3e\n            dataType:\x3cspan class=\x22hljs-string\x22\x3e\x22json\x22\x3c\/span\x3e,   \x3cspan class=\x22hljs-comment\x22\x3e\/\/转化为json类型\x3c\/span\x3e\n            data:{\n                \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e:name,\n                \x3cspan class=\x22hljs-attr\x22\x3epassword\x3c\/span\x3e:pass,\n            },\n            \x3cspan class=\x22hljs-attr\x22\x3esuccess\x3c\/span\x3e:\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edata\x3c\/span\x3e)\x3c\/span\x3e{\n                \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(data);\n            },\n            \x3cspan class=\x22hljs-attr\x22\x3eerror\x3c\/span\x3e:\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edata\x3c\/span\x3e)\x3c\/span\x3e{\n                alert(data);\n            }\n        });\n    })\n    \x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e后台 php 代码\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c?php\n    include_once \x26quot;common.php\x26quot;;\n    $name=$_POST[\x26quot;name\x26quot;];\n    $password=$_POST[\x26quot;password\x26quot;];\n\n    $sql=\x26quot;select*from user where name=\x27$name\x27 and password= \x27$password\x27\x26quot;;\n\n    $result=mysql_query($sql);\n\n    if(mysql_num_rows($result)==1){\n        $row = mysql_fetch_assoc($result);\n        \/\/只能传一个json\n        echo json_encode($row);\n    }else{\n        \/\/只能用json\n        echo \x27{\x26quot;msg\x26quot;:\x26quot;输入有误\x26quot;}\x27;\n    }\n\n?\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22php\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x26lt;?php\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3einclude_once\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22common.php\x22\x3c\/span\x3e;\n    $name=$_POST[\x3cspan class=\x22hljs-string\x22\x3e\x22name\x22\x3c\/span\x3e];\n    $password=$_POST[\x3cspan class=\x22hljs-string\x22\x3e\x22password\x22\x3c\/span\x3e];\n\n    $sql=\x3cspan class=\x22hljs-string\x22\x3e\x22select*from user where name=\x27$name\x27 and password= \x27$password\x27\x22\x3c\/span\x3e;\n\n    $result=mysql_query($sql);\n\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(mysql_num_rows($result)==\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e){\n        $row = mysql_fetch_assoc($result);\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/只能传一个json\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eecho\x3c\/span\x3e json_encode($row);\n    }\x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/只能用json\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eecho\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27{\x22msg\x22:\x22输入有误\x22}\x27\x3c\/span\x3e;\n    }\n\n\x3cspan class=\x22hljs-meta\x22\x3e?\x26gt;\x3c\/span\x3e\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cblockquote\x3e\x3cp\x3e当然实现跨域的方法还有很多，html5规范 的 CORS(全称Cross-Origin Resource Sharing)，是HTML5规范定义的如何跨域访问资源。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22了解CORS前，我们先搞明白概念：\nOrigin表示本域，也就是浏览器当前页面的域。当JavaScript向外域（如sina.com）\n发起请求后，浏览器收到响应后，首先检查Access-Control-Allow-Origin是否包含本域，\n如果是，则此次跨域请求成功，如果不是，则请求失败，JavaScript将无法获取到响应的任何数据。\n\n假设本域是my.com，外域是sina.com，只要响应头Access-Control-Allow-Origin为http:\/\/my.com，或者是*，本次请求就可以成功。\n\n可见，跨域能否成功，取决于对方服务器是否愿意给你设置一个正确的Access-Control-Allow-Origin，决定权始终在对方手中。\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs mipsasm\x22\x3e\x3ccode\x3e了解CORS前，我们先搞明白概念：\n\x3cspan class=\x22hljs-keyword\x22\x3eOrigin表示本域，也就是浏览器当前页面的域。当JavaScript向外域（如sina.com）\n\x3c\/span\x3e发起请求后，浏览器收到响应后，首先检查Access-Control-Allow-\x3cspan class=\x22hljs-keyword\x22\x3eOrigin是否包含本域，\n\x3c\/span\x3e如果是，则此次跨域请求成功，如果不是，则请求失败，\x3cspan class=\x22hljs-keyword\x22\x3eJavaScript将无法获取到响应的任何数据。\n\x3c\/span\x3e\n假设本域是my.com，外域是sina.com，只要响应头Access-Control-Allow-\x3cspan class=\x22hljs-keyword\x22\x3eOrigin为http:\/\/my.com，或者是*，本次请求就可以成功。\n\x3c\/span\x3e\n可见，跨域能否成功，取决于对方服务器是否愿意给你设置一个正确的Access-Control-Allow-\x3cspan class=\x22hljs-keyword\x22\x3eOrigin，决定权始终在对方手中。\n\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e总结\x3c\/h3\x3e\n\x3cp\x3e1、ajax和jsonp这两种技术在调用方式上“看起来”很像，目的也一样，都是请求一个url，然后把服务器返回的数据进行处理，因此jquery和ext等框架都把jsonp作为ajax的一种形式进行了封装；\x3c\/p\x3e\n\x3cp\x3e2、ajax和jsonp其实本质上是不同的东西。ajax的核心是通过XMLHttpRequest获取非本页内容，而jsonp的核心则是通过HTTP来动态添加\x3ccode\x3e \x26lt;script\x26gt; \x3c\/code\x3e标签来调用服务器提供的js脚本。\x3c\/p\x3e\n\x3cp\x3e3、其实ajax与jsonp的区别不在于是否跨域，ajax通过服务端代理（CORS）一样可以实现跨域，jsonp本身也不排斥同域的数据的获取。\x3c\/p\x3e\n\x3cp\x3e4、jsonp是一种方式或者说非强制性协议，如同ajax一样，它也不一定非要用json格式来传递数据，如果你愿意，字符串都行，只不过这样不利于用jsonp提供公开服务。\x3c\/p\x3e\n\x3cp\x3e5、jsonp整个过程中，本地站点一直处于主动的地位，主动的发送请求，主动的加载远程js.而第三方站点则处于被动的响应。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3ejosnp 优缺点分析： \x3ca href=\x22http:\/\/www.qdfuns.com\/notes\/18271\/df9ecd8f0ca5e523ae75745a3996c47c.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e借鉴自w3cfun\x3c\/a\x3e\n\x3c\/h3\x3e\n\x3ch4\x3e优点：\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x221.1它不像XMLHttpRequest对象实现的Ajax请求那样受到同源策略的限制，JSONP可以跨越同源策略；\n    \n1.2它的兼容性更好，在更加古老的浏览器中都可以运行，不需要XMLHttpRequest或ActiveX的支持；\n    \n1.3在请求完毕后可以通过调用callback的方式回传结果。\n将回调方法的权限给了调用方。这个就相当于将controller层和view层终于分开了。\n我提供的jsonp服务只提供纯服务的数据，至于提供服务以 后的页面渲染和后续view操作都由调用者来自己定义就好了。\n如果有两个页面需要渲染同一份数据，你们只需要有不同的渲染逻辑就可以了，\n逻辑都可以使用同 一个jsonp服务。\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs css\x22\x3e\x3ccode\x3e1\x3cspan class=\x22hljs-selector-class\x22\x3e.1\x3c\/span\x3e它不像\x3cspan class=\x22hljs-selector-tag\x22\x3eXMLHttpRequest\x3c\/span\x3e对象实现的\x3cspan class=\x22hljs-selector-tag\x22\x3eAjax\x3c\/span\x3e请求那样受到同源策略的限制，\x3cspan class=\x22hljs-selector-tag\x22\x3eJSONP\x3c\/span\x3e可以跨越同源策略；\n    \n1\x3cspan class=\x22hljs-selector-class\x22\x3e.2\x3c\/span\x3e它的兼容性更好，在更加古老的浏览器中都可以运行，不需要\x3cspan class=\x22hljs-selector-tag\x22\x3eXMLHttpRequest\x3c\/span\x3e或\x3cspan class=\x22hljs-selector-tag\x22\x3eActiveX\x3c\/span\x3e的支持；\n    \n1\x3cspan class=\x22hljs-selector-class\x22\x3e.3\x3c\/span\x3e在请求完毕后可以通过调用\x3cspan class=\x22hljs-selector-tag\x22\x3ecallback\x3c\/span\x3e的方式回传结果。\n将回调方法的权限给了调用方。这个就相当于将\x3cspan class=\x22hljs-selector-tag\x22\x3econtroller\x3c\/span\x3e层和\x3cspan class=\x22hljs-selector-tag\x22\x3eview\x3c\/span\x3e层终于分开了。\n我提供的\x3cspan class=\x22hljs-selector-tag\x22\x3ejsonp\x3c\/span\x3e服务只提供纯服务的数据，至于提供服务以 后的页面渲染和后续\x3cspan class=\x22hljs-selector-tag\x22\x3eview\x3c\/span\x3e操作都由调用者来自己定义就好了。\n如果有两个页面需要渲染同一份数据，你们只需要有不同的渲染逻辑就可以了，\n逻辑都可以使用同 一个\x3cspan class=\x22hljs-selector-tag\x22\x3ejsonp\x3c\/span\x3e服务。\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e缺点\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x222.1它只支持GET请求而不支持POST等其它类型的HTTP请求\n\n2.2它只支持跨域HTTP请求这种情况，不能解决不同域的两个页面之间如何进行JavaScript调用的问题。\n\n2.3 jsonp在调用失败的时候不会返回各种HTTP状态码。\n\n2.4缺点是安全性。万一假如提供jsonp的服务存在页面注入漏洞，即它返回的javascript的内容被人控制的。\n那么结果是什么？所有调用这个 jsonp的网站都会存在漏洞。\n于是无法把危险控制在一个域名下…所以在使用jsonp的时候必须要保证使用的jsonp服务必须是安全可信的。\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs css\x22\x3e\x3ccode\x3e2\x3cspan class=\x22hljs-selector-class\x22\x3e.1\x3c\/span\x3e它只支持\x3cspan class=\x22hljs-selector-tag\x22\x3eGET\x3c\/span\x3e请求而不支持\x3cspan class=\x22hljs-selector-tag\x22\x3ePOST\x3c\/span\x3e等其它类型的\x3cspan class=\x22hljs-selector-tag\x22\x3eHTTP\x3c\/span\x3e请求\n\n2\x3cspan class=\x22hljs-selector-class\x22\x3e.2\x3c\/span\x3e它只支持跨域\x3cspan class=\x22hljs-selector-tag\x22\x3eHTTP\x3c\/span\x3e请求这种情况，不能解决不同域的两个页面之间如何进行\x3cspan class=\x22hljs-selector-tag\x22\x3eJavaScript\x3c\/span\x3e调用的问题。\n\n2\x3cspan class=\x22hljs-selector-class\x22\x3e.3\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3ejsonp\x3c\/span\x3e在调用失败的时候不会返回各种\x3cspan class=\x22hljs-selector-tag\x22\x3eHTTP\x3c\/span\x3e状态码。\n\n2\x3cspan class=\x22hljs-selector-class\x22\x3e.4\x3c\/span\x3e缺点是安全性。万一假如提供\x3cspan class=\x22hljs-selector-tag\x22\x3ejsonp\x3c\/span\x3e的服务存在页面注入漏洞，即它返回的\x3cspan class=\x22hljs-selector-tag\x22\x3ejavascript\x3c\/span\x3e的内容被人控制的。\n那么结果是什么？所有调用这个 \x3cspan class=\x22hljs-selector-tag\x22\x3ejsonp\x3c\/span\x3e的网站都会存在漏洞。\n于是无法把危险控制在一个域名下…所以在使用\x3cspan class=\x22hljs-selector-tag\x22\x3ejsonp\x3c\/span\x3e的时候必须要保证使用的\x3cspan class=\x22hljs-selector-tag\x22\x3ejsonp\x3c\/span\x3e服务必须是安全可信的。\x3c\/code\x3e\x3c\/pre\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>jsonp 跨域原理分析</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000009773724">https://segmentfault.com/a/1190000009773724</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/60fx6b4s7hf/" target="_blank">https://alili.tech/archive/60fx6b4s7hf/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>