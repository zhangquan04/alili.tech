<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="Angular 2 TemplateRef &amp; ViewContainerRef"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>Angular 2 TemplateRef &amp; ViewContainerRef | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/4rbq2bsqelx/",
				"appid": "1613049289050283", 
				"title": "Angular 2 TemplateRef &amp; ViewContainerRef | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-18T02:30:35"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/3fe6ru82bbb/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/2tnk4uccj5t/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f4rbq2bsqelx%2f&text=Angular%202%20TemplateRef%20%26%20ViewContainerRef"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f4rbq2bsqelx%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f4rbq2bsqelx%2f&text=Angular%202%20TemplateRef%20%26%20ViewContainerRef"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f4rbq2bsqelx%2f&title=Angular%202%20TemplateRef%20%26%20ViewContainerRef"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f4rbq2bsqelx%2f&is_video=false&description=Angular%202%20TemplateRef%20%26%20ViewContainerRef"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=Angular%202%20TemplateRef%20%26%20ViewContainerRef&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f4rbq2bsqelx%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f4rbq2bsqelx%2f&title=Angular%202%20TemplateRef%20%26%20ViewContainerRef"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f4rbq2bsqelx%2f&title=Angular%202%20TemplateRef%20%26%20ViewContainerRef"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f4rbq2bsqelx%2f&title=Angular%202%20TemplateRef%20%26%20ViewContainerRef"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f4rbq2bsqelx%2f&title=Angular%202%20TemplateRef%20%26%20ViewContainerRef"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">Angular 2 TemplateRef &amp; ViewContainerRef</h1><div class="meta"><div class="postdate"><time datetime="2019-01-18" itemprop="datePublished">2019-01-18</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e阅读 Angular 6\/RxJS 最新教程，请访问\x3ca href=\x22http:\/\/www.semlinker.com\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e前端修仙之路\x3c\/a\x3e\n\x3c\/blockquote\x3e\n\x3ch3 id=\x22articleHeader0\x22\x3eTemplateRef\x3c\/h3\x3e\n\x3cp\x3e在介绍 TemplateRef 前，我们先来了解一下 HTML \x3ca href=\x22https:\/\/developer.mozilla.org\/zh-CN\/docs\/Web\/HTML\/Element\/template\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e模板元素\x3c\/a\x3e -  \x26lt;template\x26gt; 。模板元素是一种机制，允许包含加载页面时不渲染，但又可以随后通过 JavaScript 进行实例化的客户端内容。我们可以将模板视作为存储在页面上稍后使用的一小段内容。\x3c\/p\x3e\n\x3cp\x3e在 HTML5 标准引入 template 模板元素之前，我们都是使用 \x26lt;script\x26gt; 标签进行客户端模板的定义，具体如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cscript id=\x26quot;tpl-mock\x26quot; type=\x26quot;text\/template\x26quot;\x3e\n   \x3cspan\x3eI am span in mock template\x3c\/span\x3e\n\x3c\/script\x3e\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22tpl-mock\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/template\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22handlebars\x22\x3e\x3cspan class=\x22xml\x22\x3e\n   \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3eI am span in mock template\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3c\/span\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e对于支持 HTML5 template 模板元素的浏览器，我们可以这样创建客户端模板：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3ctemplate id=\x26quot;tpl\x26quot;\x3e\n    \x3cspan\x3eI am span in template\x3c\/span\x3e\n\x3c\/template\x3e\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22tpl\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3eI am span in template\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e下面我们来看一下 HTML5 template 模板元素的使用示例：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c!DOCTYPE html\x3e\n\x3chtml lang=\x26quot;en\x26quot;\x3e\n\x3chead\x3e\x3cmeta charset=\x26quot;UTF-8\x26quot;\x3e \x3ctitle\x3eHTML5 Template Element Demo\x3c\/title\x3e\x3c\/head\x3e\n\x3cbody\x3e\n\x3ch4\x3eHTML5 Template Element Demo\x3c\/h4\x3e\n\x3c!-- Template Container --\x3e\n\x3cdiv class=\x26quot;tpl-container\x26quot;\x3e\x3c\/div\x3e\n\x3c!-- Template --\x3e\n\x3ctemplate id=\x26quot;tpl\x26quot;\x3e\n    \x3cspan\x3eI am span in template\x3c\/span\x3e\n\x3c\/template\x3e\n\x3c!-- Script --\x3e\n\x3cscript type=\x26quot;text\/javascript\x26quot;\x3e\n    (function renderTpl() {\n        if (\x27content\x27 in document.createElement(\x27template\x27)) {\n            var tpl = document.querySelector(\x27#tpl\x27);\n            var tplContainer = document.querySelector(\x27.tpl-container\x27);\n            var tplNode = document.importNode(tpl.content, true);\n            tplContainer.appendChild(tplNode); \n        } else {\n            throw  new Error(\x26quot;Current browser doesn\x27t support template element\x26quot;);\n        }\n    })();\n\x3c\/script\x3e\n\x3c\/body\x3e\n\x3c\/html\x3e\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x26lt;!DOCTYPE html\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3elang\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22en\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3emeta\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3echarset\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22UTF-8\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etitle\x3c\/span\x3e\x26gt;\x3c\/span\x3eHTML5 Template Element Demo\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etitle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eh4\x3c\/span\x3e\x26gt;\x3c\/span\x3eHTML5 Template Element Demo\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eh4\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- Template Container --\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22tpl-container\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- Template --\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22tpl\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3eI am span in template\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- Script --\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/javascript\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n    (\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3erenderTpl\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-string\x22\x3e\x27content\x27\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.createElement(\x3cspan class=\x22hljs-string\x22\x3e\x27template\x27\x3c\/span\x3e)) {\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e tpl = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.querySelector(\x3cspan class=\x22hljs-string\x22\x3e\x27#tpl\x27\x3c\/span\x3e);\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e tplContainer = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.querySelector(\x3cspan class=\x22hljs-string\x22\x3e\x27.tpl-container\x27\x3c\/span\x3e);\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e tplNode = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.importNode(tpl.content, \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e);\n            tplContainer.appendChild(tplNode); \n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e  \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eError\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22Current browser doesn\x27t support template element\x22\x3c\/span\x3e);\n        }\n    })();\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e以上代码运行后，在浏览器中我们会看到以下内容：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22HTML5 Template Element Demo\n\nI am span in template\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3eHTML5 Template Element Demo\n\nI am \x3cspan class=\x22hljs-selector-tag\x22\x3espan\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e template\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e而当我们注释掉 tplContainer.appendChild(tplNode) 语句时，刷新浏览器后看到的是：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22HTML5 Template Element Demo\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dart\x22\x3e\x3ccode\x3eHTML5 Template \x3cspan class=\x22hljs-built_in\x22\x3eElement\x3c\/span\x3e Demo\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这说明页面中  \x26lt;template\x26gt;  模板元素中的内容，如果没有进行处理对用户来说是不可见的。Angular 2 中，\x26lt;template\x26gt; 模板元素主要应用在结构指令中，此外在 \x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000008626070\x22\x3eAngular 2 属性指令 vs 结构指令\x3c\/a\x3e 文章中我们也介绍了 \x26lt;template\x26gt; 模板元素和自定义结构指令，接下来我们先来介绍一下本文中的第一个主角 - TemplateRef：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import {Component, TemplateRef, ViewChild, AfterViewInit} from \x27@angular\/core\x27;\n\n@Component({\n  selector: \x27my-app\x27,\n  template: `\n    \x3ch1\x3eWelcome to Angular World\x3c\/h1\x3e\n    \x3ctemplate #tpl\x3e\n      \x3cspan\x3eI am span in template\x3c\/span\x3e\n    \x3c\/template\x3e\n  `,\n})\nexport class AppComponent {\n  name: string = \x27Semlinker\x27;\n\n  @ViewChild(\x27tpl\x27)\n  tpl: TemplateRef\x3cany\x3e;\n\n  ngAfterViewInit() {\n    console.dir(this.tpl);\n  }\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs coffeescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e {Component, TemplateRef, ViewChild, AfterViewInit} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27@angular\/core\x27\x3c\/span\x3e;\n\n@Component({\n  selector: \x3cspan class=\x22hljs-string\x22\x3e\x27my-app\x27\x3c\/span\x3e,\n  template: `\x3cspan class=\x22javascript\x22\x3e\n    \x26lt;h1\x26gt;Welcome to Angular World\x26lt;\x3cspan class=\x22hljs-regexp\x22\x3e\/h1\x26gt;\n    \x26lt;template #tpl\x26gt;\n      \x26lt;span\x26gt;I am span in template\x26lt;\/\x3c\/span\x3espan\x26gt;\n    \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n  \x3c\/span\x3e`,\n})\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eAppComponent\x3c\/span\x3e {\x3c\/span\x3e\n  name: string = \x3cspan class=\x22hljs-string\x22\x3e\x27Semlinker\x27\x3c\/span\x3e;\n\n  @ViewChild(\x3cspan class=\x22hljs-string\x22\x3e\x27tpl\x27\x3c\/span\x3e)\n  tpl: TemplateRef\x26lt;any\x26gt;;\n\n  ngAfterViewInit() {\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.dir(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.tpl);\n  }\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上述代码运行后的控制台的输出结果如下：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVKyfR?w=680\x26amp;h=389\x22 src=\x22https:\/\/static.alili.tech\/img\/bVKyfR?w=680\x26amp;h=389\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e从上图中，我们发现 @Component template 中定义的 \x26lt;template\x26gt; 模板元素，渲染后被替换成 comment 元素，其内容为 \x22template bindings={}\x22 。此外我们通过 @ViewChild 获取的模板元素，是 TemplateRef_ 类的实例，接下来我们来研究一下 TemplateRef_ 类：\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3eTemplateRef_\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ @angular\/core\/src\/linker\/template_ref.d.ts\nexport declare class TemplateRef_\x3cC\x3e extends TemplateRef\x3cC\x3e {\n    private _parentView;\n    private _nodeIndex;\n    private _nativeElement;\n    constructor(_parentView: AppView\x3cany\x3e, _nodeIndex: number, _nativeElement: any);\n    createEmbeddedView(context: C): EmbeddedViewRef\x3cC\x3e;\n    elementRef: ElementRef;\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs scala\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ @angular\/core\/src\/linker\/template_ref.d.ts\x3c\/span\x3e\nexport declare \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eTemplateRef_\x26lt;C\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eTemplateRef\x26lt;C\x26gt;\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eprivate\x3c\/span\x3e _parentView;\n    \x3cspan class=\x22hljs-keyword\x22\x3eprivate\x3c\/span\x3e _nodeIndex;\n    \x3cspan class=\x22hljs-keyword\x22\x3eprivate\x3c\/span\x3e _nativeElement;\n    constructor(_parentView: \x3cspan class=\x22hljs-type\x22\x3eAppView\x3c\/span\x3e\x26lt;any\x26gt;, _nodeIndex: number, _nativeElement: any);\n    createEmbeddedView(context: \x3cspan class=\x22hljs-type\x22\x3eC\x3c\/span\x3e): \x3cspan class=\x22hljs-type\x22\x3eEmbeddedViewRef\x3c\/span\x3e\x26lt;\x3cspan class=\x22hljs-type\x22\x3eC\x3c\/span\x3e\x26gt;;\n    elementRef: \x3cspan class=\x22hljs-type\x22\x3eElementRef\x3c\/span\x3e;\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3eTemplateRef\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ @angular\/core\/src\/linker\/template_ref.d.ts\n\/\/ 用于表示内嵌的template模板，能够用于创建内嵌视图(Embedded Views)\nexport declare abstract class TemplateRef\x3cC\x3e {\n    elementRef: ElementRef;\n    abstract createEmbeddedView(context: C): EmbeddedViewRef\x3cC\x3e;\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dart\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ @angular\/core\/src\/linker\/template_ref.d.ts\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 用于表示内嵌的template模板，能够用于创建内嵌视图(Embedded Views)\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e declare \x3cspan class=\x22hljs-keyword\x22\x3eabstract\x3c\/span\x3e \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eTemplateRef\x3c\/span\x3e\x26lt;\x3cspan class=\x22hljs-title\x22\x3eC\x3c\/span\x3e\x26gt; \x3c\/span\x3e{\n    elementRef: ElementRef;\n    \x3cspan class=\x22hljs-keyword\x22\x3eabstract\x3c\/span\x3e createEmbeddedView(context: C): EmbeddedViewRef\x26lt;C\x26gt;;\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e(备注：抽象类与普通类的区别是抽象类有包含抽象方法，不能直接实例化抽象类，只能实例化该抽象类的子类)\x3c\/p\x3e\n\x3cp\x3e我们已经知道 \x26lt;template\x26gt; 模板元素，渲染后被替换成 comment 元素，那么应该如何显示我们模板中定义的内容呢 ？我们注意到了 TemplateRef 抽象类中定义的 createEmbeddedView\x3cbr\x3e抽象方法，该方法的返回值是 EmbeddedViewRef 对象。那好我们马上来试一下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import {Component, TemplateRef, ViewChild, AfterViewInit} from \x27@angular\/core\x27;\n\n@Component({\n  selector: \x27my-app\x27,\n  template: `\n    \x3ch1\x3eWelcome to Angular World\x3c\/h1\x3e\n    \x3ctemplate #tpl\x3e\n      \x3cspan\x3eI am span in template\x3c\/span\x3e\n    \x3c\/template\x3e\n  `,\n})\nexport class AppComponent {\n  name: string = \x27Semlinker\x27;\n\n  @ViewChild(\x27tpl\x27)\n  tpl: TemplateRef\x3cany\x3e;\n\n  ngAfterViewInit() {\n    let embeddedView = this.tpl.createEmbeddedView(null);\n    console.dir(embeddedView);\n  }\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs coffeescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e {Component, TemplateRef, ViewChild, AfterViewInit} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27@angular\/core\x27\x3c\/span\x3e;\n\n@Component({\n  selector: \x3cspan class=\x22hljs-string\x22\x3e\x27my-app\x27\x3c\/span\x3e,\n  template: `\x3cspan class=\x22javascript\x22\x3e\n    \x26lt;h1\x26gt;Welcome to Angular World\x26lt;\x3cspan class=\x22hljs-regexp\x22\x3e\/h1\x26gt;\n    \x26lt;template #tpl\x26gt;\n      \x26lt;span\x26gt;I am span in template\x26lt;\/\x3c\/span\x3espan\x26gt;\n    \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n  \x3c\/span\x3e`,\n})\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eAppComponent\x3c\/span\x3e {\x3c\/span\x3e\n  name: string = \x3cspan class=\x22hljs-string\x22\x3e\x27Semlinker\x27\x3c\/span\x3e;\n\n  @ViewChild(\x3cspan class=\x22hljs-string\x22\x3e\x27tpl\x27\x3c\/span\x3e)\n  tpl: TemplateRef\x26lt;any\x26gt;;\n\n  ngAfterViewInit() {\n    let embeddedView = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.tpl.createEmbeddedView(\x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.dir(embeddedView);\n  }\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上述代码运行后的控制台的输出结果如下：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVKyfW?w=469\x26amp;h=201\x22 src=\x22https:\/\/static.alili.tech\/img\/bVKyfW?w=469\x26amp;h=201\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e从图中我们可以知道，当调用 createEmbeddedView 方法后返回了 ViewRef_ 视图对象。该视图对象的 rootNodes 属性包含了 \x26lt;template\x26gt; 模板中的内容。在上面的例子中，我们知道了 TemplateRef 实例对象中的 elementRef 属性封装了我们的 comment 元素，那么我们可以通过 insertBefore 方法来创建我们模板中定义的内容。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import { Component, TemplateRef, ViewChild, AfterViewInit } from \x27@angular\/core\x27;\n\n@Component({\n  selector: \x27my-app\x27,\n  template: `\n    \x3ch1\x3eWelcome to Angular World\x3c\/h1\x3e\n    \x3ctemplate #tpl\x3e\n      \x3cspan\x3eI am span in template \x22{{\x22name\x22}}\x22\x3c\/span\x3e\n    \x3c\/template\x3e\n  `,\n})\nexport class AppComponent {\n  name: string = \x27Semlinker\x27;\n\n  @ViewChild(\x27tpl\x27)\n  tpl: TemplateRef\x3cany\x3e;\n\n  ngAfterViewInit() {\n    \/\/ 页面中的\x3c!--template bindings={}--\x3e元素\n    let commentElement = this.tpl.elementRef.nativeElement;\n    \/\/ 创建内嵌视图\n    let embeddedView = this.tpl.createEmbeddedView(null);\n    \/\/ 动态添加子节点\n    embeddedView.rootNodes.forEach((node) =\x3e {\n        commentElement.parentNode\n          .insertBefore(node, commentElement.nextSibling);\n    });\n  }\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs typescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e { Component, TemplateRef, ViewChild, AfterViewInit } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27@angular\/core\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-meta\x22\x3e@Component\x3c\/span\x3e({\n  selector: \x3cspan class=\x22hljs-string\x22\x3e\x27my-app\x27\x3c\/span\x3e,\n  template: \x3cspan class=\x22hljs-string\x22\x3e`\n    \x26lt;h1\x26gt;Welcome to Angular World\x26lt;\/h1\x26gt;\n    \x26lt;template #tpl\x26gt;\n      \x26lt;span\x26gt;I am span in template \x22{{\x22name\x22}}\x22\x26lt;\/span\x26gt;\n    \x26lt;\/template\x26gt;\n  `\x3c\/span\x3e,\n})\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e AppComponent {\n  name: \x3cspan class=\x22hljs-built_in\x22\x3estring\x3c\/span\x3e = \x3cspan class=\x22hljs-string\x22\x3e\x27Semlinker\x27\x3c\/span\x3e;\n\n  \x3cspan class=\x22hljs-meta\x22\x3e@ViewChild\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27tpl\x27\x3c\/span\x3e)\n  tpl: TemplateRef\x26lt;\x3cspan class=\x22hljs-built_in\x22\x3eany\x3c\/span\x3e\x26gt;;\n\n  ngAfterViewInit() {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 页面中的\x26lt;!--template bindings={}--\x26gt;元素\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e commentElement = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.tpl.elementRef.nativeElement;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 创建内嵌视图\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e embeddedView = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.tpl.createEmbeddedView(\x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 动态添加子节点\x3c\/span\x3e\n    embeddedView.rootNodes.forEach(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3enode\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n        commentElement.parentNode\n          .insertBefore(node, commentElement.nextSibling);\n    });\n  }\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e成功运行上面的代码后，在浏览器中我们会看到以下内容：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22Welcome to Angular World\n\nI am span in template\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3eWelcome to Angular World\n\nI am \x3cspan class=\x22hljs-selector-tag\x22\x3espan\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e template\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e现在我们来回顾一下，上面的处理步骤：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e创建内嵌视图(embedded view)\x3c\/li\x3e\n\x3cli\x3e遍历内嵌视图中的 rootNodes，动态的插入 node\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e虽然我们已经成功的显示出 template 模板元素中的内容，但发现整个流程还是太复杂了，那有没有简单地方式呢 ？是时候介绍本文中第二个主角 - ViewContainerRef。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3eViewContainerRef\x3c\/h3\x3e\n\x3cp\x3e我们先来检验一下它的能力，然后再来好好地分析它。具体示例如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import { Component, TemplateRef, ViewChild, ViewContainerRef, AfterViewInit } from \x27@angular\/core\x27;\n\n@Component({\n  selector: \x27my-app\x27,\n  template: `\n    \x3ch1\x3eWelcome to Angular World\x3c\/h1\x3e\n    \x3ctemplate #tpl\x3e\n      \x3cspan\x3eI am span in template\x3c\/span\x3e\n    \x3c\/template\x3e\n  `,\n})\nexport class AppComponent {\n  name: string = \x27Semlinker\x27;\n\n  @ViewChild(\x27tpl\x27)\n  tplRef: TemplateRef\x3cany\x3e;\n\n  @ViewChild(\x27tpl\x27, { read: ViewContainerRef })\n  tplVcRef: ViewContainerRef;\n\n  ngAfterViewInit() {\n    \/\/ console.dir(this.tplVcRef); (1)\n    this.tplVcRef.createEmbeddedView(this.tplRef);\n  }\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs coffeescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e { Component, TemplateRef, ViewChild, ViewContainerRef, AfterViewInit } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27@angular\/core\x27\x3c\/span\x3e;\n\n@Component({\n  selector: \x3cspan class=\x22hljs-string\x22\x3e\x27my-app\x27\x3c\/span\x3e,\n  template: `\x3cspan class=\x22javascript\x22\x3e\n    \x26lt;h1\x26gt;Welcome to Angular World\x26lt;\x3cspan class=\x22hljs-regexp\x22\x3e\/h1\x26gt;\n    \x26lt;template #tpl\x26gt;\n      \x26lt;span\x26gt;I am span in template\x26lt;\/\x3c\/span\x3espan\x26gt;\n    \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n  \x3c\/span\x3e`,\n})\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eAppComponent\x3c\/span\x3e {\x3c\/span\x3e\n  name: string = \x3cspan class=\x22hljs-string\x22\x3e\x27Semlinker\x27\x3c\/span\x3e;\n\n  @ViewChild(\x3cspan class=\x22hljs-string\x22\x3e\x27tpl\x27\x3c\/span\x3e)\n  tplRef: TemplateRef\x26lt;any\x26gt;;\n\n  @ViewChild(\x3cspan class=\x22hljs-string\x22\x3e\x27tpl\x27\x3c\/span\x3e, { read: ViewContainerRef })\n  tplVcRef: ViewContainerRef;\n\n  ngAfterViewInit() {\n    \x3cspan class=\x22hljs-regexp\x22\x3e\/\/\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.dir(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.tplVcRef); (\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e)\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.tplVcRef.createEmbeddedView(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.tplRef);\n  }\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e移除上面代码中的注释，即可在控制台看到以下的输出信息：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVKyf1?w=677\x26amp;h=422\x22 src=\x22https:\/\/static.alili.tech\/img\/bVKyf1?w=677\x26amp;h=422\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e而在浏览器中我们会看到以下内容：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22Welcome to Angular World\n\nI am span in template\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3eWelcome to Angular World\n\nI am \x3cspan class=\x22hljs-selector-tag\x22\x3espan\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e template\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e接下来我们来看一下 ViewContainerRef_ 类：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ @angular\/core\/src\/linker\/view_container_ref.d.ts\n\/\/ 用于表示一个视图容器，可添加一个或多个视图\nexport declare class ViewContainerRef_ implements ViewContainerRef {\n    ...\n    length: number; \/\/ 返回视图容器中已存在的视图个数\n    element: ElementRef;\n    injector: Injector;\n    parentInjector: Injector;\n      \/\/ 基于TemplateRef创建内嵌视图，并自动添加到视图容器中，可通过index设置\n    \/\/ 视图添加的位置\n    createEmbeddedView\x3cC\x3e(templateRef: TemplateRef\x3cC\x3e, context?: C, \n      index?: number): EmbeddedViewRef\x3cC\x3e;\n    \/\/ 基 ComponentFactory创建组件视图\n    createComponent\x3cC\x3e(componentFactory: ComponentFactory\x3cC\x3e,\n      index?: number, injector?: Injector, projectableNodes?: any[][]): ComponentRef\x3cC\x3e;\n    insert(viewRef: ViewRef, index?: number): ViewRef;\n    move(viewRef: ViewRef, currentIndex: number): ViewRef;\n    indexOf(viewRef: ViewRef): number;\n    remove(index?: number): void;\n    detach(index?: number): ViewRef;\n    clear(): void;\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs groovy\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ @angular\/core\/src\/linker\/view_container_ref.d.ts\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 用于表示一个视图容器，可添加一个或多个视图\x3c\/span\x3e\nexport declare \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eViewContainerRef_\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eimplements\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eViewContainerRef\x3c\/span\x3e {\x3c\/span\x3e\n    ...\n\x3cspan class=\x22hljs-symbol\x22\x3e    length:\x3c\/span\x3e number; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 返回视图容器中已存在的视图个数\x3c\/span\x3e\n\x3cspan class=\x22hljs-symbol\x22\x3e    element:\x3c\/span\x3e ElementRef;\n\x3cspan class=\x22hljs-symbol\x22\x3e    injector:\x3c\/span\x3e Injector;\n\x3cspan class=\x22hljs-symbol\x22\x3e    parentInjector:\x3c\/span\x3e Injector;\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 基于TemplateRef创建内嵌视图，并自动添加到视图容器中，可通过index设置\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 视图添加的位置\x3c\/span\x3e\n    createEmbeddedView\x26lt;C\x26gt;(\x3cspan class=\x22hljs-string\x22\x3etemplateRef:\x3c\/span\x3e TemplateRef\x26lt;C\x26gt;, context?: C, \n      index?: number): EmbeddedViewRef\x26lt;C\x26gt;;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 基 ComponentFactory创建组件视图\x3c\/span\x3e\n    createComponent\x26lt;C\x26gt;(\x3cspan class=\x22hljs-string\x22\x3ecomponentFactory:\x3c\/span\x3e ComponentFactory\x26lt;C\x26gt;,\n      index?: number, injector?: Injector, projectableNodes?: any[][]): ComponentRef\x26lt;C\x26gt;;\n    insert(\x3cspan class=\x22hljs-string\x22\x3eviewRef:\x3c\/span\x3e ViewRef, index?: number): ViewRef;\n    move(\x3cspan class=\x22hljs-string\x22\x3eviewRef:\x3c\/span\x3e ViewRef, \x3cspan class=\x22hljs-string\x22\x3ecurrentIndex:\x3c\/span\x3e number): ViewRef;\n    indexOf(\x3cspan class=\x22hljs-string\x22\x3eviewRef:\x3c\/span\x3e ViewRef): number;\n    remove(index?: number): \x3cspan class=\x22hljs-keyword\x22\x3evoid\x3c\/span\x3e;\n    detach(index?: number): ViewRef;\n    clear(): \x3cspan class=\x22hljs-keyword\x22\x3evoid\x3c\/span\x3e;\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e通过源码我们可以知道通过 ViewContainerRef_ 实例，我们可以方便地操作视图，也可以方便地基于 TemplateRef 创建视图。现在我们来总结一下 TemplateRef 与 ViewContainerRef。\x3c\/p\x3e\n\x3cp\x3eTemplateRef：用于表示内嵌的 template 模板元素，通过 TemplateRef 实例，我们可以方便创建内嵌视图(Embedded Views)，且可以轻松地访问到通过 ElementRef 封装后的 nativeElement。需要注意的是组件视图中的 template 模板元素，经过渲染后会被替换成 comment 元素。\x3c\/p\x3e\n\x3cp\x3eViewContainerRef：用于表示一个视图容器，可添加一个或多个视图。通过 ViewContainer\x3cbr\x3eRef 实例，我们可以基于 TemplateRef 实例创建内嵌视图，并能指定内嵌视图的插入位置，也可以方便对视图容器中已有的视图进行管理。简而言之，ViewContainerRef 的主要作用是创建和管理内嵌视图或组件视图。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e我有话说\x3c\/h3\x3e\n\x3cp\x3e1.Angular 2 支持的 View(视图) 类型有哪几种 ？\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3eEmbedded Views - Template 模板元素\x3c\/li\x3e\n\x3cli\x3eHost Views - Component 组件\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e1.1 如何创建 Embedded View\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ngAfterViewInit() {\n    let view = this.tpl.createEmbeddedView(null);\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs cs\x22\x3e\x3ccode\x3engAfterViewInit() {\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e view = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.tpl.createEmbeddedView(\x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e);\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e1.2 如何创建 Host View\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22constructor(private injector: Injector,\n    private r: ComponentFactoryResolver) {\n    let factory = this.r.resolveComponentFactory(AppComponent);\n    let componentRef = factory.create(injector);\n    let view = componentRef.hostView;\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs delphi\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(\x3cspan class=\x22hljs-keyword\x22\x3eprivate\x3c\/span\x3e injector: Injector,\n    \x3cspan class=\x22hljs-keyword\x22\x3eprivate\x3c\/span\x3e r: ComponentFactoryResolver)\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e{\n    let factory = this.r.resolveComponentFactory(AppComponent);\n    let componentRef = factory.create(injector);\n    let view = componentRef.hostView;\n}\x3c\/span\x3e\n\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e2.Angular 2 Component 组件中定义的 \x26lt;template\x26gt; 模板元素为什么渲染后会被移除 ？\x3c\/p\x3e\n\x3cp\x3e因为 \x26lt;template\x26gt; 模板元素，已经被 Angular 2 解析并封装成 TemplateRef 实例，通过 TemplateRef 实例，我们可以方便地创建内嵌视图(Embedded View)，我们不需要像开篇中的例子那样，手动操作 \x26lt;template\x26gt; 模板元素。\x3c\/p\x3e\n\x3cp\x3e3.ViewRef 与 EmbeddedViewRef 之间有什么关系 ？\x3c\/p\x3e\n\x3cp\x3eViewRef 用于表示 Angular View(视图)，视图是可视化的 UI 界面。EmbeddedViewRef 继承于 ViewRef，用于表示 \x26lt;template\x26gt; 模板元素中定义的 UI 元素。\x3c\/p\x3e\n\x3cp\x3eViewRef\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ @angular\/core\/src\/linker\/view_ref.d.ts\nexport declare abstract class ViewRef {\n    destroyed: boolean;\n    abstract onDestroy(callback: Function): any;\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs typescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ @angular\/core\/src\/linker\/view_ref.d.ts\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edeclare\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eabstract\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e ViewRef {\n    destroyed: \x3cspan class=\x22hljs-built_in\x22\x3eboolean\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3eabstract\x3c\/span\x3e onDestroy(callback: \x3cspan class=\x22hljs-built_in\x22\x3eFunction\x3c\/span\x3e): \x3cspan class=\x22hljs-built_in\x22\x3eany\x3c\/span\x3e;\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eEmbeddedViewRef\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ @angular\/core\/src\/linker\/view_ref.d.ts\nexport declare abstract class EmbeddedViewRef\x3cC\x3e extends ViewRef {\n    context: C;\n    rootNodes: any[]; \/\/ 保存\x3ctemplate\x3e模板中定义的元素\n    abstract destroy(): void; \/\/ 用于销毁视图\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs scala\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ @angular\/core\/src\/linker\/view_ref.d.ts\x3c\/span\x3e\nexport declare \x3cspan class=\x22hljs-keyword\x22\x3eabstract\x3c\/span\x3e \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eEmbeddedViewRef\x26lt;C\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eViewRef\x3c\/span\x3e \x3c\/span\x3e{\n    context: \x3cspan class=\x22hljs-type\x22\x3eC\x3c\/span\x3e;\n    rootNodes: any[]; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 保存\x26lt;template\x26gt;模板中定义的元素\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eabstract\x3c\/span\x3e destroy(): void; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 用于销毁视图\x3c\/span\x3e\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e总结\x3c\/h3\x3e\n\x3cp\x3eAngular 2 中 TemplateRef 与 ViewContainerRef 的概念对于初学者来说会比较羞涩难懂，本文从基本的 HTML 5 \x26lt;template\x26gt; 模板元素开始，介绍了如何操作和应用页面中定义的模板。然后通过实例介绍了 Angular 2 中 TemplateRef 和 ViewContainerRef 的定义和作用。希望通过这篇文章，读者能更好的理解 TemplateRef 与 ViewContainerRef。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>Angular 2 TemplateRef &amp; ViewContainerRef</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000008672478">https://segmentfault.com/a/1190000008672478</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/4rbq2bsqelx/" target="_blank">https://alili.tech/archive/4rbq2bsqelx/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>