<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="CSS Animations vs Web Animations API"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>CSS Animations vs Web Animations API | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/h8n08h4r0ng/",
				"appid": "1613049289050283", 
				"title": "CSS Animations vs Web Animations API | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-11T02:30:07"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/ypxnxtgysi/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/c4yfd8e814m/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fh8n08h4r0ng%2f&text=CSS%20Animations%20vs%20Web%20Animations%20API"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fh8n08h4r0ng%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fh8n08h4r0ng%2f&text=CSS%20Animations%20vs%20Web%20Animations%20API"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fh8n08h4r0ng%2f&title=CSS%20Animations%20vs%20Web%20Animations%20API"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fh8n08h4r0ng%2f&is_video=false&description=CSS%20Animations%20vs%20Web%20Animations%20API"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=CSS%20Animations%20vs%20Web%20Animations%20API&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fh8n08h4r0ng%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fh8n08h4r0ng%2f&title=CSS%20Animations%20vs%20Web%20Animations%20API"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fh8n08h4r0ng%2f&title=CSS%20Animations%20vs%20Web%20Animations%20API"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fh8n08h4r0ng%2f&title=CSS%20Animations%20vs%20Web%20Animations%20API"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fh8n08h4r0ng%2f&title=CSS%20Animations%20vs%20Web%20Animations%20API"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">CSS Animations vs Web Animations API</h1><div class="meta"><div class="postdate"><time datetime="2019-01-11" itemprop="datePublished">2019-01-11</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e\n\x3cp\x3e作者：Ollie Williams\x3c\/p\x3e\n\x3cp\x3e原文：\x3ca href=\x22https:\/\/css-tricks.com\/css-animations-vs-web-animations-api\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eCSS Animations vs Web Animations API\x3c\/a\x3e\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e在  JavaScript 有一个原生动画 API 叫 Web Animations API，在这篇文章中简称为 WAAPI。MDN 上已经有 \x3ca href=\x22https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/API\/Web_Animations_API\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e很好的文档\x3c\/a\x3e，而且，Dan Wilson 为此写了 \x3ca href=\x22http:\/\/danielcwilson.com\/blog\/2015\/07\/animations-part-1\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e一个很棒的文章系列\x3c\/a\x3e。\x3c\/p\x3e\n\x3cp\x3e在本文中，我们一起来对比一下 WAAPI 和 CSS 动画。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e关于浏览器支持\x3c\/h2\x3e\n\x3cp\x3e尽管浏览器原生支持仍然有限，但 WAAPI 有一个全面和强大的 \x3ca href=\x22https:\/\/github.com\/web-animations\/web-animations-js\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3epolyfill\x3c\/a\x3e，使得现在就能在生产环境使用。\x3c\/p\x3e\n\x3cp\x3e同样地，可以在 \x3ca href=\x22https:\/\/github.com\/web-animations\/web-animations-js\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eCan I Use\x3c\/a\x3e 查看浏览器兼容性数据。然而，这并没有提供很好的信息来支持 WAAPI 的所有子功能。这里有一个检查工具：\x3c\/p\x3e\n\x3cp\x3eSee the Pen \x3ca href=\x22https:\/\/codepen.io\/danwilson\/pen\/xGBKVq\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eWAAPI Browser Support Test\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22danwilson\/pen\/xGBKVq\/\x22 data-typeid=\x223\x22\x3e点击预览\x3c\/button\x3e by Dan Wilson (\x3ca href=\x22https:\/\/codepen.io\/danwilson\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e@danwilson\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22danwilson\x22 data-typeid=\x223\x22\x3e点击预览\x3c\/button\x3e) on \x3ca href=\x22https:\/\/codepen.io\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eCodePen\x3c\/a\x3e.\x3c\/p\x3e\n\x3cp\x3e要想再没有 polyfill 的情况下体验所有功能，请使用 Firefox Nightly。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3eWAAPI 的基础知识\x3c\/h2\x3e\n\x3cp\x3e如果你曾经使用 jQuery  的 \x3ccode\x3e.animate()\x3c\/code\x3e，那么应该会觉得 WAAPI 的基本语法看起来很熟悉。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var element = document.querySelector(\x27.animate-me\x27);\nelement.animate(keyframes, 1000);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e element = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.querySelector(\x3cspan class=\x22hljs-string\x22\x3e\x27.animate-me\x27\x3c\/span\x3e);\nelement.animate(keyframes, \x3cspan class=\x22hljs-number\x22\x3e1000\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3eanimate\x3c\/code\x3e 方法接受两个参数：关键帧和持续时间。与 jQuery 相比的优势是，不仅是浏览器内置，而且性能也更好。\x3c\/p\x3e\n\x3cp\x3e第一个参数，关键帧，是一个对象数组，每个对象都是动画中的一个关键帧。看这个简单的例子：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var keyframes = [\n  { opacity: 0 },\n  { opacity: 1 }\n];\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e keyframes = [\n  { \x3cspan class=\x22hljs-attr\x22\x3eopacity\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e },\n  { \x3cspan class=\x22hljs-attr\x22\x3eopacity\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e }\n];\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e第二个参数，持续时间，指的是想要动画持续多久，在上面的例子中是 1000 毫秒。接下来看一个更令人兴奋的例子。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e用 WAAPI 重新创建一个 animista 的 CSS 动画\x3c\/h2\x3e\n\x3cp\x3e这里有一些从 \x3ca href=\x22http:\/\/animista.net\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eanimista\x3c\/a\x3e 拉取的 CSS 代码，被称为 slide-in-blurred-top 的入场动画。看起来很漂亮\x3c\/p\x3e\n\x3cp\x3e在 \x3ca href=\x22http:\/\/animista.net\/play\/entrances\/slide-in-blurred\/slide-in-blurred-top\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e实际PERF\x3c\/a\x3e 比这个 GIF 效果好很多。\x3c\/p\x3e\n\x3cp\x3e以下是 CSS 中的关键帧：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x220% {\n  transform: translateY(-1000px) scaleY(2.5) scaleX(.2);\n  transform-origin: 50% 0;\n  filter: blur(40px);\n  opacity: 0;\n}\n100% {\n  transform: translateY(0) scaleY(1) scaleX(1);\n  transform-origin: 50% 50%;\n  filter: blur(0);\n  opacity: 1;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22css hljs\x22\x3e\x3ccode class=\x22css\x22\x3e0% {\n  \x3cspan class=\x22hljs-attribute\x22\x3etransform\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3etranslateY\x3c\/span\x3e(-1000px) \x3cspan class=\x22hljs-built_in\x22\x3escaleY\x3c\/span\x3e(2.5) \x3cspan class=\x22hljs-built_in\x22\x3escaleX\x3c\/span\x3e(.2);\n  \x3cspan class=\x22hljs-attribute\x22\x3etransform-origin\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e50%\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-attribute\x22\x3efilter\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3eblur\x3c\/span\x3e(40px);\n  \x3cspan class=\x22hljs-attribute\x22\x3eopacity\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n}\n100% {\n  \x3cspan class=\x22hljs-attribute\x22\x3etransform\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3etranslateY\x3c\/span\x3e(0) \x3cspan class=\x22hljs-built_in\x22\x3escaleY\x3c\/span\x3e(1) \x3cspan class=\x22hljs-built_in\x22\x3escaleX\x3c\/span\x3e(1);\n  \x3cspan class=\x22hljs-attribute\x22\x3etransform-origin\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e50%\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e50%\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-attribute\x22\x3efilter\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3eblur\x3c\/span\x3e(0);\n  \x3cspan class=\x22hljs-attribute\x22\x3eopacity\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在 WAAPI 中代码基本相同：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var keyframes = [\n  { \n    transform: \x27translateY(-1000px) scaleY(2.5) scaleX(.2)\x27, \n    transformOrigin: \x2750% 0\x27,\n    filter: \x27blur(40px)\x27,\n    opacity: 0 \n  },\n  { \n    transform: \x27translateY(0) scaleY(1) scaleX(1)\x27,\n    transformOrigin: \x2750% 50%\x27,\n    filter: \x27blur(0)\x27,\n    opacity: 1 \n  }\n];\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e keyframes = [\n  { \n    \x3cspan class=\x22hljs-attr\x22\x3etransform\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27translateY(-1000px) scaleY(2.5) scaleX(.2)\x27\x3c\/span\x3e, \n    \x3cspan class=\x22hljs-attr\x22\x3etransformOrigin\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x2750% 0\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3efilter\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27blur(40px)\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3eopacity\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e \n  },\n  { \n    \x3cspan class=\x22hljs-attr\x22\x3etransform\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27translateY(0) scaleY(1) scaleX(1)\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3etransformOrigin\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x2750% 50%\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3efilter\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27blur(0)\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3eopacity\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e \n  }\n];\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e可以看出，将关键帧应用到需要动画的元素上是多么容易：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22element.animate(keyframes, 700);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3eelement.animate(keyframes, \x3cspan class=\x22hljs-number\x22\x3e700\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e为了简单起见，只指定了持续时间。但是，我们可以使用这个第二个参数来传递更多的选项，至少也应该指定一个缓动效果。以下是所有可用选项的完整列表，其中包含一些示例值：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var options = {\n  iterations: Infinity,\n  iterationStart: 0,\n  delay: 0,\n  endDelay: 0,\n  direction: \x27alternate\x27,\n  duration: 700,\n  fill: \x27forwards\x27,\n  easing: \x27ease-out\x27,\n}\nelement.animate(keyframes, options);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e options = {\n  \x3cspan class=\x22hljs-attr\x22\x3eiterations\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3eInfinity\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3eiterationStart\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3edelay\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3eendDelay\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3edirection\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27alternate\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3eduration\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e700\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3efill\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27forwards\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3eeasing\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27ease-out\x27\x3c\/span\x3e,\n}\nelement.animate(keyframes, options);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e加上这些选项，我们的动画将从头开始，没有任何延迟，在动画完成后往返循环播放。\x3c\/p\x3e\n\x3cp\x3e不爽的是，对于熟悉 CSS 动画的人来说，一些术语跟我们习惯的有所不同。好处是打字会更快一些！\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e使用 \x3ccode\x3eeasing\x3c\/code\x3e 而不是 \x3ccode\x3eanimation-timing-function\x3c\/code\x3e\n\x3c\/li\x3e\n\x3cli\x3e不是 \x3ccode\x3eanimation-iteration-count\x3c\/code\x3e，而是 \x3ccode\x3eiterations\x3c\/code\x3e。如果我们希望动画永远重复，使用 \x3ccode\x3eInfinity\x3c\/code\x3e 而不是 \x3ccode\x3einfinite\x3c\/code\x3e。有点混乱， \x3ccode\x3eInfinity\x3c\/code\x3e 不带引号。\x3ccode\x3eInfinity\x3c\/code\x3e 是一个 JavaScript 关键字，而其他值都是字符串。\x3c\/li\x3e\n\x3cli\x3e我们使用毫秒而不是秒，对于之前写过许多 JavaScript 的人来说，这应该是一样的。（你也可以在 CSS 动画中使用毫秒数，但很少有人使用。）\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e我们来仔细看看一个选项：\x3ccode\x3eiterationStart\x3c\/code\x3e。 \x3c\/p\x3e\n\x3cp\x3e当我第一次碰到 \x3ccode\x3eiterationStart\x3c\/code\x3e 有点困惑。为什么要从指定的迭代开始，而不是只要减少迭代次数？当使用十进制数时，此选项非常有用。例如，可以将其设置为  \x3ccode\x3e.5\x3c\/code\x3e，动画将开始一半。要做一个完整的动画需要两个一半，所以如果迭代次数设置为 1，并且将 \x3ccode\x3eiterationStart\x3c\/code\x3e 设置为  \x3ccode\x3e.5\x3c\/code\x3e，动画将从一半到动画结束播放，然后从动画开头开始，结束于中间！ \x3c\/p\x3e\n\x3cp\x3e值得注意的是，也可以将迭代次数设置为小于 1。例如：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var option = {\n  iterations: .5,\n  iterationStart: .5\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e option = {\n  \x3cspan class=\x22hljs-attr\x22\x3eiterations\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e.5\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3eiterationStart\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e.5\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样，动画会从中间开始，一直播放到最后。 \x3c\/p\x3e\n\x3cp\x3eendDelay：如果要将多个动画串在一起，但是希望在一个动画的结尾和后续动画的开始之间存在差距，这时 endDelay 就很有用。这是一个有用的视频，由 Patrick Brosset 来解释。\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/www.youtube.com\/embed\/hWe-qukNrN8\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e一个 YouTube 的视频\x3c\/a\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e缓动（easing）\x3c\/h2\x3e\n\x3cp\x3e在任何动画中，缓动都是最重要的元素之一。WAAPI 为我们提供了两种不同的方式设置缓动 - 在我们的关键帧数组或我们的选项对象内。\x3c\/p\x3e\n\x3cp\x3e在 CSS 中，如果使用 \x3ccode\x3eanimation-timing-function: ease-in-out\x3c\/code\x3e 你可能会认为动画会缓慢开始，然后缓慢结束。实际上，这些缓动应用在关键帧之间，而不是整个动画。这可以对动画的感觉进行细粒度的控制。WAAPI 也提供这种功能。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var keyframes = [\n  { opacity: 0, easing: \x27ease-in\x27 }, \n  { opacity: 0.5, easing: \x27ease-out\x27 }, \n  { opacity: 1 }\n]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e keyframes = [\n  { \x3cspan class=\x22hljs-attr\x22\x3eopacity\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3eeasing\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27ease-in\x27\x3c\/span\x3e }, \n  { \x3cspan class=\x22hljs-attr\x22\x3eopacity\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0.5\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3eeasing\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27ease-out\x27\x3c\/span\x3e }, \n  { \x3cspan class=\x22hljs-attr\x22\x3eopacity\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e }\n]\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e值得注意的是，在 CSS 和 WAAPI 中，不应该传入最后一帧的缓动值，因为这将不起作用。可是很多人会犯这种错误。\x3c\/p\x3e\n\x3cp\x3e有时候，在整个动画中添加缓动效果更为直观。这在 CSS 是不可能的，但现在可以在 WAAPI 中实现。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var options = {\n  duration: 1000,\n  easing: \x27ease-in-out\x27,\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e options = {\n  \x3cspan class=\x22hljs-attr\x22\x3eduration\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1000\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3eeasing\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27ease-in-out\x27\x3c\/span\x3e,\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e可以看到这两种缓动在 CodePen 上的区别：\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/codepen.io\/cssgrid\/pen\/OmrVeQ\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e点我查看\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22cssgrid\/pen\/OmrVeQ\x22 data-typeid=\x223\x22\x3e点击预览\x3c\/button\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e缓动 vs 线性\x3c\/h2\x3e\n\x3cp\x3e值得注意的是 CSS 动画和 WAAPI 之间的另一个区别：\x3cstrong\x3e在 CSS 中 默认值是 ease，而在 WAAPI 默认是 linear。\x3c\/strong\x3e ease 实际上是 \x3ccode\x3eease-in-out\x3c\/code\x3e 的一个版本，当你想偷懒时这是一个非常好的选择。同时，线性代表致命的沉闷和无生命 - 一致的速度看起来机械和不自然。它被选为默认值，可能因为它是最中立的选项。然而，在使用 WAAPI 时，更好是使用缓动，以免动画看起来很乏味和机械。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e性能\x3c\/h2\x3e\n\x3cp\x3eWAAPI 提供与 CSS 动画相同的性能改进，尽管这并不意味着一定就是平滑的动画。 \x3c\/p\x3e\n\x3cp\x3e希望这个 API 的性能优化做到，使我们可以避免使用 \x3ccode\x3ewill-change\x3c\/code\x3e和 \x3ccode\x3etranslateZ\x3c\/code\x3e 成为可能。但是，至少在目前的浏览器实现中，这些属性在处理性能问题方面仍然是有帮助，有必要的。\x3c\/p\x3e\n\x3cp\x3e但是，如果你的动画有延迟，则无需担心使用 \x3ccode\x3ewill-change\x3c\/code\x3e。web animations 规范的主要作者对 \x3ca href=\x22https:\/\/damp-lake-50659.herokuapp.com\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eAnimation for Work Slack community\x3c\/a\x3e 提出了一些有趣的建议，希望他不介意我在这里重复：\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e如果有一个正向的延迟，不需要使用 \x3ccode\x3ewill-change\x3c\/code\x3e，因为浏览器将在延迟开始时进行分层，当动画启动时，它将准备就绪。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3eWAAPI 对战 CSS 动画？\x3c\/h2\x3e\n\x3cp\x3eWAAPI 为我们提供了一套已经在 CSS 中实现的 JavaScript 语法。然而，它们不应该被视为对手。如果我们坚持使用 CSS 完成动画和转换，那么我们可以在 WAAPI 进行动画交互。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3e动画对象\x3c\/h2\x3e\n\x3cp\x3e\x3ccode\x3e.animate()\x3c\/code\x3e 方法不仅处理元素的动画，它也返回一些东西。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var myAnimation = element.animate(keyframes, options);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e myAnimation = element.animate(keyframes, options);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在控制台中查看的动画对象\x3c\/p\x3e\n\x3cp\x3e如果我们在控制台中查看返回值，会发现这是一个动画对象。这为我们提供了各种各样的功能，其中一些是不言自明，比如 \x3ccode\x3emyAnimation.pause()\x3c\/code\x3e。通过更改 \x3ccode\x3eanimation-play-state\x3c\/code\x3e 属性，我们可以通过 CSS 动画实现类似的结果，但 WAAPI 语法比 \x3ccode\x3eelement.style.animationPlayState = \x22paused\x22\x3c\/code\x3e 更简洁。我们也可以通过 \x3ccode\x3emyAnimation.reverse()\x3c\/code\x3e 轻松反转动画，同样地，跟我们使用脚本更改 CSS 的 \x3ccode\x3eanimation-direction\x3c\/code\x3e 属性相比，稍微有点进步。\x3c\/p\x3e\n\x3cp\x3e然而，到目前为止，使用 JavaScript 操作 \x3ccode\x3e@keyframe\x3c\/code\x3e 并不是件容易的的事。即使是重新启动动画这样简单的事，也是需要一些技巧的，就像 Chris Coyier \x3ca href=\x22https:\/\/css-tricks.com\/restart-css-animation\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e先前写过的那样\x3c\/a\x3e。使用 WAAPI，我们可以简单地使用 \x3ccode\x3emyAnimation.play()\x3c\/code\x3e ，如果动画已经完成，将从一开始就重播动画，或者如果我们暂停播放，则从中间迭代播放动画。\x3c\/p\x3e\n\x3cp\x3e我们甚至可以轻松地改变动画的速度。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22myAnimation.playbackRate = 2; \/\/ speed it up\nmyAnimation.playbackRate = .4; \/\/ use a number less than one to slow it down\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3emyAnimation.playbackRate = \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ speed it up\x3c\/span\x3e\nmyAnimation.playbackRate = \x3cspan class=\x22hljs-number\x22\x3e.4\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ use a number less than one to slow it down\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3egetAnimations()\x3c\/h2\x3e\n\x3cp\x3e这个方法将返回所有动画对象的数组，包含使用 WAAPI 定义的动画和 CSS 转换或动画。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22element.getAnimations() \/\/ returns any animations or transitions applied to our element using  CSS or WAAPI\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3eelement.getAnimations() \x3cspan class=\x22hljs-comment\x22\x3e\/\/ returns any animations or transitions applied to our element using  CSS or WAAPI\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e如果你喜欢使用 CSS 来定义和使用动画，\x3ccode\x3egetAnimations()\x3c\/code\x3e  允许 API​​ 与 \x3ccode\x3e@keyframes\x3c\/code\x3e 结合使用。你可以继续使用 CSS 进行大部分动画工作，然后在需要 API 时获得使用 API 的优势。\x3c\/p\x3e\n\x3cp\x3e即使一个 DOM 元素只使用到一个动画，\x3ccode\x3egetAnimations()\x3c\/code\x3e 也将始终返回一个数组。我们使用那个单一的动画对象来处理。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var h2 = document.querySelector(\x26quot;h2\x26quot;);\nvar myCSSAnimation = h2.getAnimations()[0];\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e h2 = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.querySelector(\x3cspan class=\x22hljs-string\x22\x3e\x22h2\x22\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e myCSSAnimation = h2.getAnimations()[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e];\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们也可以在 CSS 动画中使用 web animation API :)\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22myCSSAnimation.playbackRate = 4;\nmyCSSAnimation.reverse();\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3emyCSSAnimation.playbackRate = \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e;\nmyCSSAnimation.reverse();\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader9\x22\x3ePromise 和 Event\x3c\/h2\x3e\n\x3cp\x3e很多通过 CSS 触发的事件，现在我们已经可以使用 JavaScript 代码来完成：   \x3ccode\x3eanimationstart\x3c\/code\x3e，\x3ccode\x3eanimationend\x3c\/code\x3e，\x3ccode\x3eanimationiteration\x3c\/code\x3e 和 \x3ccode\x3etransitionend\x3c\/code\x3e。之前经常需要监听动画或转换的结束，以便从 DOM 中删除应用的元素。\x3c\/p\x3e\n\x3cp\x3e在动画对象可以使用 WAAPI 来完成 \x3ccode\x3eanimationend\x3c\/code\x3e 或 \x3ccode\x3etransitionend\x3c\/code\x3e 做的事情：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22myAnimation.onfinish = function() {\n  element.remove();\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3emyAnimation.onfinish = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  element.remove();\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eWAAPI 为我们提供了两个选择：event 和 promise。动画对象的 \x3ccode\x3e.finished\x3c\/code\x3e 方法会返回一个在动画结束时的 promise。下面这段代码是上面例子的 promise 版本：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22myAnimation.finished.then(() =\x3e\n  element.remove())\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3emyAnimation.finished.then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e\n  element.remove())\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们来看看来自 Mozilla 开发者网络中的一个稍微复杂点的例子。\x3ccode\x3ePromise.all\x3c\/code\x3e 接受一个 promise 的数组，一旦所有 promise 完成才会运行回调函数。可以看出，\x3ccode\x3eelement.getAnimations()\x3c\/code\x3e 返回的是一个动画对象数组。我们可以将数组中的所有动画对象 map 到每个动画对象的 \x3ccode\x3e.finished\x3c\/code\x3e上，这样就获得需要的 promise 数组。\x3c\/p\x3e\n\x3cp\x3e在这个例子中，只有在页面上的所有动画完成后，我们的函数才能运行。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22Promise.all(document.getAnimations().map(animation =\x3e \n  animation.finished)).then(function() {           \n    \/\/ do something cool \n  })\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e.all(\x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getAnimations().map(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eanimation\x3c\/span\x3e =\x26gt;\x3c\/span\x3e \n  animation.finished)).then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{           \n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ do something cool \x3c\/span\x3e\n  })\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader10\x22\x3e未来\x3c\/h2\x3e\n\x3cp\x3e本文中提到的功能只是一个开始。从目前的规范和实施来看，未来会有一个很强大动画 API。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>CSS Animations vs Web Animations API</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000009938846">https://segmentfault.com/a/1190000009938846</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/h8n08h4r0ng/" target="_blank">https://alili.tech/archive/h8n08h4r0ng/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>