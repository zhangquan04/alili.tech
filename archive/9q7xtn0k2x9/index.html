<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="详解js深浅复制"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>详解js深浅复制 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/9q7xtn0k2x9/",
				"appid": "1613049289050283", 
				"title": "详解js深浅复制 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-17T02:30:25"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/zrk82vafx9/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/gzss9cnpjnq/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f9q7xtn0k2x9%2f&text=%e8%af%a6%e8%a7%a3js%e6%b7%b1%e6%b5%85%e5%a4%8d%e5%88%b6"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f9q7xtn0k2x9%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f9q7xtn0k2x9%2f&text=%e8%af%a6%e8%a7%a3js%e6%b7%b1%e6%b5%85%e5%a4%8d%e5%88%b6"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f9q7xtn0k2x9%2f&title=%e8%af%a6%e8%a7%a3js%e6%b7%b1%e6%b5%85%e5%a4%8d%e5%88%b6"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f9q7xtn0k2x9%2f&is_video=false&description=%e8%af%a6%e8%a7%a3js%e6%b7%b1%e6%b5%85%e5%a4%8d%e5%88%b6"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e8%af%a6%e8%a7%a3js%e6%b7%b1%e6%b5%85%e5%a4%8d%e5%88%b6&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f9q7xtn0k2x9%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f9q7xtn0k2x9%2f&title=%e8%af%a6%e8%a7%a3js%e6%b7%b1%e6%b5%85%e5%a4%8d%e5%88%b6"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f9q7xtn0k2x9%2f&title=%e8%af%a6%e8%a7%a3js%e6%b7%b1%e6%b5%85%e5%a4%8d%e5%88%b6"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f9q7xtn0k2x9%2f&title=%e8%af%a6%e8%a7%a3js%e6%b7%b1%e6%b5%85%e5%a4%8d%e5%88%b6"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f9q7xtn0k2x9%2f&title=%e8%af%a6%e8%a7%a3js%e6%b7%b1%e6%b5%85%e5%a4%8d%e5%88%b6"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">详解js深浅复制</h1><div class="meta"><div class="postdate"><time datetime="2019-01-17" itemprop="datePublished">2019-01-17</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3e前言\x3c\/h2\x3e\n\x3cp\x3e在之前写继承的过程谈到了深浅复制的问题，因为有读者反映到需要解析，趁今天周末写一篇解析，今天的主体相对之前来说理解难度低一些，篇幅可能也比较短，诸君按需阅读即可。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e从两种数据类型说起\x3c\/h2\x3e\n\x3cp\x3e在js中，变量的类型可以大致分成两种：\x3cstrong\x3e基本数据类型和引用数据类型\x3c\/strong\x3e，其中基本数据类型指的是简单的数据段，包括：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3ccode\x3eUnderfied\x3c\/code\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ccode\x3eNull\x3c\/code\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ccode\x3eBoolean\x3c\/code\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ccode\x3eNumber\x3c\/code\x3e\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eString\x3c\/code\x3e(字符串在一些其他语言中是被当做对象使用的，属于引用类型，但在js里是基本类型)\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e而引用类型的值指的是\x3cstrong\x3e可能包含多个值的对象\x3c\/strong\x3e。可能上面这种描述大家都看过不少，但是有没有思考过\x3cstrong\x3e为什么要把数据类型这样分呢？\x3c\/strong\x3e本质上，是因为基本数据类型保存在\x3cstrong\x3e栈内存\x3c\/strong\x3e,而引用类型保存在\x3cstrong\x3e堆内存中\x3c\/strong\x3e。那再进一步问：\x3cstrong\x3e为什么要分两种保存方式呢？\x3c\/strong\x3e 根本原因在于\x3cstrong\x3e保存在栈内存的必须是大小固定的数据，引用类型的大小不固定，只能保存在堆内存中，但是我们可以把它的地址写在占内存中以供我们访问\x3c\/strong\x3e。举个例子:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var a = 1;\/\/定义了一个number类型\nvar obj1 = {\/\/定义了一个objr类型\n    name:\x27obj\x27\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e a = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\x3cspan class=\x22hljs-comment\x22\x3e\/\/定义了一个number类型\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e obj1 = {\x3cspan class=\x22hljs-comment\x22\x3e\/\/定义了一个objr类型\x3c\/span\x3e\n    name:\x3cspan class=\x22hljs-string\x22\x3e\x27obj\x27\x3c\/span\x3e\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在执行这段代码后，内存空间里是这样的：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVLfes?w=1489\x26amp;h=850\x22 src=\x22https:\/\/static.alili.tech\/img\/bVLfes?w=1489\x26amp;h=850\x22 alt=\x22栈内存和堆内存\x22 title=\x22栈内存和堆内存\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e因为这种保存方式的存在，所以我们在操作变量的时候，\x3cstrong\x3e如果是基本数据类型，则按值访问，操作的就是变量保存的值；如果是引用类型的值，我们只是通过保存在变量中的引用类型的地址类操作实际对象\x3c\/strong\x3e。从而也引出了所谓的深浅复制问题。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e深复制和浅复制\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e不同的复制方式\x3c\/h3\x3e\n\x3cp\x3e紧接着上文的内容，假设有以下代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/例子1\nvar a = 1;\nvar b = a;\/\/复制\nconsole.log(b)\/\/1\na = 2;\/\/改变a的值\nconsole.log(b)\/\/1\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/例子1\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e a = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e b = a;\x3cspan class=\x22hljs-comment\x22\x3e\/\/复制\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(b)\x3cspan class=\x22hljs-comment\x22\x3e\/\/1\x3c\/span\x3e\na = \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\x3cspan class=\x22hljs-comment\x22\x3e\/\/改变a的值\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(b)\x3cspan class=\x22hljs-comment\x22\x3e\/\/1\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e可以看到，我们复制完b以后，即使改变a的值，b也不会改变，因为a和b是相互独立的，按照上面的图，也就是在栈内存中创建了一个变量b 保存的值也是2；\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/例子2\nvar color1 = [\x27red\x27,\x27green\x27];\nvar color2 = color1;\/\/复制\nconsole.log(color2)\/\/[\x27red\x27,\x27green\x27];\ncolor1.push(\x27black\x27) ;\/\/改变color1的值\nconsole.log(color2)\/\/[\x27red\x27,\x27green\x27,\x27black\x27]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs awk\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-regexp\x22\x3e\/\/\x3c\/span\x3e例子\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e\nvar color1 = [\x3cspan class=\x22hljs-string\x22\x3e\x27red\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x27green\x27\x3c\/span\x3e];\nvar color2 = color1;\x3cspan class=\x22hljs-regexp\x22\x3e\/\/\x3c\/span\x3e复制\nconsole.log(color2)\x3cspan class=\x22hljs-regexp\x22\x3e\/\/\x3c\/span\x3e[\x3cspan class=\x22hljs-string\x22\x3e\x27red\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x27green\x27\x3c\/span\x3e];\ncolor1.push(\x3cspan class=\x22hljs-string\x22\x3e\x27black\x27\x3c\/span\x3e) ;\x3cspan class=\x22hljs-regexp\x22\x3e\/\/\x3c\/span\x3e改变color1的值\nconsole.log(color2)\x3cspan class=\x22hljs-regexp\x22\x3e\/\/\x3c\/span\x3e[\x3cspan class=\x22hljs-string\x22\x3e\x27red\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x27green\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x27black\x27\x3c\/span\x3e]\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在例子2中，我们按照完全相同的步骤，操作了一个数组，但是返回的结果却完全不一样，因为此时的复制，实际上是这样：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVLffz?w=1489\x26amp;h=850\x22 src=\x22https:\/\/static.alili.tech\/img\/bVLffz?w=1489\x26amp;h=850\x22 alt=\x22数组的复制\x22 title=\x22数组的复制\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e\x3cstrong\x3e我们只是复制了一次引用类型的地址而已\x3c\/strong\x3e，所以，不管接下来我们是操作color1还是color2，本质上都是\x3cstrong\x3e操作同一个数组对象\x3c\/strong\x3e。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e深复制和浅复制\x3c\/h3\x3e\n\x3cp\x3e刚刚说到，简单的赋值没有办法复制引用类型，那如果我们就是想复制上面的color1数组怎么办呢？可以这样:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var color1 = [\x27red\x27,\x27green\x27]; \nvar color2 = [];\n\/\/复制\nfor(var i  = 0;i \x3c color1.length;i\x2b\x2b){\n    color2[i] = color1[i]; \n}\nconsole.log(color2)\/\/[\x27red\x27,\x27green\x27];\ncolor1.push(\x27black\x27) ;\/\/改变color1的值\nconsole.log(color2)\/\/[\x27red\x27,\x27green\x27]\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e color1 = [\x3cspan class=\x22hljs-string\x22\x3e\x27red\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x27green\x27\x3c\/span\x3e]; \n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e color2 = [];\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/复制\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i  = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;i \x26lt; color1.length;i\x2b\x2b){\n    color2[i] = color1[i]; \n}\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(color2)\x3cspan class=\x22hljs-comment\x22\x3e\/\/[\x27red\x27,\x27green\x27];\x3c\/span\x3e\ncolor1.push(\x3cspan class=\x22hljs-string\x22\x3e\x27black\x27\x3c\/span\x3e) ;\x3cspan class=\x22hljs-comment\x22\x3e\/\/改变color1的值\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(color2)\x3cspan class=\x22hljs-comment\x22\x3e\/\/[\x27red\x27,\x27green\x27]\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这一次我们先创建了一个空数组color2,然后让\x3ccode\x3ecolor2\x3c\/code\x3e的每个值都和\x3ccode\x3ecolor1\x3c\/code\x3e对应相等，最后的\x3ccode\x3ecolor1\x3c\/code\x3e和\x3ccode\x3ecolor2\x3c\/code\x3e是相互独立的了，满足了我们的需要。当然对于对象类型也是一样的，使用\x3ccode\x3efor-in\x3c\/code\x3e遍历取代这里的\x3ccode\x3efor\x3c\/code\x3e循环即可。\x3c\/p\x3e\n\x3cp\x3e问题真的就这样解决了吗？当然没有，不过以上这种\x3cstrong\x3e只复制了第一层属性的方式就叫做浅复制\x3c\/strong\x3e,浅复制有什么缺陷呢？我们可以先思考一下，\x3cstrong\x3e从直接使用\x3ccode\x3e=\x3c\/code\x3e符号赋值进行复制到浅复制，能够复制成功(成功是指复制的结果与复制源完全独立)，是因为我们复制的对象都是基本类型\x3c\/strong\x3e，怎么解释呢？\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e在复制基本数据类型时，我们直接使用\x3ccode\x3e=\x3c\/code\x3e完成复制\x3c\/li\x3e\n\x3cli\x3e在引用类型的时候，我们循环遍历对象，对每个属性或值使用\x3ccode\x3e=\x3c\/code\x3e完成复制\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e有没有注意到上文的\x3ccode\x3ecolor1\x3c\/code\x3e例子使用浅复制之所以能够复制成功，是因为\x3cstrong\x3e数组中的每一项都是基本数据类型(string)\x3c\/strong\x3e，所以猜出了浅复制的局限了吗？\x3cstrong\x3e假如数组中某一项保存的是一个对象，或者是一个数组，又或者对象的某个属性还是一个对象呢？\x3c\/strong\x3e（换句话说就是引用类型的某个属性还是引用类型），如：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var person = {\n    name:\x27lin\x27,\n    score:{\n        physics:85,\n        math:99\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs yaml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-string\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3eperson\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e=\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e{\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e    name:\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e\x27lin\x27\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e,\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e    score:\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e{\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e        physics:\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e85\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e,\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e        math:\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e99\x3c\/span\x3e\n    \x3cspan class=\x22hljs-string\x22\x3e}\x3c\/span\x3e\n\x3cspan class=\x22hljs-string\x22\x3e}\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这个对象的\x3ccode\x3e分数score\x3c\/code\x3e属性就还是一个对象，那我们使用前面提到\x3ccode\x3efor-in\x3c\/code\x3e遍历复制的时候，对\x3ccode\x3escore\x3c\/code\x3e的复制，不就又变成了我们前面提到的\x3cstrong\x3e只复制了地址\x3c\/strong\x3e的情况吗？再想想浅复制实现的原理,相信大家猜到了深复制实现的方式:\x3cstrong\x3e对属性中所有引用类型的值，遍历到是基本类型的值为止\x3c\/strong\x3e，从这种方式上，我们很容易就可以想到利用\x3cstrong\x3e递归\x3c\/strong\x3e来实现深复制。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function deepCopy (obj) {\n    var result;\n\n    \/\/引用类型分数组和对象分别递归\n    if (Object.prototype.toString.call(obj) == \x27[object Array]\x27) {\n      result = []\n      for (i = 0; i \x3c obj.length; i\x2b\x2b) {\n        result[i] = deepCopy(obj[i])\n      }\n    } else if (Object.prototype.toString.call(obj) == \x27[object Object]\x27) {\n      result = {}\n      for (var attr in obj) {\n        result[attr] = deepCopy(obj[attr])\n      }\n    }\n    \/\/值类型直接返回\n    else {\n      return obj\n    }\n    return result\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edeepCopy\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eobj\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e result;\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/引用类型分数组和对象分别递归\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.prototype.toString.call(obj) == \x3cspan class=\x22hljs-string\x22\x3e\x27[object Array]\x27\x3c\/span\x3e) {\n      result = []\n      \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; obj.length; i\x2b\x2b) {\n        result[i] = deepCopy(obj[i])\n      }\n    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.prototype.toString.call(obj) == \x3cspan class=\x22hljs-string\x22\x3e\x27[object Object]\x27\x3c\/span\x3e) {\n      result = {}\n      \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e attr \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e obj) {\n        result[attr] = deepCopy(obj[attr])\n      }\n    }\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/值类型直接返回\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e obj\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e result\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上面的函数很简单：对于传入的参数，首先判断是否为引用类型，如果不是，直接返回即可；如果是，循环遍历该对象的属性，如果某个属性还是引用类型，则针对该属性再次调用\x3ccode\x3edeepCopy\x3c\/code\x3e函数，从而完成深复制。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e附注\x3c\/h3\x3e\n\x3cp\x3e对于浅复制，其实还有其他的实现方式，比如数组中\x3ccode\x3econcat\x3c\/code\x3e和\x3ccode\x3eslice\x3c\/code\x3e方法，对于这些还是希望大家自己了解，本本主要针对深浅复制的实现原理进行解析。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3e小结\x3c\/h2\x3e\n\x3cp\x3e对于深浅复制的区别，其实核心的关键点就是\x3cstrong\x3e是只复制了第一属性还是完全复制了所有的属性\x3c\/strong\x3e，可能有些地方写的稍显啰嗦或者描述不当，欢迎提出意见和建议(然而我并不一定会听，哈哈)。如果对读者有帮助，还是希望能点个推荐。以上内容属于个人见解，如果有不同意见，欢迎指出和探讨。请尊重作者的版权，转载请注明出处，如作商用，请与作者联系，感谢！\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>详解js深浅复制</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000008838101">https://segmentfault.com/a/1190000008838101</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/9q7xtn0k2x9/" target="_blank">https://alili.tech/archive/9q7xtn0k2x9/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>