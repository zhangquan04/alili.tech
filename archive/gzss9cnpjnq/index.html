<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="记一次游戏H5开发经验"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>记一次游戏H5开发经验 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/gzss9cnpjnq/",
				"appid": "1613049289050283", 
				"title": "记一次游戏H5开发经验 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-17T02:30:25"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/9q7xtn0k2x9/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/t5io09saycc/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fgzss9cnpjnq%2f&text=%e8%ae%b0%e4%b8%80%e6%ac%a1%e6%b8%b8%e6%88%8fH5%e5%bc%80%e5%8f%91%e7%bb%8f%e9%aa%8c"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fgzss9cnpjnq%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fgzss9cnpjnq%2f&text=%e8%ae%b0%e4%b8%80%e6%ac%a1%e6%b8%b8%e6%88%8fH5%e5%bc%80%e5%8f%91%e7%bb%8f%e9%aa%8c"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fgzss9cnpjnq%2f&title=%e8%ae%b0%e4%b8%80%e6%ac%a1%e6%b8%b8%e6%88%8fH5%e5%bc%80%e5%8f%91%e7%bb%8f%e9%aa%8c"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fgzss9cnpjnq%2f&is_video=false&description=%e8%ae%b0%e4%b8%80%e6%ac%a1%e6%b8%b8%e6%88%8fH5%e5%bc%80%e5%8f%91%e7%bb%8f%e9%aa%8c"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e8%ae%b0%e4%b8%80%e6%ac%a1%e6%b8%b8%e6%88%8fH5%e5%bc%80%e5%8f%91%e7%bb%8f%e9%aa%8c&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fgzss9cnpjnq%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fgzss9cnpjnq%2f&title=%e8%ae%b0%e4%b8%80%e6%ac%a1%e6%b8%b8%e6%88%8fH5%e5%bc%80%e5%8f%91%e7%bb%8f%e9%aa%8c"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fgzss9cnpjnq%2f&title=%e8%ae%b0%e4%b8%80%e6%ac%a1%e6%b8%b8%e6%88%8fH5%e5%bc%80%e5%8f%91%e7%bb%8f%e9%aa%8c"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fgzss9cnpjnq%2f&title=%e8%ae%b0%e4%b8%80%e6%ac%a1%e6%b8%b8%e6%88%8fH5%e5%bc%80%e5%8f%91%e7%bb%8f%e9%aa%8c"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fgzss9cnpjnq%2f&title=%e8%ae%b0%e4%b8%80%e6%ac%a1%e6%b8%b8%e6%88%8fH5%e5%bc%80%e5%8f%91%e7%bb%8f%e9%aa%8c"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">记一次游戏H5开发经验</h1><div class="meta"><div class="postdate"><time datetime="2019-01-17" itemprop="datePublished">2019-01-17</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e\x3cp\x3e快到年终的时候做了一个以游戏形式展示的h5活动页，第一次尝试使用js写小游戏，很有趣的过程，很宝贵的经验。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e效果图\x3c\/h2\x3e\n\x3cp\x3e直接上个效果的gif图，游戏的一小部分效果，录出来有点卡\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVLjhS?w=638\x26amp;h=359\x22 src=\x22https:\/\/static.alili.tech\/img\/bVLjhS?w=638\x26amp;h=359\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e结果页：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVLjia?w=616\x26amp;h=347\x22 src=\x22https:\/\/static.alili.tech\/img\/bVLjia?w=616\x26amp;h=347\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e起因\x3c\/h2\x3e\n\x3cp\x3e产品妹子突然给我拉进来一个群，跟我们讲做了这么久的制作平台（用户制作手机主题的平台），我们是不是应该反馈给用户点什么东西，就像之前特别火的微信年终总结那样。总之就是要打动用户，要特别酷。说特别酷的时候她回头朝我微微一笑，微笑中带着一点点，嗯，杀意。\x3cbr\x3e活动形式，展现方式，什么数据反正就是统统都没想好，整个过程中大家讨论的热火朝天。当时不知道我为啥脑子一热，跟她说了一句：“没事儿，搞吧，你能想出来我就给你做出来。”而我也因为这句话把自己置身于水深火热之中。。\x3cbr\x3e讨论的结果就是大家的idea感觉都不是特别酷，又不好玩儿，干脆就做个游戏形式的吧！所有人都转头看向我，我想了想之前说的话，只吐出来一个字，“搞”。而内心中五味杂陈，“游戏？有意思啊？搞！没搞过啊？能搞定吗？搞！”。最终敲定，两周时间，游戏方式，展现用户在魔秀的点点滴滴。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e准备工作\x3c\/h2\x3e\n\x3cp\x3e游戏的形式大概类似一个滑雪大冒险和赛车的结合，以赛车的形式进行伪3d效果的展现，滑雪大冒险的样式作为我们的主题，同时大家还给我们的游戏起了个酷炫的名字----魔秀时光道。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e游戏引擎\x3c\/h3\x3e\n\x3cp\x3e游戏的展现形式确定后，直觉告诉我，想要将游戏快速稳定的呈现，免去图片加载控制，动画控制之类的复杂处理，我需要一个JS游戏引擎。最终在EgretPhaserPixiJS中选定了PixiJS,虽然不像Egret一样有完善的中文文档，但是它提供了清晰易懂的examples可快速上手，没有复杂的生态，简单的几行代码就可以用js实现我想要以下几点功能：\x3c\/p\x3e\n\x3ch4\x3e容器渲染及背景描绘\x3c\/h4\x3e\n\x3cp\x3e我需要定制整个画布的大小和背景，我需要使用不同的容器来承接不同的内容，并且灵活控制每个容器的属性：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/画布\nvar app = new PIXI.Application(800, 600, {backgroundColor : 0x1099bb});\ndocument.body.appendChild(app.view);\n\n\/\/定制container\nvar container = new PIXI.Container();\n\ncontainer.x = (app.renderer.width - container.width) \/ 2;\ncontainer.y = (app.renderer.height - container.height) \/ 2;\n\napp.stage.addChild(container);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/画布\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e app = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e PIXI.Application(\x3cspan class=\x22hljs-number\x22\x3e800\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e600\x3c\/span\x3e, {\x3cspan class=\x22hljs-attr\x22\x3ebackgroundColor\x3c\/span\x3e : \x3cspan class=\x22hljs-number\x22\x3e0x1099bb\x3c\/span\x3e});\n\x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.body.appendChild(app.view);\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/定制container\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e container = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e PIXI.Container();\n\ncontainer.x = (app.renderer.width - container.width) \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\ncontainer.y = (app.renderer.height - container.height) \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n\napp.stage.addChild(container);\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e图片加载及动画处理\x3c\/h4\x3e\n\x3cp\x3e大家都知道，使用canvas进行图片绘制的时候，需要确定图片已经成功加载，而游戏中有着大量的图片资源需要去维护，PixiJS已经为我们提供此项服务：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var bunny = PIXI.Sprite.fromImage(\x27required\/assets\/basics\/bunny.png’)；\n\nbunny.x = app.renderer.width \/ 2;\nbunny.y = app.renderer.height \/ 2;\n\napp.stage.addChild(bunny);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e bunny = PIXI.Sprite.fromImage(\x3cspan class=\x22hljs-string\x22\x3e\x27required\/assets\/basics\/bunny.png’)；\n\nbunny.x = app.renderer.width \/ 2;\nbunny.y = app.renderer.height \/ 2;\n\napp.stage.addChild(bunny);\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e同时，我们需要一个动画控制器，来控制各Sprite的运动和重绘，而不是生硬的对各项属性进行重新修改：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22app.ticker.add(function(delta) {\n  bunny.rotation \x2b= 0.1 * delta;\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3eapp.ticker.add(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edelta\x3c\/span\x3e) \x3c\/span\x3e{\n  bunny.rotation \x2b= \x3cspan class=\x22hljs-number\x22\x3e0.1\x3c\/span\x3e * delta;\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e需要注意的是，我们会发现，此处的Sprite动画控制，相当于添加了运动的动画队列，并且实现了类似transformjs的效果，可直接对实例的属性进行操作。而我在写项目的时候官方的例子是通过统一animate函数进行操作，通过requestAnimationFrame进行帧动画控制,更推荐新的方式而不是如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function animate () {\n  requestAnimationFrame(animate);\n  \n  bunny.rotation \x2b= 1;\n  renderer.render(stage);\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eanimate\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  requestAnimationFrame(animate);\n  \n  bunny.rotation \x2b= \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n  renderer.render(stage);\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e事件处理\x3c\/h4\x3e\n\x3cp\x3e游戏最重要的部分相当于用户的交互了，也就是所谓的事件处理，为Sprite添加事件监听，很简单，如下所示：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/元素可点击\nsprite.interactive = true;\n\n\/\/鼠标移入cursor\nsprite.buttonMode = true;\n\nsprite.on(\x27click\x27, onClick); \/\/ mouse-only\nprite.on(\x27tap\x27, onClick); \/\/ touch-only\n\nfunction onClick () {\n  sprite.scale.x *= 1.25;\n  sprite.scale.y *= 1.25;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/元素可点击\x3c\/span\x3e\nsprite.interactive = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/鼠标移入cursor\x3c\/span\x3e\nsprite.buttonMode = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n\nsprite.on(\x3cspan class=\x22hljs-string\x22\x3e\x27click\x27\x3c\/span\x3e, onClick); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ mouse-only\x3c\/span\x3e\nprite.on(\x3cspan class=\x22hljs-string\x22\x3e\x27tap\x27\x3c\/span\x3e, onClick); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ touch-only\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eonClick\x3c\/span\x3e \x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e \x3c\/span\x3e{\n  sprite.scale.x *= \x3cspan class=\x22hljs-number\x22\x3e1.25\x3c\/span\x3e;\n  sprite.scale.y *= \x3cspan class=\x22hljs-number\x22\x3e1.25\x3c\/span\x3e;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e设计图\x3c\/h3\x3e\n\x3cp\x3e设计图当然也是很重要的，决定了我们如何去实现这个游戏，当我拿到设计图的时候，他是长成这样的，我的内心是崩溃的。我能怎么样，我也很无奈呀~ 开搞吧！\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVLjie?w=1348\x26amp;h=876\x22 src=\x22https:\/\/static.alili.tech\/img\/bVLjie?w=1348\x26amp;h=876\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e实现思路\x3c\/h2\x3e\n\x3cp\x3e根据以上，PixiJS已经基本满足我们的需求，也就是说，工具准备和素材准备已经都完成了。在动手书写之前，我们需要把实现思路想好，才能保证书写过程的清晰，避免不必要的麻烦。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e背景滑动效果实现\x3c\/h3\x3e\n\x3cp\x3e就像我们平时玩儿赛车游戏一样，我们感觉赛车在跑道上进行比赛，实际上赛车只进行左右移动而已，而运动的则是背景，如何规划好路线，让背景按照既定的场景去运动，并展现不同的视角，特意向央美的同胞咨询了下，他们是用一个叫“摄像机”的东西实现的。对于我们来说，不需要那么复杂的场景，只需让背景像前规律的“平移”，造成“树动我不动”的视觉效果，同时我们利用“透视”的原理，让背景以“近大远小”的方式进行变化，就会产生一种low low的立体效果。\x3c\/p\x3e\n\x3cp\x3e关键词：透视 近大远小（偏移，大小，速度）\x3c\/p\x3e\n\x3ch4\x3e偏移路线\x3c\/h4\x3e\n\x3cp\x3e对于背景及物体的运动，大概路线规划如下：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVLjil?w=1620\x26amp;h=1034\x22 src=\x22https:\/\/static.alili.tech\/img\/bVLjil?w=1620\x26amp;h=1034\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e确定视觉焦点后，我们只需随机生成物体出现的位置，计算出a,b相对固定，使其y进行相应速度的增加，x根据运动轨迹进行对应偏移，则可实现往近跑的效果。针对运动轨迹， 假设物体向下偏移距离为N，则对应水平针对中轴线的偏移为：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVLjin?w=464\x26amp;h=200\x22 src=\x22https:\/\/static.alili.tech\/img\/bVLjin?w=464\x26amp;h=200\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch4\x3e大小\x3c\/h4\x3e\n\x3cp\x3e同时，我们还需对物体进行近大远小的显示，这个比较简单，以焦点为0，页面最底端为1，进行对应比例放大即可：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22scale = (curY - startY) \/ ( endY - startY);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lisp\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3escale = (\x3cspan class=\x22hljs-name\x22\x3ecurY\x3c\/span\x3e - startY) \/ ( \x3cspan class=\x22hljs-name\x22\x3eendY\x3c\/span\x3e - startY)\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e运动速度\x3c\/h4\x3e\n\x3cp\x3e针对物体的运动速度，也应在远近有不同的体现。\x3c\/p\x3e\n\x3ch4\x3e背景树与碰撞物体的区别\x3c\/h4\x3e\n\x3cp\x3e针对背景树，我们需在最初对所有的树进行展现，铺满两边背景。每列树对应的运动路线一致，可直接让其进行循环展示，当树运动到最底时，让其出现在最顶点。因此只需确定一共有几行几列树，并设定其边界，根据行列确定初始唯一并对其进行运动。同时，可以让树进行小范围的随机偏移，使树错落有致。如下所示：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22export default function Tree (row, col, direction) {\n  this.cfg = {\n    direction: direction, \/\/方向\n    col: col, \/\/第几列\n    row: row, \/\/第几行\n    MaxX: 440,\n    minY: 210,\n    maxY: 500,\n    range: 10 \/\/坐标浮动范围\n  }\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eTree\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3erow, col, direction\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.cfg = {\n    \x3cspan class=\x22hljs-attr\x22\x3edirection\x3c\/span\x3e: direction, \x3cspan class=\x22hljs-comment\x22\x3e\/\/方向\x3c\/span\x3e\n    col: col, \x3cspan class=\x22hljs-comment\x22\x3e\/\/第几列\x3c\/span\x3e\n    row: row, \x3cspan class=\x22hljs-comment\x22\x3e\/\/第几行\x3c\/span\x3e\n    MaxX: \x3cspan class=\x22hljs-number\x22\x3e440\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3eminY\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e210\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3emaxY\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e500\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3erange\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/坐标浮动范围\x3c\/span\x3e\n  }\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e而针对物体，则需要随机生成它的初始x坐标，并计算出其对于的路线进行运动，在运动过程中，进行碰撞检测，检测是否与人物进行相撞。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e人物滑动实现\x3c\/h3\x3e\n\x3cp\x3e人物滑动的操作，用了最简单的实现方式：按钮。当用户点击不同方向时，让人物向对应方向进行偏移。同时，为了让人物滑动不僵硬，在左右滑动过程中，人也应该随着运动有对应角度的倾斜，就像我们平时玩儿滑雪拐弯时，会改变中心一样。思路如下：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e点击按钮时，改变方向\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e运动时检测方向，若向左，则x减小，向右，则增加\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e向右（左）运动时，人物对应rotation也进行增加（减小）\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e松开手时，人物对应rotation慢慢恢复成0；\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch3 id=\x22articleHeader8\x22\x3e碰撞检测\x3c\/h3\x3e\n\x3cp\x3e由于人物有吃东西的环节（不然这还叫什么游戏呢），因此碰撞检测肯定是必须的啦。我们可以通过两种方式进行碰撞检测\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e人物检测碰撞物体，需实时遍历物体坐标列表，进行检测\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e每个物体自身进行碰撞检测，检测自身与人物位置的对应差\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e我很机智的选择了第二个，毕竟每个物体的位置都是实时变动的，而每次碰撞检测都进行一次循环的方法，太笨重啦。在这里我们设置碰撞检测的区域（宽高），在物体运动时，针对人物的x,y坐标，与自身的x,y坐标加减形成的四条边界进行比较即可，若进行碰撞，则进行对应的操作即可，如播放音频，得分\x2b1等。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader9\x22\x3e架构设计\x3c\/h2\x3e\n\x3cp\x3e思路理清楚之后，后面的路就很明朗啦。接下来我们就可以着手设计下如何实现这个东西了，很显然，游戏中我们拥有许许多多的“角色”，使用“面向对象”的方式再好不过了。大概的划分如下\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3estage   \/\/舞台，进行基本场景渲染，游戏整体控制（开始，停止）等\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eplayer \/\/玩儿家，也就是对应的人物\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3esprite \/\/出现的物体，如蛋糕等，提供玩儿家吃。 包含碰撞检测等，会自己运动\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3etree \/\/因为tree自身会运动，所以每个tree为一个类\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3escore \/\/进行分数控制及显示\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3ecfg.js \/\/包含整体游戏配置\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch3 id=\x22articleHeader10\x22\x3e对象内部划分\x3c\/h3\x3e\n\x3cp\x3e每个对象包含以下几点属性及功能：\x3c\/p\x3e\n\x3ch4\x3e1. 对象配置\x3c\/h4\x3e\n\x3cp\x3e每个对象包含其内部自身基本配置，包括位置，边界，图片等。直观，便于调试\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22export default function People (stage) {\n  this.cfg = {\n    img: require(\x27.\/img\/people.png\x27),\n    anchor: {\n      x: 0.5,\n      y: 0.5,\n    },\n    position: {\n      x: cfg.width \/ 2,\n      y: 500\n    },\n    speed: 5,\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ePeople\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3estage\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.cfg = {\n    \x3cspan class=\x22hljs-attr\x22\x3eimg\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/img\/people.png\x27\x3c\/span\x3e),\n    \x3cspan class=\x22hljs-attr\x22\x3eanchor\x3c\/span\x3e: {\n      \x3cspan class=\x22hljs-attr\x22\x3ex\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0.5\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3ey\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0.5\x3c\/span\x3e,\n    },\n    \x3cspan class=\x22hljs-attr\x22\x3eposition\x3c\/span\x3e: {\n      \x3cspan class=\x22hljs-attr\x22\x3ex\x3c\/span\x3e: cfg.width \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3ey\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e500\x3c\/span\x3e\n    },\n    \x3cspan class=\x22hljs-attr\x22\x3espeed\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e,\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e2. 其他方法\x3c\/h4\x3e\n\x3cp\x3e每个对象都包含其自身方法，如下所示：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3erender \/\/进行图片等渲染\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eanimate \/\/动画function\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3einit \/\/一些初始化配置\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader11\x22\x3e实现\x3c\/h2\x3e\n\x3cp\x3e通过以上思路的设计和结构的设计，我很快的将这个游戏实现了。。。没错，理清思路和结构的重要性就是这样。当然，在实现过程中，也有一些小的点可以记录下：\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader12\x22\x3e资源加载器（图片）\x3c\/h3\x3e\n\x3cp\x3e为了游戏的进行效果，还是决定在加载完所有资源（尤其是图片资源）后，才停止loading页面。如何判断所有内容都加载完毕了呢？写了个小loader\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var pics = [\n  require(\x27.\/img\/bg-start.png\x27),\n  require(\x27.\/img\/btn-start.png\x27),\n  ...\n];\n\nfunction loadImages (pics, callback) {\n  if(pics.length) {\n    var img = new Image(),\n      pic = pics.shift();\n\n    img.onload = callback;\n    img.src = pic;\n    loadImages(pics, callback);\n  } else{\n    return;\n  }\n}\n\n$(function() {\n  loadImages(pics, function () {\n    if (!pics.length) {\n      $(\x27.loading\x27).hide();\n    };\n  })\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e pics = [\n  \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/img\/bg-start.png\x27\x3c\/span\x3e),\n  \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/img\/btn-start.png\x27\x3c\/span\x3e),\n  ...\n];\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eloadImages\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3epics, callback\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(pics.length) {\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e img = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Image(),\n      pic = pics.shift();\n\n    img.onload = callback;\n    img.src = pic;\n    loadImages(pics, callback);\n  } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n  }\n}\n\n$(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  loadImages(pics, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!pics.length) {\n      $(\x3cspan class=\x22hljs-string\x22\x3e\x27.loading\x27\x3c\/span\x3e).hide();\n    };\n  })\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader13\x22\x3e强制横屏\x3c\/h3\x3e\n\x3cp\x3e游戏是横屏展示的，那就强制横屏好啦。这个当时还纠结挺久，还是自己功底不扎实脑子走私了，还在想是监听resize事件还是旋转屏幕事件，都没有这些事儿啊好吗！直接让它旋转就好。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22if(window.orientation==180||window.orientation==0) {\n  $(\x27#main\x27).height(winW);\n  $(\x27#main\x27).width(winH);\n\n  $(‘#main’).css({\n    \x27transform\x27: \x27rotate(90deg)\x27,\n  });\n} else{\n  $(‘#main’).css(\x27transform\x27, \x27rotate(0)\x27);\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs mel\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3ewindow\x3c\/span\x3e.orientation==\x3cspan class=\x22hljs-number\x22\x3e180\x3c\/span\x3e||\x3cspan class=\x22hljs-keyword\x22\x3ewindow\x3c\/span\x3e.orientation==\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) {\n  $(\x3cspan class=\x22hljs-string\x22\x3e\x27#main\x27\x3c\/span\x3e).height(winW);\n  $(\x3cspan class=\x22hljs-string\x22\x3e\x27#main\x27\x3c\/span\x3e).width(winH);\n\n  $(‘#main’).css({\n    \x3cspan class=\x22hljs-string\x22\x3e\x27transform\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27rotate(90deg)\x27\x3c\/span\x3e,\n  });\n} \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e{\n  $(‘#main’).css(\x3cspan class=\x22hljs-string\x22\x3e\x27transform\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27rotate(0)\x27\x3c\/span\x3e);\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader14\x22\x3etimer控制\x3c\/h3\x3e\n\x3cp\x3e理清思路后，最乱的还是各种定时器啦。 为了实现物体随机出现的效果，让每个物体随机多少秒后开始出现；最后一个物体出现完，多少秒后出现结束画面等等，需要理清楚各个定时器的关系，并对其添加\x3cstrong\x3e\x3cem\x3e语义化良好的标记\x3c\/em\x3e\x3c\/strong\x3e，及时对未完结的定时器进行\x3cstrong\x3e\x3cem\x3e清除\x3c\/em\x3e\x3c\/strong\x3e，防止定时器带来的意想不到的问题。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader15\x22\x3e写在最后\x3c\/h2\x3e\n\x3cp\x3e最终游戏的效果基本让大家满意啦，也是第一次尝试这方面的开发，周围也完全没有做过这东西的人。从开始的忐忑和一无所措，到过程中理清思路和结构，到书写中的各种未知的坑，自己在这两周感觉经历了很充实的一件事情。同时也对后续进行一些未知事物的探索和学习有了更丰富的经验，找对路子才是王道呀！\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>记一次游戏H5开发经验</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000008853259">https://segmentfault.com/a/1190000008853259</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/gzss9cnpjnq/" target="_blank">https://alili.tech/archive/gzss9cnpjnq/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>