<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="微信小程序脚手架及html转译GUI工具"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>微信小程序脚手架及html转译GUI工具 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/xexypirx1w9/",
				"appid": "1613049289050283", 
				"title": "微信小程序脚手架及html转译GUI工具 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-02-01T02:30:10"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/dzymu0gmks/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/ckj5xkvlk4a/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fxexypirx1w9%2f&text=%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e8%84%9a%e6%89%8b%e6%9e%b6%e5%8f%8ahtml%e8%bd%ac%e8%af%91GUI%e5%b7%a5%e5%85%b7"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fxexypirx1w9%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fxexypirx1w9%2f&text=%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e8%84%9a%e6%89%8b%e6%9e%b6%e5%8f%8ahtml%e8%bd%ac%e8%af%91GUI%e5%b7%a5%e5%85%b7"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fxexypirx1w9%2f&title=%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e8%84%9a%e6%89%8b%e6%9e%b6%e5%8f%8ahtml%e8%bd%ac%e8%af%91GUI%e5%b7%a5%e5%85%b7"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fxexypirx1w9%2f&is_video=false&description=%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e8%84%9a%e6%89%8b%e6%9e%b6%e5%8f%8ahtml%e8%bd%ac%e8%af%91GUI%e5%b7%a5%e5%85%b7"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e8%84%9a%e6%89%8b%e6%9e%b6%e5%8f%8ahtml%e8%bd%ac%e8%af%91GUI%e5%b7%a5%e5%85%b7&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fxexypirx1w9%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fxexypirx1w9%2f&title=%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e8%84%9a%e6%89%8b%e6%9e%b6%e5%8f%8ahtml%e8%bd%ac%e8%af%91GUI%e5%b7%a5%e5%85%b7"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fxexypirx1w9%2f&title=%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e8%84%9a%e6%89%8b%e6%9e%b6%e5%8f%8ahtml%e8%bd%ac%e8%af%91GUI%e5%b7%a5%e5%85%b7"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fxexypirx1w9%2f&title=%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e8%84%9a%e6%89%8b%e6%9e%b6%e5%8f%8ahtml%e8%bd%ac%e8%af%91GUI%e5%b7%a5%e5%85%b7"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fxexypirx1w9%2f&title=%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e8%84%9a%e6%89%8b%e6%9e%b6%e5%8f%8ahtml%e8%bd%ac%e8%af%91GUI%e5%b7%a5%e5%85%b7"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">微信小程序脚手架及html转译GUI工具</h1><div class="meta"><div class="postdate"><time datetime="2019-02-01" itemprop="datePublished">2019-02-01</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e微信小程序出现引发了很多讨论，许多开发者都跃跃欲试尝试了小程序的开发。它重新定义了自身的一套开发规范，对于现有的html页面是不支持了。\x3c\/p\x3e\n\x3cp\x3e为此我们设想了一套方案，怎么最快速的把现有的开发流接入到小程序中，并能快速的修改现有html项目以符合微信小程序的规范？于是写了一套html暴力转译成wxml的方案，以及搭配了初始模板的脚手架。结构沿用\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000005879164\x22\x3efeWorkflow\x3c\/a\x3e，大部分改动是针对目录的gulp工作流。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e1. 脚手架\x3c\/h2\x3e\n\x3cp\x3e小程序有一套默认的文件结构，根目录下必须存放有以下3个文件：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22.\n├──app.js\n├──app.json\n├──app.wxss\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3e.\n├──app\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n├──app\x3cspan class=\x22hljs-selector-class\x22\x3e.json\x3c\/span\x3e\n├──app.wxss\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e而页面则由4个文件构成:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22.\n├──js\n├──wxml\n├──wxss\n├──json\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs asciidoc\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-bullet\x22\x3e.\n\x3c\/span\x3e├──js\n├──wxml\n├──wxss\n├──json\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e根据这套规则，通过GUI工具新建的模板，这个脚手架会默认创建一个源码\x3ccode\x3esrc\x3c\/code\x3e目录：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVFfc5?w=1458\x26amp;h=236\x22 src=\x22https:\/\/static.alili.tech\/img\/bVFfc5?w=1458\x26amp;h=236\x22 alt=\x22![template](docs\/template.png)\x22 title=\x22![template](docs\/template.png)\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e点击\x3cem\x3e开发\x3c\/em\x3e ，会创建\x3ccode\x3edist\x3c\/code\x3e文件目录，将编译后的\x3ccode\x3eless\x3c\/code\x3e（或在设置中配置成sass）文件转换成\x3ccode\x3ewxss\x3c\/code\x3e文件，其他html,js, css文件的更改也会同步处理到\x3ccode\x3edist\x3c\/code\x3e目录中，图片资源则会通过\x3ccode\x3eimagemin\x3c\/code\x3e进行压缩，抛出到\x3ccode\x3edist\/image\x3c\/code\x3e目录中。\x3ccode\x3esrc\x3c\/code\x3e源码目录和\x3ccode\x3edist\x3c\/code\x3e目录（两者均可以通过配置项修改名称）的划分是为了保持源代码的完整性，以及维持图片的原始文件(psd等)，而不会在编译过程中被破坏。\x3c\/p\x3e\n\x3cp\x3e到目前的微信开发者工具的版本（0.10.101100），已经附带自动刷新页面的功能，所以src目录中的所有改动，会同步修改dist目录下的文件并刷新，可以无缝在熟悉的编辑器中进行操作。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e脚手架示例：\x3c\/strong\x3e\x3cbr\x3e新建项目：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000007409564?w=1920\x26amp;h=1080\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000007409564?w=1920\x26amp;h=1080\x22 alt=\x22http:\/\/ww1.sinaimg.cn\/large\/65e4f1e6gw1f9jsqaip9ug21hc0u04qr.gif\x22 title=\x22http:\/\/ww1.sinaimg.cn\/large\/65e4f1e6gw1f9jsqaip9ug21hc0u04qr.gif\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e开发项目：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000007409362?w=1280\x26amp;h=720\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000007409362?w=1280\x26amp;h=720\x22 alt=\x22http:\/\/ww4.sinaimg.cn\/large\/65e4f1e6gw1f9jr8uzjcvg20zk0k01l0.gif\x22 title=\x22http:\/\/ww4.sinaimg.cn\/large\/65e4f1e6gw1f9jr8uzjcvg20zk0k01l0.gif\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3eHTML to WXML转译工具\x3c\/h2\x3e\n\x3cp\x3edemo:\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000007409363?w=1280\x26amp;h=720\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000007409363?w=1280\x26amp;h=720\x22 alt=\x22http:\/\/ww3.sinaimg.cn\/large\/65e4f1e6gw1f9jraxy76eg20zk0k0npe.gif\x22 title=\x22http:\/\/ww3.sinaimg.cn\/large\/65e4f1e6gw1f9jraxy76eg20zk0k0npe.gif\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e1.目录结构\x3c\/h3\x3e\n\x3cp\x3e上文提到了小程序有默认的一套脚手架结构，编译工具会将源码目录下的所有html文件进行转译，并创建一个\x3ccode\x3e当前目录名-build\x3c\/code\x3e的文件夹，将所有编译后的wxml存放到\x3ccode\x3epage\/文件名\/文件名.wxml\x3c\/code\x3e。\x3ccode\x3eapp.json\x3c\/code\x3e全局配置的\x3ccode\x3epages\x3c\/code\x3e也会默认创建。根据创建的目录名，将同名的\x3ccode\x3ecss\x3c\/code\x3e文件，重命名为\x3ccode\x3ewxss\x3c\/code\x3e文件，并存放到同名目录中，当css与文件名不符，则合并不符的css文件，存放到全局目录的\x3ccode\x3eapp.wxss\x3c\/code\x3e中。而因为小程序不再支持jQuery等等通用库，源码目录下的js会全部忽略，页面级的js，则会复制到同名目录中，这个js则包括注册页面的Page函数基础模板。\x3c\/p\x3e\n\x3cp\x3e举个例子：\x3cbr\x3e源码\x3ccode\x3etest\x3c\/code\x3e目录文件结构如下\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22├──test\n|   └──css\n|       └──index.css\n|       └──global.css\n|   └──js\n|       └──index.js\n|   └── index.html\n|   └── other.html\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs 1c\x22\x3e\x3ccode\x3e├──test\n\x3cspan class=\x22hljs-string\x22\x3e|   └──css\x3c\/span\x3e\n\x3cspan class=\x22hljs-string\x22\x3e|       └──index.css\x3c\/span\x3e\n\x3cspan class=\x22hljs-string\x22\x3e|       └──global.css\x3c\/span\x3e\n\x3cspan class=\x22hljs-string\x22\x3e|   └──js\x3c\/span\x3e\n\x3cspan class=\x22hljs-string\x22\x3e|       └──index.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-string\x22\x3e|   └── index.html\x3c\/span\x3e\n\x3cspan class=\x22hljs-string\x22\x3e|   └── other.html\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e编译后的目录结构会改变为：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22├──test-build\n|   └──app.wxss\n|   └──page\n|       └── index\n|           └── index.wxml\n|           └── index.wxss\n|           └── index.js\n|       └── other\n|           └── other.wxml\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs 1c\x22\x3e\x3ccode\x3e├──test-build\n\x3cspan class=\x22hljs-string\x22\x3e|   └──app.wxss\x3c\/span\x3e\n\x3cspan class=\x22hljs-string\x22\x3e|   └──page\x3c\/span\x3e\n\x3cspan class=\x22hljs-string\x22\x3e|       └── index\x3c\/span\x3e\n\x3cspan class=\x22hljs-string\x22\x3e|           └── index.wxml\x3c\/span\x3e\n\x3cspan class=\x22hljs-string\x22\x3e|           └── index.wxss\x3c\/span\x3e\n\x3cspan class=\x22hljs-string\x22\x3e|           └── index.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-string\x22\x3e|       └── other\x3c\/span\x3e\n\x3cspan class=\x22hljs-string\x22\x3e|           └── other.wxml\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e2. HTML\x3c\/h3\x3e\n\x3cp\x3e先来看一下wxml和html的标签大致的对比图：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVFfFd?w=541\x26amp;h=286\x22 src=\x22https:\/\/static.alili.tech\/img\/bVFfFd?w=541\x26amp;h=286\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e根据图中标签的的匹配规则，在编译过程中，遍历html文件，先转换成xml，保证img等包含闭合标签，再通过正则匹配符合的标签来替换或者删除。这个替换标签可以在\x3ccode\x3e设置\x3c\/code\x3e中更改。\x3cbr\x3e举个例子：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c!-- html --\x3e\n\x3cdiv class=\x26quot;flow-form_tips\x26quot;\x3e\n  \x3cdiv class=\x26quot;address\x26quot;\x3e\n    \x3cspan\x3e广东联通\x3c\/span\x3e\n    \x3cspan\x3e立即生效\x3c\/span\x3e\n    \x3cspan\x3e月底失效\x3c\/span\x3e\n    \x3cspan\x3e全国可用\x3c\/span\x3e\n  \x3c\/div\x3e\n  \x3cp class=\x26quot;desc\x26quot;\x3e河南联通维护中，流量充值缓慢\x3c\/p\x3e\n  \x3cdiv class=\x26quot;tips hide\x26quot;\x3e当地运营商维护中，请稍后再试\x3c\/div\x3e\n\x3c\/div\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- html --\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22flow-form_tips\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22address\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e广东联通\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e立即生效\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e月底失效\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e全国可用\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22desc\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e河南联通维护中，流量充值缓慢\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22tips hide\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e当地运营商维护中，请稍后再试\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e编译后：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c!-- wxml --\x3e\n\x3cview class=\x26quot;flow-form_tips\x26quot;\x3e\n  \x3cview class=\x26quot;address\x26quot;\x3e\n  \x3ctext\x3e广东联通\x3c\/text\x3e \n  \x3ctext\x3e立即生效\x3c\/text\x3e \n  \x3ctext\x3e月底失效\x3c\/text\x3e \n  \x3ctext\x3e全国可用\x3c\/text\x3e\x3c\/view\x3e\n  \x3cview class=\x26quot;desc\x26quot;\x3e河南联通维护中，流量充值缓慢\x3c\/view\x3e\n  \x3cview class=\x26quot;tips hide\x26quot;\x3e当地运营商维护中，请稍后再试\x3c\/view\x3e\n\x3c\/view\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- wxml --\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eview\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22flow-form_tips\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eview\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22address\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etext\x3c\/span\x3e\x26gt;\x3c\/span\x3e广东联通\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etext\x3c\/span\x3e\x26gt;\x3c\/span\x3e \n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etext\x3c\/span\x3e\x26gt;\x3c\/span\x3e立即生效\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etext\x3c\/span\x3e\x26gt;\x3c\/span\x3e \n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etext\x3c\/span\x3e\x26gt;\x3c\/span\x3e月底失效\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etext\x3c\/span\x3e\x26gt;\x3c\/span\x3e \n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etext\x3c\/span\x3e\x26gt;\x3c\/span\x3e全国可用\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etext\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eview\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eview\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22desc\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e河南联通维护中，流量充值缓慢\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eview\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eview\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22tips hide\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e当地运营商维护中，请稍后再试\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eview\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eview\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e3. css\x3c\/h3\x3e\n\x3cp\x3e\x3cstrong\x3e尺寸单位\x3c\/strong\x3e\x3cbr\x3e小程序推出了自身的计量单位\x3ccode\x3erpx\x3c\/code\x3e，并推荐使用\x3ccode\x3e750\x3c\/code\x3e的设计稿作为开发标准，而目前组内开发普遍使用\x3ccode\x3e640\x3c\/code\x3e的设计稿进行设计，同时使用\x3ccode\x3erem\x3c\/code\x3e进行适配。\x3cbr\x3e所以在转义过程中，添加了设计稿尺寸的设置，默认设置，是\x3ccode\x3e640\x3c\/code\x3e设计稿，\x3ccode\x3e100\x3c\/code\x3epx计算\x3ccode\x3erem\x3c\/code\x3e，默认乘以\x3ccode\x3e2\x3c\/code\x3e倍。\x3cbr\x3e这个设置的意思是：我们在开发过程中使用640的设计稿，并使用rem兼容，iphone4屏幕320px的html font-size为\x3ccode\x3e100px\x3c\/code\x3e，css中表现为：\x3ccode\x3e640 \/ 2 \/ 100rem\x3c\/code\x3e， 即\x3ccode\x3e640px == 3.2rem\x3c\/code\x3e;\x3cbr\x3ecss中会去遍历所有匹配\x3ccode\x3erem\x3c\/code\x3e的属性，获取数值，通过\x3ccode\x3e(match * fontSize * (750 \/ viewport)).toFixed(2) * times\x3c\/code\x3e来计算rpx，即\x3ccode\x3e(匹配数值 * fontSize * (750 \/ 640)).toFixed(2) * 2\x3c\/code\x3e。\x3cbr\x3e而px转rpx则是由\x3ccode\x3e(match * (750 \/ viewport) * times).toFixed(2)\x3c\/code\x3e来转换。\x3c\/p\x3e\n\x3cp\x3ewxss支持大部分css的属性，但是仍有些情况下不兼容，但编译工具没有做处理，免得出现误删的情况，假如页面中写了\x3ccode\x3ea\x3c\/code\x3e选择器，则需要手动改成\x3ccode\x3enavigator\x3c\/code\x3e选择器。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e4. image\x3c\/h3\x3e\n\x3cp\x3e所有png|jpg|gif|svg格式图片统一进行压缩并复制到个目录下的\x3ccode\x3eimage\x3c\/code\x3e目录中，并将wxml中image的src，和wxss中的background-url修改为\x3ccode\x3e..\/..\/image\/\x3c\/code\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3e写在最后\x3c\/h2\x3e\n\x3cp\x3e小程序的开发语言已经与日常开发的语言有所不同，一套通用的方案已经是不可行了，还是有很多东西需要手工去处理，比如\x3ccode\x3etemplate\x3c\/code\x3e等。转译工具是在内部的产品环境下测试的，可能会有许多考虑不周的地方，欢迎大家斧正。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3e下载：\x3c\/h2\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/whatifhappen\/feWorkflow\/releases\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3egithub\x3c\/a\x3e\x3cbr\x3emac: \x3ca href=\x22https:\/\/github.com\/whatifhappen\/feWorkflow\/releases\/download\/v0.0.1\/feWorkflow-wechat-app-v0.0.1.dmg\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3efeWorkflow-wechat-app-v0.0.1.dmg\x3c\/a\x3e\x3cbr\x3ewindows: \x3ca href=\x22https:\/\/github.com\/whatifhappen\/feWorkflow\/releases\/download\/v0.0.1\/feWorkflow-wechat-app-win.7z\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3efeWorkflow-wechat-app-win.7z\x3c\/a\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>微信小程序脚手架及html转译GUI工具</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000007409359">https://segmentfault.com/a/1190000007409359</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/xexypirx1w9/" target="_blank">https://alili.tech/archive/xexypirx1w9/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>