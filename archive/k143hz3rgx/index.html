<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="小程序踩坑记录"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>小程序踩坑记录 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/k143hz3rgx/",
				"appid": "1613049289050283", 
				"title": "小程序踩坑记录 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-17T02:30:25"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/xgelkgd70gc/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/m6yid1tdcxs/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fk143hz3rgx%2f&text=%e5%b0%8f%e7%a8%8b%e5%ba%8f%e8%b8%a9%e5%9d%91%e8%ae%b0%e5%bd%95"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fk143hz3rgx%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fk143hz3rgx%2f&text=%e5%b0%8f%e7%a8%8b%e5%ba%8f%e8%b8%a9%e5%9d%91%e8%ae%b0%e5%bd%95"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fk143hz3rgx%2f&title=%e5%b0%8f%e7%a8%8b%e5%ba%8f%e8%b8%a9%e5%9d%91%e8%ae%b0%e5%bd%95"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fk143hz3rgx%2f&is_video=false&description=%e5%b0%8f%e7%a8%8b%e5%ba%8f%e8%b8%a9%e5%9d%91%e8%ae%b0%e5%bd%95"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%b0%8f%e7%a8%8b%e5%ba%8f%e8%b8%a9%e5%9d%91%e8%ae%b0%e5%bd%95&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fk143hz3rgx%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fk143hz3rgx%2f&title=%e5%b0%8f%e7%a8%8b%e5%ba%8f%e8%b8%a9%e5%9d%91%e8%ae%b0%e5%bd%95"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fk143hz3rgx%2f&title=%e5%b0%8f%e7%a8%8b%e5%ba%8f%e8%b8%a9%e5%9d%91%e8%ae%b0%e5%bd%95"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fk143hz3rgx%2f&title=%e5%b0%8f%e7%a8%8b%e5%ba%8f%e8%b8%a9%e5%9d%91%e8%ae%b0%e5%bd%95"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fk143hz3rgx%2f&title=%e5%b0%8f%e7%a8%8b%e5%ba%8f%e8%b8%a9%e5%9d%91%e8%ae%b0%e5%bd%95"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">小程序踩坑记录</h1><div class="meta"><div class="postdate"><time datetime="2019-01-17" itemprop="datePublished">2019-01-17</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch1 id=\x22articleHeader0\x22\x3e小程序踩坑记录\x3c\/h1\x3e\n\x3cp\x3e小程序现阶段缺陷还很多，在安卓手机上的性能也是很糟糕，估计实用性还不高。\x3cbr\x3e\x3cbr\x3e一步一步都是坑，这里作为个人踩坑收集用（内含吐槽），也是经验分享，欢迎issues讨论。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e框架部分\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e1、残念的数据绑定\x3c\/h3\x3e\n\x3cp\x3e要实现页面数据响应必须通过setData设定值，如果直接设定data里的值则无页面响应。\x3cbr\x3e\x3cbr\x3e不能像其他MVVM框架那样自动响应，无语也无解。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e2、setData()无法进行动态数组操作\x3c\/h3\x3e\n\x3cp\x3e这也是由于js对象的key部分一定是字符串造成的。\x3cbr\x3e\x3cbr\x3esetDate只支持对静态key的解析，无法传入参数实现动态遍历。\x3c\/p\x3e\n\x3ch4\x3e比如：\x3c\/h4\x3e\n\x3cp\x3e有一个数组需要更改其中的值，循环传入i将无效的，只能是固定数字。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22for(var i=0; i\x3c3; i\x2b\x2b){\n  this.setData({\n      array[i]:‘hello’\n    }\n  })\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i=\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i\x26lt;\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e; i\x2b\x2b){\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.setData({\n      array[i]:‘hello’\n    }\n  })\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e如果你照上面这么写的话就会报下面的错误。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVL1UV?w=865\x26amp;h=274\x22 src=\x22https:\/\/static.alili.tech\/img\/bVL1UV?w=865\x26amp;h=274\x22 alt=\x22动态数组设置报错\x22 title=\x22动态数组设置报错\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e官方的意思就是只能这样写：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22this.setData({\n    \x27array[1]\x27:‘hello’\n  }\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.setData({\n    \x3cspan class=\x22hljs-string\x22\x3e\x27array[1]\x27\x3c\/span\x3e:‘hello’\n  }\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e解决办法：\x3c\/h4\x3e\n\x3cp\x3e不在遍历中使用setData，可以先遍历修改完后再用setData完整赋值完成响应。\x3cbr\x3e\x3cbr\x3e因为js里数组是地址传递，也就是说实际上已经修改了原数组，用setData只是为了响应页面。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e3、路由设置必须有序\x3c\/h3\x3e\n\x3cp\x3e小程序的页面都必须在app.json注册，但这不是随便登记一下就行了，页面登记的顺序一定是有层级关系的。\x3cbr\x3e\x3cbr\x3e如果你把首页放在了某二级页面后面，那就会报错，这个文档没写清楚真心坑爹。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x26quot;pages\x26quot;: [\n  \x26quot;pages\/index\/index\x26quot;,   \/\/一级页面\n  \x26quot;pages\/list\/list\x26quot;,     \/\/二级页面\n  \x26quot;pages\/detail\/detail\x26quot;, \/\/三级页面\n  \x26quot;pages\/msg\/msg\x26quot;        \/\/额外页面\n],\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs 1c\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-string\x22\x3e\x22pages\x22\x3c\/span\x3e: [\n  \x3cspan class=\x22hljs-string\x22\x3e\x22pages\/index\/index\x22\x3c\/span\x3e,   \x3cspan class=\x22hljs-comment\x22\x3e\/\/一级页面\x3c\/span\x3e\n  \x3cspan class=\x22hljs-string\x22\x3e\x22pages\/list\/list\x22\x3c\/span\x3e,     \x3cspan class=\x22hljs-comment\x22\x3e\/\/二级页面\x3c\/span\x3e\n  \x3cspan class=\x22hljs-string\x22\x3e\x22pages\/detail\/detail\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/三级页面\x3c\/span\x3e\n  \x3cspan class=\x22hljs-string\x22\x3e\x22pages\/msg\/msg\x22\x3c\/span\x3e        \x3cspan class=\x22hljs-comment\x22\x3e\/\/额外页面\x3c\/span\x3e\n],\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e建议：\x3c\/h4\x3e\n\x3cp\x3e设计时页面分级要明确，排列按顺序，额外页面（比如提示成功或失败的页面）放最后。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e4、wx.redirectTo(OBJECT)不可跳一级页\x3c\/h3\x3e\n\x3cp\x3e这个是关闭当前页跳转到指定页的功能，跳到一级页会导致导航栏消失，并且该一级页会被当成一次跳转。\x3cbr\x3e\x3cbr\x3e小程序最多五层跳转，正常一级页不会算入，但如果一级页也被当成一次跳转，那使用几次后就不能动了，因为五次满了，\x3cstrong\x3e\x3cem\x3e非常危险\x3c\/em\x3e\x3c\/strong\x3e。\x3cbr\x3e\x3cbr\x3e这点在新的官方文档已经说明，并提供wx.switchTab(OBJECT)跳转到一级页面，不过由于wx.switchTab(OBJECT)不能传参，使用还是比较有限的。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e5、发起POST请求必须改默认参数\x3c\/h3\x3e\n\x3cp\x3e默认header[\x27content-type\x27] 为 \x27application\/json\x27，在get请求中没有问题。\x3cbr\x3e\x3cbr\x3e但如果想要发起POST就必须将header[\x27content-type\x27] 为 \x27application\/x-www-form-urlencoded\x27，否则就收不到返回数据。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22wx.request({\n  url: \x27test.php\x27, \/\/仅为示例，并非真实的接口地址\n  data: yourData,\n  header: {\n      \x27content-type\x27: \x27application\/x-www-form-urlencoded\x27 \/\/这里必须改\n      },\n  success: function(res) {\n    console.log(res.data)\n  }\n})\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs less\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-selector-tag\x22\x3ewx\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.request\x3c\/span\x3e({\n  \x3cspan class=\x22hljs-attribute\x22\x3eurl\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27test.php\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/仅为示例，并非真实的接口地址\x3c\/span\x3e\n  \x3cspan class=\x22hljs-attribute\x22\x3edata\x3c\/span\x3e: yourData,\n  \x3cspan class=\x22hljs-attribute\x22\x3eheader\x3c\/span\x3e: {\n      \x3cspan class=\x22hljs-string\x22\x3e\x27content-type\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27application\/x-www-form-urlencoded\x27\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/这里必须改\x3c\/span\x3e\n      },\n  \x3cspan class=\x22hljs-attribute\x22\x3esuccess\x3c\/span\x3e: function(res) {\n    console.log(res.data)\n  }\n})\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e6、wx.setNavigationBarTitle(OBJECT)的调用时机\x3c\/h3\x3e\n\x3cp\x3e这个是改变页面标题的接口，必须在onShow触发时才调用。\x3cbr\x3e\x3cbr\x3e如果在onLoad触发时调用，只会一闪而过，然后又变成页面配置json里的名字或全局配置json里的名字。\x3c\/p\x3e\n\x3ch4\x3e建议：\x3c\/h4\x3e\n\x3cp\x3e小程序这样的设计体验不是很好，每次都会一闪而过的改名字，如果要避免这种情况就只能在配置json中设置了，不过这样是静态的。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3e样式部分\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader9\x22\x3e1、不支持部分选择器\x3c\/h3\x3e\n\x3cp\x3e样式部分的缺陷是比较严重的，不支持相邻兄弟选择器，不支持级联选择器。。。\x3c\/p\x3e\n\x3ch4\x3e解决办法：\x3c\/h4\x3e\n\x3cp\x3e这个暂时无解，只能说改变一下样式命名的习惯，使用横杠连接体现层次，虽然这样盒子多起来会变得很长。\x3cbr\x3e\x3cbr\x3e如果使用预处理，比如我用SASS可以这样写，稍微省点力：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22.list {\n  padding: 20rpx;\n  \x26amp;-name {\n    color: red;\n    \x26amp;-number {\n      color: blue;\n      \x26amp;-info {\n        font-size: 16rpx;\n      }\n    }\n  }\n}\n\/\/ 编译结果\n.list {\n  padding: 20rpx;\n}\n.list-name {\n  color: red;\n}\n.list-name-number {\n  color: blue;\n}\n.list-name-number-info {\n  font-size: 16rpx;\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dsconfig\x22\x3e\x3ccode\x3e.\x3cspan class=\x22hljs-string\x22\x3elist \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-string\x22\x3epadding:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e20rpx;\x3c\/span\x3e\n  \x26amp;-\x3cspan class=\x22hljs-string\x22\x3ename \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-string\x22\x3ecolor:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3ered;\x3c\/span\x3e\n    \x26amp;-\x3cspan class=\x22hljs-string\x22\x3enumber \x3c\/span\x3e{\n      \x3cspan class=\x22hljs-string\x22\x3ecolor:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3eblue;\x3c\/span\x3e\n      \x26amp;-\x3cspan class=\x22hljs-string\x22\x3einfo \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-string\x22\x3efont-size:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e16rpx;\x3c\/span\x3e\n      }\n    }\n  }\n}\n\/\/ 编译结果\n.\x3cspan class=\x22hljs-string\x22\x3elist \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-string\x22\x3epadding:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e20rpx;\x3c\/span\x3e\n}\n.\x3cspan class=\x22hljs-built_in\x22\x3elist-name\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-string\x22\x3ecolor:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3ered;\x3c\/span\x3e\n}\n.\x3cspan class=\x22hljs-built_in\x22\x3elist-name-number\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-string\x22\x3ecolor:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3eblue;\x3c\/span\x3e\n}\n.\x3cspan class=\x22hljs-built_in\x22\x3elist-name-number-info\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-string\x22\x3efont-size:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e16rpx;\x3c\/span\x3e\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader10\x22\x3e2、button无法正常改样式\x3c\/h3\x3e\n\x3cp\x3e使用button标签默认是无法更改样式，加上类名也会因为优先级问题不能覆盖原样式，搞不懂这样设计的用意，十分不便。\x3c\/p\x3e\n\x3ch4\x3e解决办法：\x3c\/h4\x3e\n\x3col\x3e\n\x3cli\x3e可以通过!important提升优先级强行覆盖，不推荐，因为会影响其他默认样式；\x3c\/li\x3e\n\x3cli\x3e也可以仿照默认样式写法，进行覆盖，基本需要覆盖的样式如下（以primary为例，其他的以此类推），加上[plain]或[size=\x22min\x22]即是其他镂空版和缩小版的样式；\x3c\/li\x3e\n\x3cli\x3e\n\x3cstrong\x3e\x3cem\x3e推荐做法\x3c\/em\x3e\x3c\/strong\x3e，尽量不破坏原有样式，可以自定义一个type，然后仿照默认样式的写法，就可以自定义button了；\x3c\/li\x3e\n\x3cli\x3e使用view仿照一个button，把默认的样式复制一份即可，会增加无意义的代码量，而且没有默认的交互事件(active)。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ctable\x3e\n\x3cthead\x3e\x3ctr\x3e\n\x3cth\x3e类名\x3c\/th\x3e\n\x3cth\x3e触发时机\x3c\/th\x3e\n\x3c\/tr\x3e\x3c\/thead\x3e\n\x3ctbody\x3e\n\x3ctr\x3e\n\x3ctd\x3e\x3ccode\x3ebutton[type=\x22primary\x22]\x3c\/code\x3e\x3c\/td\x3e\n\x3ctd\x3e一般样式\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3e\x3ccode\x3ebutton[type=\x22primary\x22].button-hover\x3c\/code\x3e\x3c\/td\x3e\n\x3ctd\x3e按下（弹起）瞬间样式\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3e\x3ccode\x3ebutton[type=\x22primary\x22]:not([disabled]):active\x3c\/code\x3e\x3c\/td\x3e\n\x3ctd\x3e按下样式（可选，没有则使用上面的作为按下样式，[plain]默认有，需覆盖）\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3e\x3ccode\x3ebutton[disabled][type=\x22 primary\x22]\x3c\/code\x3e\x3c\/td\x3e\n\x3ctd\x3e禁用样式\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3c\/tbody\x3e\n\x3c\/table\x3e\n\x3cp\x3e按下操作触发顺序是：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22button[type=\x26quot;primary\x26quot;] \x3e button[type=\x26quot;primary\x26quot;].button-hover \x3e button[type=\x26quot;primary\x26quot;][plain]:not([disabled]):active\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs markdown\x22\x3e\x3ccode\x3ebutton[\x3cspan class=\x22hljs-string\x22\x3etype=\x22primary\x22\x3c\/span\x3e] \x26gt; button[\x3cspan class=\x22hljs-string\x22\x3etype=\x22primary\x22\x3c\/span\x3e].button-hover \x26gt; button[\x3cspan class=\x22hljs-string\x22\x3etype=\x22primary\x22\x3c\/span\x3e][\x3cspan class=\x22hljs-symbol\x22\x3eplain\x3c\/span\x3e]:not([disabled]):active\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader11\x22\x3e3、button的默认边框\x3c\/h3\x3e\n\x3cp\x3ebutton的默认边框是使用after伪类，新建了一个2倍大小的空白content，设置了border，再缩小为0.5倍，刚好盖在元素上面，下面就是默认按钮的样式。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVL1XK?w=332\x26amp;h=814\x22 src=\x22https:\/\/static.alili.tech\/img\/bVL1XK?w=332\x26amp;h=814\x22 alt=\x22默认button的样式\x22 title=\x22默认button的样式\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e这是一种为了在不同设备实现1px的做法，但本身小程序就有rpx啊，还用这鸡肋的办法让人不解（笑）。  \x3cbr\x3e也给更改button样式一点阻碍，需要把after设置display:none才能去掉边框。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader12\x22\x3e4、button不同设备上表现差异\x3c\/h3\x3e\n\x3col\x3e\n\x3cli\x3e真机上会出现button内文字高度偏高的问题（安卓机，iOS未测），而模拟器上表现正常（居中），尝试覆盖默认样式进行修正（改为padding撑开盒子的方法代替原来的line-height），并没有效果。所以暂无解决办法；\x3c\/li\x3e\n\x3cli\x3emin按钮在真机上会出现左右边框消失的情况，暂无解决办法。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch3 id=\x22articleHeader13\x22\x3e5、rem在真机设备上的表现有差异\x3c\/h3\x3e\n\x3cp\x3e即使在根元素page上设置了字体大小，rem在不同设备上的表现还是无法统一。\x3c\/p\x3e\n\x3ch4\x3e建议：\x3c\/h4\x3e\n\x3cp\x3e使用rpx作为响应式字体的单位，效果比较好，rpx作为小程序的特性还是在不同设备的表现上还是很实用的。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>小程序踩坑记录</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000009024985">https://segmentfault.com/a/1190000009024985</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/k143hz3rgx/" target="_blank">https://alili.tech/archive/k143hz3rgx/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>