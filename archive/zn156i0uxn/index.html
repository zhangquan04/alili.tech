<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="从源码看Element UI Table组件实现思路"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>从源码看Element UI Table组件实现思路 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/zn156i0uxn/",
				"appid": "1613049289050283", 
				"title": "从源码看Element UI Table组件实现思路 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-14T02:30:07"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/nb4ufjex47/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/l6l4d7r31jc/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fzn156i0uxn%2f&text=%e4%bb%8e%e6%ba%90%e7%a0%81%e7%9c%8bElement%20UI%20Table%e7%bb%84%e4%bb%b6%e5%ae%9e%e7%8e%b0%e6%80%9d%e8%b7%af"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fzn156i0uxn%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fzn156i0uxn%2f&text=%e4%bb%8e%e6%ba%90%e7%a0%81%e7%9c%8bElement%20UI%20Table%e7%bb%84%e4%bb%b6%e5%ae%9e%e7%8e%b0%e6%80%9d%e8%b7%af"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fzn156i0uxn%2f&title=%e4%bb%8e%e6%ba%90%e7%a0%81%e7%9c%8bElement%20UI%20Table%e7%bb%84%e4%bb%b6%e5%ae%9e%e7%8e%b0%e6%80%9d%e8%b7%af"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fzn156i0uxn%2f&is_video=false&description=%e4%bb%8e%e6%ba%90%e7%a0%81%e7%9c%8bElement%20UI%20Table%e7%bb%84%e4%bb%b6%e5%ae%9e%e7%8e%b0%e6%80%9d%e8%b7%af"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e4%bb%8e%e6%ba%90%e7%a0%81%e7%9c%8bElement%20UI%20Table%e7%bb%84%e4%bb%b6%e5%ae%9e%e7%8e%b0%e6%80%9d%e8%b7%af&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fzn156i0uxn%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fzn156i0uxn%2f&title=%e4%bb%8e%e6%ba%90%e7%a0%81%e7%9c%8bElement%20UI%20Table%e7%bb%84%e4%bb%b6%e5%ae%9e%e7%8e%b0%e6%80%9d%e8%b7%af"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fzn156i0uxn%2f&title=%e4%bb%8e%e6%ba%90%e7%a0%81%e7%9c%8bElement%20UI%20Table%e7%bb%84%e4%bb%b6%e5%ae%9e%e7%8e%b0%e6%80%9d%e8%b7%af"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fzn156i0uxn%2f&title=%e4%bb%8e%e6%ba%90%e7%a0%81%e7%9c%8bElement%20UI%20Table%e7%bb%84%e4%bb%b6%e5%ae%9e%e7%8e%b0%e6%80%9d%e8%b7%af"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fzn156i0uxn%2f&title=%e4%bb%8e%e6%ba%90%e7%a0%81%e7%9c%8bElement%20UI%20Table%e7%bb%84%e4%bb%b6%e5%ae%9e%e7%8e%b0%e6%80%9d%e8%b7%af"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">从源码看Element UI Table组件实现思路</h1><div class="meta"><div class="postdate"><time datetime="2019-01-14" itemprop="datePublished">2019-01-14</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e在你实现一个组件过程中，一定要注意一下几点\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e将代码模块化并且分离。如果你将大量的逻辑或者是代码都放在钩子函数中（比如mounted），那么写出来的组件代码将非常丑陋，这样子写出的代码也往往难以维护。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e第二就是要注意可扩展性。因为定制一个基础组件，也许当你日后还想对它的功能进行扩展的话，那么一定要注意自己代码的编写结构。\x3cbr\x3e接下来来看一下element ui是如何编写一个table组件的，在看源码之前，首先还是要对他的table组件的大致功能有一个了解，这样我们在看源码的时候才会知道这一段大概实现了什么功能。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e点开table的src目录下，有这么几个文件\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3edropdown.js\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3efilter-panel.vue（实现表格勾选的组件）\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3etable-body.js （实现表格body的组件）\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3etable-column.js （实现表中中每一列的组件）\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3etable-footer.js （定义表格尾部的组件，会有一些合计的功能）\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3etable-header.js（定义表格thead的文件）\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3etable-layout.js （定义表格布局的文件）\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3etable-store.js（定义事件的方法集中在这里）\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3etable.vue（最终将上述组件整合后的一个最终table组件）\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eutil.js（定义了一些工具函数）\x3cbr\x3e对于这个结构也就是像一开始提到的那样，将代码尽量拆分，这样组织下来结构清晰。分析的时候我将举例每一种情况的代表，类似的照着实现就可以了。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e首先是事件的实现\x3c\/p\x3e\n\x3cp\x3e以row-click为例，我们使用这个事件的方式是@row-click=“dosomething”,那组件内部如何触发这个事件呢，最简单的方法就是在每一次tr循环的时候都去绑定上一个@click事件就好，在这个事件里面去emit（‘row-click’）事件就好，可是这就是会有一个问题，事件一多，代码都集中在methods中，会写出非常长的代码，这个时候就需要分离，我们新建一个store.js，用来管理各种事件。大致实现如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const TableStore = function (table,initialSatate) {\n  this.table = table\n  this.states = {}\n}\nTableStore.prototype.mutations = {\n  handleRowClick () {\n    this.table.emit(\x27row-click\x27)\n  }\n}\nTable.prototype.commit = function (name,..agrs){\n  mutations[name].apply(name,args)\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3econst TableStore = function (\x3cspan class=\x22hljs-selector-tag\x22\x3etable\x3c\/span\x3e,initialSatate) {\n  this\x3cspan class=\x22hljs-selector-class\x22\x3e.table\x3c\/span\x3e = \x3cspan class=\x22hljs-selector-tag\x22\x3etable\x3c\/span\x3e\n  this\x3cspan class=\x22hljs-selector-class\x22\x3e.states\x3c\/span\x3e = {}\n}\nTableStore\x3cspan class=\x22hljs-selector-class\x22\x3e.prototype\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.mutations\x3c\/span\x3e = {\n  handleRowClick () {\n    this\x3cspan class=\x22hljs-selector-class\x22\x3e.table\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.emit\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27row-click\x27\x3c\/span\x3e)\n  }\n}\nTable\x3cspan class=\x22hljs-selector-class\x22\x3e.prototype\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.commit\x3c\/span\x3e = function (name,..agrs){\n  mutations[name].apply(name,args)\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们在表格table创建一开始，在data (){}中就会创建一个新的tableStore对象，我们在每一行点击的时候只用this.store.commit(\x27handleRowClick\x27);基于这个流程，如果以后还需要继续添加事件，你就可以在mutations里面去定义。\x3c\/p\x3e\n\x3cp\x3elayout.js也是一样的道理，这里我只是对表格的高度去进行了设定，对于一个vue对象来说，不能用dom思路去实现它的高度，我是将vue对象打印出来，在一步一步寻找那个style属性\x3c\/p\x3e\n\x3cp\x3eTableColumn的实现\x3c\/p\x3e\n\x3cp\x3e其实对于一个表格来说，他的表头将会很重要。在蚂蚁金服的那个antd组件库中，他们对于表头的定义是这样的，你需要传入一个columns（props），里面将你定义的每一列信息写进去，而vue在实现的过程中，是将作为\x3c\/p\x3e\n\x3cp\x3e组件children元素,在组件里再去定义每一列的属性，基于这两种实现方式的不同，我觉得很大程度上是因为vue中有一个标签（也可能是别的原因），但是又有一个问题，就是在table-header\/table-body\/table-column中，他们都是用的render方法去渲染组件，我在参考他们官方编写的过程中，用到了jsx语法的模式，不是很理解为什么又采用这种方式去编写组件。\x3cbr\x3e最后我实现的table\x3ca href=\x22https:\/\/github.com\/z2014\/Vue-component\/tree\/master\/BasicTable\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e功能文档\x3c\/a\x3e\x3cbr\x3e以及最终的一个样例\x3ca href=\x22https:\/\/z2014.github.io\/Vue-component\/Table-Demo\/index.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3edemo\x3c\/a\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>从源码看Element UI Table组件实现思路</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000009412413">https://segmentfault.com/a/1190000009412413</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/zn156i0uxn/" target="_blank">https://alili.tech/archive/zn156i0uxn/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>