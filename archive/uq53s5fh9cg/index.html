<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="Web项目如何防止客户端重复发送请求"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>Web项目如何防止客户端重复发送请求 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/uq53s5fh9cg/",
				"appid": "1613049289050283", 
				"title": "Web项目如何防止客户端重复发送请求 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-13T02:30:11"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/ugzljm3unia/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/7wj0eagfacb/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fuq53s5fh9cg%2f&text=Web%e9%a1%b9%e7%9b%ae%e5%a6%82%e4%bd%95%e9%98%b2%e6%ad%a2%e5%ae%a2%e6%88%b7%e7%ab%af%e9%87%8d%e5%a4%8d%e5%8f%91%e9%80%81%e8%af%b7%e6%b1%82"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fuq53s5fh9cg%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fuq53s5fh9cg%2f&text=Web%e9%a1%b9%e7%9b%ae%e5%a6%82%e4%bd%95%e9%98%b2%e6%ad%a2%e5%ae%a2%e6%88%b7%e7%ab%af%e9%87%8d%e5%a4%8d%e5%8f%91%e9%80%81%e8%af%b7%e6%b1%82"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fuq53s5fh9cg%2f&title=Web%e9%a1%b9%e7%9b%ae%e5%a6%82%e4%bd%95%e9%98%b2%e6%ad%a2%e5%ae%a2%e6%88%b7%e7%ab%af%e9%87%8d%e5%a4%8d%e5%8f%91%e9%80%81%e8%af%b7%e6%b1%82"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fuq53s5fh9cg%2f&is_video=false&description=Web%e9%a1%b9%e7%9b%ae%e5%a6%82%e4%bd%95%e9%98%b2%e6%ad%a2%e5%ae%a2%e6%88%b7%e7%ab%af%e9%87%8d%e5%a4%8d%e5%8f%91%e9%80%81%e8%af%b7%e6%b1%82"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=Web%e9%a1%b9%e7%9b%ae%e5%a6%82%e4%bd%95%e9%98%b2%e6%ad%a2%e5%ae%a2%e6%88%b7%e7%ab%af%e9%87%8d%e5%a4%8d%e5%8f%91%e9%80%81%e8%af%b7%e6%b1%82&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fuq53s5fh9cg%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fuq53s5fh9cg%2f&title=Web%e9%a1%b9%e7%9b%ae%e5%a6%82%e4%bd%95%e9%98%b2%e6%ad%a2%e5%ae%a2%e6%88%b7%e7%ab%af%e9%87%8d%e5%a4%8d%e5%8f%91%e9%80%81%e8%af%b7%e6%b1%82"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fuq53s5fh9cg%2f&title=Web%e9%a1%b9%e7%9b%ae%e5%a6%82%e4%bd%95%e9%98%b2%e6%ad%a2%e5%ae%a2%e6%88%b7%e7%ab%af%e9%87%8d%e5%a4%8d%e5%8f%91%e9%80%81%e8%af%b7%e6%b1%82"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fuq53s5fh9cg%2f&title=Web%e9%a1%b9%e7%9b%ae%e5%a6%82%e4%bd%95%e9%98%b2%e6%ad%a2%e5%ae%a2%e6%88%b7%e7%ab%af%e9%87%8d%e5%a4%8d%e5%8f%91%e9%80%81%e8%af%b7%e6%b1%82"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fuq53s5fh9cg%2f&title=Web%e9%a1%b9%e7%9b%ae%e5%a6%82%e4%bd%95%e9%98%b2%e6%ad%a2%e5%ae%a2%e6%88%b7%e7%ab%af%e9%87%8d%e5%a4%8d%e5%8f%91%e9%80%81%e8%af%b7%e6%b1%82"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">Web项目如何防止客户端重复发送请求</h1><div class="meta"><div class="postdate"><time datetime="2019-01-13" itemprop="datePublished">2019-01-13</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e在Web项目中，有一些请求或操作会对数据产生影响（比如新增、删除、更新），针对这类请求一般都需要做一些保护，以防止用户有意或无意的重复发起这样的请求导致的数据错乱。\x3c\/p\x3e\n\x3cp\x3e本文总结了一些防止客户端重复发送请求的方法。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e方法一：JS监听Form的onsubmit事件\x3c\/h2\x3e\n\x3cp\x3e在经典场景下，浏览器通过Form发送请求。因此只需要在Form onsubmit时将Submit按钮disable，就能够防止用户双击导致的重复请求（这种问题一般发生在年纪大的用户身上，他们分不清单击和双击）。\x3c\/p\x3e\n\x3cp\x3e但是随着前端的发展，Form以外的请求方式也越来越多，比如利用各种前端框架（Vue、AngularJs、Backbone等）写的App，他们更多的采用的是ajax的方式和后端交互。那么前端开发人员必须在开发时针对每个代表\x3cstrong\x3e发起请求\x3c\/strong\x3e的UI元素做处理，像Form一样，在发起请求的时候把相关UI元素\x3cstrong\x3e禁用\x3c\/strong\x3e掉。\x3c\/p\x3e\n\x3cp\x3e而有些交互方式则可能连代表\x3cstrong\x3e发起请求\x3c\/strong\x3e的UI元素都没有，比如Segmentfault的markdown编辑器就是在一边输入的时候一边保存的。那么这时就需要前端代码采用其他手段来控制重复请求的发生。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e优点：\x3c\/strong\x3e\x3c\/p\x3e\n\x3col\x3e\x3cli\x3e不需要后端写代码\x3c\/li\x3e\x3c\/ol\x3e\n\x3cp\x3e\x3cstrong\x3e缺点：\x3c\/strong\x3e\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e不存在统一的解决方案，必须针对每种情况写处理代码\x3c\/li\x3e\n\x3cli\x3e无法控制浏览器刷新发起的重复请求\x3c\/li\x3e\n\x3cli\x3e前端开发人员忘记写相关代码\x3c\/li\x3e\n\x3cli\x3e无法控制恶意的重复请求，比如绕过浏览器直接发起\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e方法二：Http Status Code 302（后端重定向）\x3c\/h2\x3e\n\x3cp\x3e服务端采用重定向的方式，防止用户刷新浏览器发出重复请求。这是比较经典的后端控制重复请求的方式，因为一旦\x3cstrong\x3e重定向成功\x3c\/strong\x3e后，用户刷新浏览器所刷新的是那个重定向地址，而不是数据操作地址。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e优点：\x3c\/strong\x3e\x3c\/p\x3e\n\x3col\x3e\x3cli\x3e不需要写前端代码\x3c\/li\x3e\x3c\/ol\x3e\n\x3cp\x3e\x3cstrong\x3e缺点：\x3c\/strong\x3e\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e在还未响应302之前，所发起的重复请求，比如：用户快速的双击、刷新浏览器\x3c\/li\x3e\n\x3cli\x3e在某些前端程序里（比如SPA），不能使用重定向\x3c\/li\x3e\n\x3cli\x3e后端开发人员忘记写相关代码\x3c\/li\x3e\n\x3cli\x3e无法控制恶意的重复请求，比如绕过浏览器直接发起\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e方法三：结合方法一和方法二\x3c\/h2\x3e\n\x3cp\x3e结合方法一和方法二的话倒是可以解决大部分问题，但是解决不了以下问题：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e在还未响应302之前，用户刷新浏览器导致的重复请求\x3c\/li\x3e\n\x3cli\x3e有些场景下压根不能使用重定向\x3c\/li\x3e\n\x3cli\x3e前、后端开发人员忘记写相关代码\x3c\/li\x3e\n\x3cli\x3e无法控制恶意的重复请求，比如绕过浏览器直接发起\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e方法四：token方式\x3c\/h2\x3e\n\x3cp\x3etoken的流程是这样的：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e在浏览器发送请求前，先到服务端索要token\x3c\/li\x3e\n\x3cli\x3e浏览器发送请求时，将token一并提交\x3c\/li\x3e\n\x3cli\x3e服务端检查请求是否携带token、token是否有效（比如是否正确、是否过期）。如果不正确则响应失败；如果正确则销毁token，继续业务逻辑。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e关键点在于：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e每个token都是一次性且有过期时间的，能够防止token前端代码bug造成的重复利用和无限利用。\x3c\/li\x3e\n\x3cli\x3e服务器要求请求必须携带token，能够避免前端开发人员漏写相关代码。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e那么token是以怎样的形式传输的呢？我认为有以下两种方式：\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3eCookie\x3c\/strong\x3e：\x3c\/p\x3e\n\x3cp\x3e推荐使用这种方式，因为浏览器每次都会将cookie携带在请求里一并发出，所以前端发送请求的代码都不需要修改，只要在发送请求前问服务器拿token就行了。\x3c\/p\x3e\n\x3cp\x3e比如在进入Form页面时，服务器将token以cookie的形式一并携带在响应中，那么前端Form提交时，就会将cookie一并携带在请求中，前端的代码一点都不需要修改。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3ejson\x3c\/strong\x3e：\x3c\/p\x3e\n\x3cp\x3e前端发起ajax请求像后端拿token，后端以json的形式返回token，前端发送请求时将token携带在请求中，后端检验。\x3c\/p\x3e\n\x3cp\x3e这种方式比Cookie稍微麻烦的地方是，前端必须写一些代码来保存这个token，然后在发送请求的地方要写一些代码把token携带在请求里。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e优点\x3c\/strong\x3e：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e前端代码可以写的少一些，比如禁用UI元素的代码可以不写\x3c\/li\x3e\n\x3cli\x3e能够解决在还未响应302之前，用户刷新浏览器导致的重复请求\x3c\/li\x3e\n\x3cli\x3e适应有些场景下压根不能使用重定向\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e\x3cstrong\x3e缺点\x3c\/strong\x3e：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e前、后端开发人员忘记写相关代码。这个真的解决不了。\x3c\/li\x3e\n\x3cli\x3e无法控制通过脚本运行的，具有整套流程的恶意请求。这种请求在程序看来完全合法，但却属于恶意行为，针对这类恶意行为的防控属于另一个话题，本人不懂，所以在这里就不多讲了。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e方法五：利用数据库的唯一约束\x3c\/h2\x3e\n\x3cp\x3e如果请求会insert数据，而这个数据正好存在业务主键，那么可以利用数据库的唯一约束来做进一步的防御。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e方法六：请求幂等化\x3c\/h2\x3e\n\x3cp\x3e有些业务情形下，请求是幂等的，这就意味着可以不用为重复发生请求而烦恼了——至少在业务逻辑层面不用烦恼了。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>Web项目如何防止客户端重复发送请求</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000009717705">https://segmentfault.com/a/1190000009717705</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/uq53s5fh9cg/" target="_blank">https://alili.tech/archive/uq53s5fh9cg/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>