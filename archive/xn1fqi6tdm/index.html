<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="使用ES6新特性实现简单的MVVM（1）--数据驱动"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>使用ES6新特性实现简单的MVVM（1）--数据驱动 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/xn1fqi6tdm/",
				"appid": "1613049289050283", 
				"title": "使用ES6新特性实现简单的MVVM（1）--数据驱动 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-07T02:30:11"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/qu7vzmp3h8g/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/6c14wptntur/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fxn1fqi6tdm%2f&text=%e4%bd%bf%e7%94%a8ES6%e6%96%b0%e7%89%b9%e6%80%a7%e5%ae%9e%e7%8e%b0%e7%ae%80%e5%8d%95%e7%9a%84MVVM%ef%bc%881%ef%bc%89--%e6%95%b0%e6%8d%ae%e9%a9%b1%e5%8a%a8"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fxn1fqi6tdm%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fxn1fqi6tdm%2f&text=%e4%bd%bf%e7%94%a8ES6%e6%96%b0%e7%89%b9%e6%80%a7%e5%ae%9e%e7%8e%b0%e7%ae%80%e5%8d%95%e7%9a%84MVVM%ef%bc%881%ef%bc%89--%e6%95%b0%e6%8d%ae%e9%a9%b1%e5%8a%a8"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fxn1fqi6tdm%2f&title=%e4%bd%bf%e7%94%a8ES6%e6%96%b0%e7%89%b9%e6%80%a7%e5%ae%9e%e7%8e%b0%e7%ae%80%e5%8d%95%e7%9a%84MVVM%ef%bc%881%ef%bc%89--%e6%95%b0%e6%8d%ae%e9%a9%b1%e5%8a%a8"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fxn1fqi6tdm%2f&is_video=false&description=%e4%bd%bf%e7%94%a8ES6%e6%96%b0%e7%89%b9%e6%80%a7%e5%ae%9e%e7%8e%b0%e7%ae%80%e5%8d%95%e7%9a%84MVVM%ef%bc%881%ef%bc%89--%e6%95%b0%e6%8d%ae%e9%a9%b1%e5%8a%a8"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e4%bd%bf%e7%94%a8ES6%e6%96%b0%e7%89%b9%e6%80%a7%e5%ae%9e%e7%8e%b0%e7%ae%80%e5%8d%95%e7%9a%84MVVM%ef%bc%881%ef%bc%89--%e6%95%b0%e6%8d%ae%e9%a9%b1%e5%8a%a8&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fxn1fqi6tdm%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fxn1fqi6tdm%2f&title=%e4%bd%bf%e7%94%a8ES6%e6%96%b0%e7%89%b9%e6%80%a7%e5%ae%9e%e7%8e%b0%e7%ae%80%e5%8d%95%e7%9a%84MVVM%ef%bc%881%ef%bc%89--%e6%95%b0%e6%8d%ae%e9%a9%b1%e5%8a%a8"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fxn1fqi6tdm%2f&title=%e4%bd%bf%e7%94%a8ES6%e6%96%b0%e7%89%b9%e6%80%a7%e5%ae%9e%e7%8e%b0%e7%ae%80%e5%8d%95%e7%9a%84MVVM%ef%bc%881%ef%bc%89--%e6%95%b0%e6%8d%ae%e9%a9%b1%e5%8a%a8"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fxn1fqi6tdm%2f&title=%e4%bd%bf%e7%94%a8ES6%e6%96%b0%e7%89%b9%e6%80%a7%e5%ae%9e%e7%8e%b0%e7%ae%80%e5%8d%95%e7%9a%84MVVM%ef%bc%881%ef%bc%89--%e6%95%b0%e6%8d%ae%e9%a9%b1%e5%8a%a8"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fxn1fqi6tdm%2f&title=%e4%bd%bf%e7%94%a8ES6%e6%96%b0%e7%89%b9%e6%80%a7%e5%ae%9e%e7%8e%b0%e7%ae%80%e5%8d%95%e7%9a%84MVVM%ef%bc%881%ef%bc%89--%e6%95%b0%e6%8d%ae%e9%a9%b1%e5%8a%a8"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">使用ES6新特性实现简单的MVVM（1）--数据驱动</h1><div class="meta"><div class="postdate"><time datetime="2019-01-07" itemprop="datePublished">2019-01-07</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e\x3cp\x3e尝试使用es6新特性，自己来实现一个mvvm及vue的各种特性。\x3cbr\x3e相关代码放在\x3ca href=\x22https:\/\/github.com\/callmedadaxin\/proxy-vue\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3egithub\x3c\/a\x3e，会持续更新，欢迎赏个star。\x3cbr\x3e本篇文章为系列文章的第一篇，会比较容易理解，后续会持续更新后面的记录。\x3cbr\x3e文章首发于\x3ca href=\x22http:\/\/callmedadaxin.github.io\/2017\/07\/25\/%E4%BD%BF%E7%94%A8ES6%E6%96%B0%E7%89%B9%E6%80%A7%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E7%9A%84MVVM%EF%BC%881%EF%BC%89-%E6%95%B0%E6%8D%AE%E9%A9%B1%E5%8A%A8\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e本人博客\x3c\/a\x3e\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e最简单的watcher\x3c\/h2\x3e\n\x3cp\x3e从开始接触Vue开始，我们便对它的“数据响应”赞叹不绝，那么我们首先，来实现一个最简单的watcher，来监听数据，以进行对应的操作，类似后续会涉及的dom操作等。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3eProxy\x3c\/h3\x3e\n\x3cp\x3e我们都知道，Vue使用Object.defineProperty来进行数据监听，监听obj的get和set方法。在ES6中，Proxy可以拦截某些操作的默认行为，也就是对目标对象的访问进行拦截，过滤和改写。我们可以利用这个特性来实现对数据的监听：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const watcher = (obj, fn) =\x3e {\n  return new Proxy(obj, {\n    get (target, prop, receiver) {\n      return Reflect.get(target, prop, receiver)\n    },\n\n    set (target, prop, value) {\n      const oldValue = Reflect.get(target, prop, receiver)\n      const result = Reflect.set(target, prop, value)\n\n      fn(value, oldValue)\n\n      return result\n    }\n  })\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs cs\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e watcher = (obj, fn) =\x26gt; {\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Proxy(obj, {\n    \x3cspan class=\x22hljs-keyword\x22\x3eget\x3c\/span\x3e (target, prop, receiver) {\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e Reflect.\x3cspan class=\x22hljs-keyword\x22\x3eget\x3c\/span\x3e(target, prop, receiver)\n    },\n\n    \x3cspan class=\x22hljs-keyword\x22\x3eset\x3c\/span\x3e (target, prop, \x3cspan class=\x22hljs-keyword\x22\x3evalue\x3c\/span\x3e) {\n      \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e oldValue = Reflect.\x3cspan class=\x22hljs-keyword\x22\x3eget\x3c\/span\x3e(target, prop, receiver)\n      \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e result = Reflect.\x3cspan class=\x22hljs-keyword\x22\x3eset\x3c\/span\x3e(target, prop, \x3cspan class=\x22hljs-keyword\x22\x3evalue\x3c\/span\x3e)\n\n      fn(\x3cspan class=\x22hljs-keyword\x22\x3evalue\x3c\/span\x3e, oldValue)\n\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e result\n    }\n  })\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e结果：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22let obj = watcher({ a: 1 }, (val, oldVal) =\x3e {\n  console.log(\x27old =\x3e\x3e \x27, oldVal)\n  console.log(\x27new =\x3e\x3e \x27, val)\n})\n\nobj.a = 2\n\/\/ old =\x3e\x3e , 1\n\/\/ new =\x3e\x3e , 2\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs typescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e obj = watcher({ a: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e }, \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eval, oldVal\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27old =\x26gt;\x26gt; \x27\x3c\/span\x3e, oldVal)\n  \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27new =\x26gt;\x26gt; \x27\x3c\/span\x3e, val)\n})\n\nobj.a = \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ old =\x26gt;\x26gt; , 1\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ new =\x26gt;\x26gt; , 2\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e简单的Dom操作\x3c\/h2\x3e\n\x3cp\x3e我们已经可以对简单的数据操作进行监听（虽然还有各种问题），接下来，我们只要在监听到dom后进行数据操作即可。解析模板什么的我们就先不做了，我们可以继续利用Proxy实现一个dom辅助函数：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const dom = new Proxy({}, {\n  get (target, tagName) {\n    return (attrs = {}, ...childrens) =\x3e {\n      \/\/ 创建节点\n      const elem = document.createElement(tagName)\n\n      \/\/ 添加attribute\n      attrs.forEach(attr =\x3e elem.addAttribute(attr, attrs[attr])\n\n      \/\/ 添加子元素\n      childrens.forEach(child =\x3e {\n        const child = typeof child === \x27string\x27\n          ? document.createTextNode(child) \n          : child\n\n        elem.appendChild(child)\n      })\n\n      return elem\n    }\n  }\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e dom = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eProxy\x3c\/span\x3e({}, {\n  get (target, tagName) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eattrs = {}, ...childrens\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 创建节点\x3c\/span\x3e\n      \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e elem = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.createElement(tagName)\n\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 添加attribute\x3c\/span\x3e\n      attrs.forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eattr\x3c\/span\x3e =\x26gt;\x3c\/span\x3e elem.addAttribute(attr, attrs[attr])\n\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 添加子元素\x3c\/span\x3e\n      childrens.forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3echild\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e child = \x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e child === \x3cspan class=\x22hljs-string\x22\x3e\x27string\x27\x3c\/span\x3e\n          ? \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.createTextNode(child) \n          : child\n\n        elem.appendChild(child)\n      })\n\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e elem\n    }\n  }\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e也就是说，我们为dom的各属性进行监听，当访问对应的节点时，我们创建并且为他添加各种属性等：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22dom.div(\n  {class: \x27wrap\x27}, \n  \x27helloworld\x27,\n  dom.a({\n    href: \x27https:\/\/www.360.cn\x27\n  }, \x27welcome to 360\x27)\n)\n\n\/\/ 输出\n\x3cdiv class=\x26quot;wrap\x26quot;\x3e\n  helloworld\n  \x3ca href=\x26quot;https:\/\/www.360.cn\x26quot;\x3ewelcome to 360\x3c\/a\x3e\n\x3c\/div\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs scala\x22\x3e\x3ccode\x3edom.div(\n  {\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e\x3c\/span\x3e: \x3cspan class=\x22hljs-symbol\x22\x3e\x27wra\x3c\/span\x3ep\x27}, \n  \x3cspan class=\x22hljs-symbol\x22\x3e\x27helloworl\x3c\/span\x3ed\x27,\n  dom.a({\n    href: \x3cspan class=\x22hljs-symbol\x22\x3e\x27https\x3c\/span\x3e:\x3cspan class=\x22hljs-comment\x22\x3e\/\/www.360.cn\x27\x3c\/span\x3e\n  }, \x3cspan class=\x22hljs-symbol\x22\x3e\x27welcome\x3c\/span\x3e to \x3cspan class=\x22hljs-number\x22\x3e360\x3c\/span\x3e\x27)\n)\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 输出\x3c\/span\x3e\n\x26lt;div \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22wrap\x22\x3c\/span\x3e\x26gt;\n  helloworld\n  \x26lt;a href=\x3cspan class=\x22hljs-string\x22\x3e\x22https:\/\/www.360.cn\x22\x3c\/span\x3e\x26gt;welcome to \x3cspan class=\x22hljs-number\x22\x3e360\x3c\/span\x3e\x26lt;\/a\x26gt;\n\x26lt;\/div\x26gt;\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e拼接基础框架\x3c\/h2\x3e\n\x3cp\x3e我们在这里给我们的这个小架子起名为\x27W\x27，让它可以真正的运行起来。类似Vue的语法，我们需要在进行实例化的时候，watch我们的data,并且更新dom。类似这样：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const vm = new W({\n  el: \x27body\x27,\n  data () {\n    return {\n      msg: \x27hello world\x27\n    }\n  },\n  render () {\n    return dom.div({\n      class: \x27wrap\x27\n    },\n      dom.a({\n        href: \x27http:\/\/www.360.cn\x27\n      }, this.msg)\n    )\n  }\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs kotlin\x22\x3e\x3ccode\x3econst vm = new W({\n  el: \x3cspan class=\x22hljs-string\x22\x3e\x27body\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e () {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n      msg: \x3cspan class=\x22hljs-string\x22\x3e\x27hello world\x27\x3c\/span\x3e\n    }\n  },\n  render () {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e dom.div({\n      \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e: \x3cspan class=\x22hljs-type\x22\x3e\x27wrap\x27\x3c\/span\x3e\x3c\/span\x3e\n    },\n      dom.a({\n        href: \x3cspan class=\x22hljs-string\x22\x3e\x27http:\/\/www.360.cn\x27\x3c\/span\x3e\n      }, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.msg)\n    )\n  }\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e因此，我们需要实现这样一个类，来处理我们的参数，并进行实例的初始化，监听，以及渲染控制等。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22export default class W {\n  constructor (config) {}\n\n  \/**\n   * observe data\n   *\/\n  _initData () {}\n\n  \/**\n   * 渲染节点\n   *\/\n  _renderDom () {}\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eW\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e (config) {}\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/**\n   * observe data\n   *\/\x3c\/span\x3e\n  _initData () {}\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/**\n   * 渲染节点\n   *\/\x3c\/span\x3e\n  _renderDom () {}\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e初始化数据\x3c\/h3\x3e\n\x3cp\x3e首先，我们进行数据初始化，将数据置为observable,在对其修改的时候进行监听：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import watcher from \x27.\/data.js\x27\n\nclass W {\n  constructor (config) {\n    const { data = () =\x3e {} } = config\n\n    this._config = config\n    this._initData(data)\n\n    return this._vm\n  }\n}\n\n_initData (data) {\n  this._vm = watcher(Object.assign({}, this, data()), this._renderDom.bind(this))\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs kotlin\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e watcher from \x3cspan class=\x22hljs-string\x22\x3e\x27.\/data.js\x27\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eW\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e (config) {\n    const { \x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e = () =\x26gt; {} } = config\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._config = config\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._initData(\x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e)\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._vm\n  }\n}\n\n_initData (\x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e) {\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._vm = watcher(Object.assign({}, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e()), \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._renderDom.bind(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e))\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在这里我们需要注意两点：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e我们的data参数为一个function\x3cbr\x3e这个原因在vue官方文档已经说过，当我们直接使用对象的时候，不同的实例间会共享同一个对象，导致出现对一个组件进行修改，另一个组件也进行修改的问题。具体可以查看\x3ca href=\x22https:\/\/cn.vuejs.org\/v2\/guide\/components.html#data-\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3edata-必须是函数\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e我们返回的是this._vm而不是this\x3cbr\x3e我们这里做了两步操作，首先将this与data进行合并，再将整个对象进行监听,并赋值到_vm属性上。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e这样，我们通过new W()初始化的实例，则可以访问到我们的data属性及方法，并且具有数据驱动的特性了。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e更新DOM\x3c\/h3\x3e\n\x3cp\x3e我们已经为watcher的回调添加了dom更新的事件，我们只要在这里执行render函数，并挂载到对应的el上即可：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const { render, el } = this._config\nconst targetEl = document.querySelector(el)\nconst renderDom = render()\n\ntargetEl.innerHTML = \x27\x27\ntargetEl.appendChild(renderDom)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dart\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e { render, el } = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._config\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e targetEl = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.\x3cspan class=\x22hljs-built_in\x22\x3equerySelector\x3c\/span\x3e(el)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e renderDom = render()\n\ntargetEl.innerHTML = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e\ntargetEl.appendChild(renderDom)\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e绑定this\x3c\/h3\x3e\n\x3cp\x3e我们会发现，我们在config的render函数中，使用了this.msg来访问data的msg属性，因此我们需要实现在各组件中，通过this可以访问到本实例的特性。我猜你已经想到了，我们可以使用bind,call和apply来实现它：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/**\n * 为所有的函数绑定this\n *\/\nbindVM () {\n  const { _config } = this\n\n  for(let key of Object.keys(_config)) {\n    const val = _config[key]\n    if (typeof(val) === \x27function\x27) {\n      _config[key] = val.bind(this._vm)\n    }\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs verilog\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * 为所有的函数绑定this\n *\/\x3c\/span\x3e\nbindVM () {\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e { \x3cspan class=\x22hljs-number\x22\x3e_\x3c\/span\x3e\x3cspan class=\x22hljs-keyword\x22\x3econfig\x3c\/span\x3e } = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e\n\n  \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e key of Object\x3cspan class=\x22hljs-variable\x22\x3e.keys\x3c\/span\x3e(\x3cspan class=\x22hljs-number\x22\x3e_\x3c\/span\x3e\x3cspan class=\x22hljs-keyword\x22\x3econfig\x3c\/span\x3e)) {\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e val = \x3cspan class=\x22hljs-number\x22\x3e_\x3c\/span\x3e\x3cspan class=\x22hljs-keyword\x22\x3econfig\x3c\/span\x3e[key]\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (typeof(val) === \x27\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x27) {\n      \x3cspan class=\x22hljs-number\x22\x3e_\x3c\/span\x3e\x3cspan class=\x22hljs-keyword\x22\x3econfig\x3c\/span\x3e[key] = val\x3cspan class=\x22hljs-variable\x22\x3e.bind\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e._vm\x3c\/span\x3e)\n    }\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3e测试\x3c\/h2\x3e\n\x3cp\x3e简单的架子拼接完成，我们来进行测试下我们的成果，我们需要实现两点功能：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e可以按照我们的render函数正常挂载，并可访问到data上的数据\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e通过对实例进行修改，修改会自动更新到节点上\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const vm = new W({\n  el: \x27body\x27,\n  data () {\n    return {\n      msg: \x27hello world\x27\n    }\n  },\n  render () {\n    return dom.div({\n      class: \x27wrap\x27\n    },\n      dom.a({\n        href: \x27http:\/\/www.360.cn\x27\n      }, this.msg)\n    )\n  }\n})\n\n\/\/ 测试修改vm\nsetInterval(_ =\x3e {\n  vm.msg = \x27hello world =\x3e\x3e\x3e\x27 \x2b new Date()\n}, 1000)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e vm = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e W({\n  \x3cspan class=\x22hljs-attr\x22\x3eel\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27body\x27\x3c\/span\x3e,\n  data () {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-attr\x22\x3emsg\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27hello world\x27\x3c\/span\x3e\n    }\n  },\n  render () {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e dom.div({\n      \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27wrap\x27\x3c\/span\x3e\n    },\n      dom.a({\n        \x3cspan class=\x22hljs-attr\x22\x3ehref\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27http:\/\/www.360.cn\x27\x3c\/span\x3e\n      }, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.msg)\n    )\n  }\n})\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 测试修改vm\x3c\/span\x3e\nsetInterval(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e_\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n  vm.msg = \x3cspan class=\x22hljs-string\x22\x3e\x27hello world =\x26gt;\x26gt;\x26gt;\x27\x3c\/span\x3e \x2b \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e()\n}, \x3cspan class=\x22hljs-number\x22\x3e1000\x3c\/span\x3e)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e结果:\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010345391\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010345391\x22 alt=\x22结果\x22 title=\x22结果\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e最基本的功能已经实现啦！\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3e结语\x3c\/h2\x3e\n\x3cp\x3e本次我们只实现了最最最简单的数据驱动功能，后续还有很多需要进行处理，我们也会对其一一进行梳理和实现，大家可以持续关注下，例如：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e数组变动监听\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eobject深度监听\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e更新队列\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3erender过程中记录仅相关的属性\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e模板渲染\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3ev-model\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e...等等\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e相关代码放在\x3ca href=\x22https:\/\/github.com\/callmedadaxin\/proxy-vue\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3egithub\x3c\/a\x3e，会持续更新，欢迎赏个star。\x3c\/p\x3e\n\x3cp\x3e敬请期待！\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>使用ES6新特性实现简单的MVVM（1）&ndash;数据驱动</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000010345388">https://segmentfault.com/a/1190000010345388</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/xn1fqi6tdm/" target="_blank">https://alili.tech/archive/xn1fqi6tdm/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>