<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="JavaScript 开发者所需要知道的 V8（一）：V8 In NodeJS"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>JavaScript 开发者所需要知道的 V8（一）：V8 In NodeJS | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/41pgo3a2iyp/",
				"appid": "1613049289050283", 
				"title": "JavaScript 开发者所需要知道的 V8（一）：V8 In NodeJS | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-31T02:31:16"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/krb1zm7x38j/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/7kt5s47oysx/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f41pgo3a2iyp%2f&text=JavaScript%20%e5%bc%80%e5%8f%91%e8%80%85%e6%89%80%e9%9c%80%e8%a6%81%e7%9f%a5%e9%81%93%e7%9a%84%20V8%ef%bc%88%e4%b8%80%ef%bc%89%ef%bc%9aV8%20In%20NodeJS"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f41pgo3a2iyp%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f41pgo3a2iyp%2f&text=JavaScript%20%e5%bc%80%e5%8f%91%e8%80%85%e6%89%80%e9%9c%80%e8%a6%81%e7%9f%a5%e9%81%93%e7%9a%84%20V8%ef%bc%88%e4%b8%80%ef%bc%89%ef%bc%9aV8%20In%20NodeJS"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f41pgo3a2iyp%2f&title=JavaScript%20%e5%bc%80%e5%8f%91%e8%80%85%e6%89%80%e9%9c%80%e8%a6%81%e7%9f%a5%e9%81%93%e7%9a%84%20V8%ef%bc%88%e4%b8%80%ef%bc%89%ef%bc%9aV8%20In%20NodeJS"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f41pgo3a2iyp%2f&is_video=false&description=JavaScript%20%e5%bc%80%e5%8f%91%e8%80%85%e6%89%80%e9%9c%80%e8%a6%81%e7%9f%a5%e9%81%93%e7%9a%84%20V8%ef%bc%88%e4%b8%80%ef%bc%89%ef%bc%9aV8%20In%20NodeJS"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=JavaScript%20%e5%bc%80%e5%8f%91%e8%80%85%e6%89%80%e9%9c%80%e8%a6%81%e7%9f%a5%e9%81%93%e7%9a%84%20V8%ef%bc%88%e4%b8%80%ef%bc%89%ef%bc%9aV8%20In%20NodeJS&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f41pgo3a2iyp%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f41pgo3a2iyp%2f&title=JavaScript%20%e5%bc%80%e5%8f%91%e8%80%85%e6%89%80%e9%9c%80%e8%a6%81%e7%9f%a5%e9%81%93%e7%9a%84%20V8%ef%bc%88%e4%b8%80%ef%bc%89%ef%bc%9aV8%20In%20NodeJS"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f41pgo3a2iyp%2f&title=JavaScript%20%e5%bc%80%e5%8f%91%e8%80%85%e6%89%80%e9%9c%80%e8%a6%81%e7%9f%a5%e9%81%93%e7%9a%84%20V8%ef%bc%88%e4%b8%80%ef%bc%89%ef%bc%9aV8%20In%20NodeJS"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f41pgo3a2iyp%2f&title=JavaScript%20%e5%bc%80%e5%8f%91%e8%80%85%e6%89%80%e9%9c%80%e8%a6%81%e7%9f%a5%e9%81%93%e7%9a%84%20V8%ef%bc%88%e4%b8%80%ef%bc%89%ef%bc%9aV8%20In%20NodeJS"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f41pgo3a2iyp%2f&title=JavaScript%20%e5%bc%80%e5%8f%91%e8%80%85%e6%89%80%e9%9c%80%e8%a6%81%e7%9f%a5%e9%81%93%e7%9a%84%20V8%ef%bc%88%e4%b8%80%ef%bc%89%ef%bc%9aV8%20In%20NodeJS"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">JavaScript 开发者所需要知道的 V8（一）：V8 In NodeJS</h1><div class="meta"><div class="postdate"><time datetime="2019-01-31" itemprop="datePublished">2019-01-31</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e\x3cp\x3e欢迎来我的博客阅读：\x3ca href=\x22http:\/\/huang-jerryc.com\/2016\/11\/08\/the-v8-what-javascripter-should-konw-of-v8-in-nodejs\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e「JavaScript 开发者所需要知道的 V8（一）：V8 In NodeJS」\x3c\/a\x3e\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch1 id=\x22articleHeader0\x22\x3eMotivation\x3c\/h1\x3e\n\x3cp\x3eJavaScript 是一款拥有「自动垃圾回收」功能的编程语言。\x3cbr\x3e市面上具有这样功能的语言，一般都是拥有相对应的虚拟机的，像 Java的JVM ，C#的CLR ，PHP的Zend。\x3cbr\x3e虚拟机一般实现了代码解析，内存的管理、布局、垃圾回收等功能。\x3cbr\x3e不像C\/C\x2b\x2b这种没有虚拟机的语言，它们需要手动管理内存。\x3cbr\x3eC\/C\x2b\x2b语言编译后的文件，是可以直接运行的。\x3c\/p\x3e\n\x3cp\x3e我认为学习一门开发语言，除了知道一些语法上的使用，各种API的调用以外。学习相应的虚拟机也是很有必要的。而 JavaScript 由于其特殊的历史原因，并不是只有 V8 一个引擎。但是目前 V8 它是业界最优秀的 JavaScript 引擎，也就成为了一个学习样本。\x3c\/p\x3e\n\x3cp\x3e如今的 JavaScript 不仅仅是用在浏览器端了，也因为 NodeJS 的关系得以在服务器端运行。和浏览器端不同的地方在于服务器端对资源的敏感性是很高的。当业务规模大了，并发量上来了，一些很细小的问题会放大。这时候一些小小的内存泄漏，都会酿造灾难。\x3c\/p\x3e\n\x3cp\x3e所以作为一个 JavaScript 开发者，搞清楚从敲入 \x3ccode\x3econsole.log(\x27hello   world\x27)\x3c\/code\x3e，直到后面交由CPU执行的中间过程是很重要的。\x3cbr\x3e这也对如何用 JavaScript 这门松散的语言编写出高质量的代码是具有指导作用的。\x3c\/p\x3e\n\x3cp\x3e想真正做到 JavaScript 全栈，路漫漫其修远兮。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader1\x22\x3eV8 概述\x3c\/h1\x3e\n\x3cp\x3eV8 作为一个 JavaScript 引擎，最初是服役于 Google Chrome 浏览器的。它随着 Chrome 的第一版发布而发布以及开源。现在它除了 Chrome 浏览器，已经有很多其他的使用者了。诸如 NodeJS、MongoDB、CouchDB 等。\x3c\/p\x3e\n\x3cp\x3eJavaScript 作为 Prototype-Based Language , 基于它使用 Prototype 继承的特征，V8 使用了直译的方式，即把 JavaScript 代码直接编译成机器码( Machine Code, 有些地方也叫 Native Code )，然后直接交由硬件执行。\x3cbr\x3e与传统的「编译-解析-执行」的流程不同，V8 处理 JavaScript，并没有二进制码或其他的中间码。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e 简单来说，V8主要工作就是：「把 JavaScript 直译成机器码，然后运行」\x3c\/strong\x3e\x3cbr\x3e但这中间，往往是一个复杂的过程，它需要处理很多的难题，诸如：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e编译优化\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e内存管理\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e垃圾回收\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e我写的这一系列文章，也是从这三个大点来出发，解读V8针对这些内容的处理。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader2\x22\x3eV8 In NodeJS\x3c\/h1\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3eNodeJS源码小览\x3c\/h2\x3e\n\x3cp\x3eNodeJS，是怎么引入V8的？\x3cbr\x3e我们关注\x3ca href=\x22https:\/\/github.com\/nodejs\/node\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eNode的源码\x3c\/a\x3e目录：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22.\n├── ...\n├── deps\n│\x26nbsp;\x26nbsp; ├── ...\n│\x26nbsp;\x26nbsp; ├── v8\n│\x26nbsp;\x26nbsp; ├── ...\n├── ...\n├── lib\n│\x26nbsp;\x26nbsp; ├── ...\n│\x26nbsp;\x26nbsp; ├── buffer.js\n│\x26nbsp;\x26nbsp; ├── child_process.js\n│\x26nbsp;\x26nbsp; ├── console.js\n│\x26nbsp;\x26nbsp; ├── ...\n├── node -\x3e out\/Release\/node\n├── ...\n├── out\n│\x26nbsp;\x26nbsp; ├── ...\n│\x26nbsp;\x26nbsp; ├── Release\n|         ├── node\n|         ├── node.d\n|         ├── obj\n|          \x26nbsp;\x26nbsp; └── gen\n|          \x26nbsp;\x26nbsp;     ├── ...\n|          \x26nbsp;\x26nbsp;     ├── node_natives.h\n|          \x26nbsp;\x26nbsp;     ├── ...\n│\x26nbsp;\x26nbsp; ├── ...\n├── src\n│\x26nbsp;\x26nbsp; ├── ...\n│\x26nbsp;\x26nbsp; ├── debug-agent.cc\n│\x26nbsp;\x26nbsp; ├── debug-agent.h\n│\x26nbsp;\x26nbsp; ├── env-inl.h\n│\x26nbsp;\x26nbsp; ├── env.cc\n│\x26nbsp;\x26nbsp; ├── ...\n├── \n...\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs clean\x22\x3e\x3ccode\x3e.\n├── ...\n├── deps\n│\x26nbsp;\x26nbsp; ├── ...\n│\x26nbsp;\x26nbsp; ├── v8\n│\x26nbsp;\x26nbsp; ├── ...\n├── ...\n├── lib\n│\x26nbsp;\x26nbsp; ├── ...\n│\x26nbsp;\x26nbsp; ├── buffer.js\n│\x26nbsp;\x26nbsp; ├── child_process.js\n│\x26nbsp;\x26nbsp; ├── console.js\n│\x26nbsp;\x26nbsp; ├── ...\n├── node -\x26gt; out\/Release\/node\n├── ...\n├── out\n│\x26nbsp;\x26nbsp; ├── ...\n│\x26nbsp;\x26nbsp; ├── Release\n|         ├── node\n|         ├── node.d\n|         ├── obj\n|          \x26nbsp;\x26nbsp; └── gen\n|          \x26nbsp;\x26nbsp;     ├── ...\n|          \x26nbsp;\x26nbsp;     ├── node_natives.h\n|          \x26nbsp;\x26nbsp;     ├── ...\n│\x26nbsp;\x26nbsp; ├── ...\n├── src\n│\x26nbsp;\x26nbsp; ├── ...\n│\x26nbsp;\x26nbsp; ├── debug-agent.cc\n│\x26nbsp;\x26nbsp; ├── debug-agent.h\n│\x26nbsp;\x26nbsp; ├── env-inl.h\n│\x26nbsp;\x26nbsp; ├── env.cc\n│\x26nbsp;\x26nbsp; ├── ...\n├── \n...\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e需要关注的几个目录和文件：\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e\x3ccode\x3e\/deps\/v8\x3c\/code\x3e\x3c\/strong\x3e：这里是V8源码所在文件夹，你会发现里面的目录结构跟\x3ca href=\x22https:\/\/github.com\/v8\/v8\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eV8源码\x3c\/a\x3e十分相似。NodeJS除了移植V8源码，还在增添了一些内容。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e\x3ccode\x3e\/src\x3c\/code\x3e\x3c\/strong\x3e：由C\/C\x2b\x2b编写的核心模块所在文件夹，由C\/C\x2b\x2b编写的这部分模块被称为「Builtin Module」\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e\x3ccode\x3e\/lib\x3c\/code\x3e\x3c\/strong\x3e：由JavaScript编写的核心模块所在文件夹，这部分被称为「Native Code」，在编译Node源码的时候，会采用V8附带的\x3ccode\x3ejs2c.py\x3c\/code\x3e工具，把所有内置的JavaScript代码转换成C\x2b\x2b里面的数组，生成\x3ccode\x3eout\/Release\/obj\/gen\/node_natives.h\x3c\/code\x3e文件。有些 Native Module 需要借助于 Builtin Module 实现背后的功能。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e\x3ccode\x3e\/out\x3c\/code\x3e\x3c\/strong\x3e：该目录是Node源码编译(命令行运行\x3ccode\x3emake\x3c\/code\x3e)后生成的目录，里面包含了Node的可执行文件。当在命令行中键入\x3ccode\x3enode xxx.js\x3c\/code\x3e，实际就是运行了\x3ccode\x3eout\/Release\/node\x3c\/code\x3e文件。\x3c\/p\x3e\n\x3cp\x3e来张图说明一下V8在Node运行时的整体过程。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVFzaR?w=511\x26amp;h=645\x22 src=\x22https:\/\/static.alili.tech\/img\/bVFzaR?w=511\x26amp;h=645\x22 alt=\x22v8 in nodejs.png\x22 title=\x22v8 in nodejs.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3eNode在启动的时候，就已经把 Native Module，Builtin Module 加载到内存里面了。后来的 JavaScript 代码，就需要通过 V8 进行动态编译解析运行。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e查看V8版本号\x3c\/h2\x3e\n\x3cp\x3eNodeJS的进步与V8息息相关，关注每个NodeJS版本所对应的V8版本，可以加强该版本新功能的理解和由来。\x3c\/p\x3e\n\x3cp\x3e在NodeJS中，通过\x3ccode\x3eprocess.versions\x3c\/code\x3e可以查看NodeJS依赖模块的版本号，V8就包含其中。\x3c\/p\x3e\n\x3cp\x3e例如，我运行的 \x3ccode\x3ev7.0.0\x3c\/code\x3e的NodeJS：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$ node\n\x3e process.versions\n{ http_parser: \x272.7.0\x27,\n  node: \x278.0.0-pre\x27,\n  v8: \x275.4.500.36\x27,\n  uv: \x271.10.0\x27,\n  zlib: \x271.2.8\x27,\n  ares: \x271.10.1-DEV\x27,\n  modules: \x2751\x27,\n  openssl: \x271.0.2j\x27,\n  icu: \x2758.1\x27,\n  unicode: \x279.0\x27,\n  cldr: \x2730.0.2\x27,\n  tz: \x272016g\x27 }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs vim\x22\x3e\x3ccode\x3e$ node\n\x26gt; process.versions\n{ http_parser: \x3cspan class=\x22hljs-string\x22\x3e\x272.7.0\x27\x3c\/span\x3e,\n  node: \x3cspan class=\x22hljs-string\x22\x3e\x278.0.0-pre\x27\x3c\/span\x3e,\n  v8: \x3cspan class=\x22hljs-string\x22\x3e\x275.4.500.36\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-keyword\x22\x3eu\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3ev:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x271.10.0\x27\x3c\/span\x3e,\n  zli\x3cspan class=\x22hljs-variable\x22\x3eb:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x271.2.8\x27\x3c\/span\x3e,\n  are\x3cspan class=\x22hljs-variable\x22\x3es:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x271.10.1-DEV\x27\x3c\/span\x3e,\n  module\x3cspan class=\x22hljs-variable\x22\x3es:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x2751\x27\x3c\/span\x3e,\n  openss\x3cspan class=\x22hljs-variable\x22\x3el:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x271.0.2j\x27\x3c\/span\x3e,\n  icu: \x3cspan class=\x22hljs-string\x22\x3e\x2758.1\x27\x3c\/span\x3e,\n  unicode: \x3cspan class=\x22hljs-string\x22\x3e\x279.0\x27\x3c\/span\x3e,\n  cldr: \x3cspan class=\x22hljs-string\x22\x3e\x2730.0.2\x27\x3c\/span\x3e,\n  tz: \x3cspan class=\x22hljs-string\x22\x3e\x272016g\x27\x3c\/span\x3e }\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch1 id=\x22articleHeader5\x22\x3eNodeJS与V8的缠绵\x3c\/h1\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e2008年9月，V8 的第一个版本随着 Chrome 的第一版本发布。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e2009年5月，NodeJS 的第一个版本由 Ryan Dahl 在 GitHub 上发布。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e2010年12月，\x3ca href=\x22https:\/\/blog.chromium.org\/2010\/12\/new-crankshaft-for-v8.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e官方公布\x3c\/a\x3e V8 的名为 Crankshaft 的优化编译器，与原来的 Full Compiler 一起工作，声称较2008年版本提高50%性能。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e2014年12月， io.js 从久久不更新的 NodeJS 分出来支，并且引入最新的 V8 ，这时候 NodeJS 处于\x3ccode\x3e0.12.17\x3c\/code\x3e版本。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e2015年2月，NodeJS基金宣布NodeJS(\x3ccode\x3ev0.12\x3c\/code\x3e)和io.js(\x3ccode\x3ev3.3\x3c\/code\x3e)合并，合并版本在未来发布。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e2015年7月7日，\x3ca href=\x22https:\/\/blog.chromium.org\/2015\/07\/revving-up-javascript-performance-with.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e官方公布\x3c\/a\x3e又一个新的名为TurBoFan的优化编译器，主要提供ES6的新语法，以及提高性能。并表明该编译器最终目标是全部替代Crankshaft编译器\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e2015年7月17日，\x3ca href=\x22http:\/\/v8project.blogspot.com\/2015\/07\/v8-45-release.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e官方发布\x3c\/a\x3e集成TurboFan的V8版本(\x3ccode\x3ev4.5\x3c\/code\x3e)\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e2015年9月08日，NodeJS紧跟着\x3ca href=\x22https:\/\/nodejs.org\/en\/blog\/release\/v4.0.0\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e发布\x3c\/a\x3e了与io.js的合并版本(\x3ccode\x3eV4.0\x3c\/code\x3e)，引入最新的V8，给开发者们带来了最新的ES6语法，以及性能上的提高。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e2015年8月28日，V8\x3ca href=\x22http:\/\/v8project.blogspot.com\/2015\/08\/v8-release-46.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e发布\x3c\/a\x3e\x3ccode\x3ev4.6\x3c\/code\x3e版本\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e2015年10月29日，NodeJS\x3ca href=\x22https:\/\/nodejs.org\/en\/blog\/release\/v5.0.0\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e发布\x3c\/a\x3e\x3ccode\x3eV5.0.0\x3c\/code\x3e版本\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e2016年3月15日，V8\x3ca href=\x22http:\/\/v8project.blogspot.com\/2016\/03\/v8-release-50.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e发布\x3c\/a\x3e\x3ccode\x3ev5.0\x3c\/code\x3e版本\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e2016年4月26日，NodeJS\x3ca href=\x22https:\/\/nodejs.org\/en\/blog\/release\/v6.0.0\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e发布\x3c\/a\x3e\x3ccode\x3eV6.0.0\x3c\/code\x3e版本\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e2016年7月18日，V8\x3ca href=\x22http:\/\/v8project.blogspot.com\/2016\/07\/v8-release-53.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e发布\x3c\/a\x3e\x3ccode\x3ev5.3\x3c\/code\x3e版本，新增名为Ignition的解析器(Interpreter)，跟原有的优化编译器(Crankshaft and TurboFan)进行串联工作，提供了更加优化的内存使用方案，主要针对于低内存的Android设备，并称在未来会普及到全平台。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e2016年10月25日，NodeJS\x3ca href=\x22https:\/\/nodejs.org\/en\/blog\/release\/v7.0.0\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e发布\x3c\/a\x3e\x3ccode\x3ev7.0.0\x3c\/code\x3e版本\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e截止到今天(2016年11月)，NodeJS版本\x3ccode\x3ev7.0.0\x3c\/code\x3e，搭配了\x3ccode\x3ev5.4\x3c\/code\x3e的v8，而官方发布的最新v8版本是\x3ccode\x3ev5.5\x3c\/code\x3e。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e回顾整个历程，由于NodeJS是搭建在V8之上的，所以NodeJS很多「新增语言特性」和「提高性能」等更新都需要依赖V8的发布日程。\x3c\/p\x3e\n\x3cp\x3e就像NodeJS和io.js宣布合并，和真正发布\x3ccode\x3eV4.0\x3c\/code\x3e版本的中间，还隔了V8的生命历程一个重大的更新(发布 TurboFan 编译器，该编译器引入了大量的ES6语法支持。)。这个更新直接提供了相当一部分的ES6语法，以及性能上的提高。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader6\x22\x3e总结\x3c\/h1\x3e\n\x3cp\x3e本篇主要描述了下面几点：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e我的写作动机，理解NodeJS底层，给写出高质量JavaScript代码提供指导。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e简单描述V8的角色，以及主要职责：编译优化、内存管理、垃圾回收。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e通过NodeJS源码目录，以及NodeJS代码加载过程，来认识V8在这之中的位置。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e罗列NodeJS与V8的历代迭代版本以及联系，强调V8在NodeJS中的地位。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>JavaScript 开发者所需要知道的 V8（一）：V8 In NodeJS</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000007484357">https://segmentfault.com/a/1190000007484357</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/41pgo3a2iyp/" target="_blank">https://alili.tech/archive/41pgo3a2iyp/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>