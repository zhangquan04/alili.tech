<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="threejs 绘制地球、飞机、轨迹"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>threejs 绘制地球、飞机、轨迹 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/9aova4fq5hv/",
				"appid": "1613049289050283", 
				"title": "threejs 绘制地球、飞机、轨迹 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-26T02:30:18"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/3gqbtcgfb6k/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/hfszvrcjmqm/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f9aova4fq5hv%2f&text=threejs%20%e7%bb%98%e5%88%b6%e5%9c%b0%e7%90%83%e3%80%81%e9%a3%9e%e6%9c%ba%e3%80%81%e8%bd%a8%e8%bf%b9"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f9aova4fq5hv%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f9aova4fq5hv%2f&text=threejs%20%e7%bb%98%e5%88%b6%e5%9c%b0%e7%90%83%e3%80%81%e9%a3%9e%e6%9c%ba%e3%80%81%e8%bd%a8%e8%bf%b9"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f9aova4fq5hv%2f&title=threejs%20%e7%bb%98%e5%88%b6%e5%9c%b0%e7%90%83%e3%80%81%e9%a3%9e%e6%9c%ba%e3%80%81%e8%bd%a8%e8%bf%b9"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f9aova4fq5hv%2f&is_video=false&description=threejs%20%e7%bb%98%e5%88%b6%e5%9c%b0%e7%90%83%e3%80%81%e9%a3%9e%e6%9c%ba%e3%80%81%e8%bd%a8%e8%bf%b9"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=threejs%20%e7%bb%98%e5%88%b6%e5%9c%b0%e7%90%83%e3%80%81%e9%a3%9e%e6%9c%ba%e3%80%81%e8%bd%a8%e8%bf%b9&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f9aova4fq5hv%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f9aova4fq5hv%2f&title=threejs%20%e7%bb%98%e5%88%b6%e5%9c%b0%e7%90%83%e3%80%81%e9%a3%9e%e6%9c%ba%e3%80%81%e8%bd%a8%e8%bf%b9"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f9aova4fq5hv%2f&title=threejs%20%e7%bb%98%e5%88%b6%e5%9c%b0%e7%90%83%e3%80%81%e9%a3%9e%e6%9c%ba%e3%80%81%e8%bd%a8%e8%bf%b9"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f9aova4fq5hv%2f&title=threejs%20%e7%bb%98%e5%88%b6%e5%9c%b0%e7%90%83%e3%80%81%e9%a3%9e%e6%9c%ba%e3%80%81%e8%bd%a8%e8%bf%b9"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f9aova4fq5hv%2f&title=threejs%20%e7%bb%98%e5%88%b6%e5%9c%b0%e7%90%83%e3%80%81%e9%a3%9e%e6%9c%ba%e3%80%81%e8%bd%a8%e8%bf%b9"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">threejs 绘制地球、飞机、轨迹</h1><div class="meta"><div class="postdate"><time datetime="2019-01-26" itemprop="datePublished">2019-01-26</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3ethreejs官网：\x3ca href=\x22https:\/\/threejs.org\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e\x3c\/a\x3e\x3ca href=\x22https:\/\/threejs.org\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/threejs.org\/\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e首先我们来看下要实现的效果\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVJvcv?w=925\x26amp;h=683\x22 src=\x22https:\/\/static.alili.tech\/img\/bVJvcv?w=925\x26amp;h=683\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e这个缩小后的图片，下面我们来看下近距离的动态效果。。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVJvdM?w=580\x26amp;h=492\x22 src=\x22https:\/\/static.alili.tech\/img\/bVJvdM?w=580\x26amp;h=492\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e效果比较简陋，需要后期再处理。。。\x3c\/p\x3e\n\x3cp\x3e下面进入主题，代码篇。。\x3c\/p\x3e\n\x3cp\x3eHTML部分：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c!DOCTYPE html\x3e\n\x3chtml lang=\x26quot;en\x26quot;\x3e\n\x3chead\x3e\n    \x3cmeta charset=\x26quot;UTF-8\x26quot;\x3e\n    \x3ctitle\x3e全球航班\x3c\/title\x3e\n    \n    \x3cstyle\x3e\n        html{overflow: hidden;}\n        body { margin: 0;}\n    \x3c\/style\x3e\n\n    \x3cscript src=\x26quot;js\/jquery.min.js\x26quot;\x3e\x3c\/script\x3e\n\x3c\/head\x3e\n\x3cbody\x3e\n    \x3c!-- 地国 --\x3e\n    \x3cdiv id=\x26quot;zh_globe_container\x26quot;\x3e\x3c\/div\x3e \x3c!-- 容器 --\x3e\n    \n    \x3cscript src=\x26quot;js\/threejs\/Detector.js\x26quot;\x3e\x3c\/script\x3e \x3c!-- webGL浏览器支持检测 --\x3e\n    \x3cscript src=\x26quot;js\/threejs\/three.min.js\x26quot;\x3e\x3c\/script\x3e \x3c!-- 核心js --\x3e\n    \x3cscript src=\x26quot;js\/threejs\/stats.min.js\x26quot;\x3e\x3c\/script\x3e \x3c!-- 性能测试 --\x3e\n    \x3cscript src=\x26quot;js\/threejs\/OrbitControls.js\x26quot;\x3e\x3c\/script\x3e \x3c!-- 地球控制 --\x3e\n    \x3cscript src=\x26quot;js\/socketio-1.4.5.js\x26quot;\x3e\x3c\/script\x3e \x3c!-- socket --\x3e\n\n    \x3cscript src=\x26quot;js\/globe.js\x26quot;\x3e\x3c\/script\x3e \x3c!--  --\x3e\n\x3c\/body\x3e\n\x3c\/html\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x26lt;!DOCTYPE html\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3elang\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22en\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3emeta\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3echarset\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22UTF-8\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etitle\x3c\/span\x3e\x26gt;\x3c\/span\x3e全球航班\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etitle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22css\x22\x3e\n        \x3cspan class=\x22hljs-selector-tag\x22\x3ehtml\x3c\/span\x3e{\x3cspan class=\x22hljs-attribute\x22\x3eoverflow\x3c\/span\x3e: hidden;}\n        \x3cspan class=\x22hljs-selector-tag\x22\x3ebody\x3c\/span\x3e { \x3cspan class=\x22hljs-attribute\x22\x3emargin\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;}\n    \x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22js\/jquery.min.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- 地国 --\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22zh_globe_container\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- 容器 --\x26gt;\x3c\/span\x3e\n    \n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22js\/threejs\/Detector.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- webGL浏览器支持检测 --\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22js\/threejs\/three.min.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- 核心js --\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22js\/threejs\/stats.min.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- 性能测试 --\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22js\/threejs\/OrbitControls.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- 地球控制 --\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22js\/socketio-1.4.5.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- socket --\x26gt;\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22js\/globe.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!--  --\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eJS部分(globe.js)\x3c\/p\x3e\n\x3cp\x3e1、实现地球\x3cbr\x3e地球贴图(可以在网上下载)\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVJvfe?w=2048\x26amp;h=1024\x22 src=\x22https:\/\/static.alili.tech\/img\/bVJvfe?w=2048\x26amp;h=1024\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 地球\nfunction globe() {\n    var globeTextureLoader = new THREE.TextureLoader();\n    globeTextureLoader.load(\x27images\/textures\/earth.jpg\x27, function (texture) {\n        var globeGgeometry = new THREE.SphereGeometry(200, 100, 100);\n        var globeMaterial = new THREE.MeshStandardMaterial({map: texture});\n        var globeMesh = new THREE.Mesh(globeGgeometry, globeMaterial);\n        group.add(globeMesh);\n        group.rotation.x = THREE.Math.degToRad(35);\n        group.rotation.y = THREE.Math.degToRad(170);\n    });\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs haxe\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 地球\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eglobe\x3c\/span\x3e\x3c\/span\x3e() {\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e globeTextureLoader = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eTHREE\x3c\/span\x3e.TextureLoader();\n    globeTextureLoader.load(\x3cspan class=\x22hljs-string\x22\x3e\x27images\/textures\/earth.jpg\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3c\/span\x3e(texture) {\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e globeGgeometry = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eTHREE\x3c\/span\x3e.SphereGeometry(\x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e globeMaterial = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eTHREE\x3c\/span\x3e.MeshStandardMaterial({map: \x3cspan class=\x22hljs-type\x22\x3etexture\x3c\/span\x3e});\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e globeMesh = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eTHREE\x3c\/span\x3e.Mesh(globeGgeometry, globeMaterial);\n        group.add(globeMesh);\n        group.rotation.x = THREE.Math.degToRad(\x3cspan class=\x22hljs-number\x22\x3e35\x3c\/span\x3e);\n        group.rotation.y = THREE.Math.degToRad(\x3cspan class=\x22hljs-number\x22\x3e170\x3c\/span\x3e);\n    });\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e2、添加球面光源(这里使用的是半球光)\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 光\nfunction lights() {\n    var hemisphereLight = new THREE.HemisphereLight(0xffffff, 0x333333, 2);\n    hemisphereLight.position.x = 0;\n    hemisphereLight.position.y = 0;\n    hemisphereLight.position.z = -200;\n    group.add(hemisphereLight);\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 光\x3c\/span\x3e\nfunction lights() {\n    var hemisphereLight = new THREE.HemisphereLight(\x3cspan class=\x22hljs-number\x22\x3e0xffffff\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0x333333\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e);\n    hemisphereLight.position.x = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n    hemisphereLight.position.y = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n    hemisphereLight.position.z = \x3cspan class=\x22hljs-number\x22\x3e-200\x3c\/span\x3e;\n    group.add(hemisphereLight);\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e3、添加星点\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 星点\nfunction stars() {\n    var starsGeometry = new THREE.Geometry();\n    for (var i = 0; i \x3c 2000; i \x2b\x2b) {\n        var starVector = new THREE.Vector3(\n            THREE.Math.randFloatSpread(2000),\n            THREE.Math.randFloatSpread(2000),\n            THREE.Math.randFloatSpread(2000)\n        );\n        starsGeometry.vertices.push(starVector);\n    }\n    var starsMaterial = new THREE.PointsMaterial({color: 0x888888})\n    var starsPoint = new THREE.Points(starsGeometry, starsMaterial);\n    group.add(starsPoint);\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs haxe\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 星点\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3estars\x3c\/span\x3e\x3c\/span\x3e() {\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e starsGeometry = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eTHREE\x3c\/span\x3e.Geometry();\n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; \x3cspan class=\x22hljs-number\x22\x3e2000\x3c\/span\x3e; i \x2b\x2b) {\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e starVector = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eTHREE\x3c\/span\x3e.Vector3(\n            THREE.Math.randFloatSpread(\x3cspan class=\x22hljs-number\x22\x3e2000\x3c\/span\x3e),\n            THREE.Math.randFloatSpread(\x3cspan class=\x22hljs-number\x22\x3e2000\x3c\/span\x3e),\n            THREE.Math.randFloatSpread(\x3cspan class=\x22hljs-number\x22\x3e2000\x3c\/span\x3e)\n        );\n        starsGeometry.vertices.push(starVector);\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e starsMaterial = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eTHREE\x3c\/span\x3e.PointsMaterial({color: \x3cspan class=\x22hljs-type\x22\x3e0x888888\x3c\/span\x3e})\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e starsPoint = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eTHREE\x3c\/span\x3e.Points(starsGeometry, starsMaterial);\n    group.add(starsPoint);\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e4、添加飞机\x3c\/p\x3e\n\x3cp\x3e这里需要我们把 经纬度坐标 转成 xyz 坐标\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 获取position\nfunction getPosition(lng, lat, alt) {\n    var phi = (90-lat)*(Math.PI\/180),\n        theta = (lng\x2b180)*(Math.PI\/180),\n        radius = alt\x2b200,\n        x = -(radius * Math.sin(phi) * Math.cos(theta)),\n        z = (radius * Math.sin(phi) * Math.sin(theta)),\n        y = (radius * Math.cos(phi));\n    return {x: x, y: y, z: z};\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 获取position\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3egetPosition\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3elng, lat, alt\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e phi = (\x3cspan class=\x22hljs-number\x22\x3e90\x3c\/span\x3e-lat)*(\x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.PI\/\x3cspan class=\x22hljs-number\x22\x3e180\x3c\/span\x3e),\n        theta = (lng\x2b\x3cspan class=\x22hljs-number\x22\x3e180\x3c\/span\x3e)*(\x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.PI\/\x3cspan class=\x22hljs-number\x22\x3e180\x3c\/span\x3e),\n        radius = alt\x2b\x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e,\n        x = -(radius * \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.sin(phi) * \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.cos(theta)),\n        z = (radius * \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.sin(phi) * \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.sin(theta)),\n        y = (radius * \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.cos(phi));\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\x3cspan class=\x22hljs-attr\x22\x3ex\x3c\/span\x3e: x, \x3cspan class=\x22hljs-attr\x22\x3ey\x3c\/span\x3e: y, \x3cspan class=\x22hljs-attr\x22\x3ez\x3c\/span\x3e: z};\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e画飞机\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 飞机形状(不想画的，可以下载个 飞机模型 使用加载器加载进来)\nvar planeShape = new THREE.Shape();\nplaneShape.moveTo( 0, 0);\nplaneShape.lineTo(0.2, -0.2);\nplaneShape.lineTo(0.2, -1.3);\nplaneShape.lineTo(1.6,-2.7);\nplaneShape.lineTo(1.6,-3);\nplaneShape.lineTo(0.2, -2.1);\nplaneShape.lineTo(0.2, -3);\nplaneShape.lineTo(0.5, -3.4);\nplaneShape.lineTo(0.5, -3.7);\nplaneShape.lineTo(0, -3.3);\nplaneShape.lineTo(-0.5, -3.7);\nplaneShape.lineTo(-0.5, -3.4);\nplaneShape.lineTo(-0.2, -3);\nplaneShape.lineTo(-0.2, -2.1);\nplaneShape.lineTo(-1.6,-3);\nplaneShape.lineTo(-1.6,-2.7);\nplaneShape.lineTo(-0.2, -1.3);\nplaneShape.lineTo(-0.2, -0.2);\nvar planeGeometry = new THREE.ShapeGeometry(planeShape);\n\/\/ 飞机材质\nvar planeMaterial = new THREE.MeshPhongMaterial({color: 0x0FB4DD, side: THREE.DoubleSide, depthTest: true});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs pony\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 飞机形状(不想画的，可以下载个 飞机模型 使用加载器加载进来)\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e planeShape = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eTHREE\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eShape\x3c\/span\x3e();\n\x3cspan class=\x22hljs-title\x22\x3eplaneShape\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3emoveTo\x3c\/span\x3e( \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e);\n\x3cspan class=\x22hljs-title\x22\x3eplaneShape\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3elineTo\x3c\/span\x3e(\x3cspan class=\x22hljs-number\x22\x3e0.2\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e-0.2\x3c\/span\x3e);\n\x3cspan class=\x22hljs-title\x22\x3eplaneShape\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3elineTo\x3c\/span\x3e(\x3cspan class=\x22hljs-number\x22\x3e0.2\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e-1.3\x3c\/span\x3e);\n\x3cspan class=\x22hljs-title\x22\x3eplaneShape\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3elineTo\x3c\/span\x3e(\x3cspan class=\x22hljs-number\x22\x3e1.6\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e-2.7\x3c\/span\x3e);\n\x3cspan class=\x22hljs-title\x22\x3eplaneShape\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3elineTo\x3c\/span\x3e(\x3cspan class=\x22hljs-number\x22\x3e1.6\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e-3\x3c\/span\x3e);\n\x3cspan class=\x22hljs-title\x22\x3eplaneShape\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3elineTo\x3c\/span\x3e(\x3cspan class=\x22hljs-number\x22\x3e0.2\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e-2.1\x3c\/span\x3e);\n\x3cspan class=\x22hljs-title\x22\x3eplaneShape\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3elineTo\x3c\/span\x3e(\x3cspan class=\x22hljs-number\x22\x3e0.2\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e-3\x3c\/span\x3e);\n\x3cspan class=\x22hljs-title\x22\x3eplaneShape\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3elineTo\x3c\/span\x3e(\x3cspan class=\x22hljs-number\x22\x3e0.5\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e-3.4\x3c\/span\x3e);\n\x3cspan class=\x22hljs-title\x22\x3eplaneShape\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3elineTo\x3c\/span\x3e(\x3cspan class=\x22hljs-number\x22\x3e0.5\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e-3.7\x3c\/span\x3e);\n\x3cspan class=\x22hljs-title\x22\x3eplaneShape\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3elineTo\x3c\/span\x3e(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e-3.3\x3c\/span\x3e);\n\x3cspan class=\x22hljs-title\x22\x3eplaneShape\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3elineTo\x3c\/span\x3e(\x3cspan class=\x22hljs-number\x22\x3e-0.5\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e-3.7\x3c\/span\x3e);\n\x3cspan class=\x22hljs-title\x22\x3eplaneShape\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3elineTo\x3c\/span\x3e(\x3cspan class=\x22hljs-number\x22\x3e-0.5\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e-3.4\x3c\/span\x3e);\n\x3cspan class=\x22hljs-title\x22\x3eplaneShape\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3elineTo\x3c\/span\x3e(\x3cspan class=\x22hljs-number\x22\x3e-0.2\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e-3\x3c\/span\x3e);\n\x3cspan class=\x22hljs-title\x22\x3eplaneShape\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3elineTo\x3c\/span\x3e(\x3cspan class=\x22hljs-number\x22\x3e-0.2\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e-2.1\x3c\/span\x3e);\n\x3cspan class=\x22hljs-title\x22\x3eplaneShape\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3elineTo\x3c\/span\x3e(\x3cspan class=\x22hljs-number\x22\x3e-1.6\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e-3\x3c\/span\x3e);\n\x3cspan class=\x22hljs-title\x22\x3eplaneShape\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3elineTo\x3c\/span\x3e(\x3cspan class=\x22hljs-number\x22\x3e-1.6\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e-2.7\x3c\/span\x3e);\n\x3cspan class=\x22hljs-title\x22\x3eplaneShape\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3elineTo\x3c\/span\x3e(\x3cspan class=\x22hljs-number\x22\x3e-0.2\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e-1.3\x3c\/span\x3e);\n\x3cspan class=\x22hljs-title\x22\x3eplaneShape\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3elineTo\x3c\/span\x3e(\x3cspan class=\x22hljs-number\x22\x3e-0.2\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e-0.2\x3c\/span\x3e);\n\x3cspan class=\x22hljs-title\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eplaneGeometry\x3c\/span\x3e = \x3cspan class=\x22hljs-title\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eTHREE\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eShapeGeometry\x3c\/span\x3e(planeShape);\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 飞机材质\x3c\/span\x3e\n\x3cspan class=\x22hljs-title\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eplaneMaterial\x3c\/span\x3e = \x3cspan class=\x22hljs-title\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eTHREE\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eMeshPhongMaterial\x3c\/span\x3e({color: \x3cspan class=\x22hljs-number\x22\x3e0x0FB4DD\x3c\/span\x3e, side: \x3cspan class=\x22hljs-type\x22\x3eTHREE\x3c\/span\x3e.\x3cspan class=\x22hljs-type\x22\x3eDoubleSide\x3c\/span\x3e, depthTest: true});\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3edepthTest作用是能否透过球体看到飞机，如果是false则旋转到球体另一面也能看到飞机\x3c\/p\x3e\n\x3cp\x3e添加飞机\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 添加飞机\nfunction addPlane(item) {\n    if(item.anum \x26amp;\x26amp; item.lng \x26amp;\x26amp; item.lat) {\n        var plane = new THREE.Mesh(planeGeometry, planeMaterial);\n        \/\/ 旋转\n        plane.rotation.z = THREE.Math.degToRad(item.ang);\n        \/\/ 定位\n        var position = getPosition(item.lng, item.lat, 5);\n        plane.position.set(position.x, position.y, position.z);\n        \/\/ 显示\/隐藏\n        \/\/ plane.visible = false;\n        \/\/ 保存\n        planeMarkers[item.anum] = plane;\n        \/\/ 添加到场景\n        group.add(plane);\n        \/\/ 绘制历史轨迹\n        drawHistoryTrack(item.anum);\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs pony\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 添加飞机\x3c\/span\x3e\nfunction addPlane(item) {\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(item.anum \x26amp;\x26amp; item.lng \x26amp;\x26amp; item.lat) {\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e plane = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eTHREE\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eMesh\x3c\/span\x3e(planeGeometry, planeMaterial);\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 旋转\x3c\/span\x3e\n        \x3cspan class=\x22hljs-title\x22\x3eplane\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3erotation\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3ez\x3c\/span\x3e = \x3cspan class=\x22hljs-title\x22\x3eTHREE\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eMath\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3edegToRad\x3c\/span\x3e(item.ang);\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 定位\x3c\/span\x3e\n        \x3cspan class=\x22hljs-title\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eposition\x3c\/span\x3e = \x3cspan class=\x22hljs-title\x22\x3egetPosition\x3c\/span\x3e(item.lng, item.lat, \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-title\x22\x3eplane\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eposition\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eset\x3c\/span\x3e(position.x, position.y, position.z);\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 显示\/隐藏\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ plane.visible = false;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 保存\x3c\/span\x3e\n        \x3cspan class=\x22hljs-title\x22\x3eplaneMarkers\x3c\/span\x3e[\x3cspan class=\x22hljs-title\x22\x3eitem\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eanum\x3c\/span\x3e] = \x3cspan class=\x22hljs-title\x22\x3eplane\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 添加到场景\x3c\/span\x3e\n        \x3cspan class=\x22hljs-title\x22\x3egroup\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eadd\x3c\/span\x3e(plane);\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 绘制历史轨迹\x3c\/span\x3e\n        \x3cspan class=\x22hljs-title\x22\x3edrawHistoryTrack\x3c\/span\x3e(item.anum);\n    }\n}\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e绘制轨迹(使用socket来获取的飞行轨迹经纬度坐标点)\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 时间段\nvar curTime = Date.parse(new Date())\/1000;\nvar depTime = curTime - 30*60;\n\/\/ 轨迹线质\nvar trackMaterial = new THREE.LineBasicMaterial({color : 0x1B94B1});\n\/\/ 绘制历史轨迹\nfunction drawHistoryTrack(anum) {\n    socket.emit(\x26quot;fullPath\x26quot;, anum, depTime, curTime, function(status, data){\n        if(status) {\n            var dLength = data.length;\n            if(dLength\x3e=2) {\n                var trackCoordArr = [];\n                for(var i=0; i\x3cdLength; i\x2b\x2b) {\n                    if(data[i].lng \x26amp;\x26amp; data[i].alt) {\n                        trackCoordArr.push({lng: data[i].lng, lat: data[i].lat});\n                    }\n                }\n\n                var tcaLength = trackCoordArr.length;\n                if(tcaLength\x3e=2) {\n                    var tcaHalfLength = Math.ceil(tcaLength\/2),\n                        vertexArr = [];\n\n                    \/\/ 这里只取了三个点(起点、中点、终点)\n                    var p1 = getPosition(trackCoordArr[0].lng, trackCoordArr[0].lat, 0),\n                        p2 = getPosition(trackCoordArr[tcaHalfLength].lng, trackCoordArr[tcaHalfLength].lat, tcaLength*0.01),\n                        p3 = getPosition(trackCoordArr[tcaLength-1].lng, trackCoordArr[tcaLength-1].lat, 0);\n\n                    var trackCurve = new THREE.CatmullRomCurve3([\n                        new THREE.Vector3(p1.x, p1.y, p1.z),\n                        new THREE.Vector3(p2.x, p2.y, p2.z),\n                        new THREE.Vector3(p3.x, p3.y, p3.z)\n                    ]);\n\n                    var trackGeometry = new THREE.Geometry(),\n                        verticesArr = trackCurve.getPoints(tcaLength);\n\n                    trackGeometry.vertices = verticesArr;\n                    \n                    var trackLine = new THREE.Line(trackGeometry, trackMaterial);\n                    group.add(trackLine);\n\n                    \/\/ 动画点\n                    addLightPoint(p1, tcaLength, verticesArr);\n                }\n            }\n        }\n    });\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs haxe\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 时间段\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e curTime = Date.parse(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eDate\x3c\/span\x3e())\/\x3cspan class=\x22hljs-number\x22\x3e1000\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e depTime = curTime - \x3cspan class=\x22hljs-number\x22\x3e30\x3c\/span\x3e*\x3cspan class=\x22hljs-number\x22\x3e60\x3c\/span\x3e;\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 轨迹线质\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e trackMaterial = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eTHREE\x3c\/span\x3e.LineBasicMaterial({color : \x3cspan class=\x22hljs-type\x22\x3e0x1B94B1\x3c\/span\x3e});\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 绘制历史轨迹\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edrawHistoryTrack\x3c\/span\x3e\x3c\/span\x3e(anum) {\n    socket.emit(\x3cspan class=\x22hljs-string\x22\x3e\x22fullPath\x22\x3c\/span\x3e, anum, depTime, curTime, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3c\/span\x3e(status, data){\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(status) {\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e dLength = data.length;\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(dLength\x26gt;=\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e) {\n                \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e trackCoordArr = [];\n                \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i=\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i\x26lt;dLength; i\x2b\x2b) {\n                    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(data[i].lng \x26amp;\x26amp; data[i].alt) {\n                        trackCoordArr.push({lng: \x3cspan class=\x22hljs-type\x22\x3edata\x3c\/span\x3e[i].lng, lat: \x3cspan class=\x22hljs-type\x22\x3edata\x3c\/span\x3e[i].lat});\n                    }\n                }\n\n                \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e tcaLength = trackCoordArr.length;\n                \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(tcaLength\x26gt;=\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e) {\n                    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e tcaHalfLength = Math.ceil(tcaLength\/\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e),\n                        vertexArr = [];\n\n                    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 这里只取了三个点(起点、中点、终点)\x3c\/span\x3e\n                    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e p1 = getPosition(trackCoordArr[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].lng, trackCoordArr[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].lat, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e),\n                        p2 = getPosition(trackCoordArr[tcaHalfLength].lng, trackCoordArr[tcaHalfLength].lat, tcaLength*\x3cspan class=\x22hljs-number\x22\x3e0.01\x3c\/span\x3e),\n                        p3 = getPosition(trackCoordArr[tcaLength\x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e].lng, trackCoordArr[tcaLength\x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e].lat, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e);\n\n                    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e trackCurve = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eTHREE\x3c\/span\x3e.CatmullRomCurve3([\n                        \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eTHREE\x3c\/span\x3e.Vector3(p1.x, p1.y, p1.z),\n                        \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eTHREE\x3c\/span\x3e.Vector3(p2.x, p2.y, p2.z),\n                        \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eTHREE\x3c\/span\x3e.Vector3(p3.x, p3.y, p3.z)\n                    ]);\n\n                    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e trackGeometry = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eTHREE\x3c\/span\x3e.Geometry(),\n                        verticesArr = trackCurve.getPoints(tcaLength);\n\n                    trackGeometry.vertices = verticesArr;\n                    \n                    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e trackLine = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eTHREE\x3c\/span\x3e.Line(trackGeometry, trackMaterial);\n                    group.add(trackLine);\n\n                    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 动画点\x3c\/span\x3e\n                    addLightPoint(p1, tcaLength, verticesArr);\n                }\n            }\n        }\n    });\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e如果要绘制所有点，且头尾是在球面上的曲线，则需要两次循环\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var tcaRemainLength = tcaLength-tcaHalfLength\nfor(var j=0; j\x3ctcaHalfLength; j\x2b\x2b) { \/\/ 前一半\n    var p1 = getPosition(trackCoordArr[j].lng, trackCoordArr[j].lat, j*0.05);\n    vertexArr.push(new THREE.Vector3(p1.x, p1.y, p1.z));    \n}\nfor(var k=tcaRemainLength; k\x3e0; k--) { \/\/ 后一半\n    var p2 = getPosition(trackCoordArr[tcaLength-k].lng, trackCoordArr[tcaLength-k].lat, k*0.05);\n    vertexArr.push(new THREE.Vector3(p2.x, p2.y, p2.z));    \n}\n\nvar trackCurve = new THREE.CatmullRomCurve3(vertexArr);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs haxe\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e tcaRemainLength = tcaLength-tcaHalfLength\n\x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e j=\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; j\x26lt;tcaHalfLength; j\x2b\x2b) { \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 前一半\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e p1 = getPosition(trackCoordArr[j].lng, trackCoordArr[j].lat, j*\x3cspan class=\x22hljs-number\x22\x3e0.05\x3c\/span\x3e);\n    vertexArr.push(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eTHREE\x3c\/span\x3e.Vector3(p1.x, p1.y, p1.z));    \n}\n\x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e k=tcaRemainLength; k\x26gt;\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; k--) { \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 后一半\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e p2 = getPosition(trackCoordArr[tcaLength-k].lng, trackCoordArr[tcaLength-k].lat, k*\x3cspan class=\x22hljs-number\x22\x3e0.05\x3c\/span\x3e);\n    vertexArr.push(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eTHREE\x3c\/span\x3e.Vector3(p2.x, p2.y, p2.z));    \n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e trackCurve = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eTHREE\x3c\/span\x3e.CatmullRomCurve3(vertexArr);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这个部分看看就行了。。\x3c\/p\x3e\n\x3cp\x3e光点动画\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 点动画\nvar pointGeometry = new THREE.SphereGeometry(0.2, 20, 20);\nvar pointMaterial = new THREE.MeshBasicMaterial({color: 0x40E0D0});\nfunction addLightPoint(pos, coordsNum ,verArr) {    \n    var pointMesh = new THREE.Mesh(pointGeometry, pointMaterial);\n    pointMesh.position.set(pos.x, pos.y, pos.z);\n    group.add(pointMesh);\n\n    var index = 0;\n    function pointAnimate() {\n        index\x2b\x2b;\n        if(index\x3ecoordsNum) {\n            index = 0;\n        }\n        pointMesh.position.set(verArr[index].x, verArr[index].y, verArr[index].z);\n        requestAnimationFrame(pointAnimate);\n    }\n    pointAnimate();\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs haxe\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 点动画\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e pointGeometry = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eTHREE\x3c\/span\x3e.SphereGeometry(\x3cspan class=\x22hljs-number\x22\x3e0.2\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e pointMaterial = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eTHREE\x3c\/span\x3e.MeshBasicMaterial({color: \x3cspan class=\x22hljs-type\x22\x3e0x40E0D0\x3c\/span\x3e});\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eaddLightPoint\x3c\/span\x3e\x3c\/span\x3e(pos, coordsNum ,verArr) {    \n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e pointMesh = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eTHREE\x3c\/span\x3e.Mesh(pointGeometry, pointMaterial);\n    pointMesh.position.\x3cspan class=\x22hljs-keyword\x22\x3eset\x3c\/span\x3e(pos.x, pos.y, pos.z);\n    group.add(pointMesh);\n\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e index = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3epointAnimate\x3c\/span\x3e\x3c\/span\x3e() {\n        index\x2b\x2b;\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(index\x26gt;coordsNum) {\n            index = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n        }\n        pointMesh.position.\x3cspan class=\x22hljs-keyword\x22\x3eset\x3c\/span\x3e(verArr[index].x, verArr[index].y, verArr[index].z);\n        requestAnimationFrame(pointAnimate);\n    }\n    pointAnimate();\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这个点使用的是sphere，，当然也可以用顶点来实现，如下\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var geometry = new THREE.Geometry();\ngeometry.vertices.push(new THREE.Vector3(0, 0, 0))\ngeometry.colors.push(new THREE.Color(0xffffff));\n\nvar material = new THREE.PointsMaterial({size: 1, vertexColors: THREE.VertexColors, opacity: 0.75, sizeAttenuation: true, transparent: true});\nvar point = new THREE.Points(geometry, material);\npoint.position.set(x, y, z);\ngroup.add(point);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs maxima\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e geometry = \x3cspan class=\x22hljs-built_in\x22\x3enew\x3c\/span\x3e THREE.Geometry();\ngeometry.\x3cspan class=\x22hljs-built_in\x22\x3evertices\x3c\/span\x3e.\x3cspan class=\x22hljs-built_in\x22\x3epush\x3c\/span\x3e(\x3cspan class=\x22hljs-built_in\x22\x3enew\x3c\/span\x3e THREE.Vector3(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e))\ngeometry.colors.\x3cspan class=\x22hljs-built_in\x22\x3epush\x3c\/span\x3e(\x3cspan class=\x22hljs-built_in\x22\x3enew\x3c\/span\x3e THREE.Color(\x3cspan class=\x22hljs-number\x22\x3e0xffffff\x3c\/span\x3e));\n\n\x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e material = \x3cspan class=\x22hljs-built_in\x22\x3enew\x3c\/span\x3e THREE.PointsMaterial({size: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, vertexColors: THREE.VertexColors, \x3cspan class=\x22hljs-built_in\x22\x3eopacity\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0.75\x3c\/span\x3e, sizeAttenuation: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3etransparent\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e});\n\x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e point = \x3cspan class=\x22hljs-built_in\x22\x3enew\x3c\/span\x3e THREE.Points(geometry, material);\npoint.\x3cspan class=\x22hljs-built_in\x22\x3eposition\x3c\/span\x3e.set(x, y, z);\ngroup.add(point);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e另外不想用光点动画的话，也可以用线动画，实现原理是不断更新顶点坐标，如下\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var curveGeometry = new THREE.Geometry(); \nvar curveData = new THREE.CatmullRomCurve3(verArr.slice(0, 10));  \ncurveGeometry.vertices = curveData.getPoints(10);\n\nvar curveMaterial = new THREE.LineBasicMaterial({color: 0x40E0D0});\nvar curveLine = new THREE.Line(curveGeometry, curveMaterial);\ngroup.add(curveLine);\n\nvar index = 0;\nfunction lineAnimate() {\n    index\x2b\x2b;\n    if(index\x3ecoordsNum-10) {\n        index = 0;\n    }\n    var offsetData = verArr.slice(index, 10\x2bindex);\n    if(offsetData.length \x3e 0) {\n        curveData = new THREE.CatmullRomCurve3(offsetData);  \n           curveLine.geometry.vertices = curveData.getPoints(10);\n        curveLine.geometry.verticesNeedUpdate = true;\n    }\n    requestAnimationFrame(lineAnimate);\n}\nlineAnimate();\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs haxe\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e curveGeometry = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eTHREE\x3c\/span\x3e.Geometry(); \n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e curveData = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eTHREE\x3c\/span\x3e.CatmullRomCurve3(verArr.slice(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e));  \ncurveGeometry.vertices = curveData.getPoints(\x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e curveMaterial = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eTHREE\x3c\/span\x3e.LineBasicMaterial({color: \x3cspan class=\x22hljs-type\x22\x3e0x40E0D0\x3c\/span\x3e});\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e curveLine = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eTHREE\x3c\/span\x3e.Line(curveGeometry, curveMaterial);\ngroup.add(curveLine);\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e index = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3elineAnimate\x3c\/span\x3e\x3c\/span\x3e() {\n    index\x2b\x2b;\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(index\x26gt;coordsNum\x3cspan class=\x22hljs-number\x22\x3e-10\x3c\/span\x3e) {\n        index = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e offsetData = verArr.slice(index, \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e\x2bindex);\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(offsetData.length \x26gt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) {\n        curveData = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eTHREE\x3c\/span\x3e.CatmullRomCurve3(offsetData);  \n           curveLine.geometry.vertices = curveData.getPoints(\x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e);\n        curveLine.geometry.verticesNeedUpdate = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n    }\n    requestAnimationFrame(lineAnimate);\n}\nlineAnimate();\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e最后就是布置场景和事件了\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 初始化\nfunction init() {\n    container = document.getElementById(\x27zh_globe_container\x27);\n\n    scene = new THREE.Scene();\n    var bgTexture = new THREE.TextureLoader().load(\x26quot;images\/textures\/starfield.jpg\x26quot;);\n    scene.background = bgTexture;\n\n    camera = new THREE.PerspectiveCamera(50, winWth\/winHgt, 1, 2000);\n    camera.up.x = 0;\n    camera.up.y = 1;\n    camera.up.z = 0;\n    camera.position.x = 0;\n    camera.position.y = 0;\n    camera.position.z = 400;\n    camera.lookAt(0,0,0);\n\n    group = new THREE.Group();\n    scene.add(group);\n\n    \/\/ 地球    \n    globe();\n\n    \/\/ 飞机\n    plane();\n\n    \/\/ 星点\n    stars();\n\n    \/\/ 半球光\n    lights();\n\n    \/\/ 渲染器\n    renderer = new THREE.WebGLRenderer({antialias: true, preserveDrawingBuffer: true});\n    renderer.setPixelRatio(window.devicePixelRatio);\n    renderer.setSize(winWth, winHgt);\n    container.appendChild(renderer.domElement);\n\n    \/\/ 盘旋控制\n    var orbitControl = new THREE.OrbitControls(camera, renderer.domElement);\n    orbitControl.minDistrance = 20;\n    orbitControl.maxDistrance = 50;\n    orbitControl.maxPolarAngle = Math.PI\/2;\n\n    \/\/ 性能测试\n    stats = new Stats();\n    container.appendChild(stats.dom);\n\n    \/\/ resize事件\n    window.addEventListener(\x27resize\x27, onWindowResize, false);\n}\n\n\/\/ 窗口大小改变\nfunction onWindowResize() {\n    camera.aspect = window.innerWidth\/window.innerHeight;\n    camera.updateProjectionMatrix();\n    renderer.setSize(window.innerWidth, window.innerHeight);\n}\n\n\/\/ 渲染\nfunction render() {\n    group.rotation.y -= 0.0005;\n    renderer.render(scene, camera);\n}\n\n\/\/ 动画\nfunction animate() {\n    requestAnimationFrame(animate);\n    render();\n    stats.update();\n}\n\ninit();\nanimate();    \x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs mel\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 初始化\x3c\/span\x3e\nfunction init() {\n    \x3cspan class=\x22hljs-keyword\x22\x3econtainer\x3c\/span\x3e = document.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27zh_globe_container\x27\x3c\/span\x3e);\n\n    scene = new THREE.Scene();\n    var bgTexture = new THREE.TextureLoader().load(\x3cspan class=\x22hljs-string\x22\x3e\x22images\/textures\/starfield.jpg\x22\x3c\/span\x3e);\n    scene.background = bgTexture;\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ecamera\x3c\/span\x3e = new THREE.PerspectiveCamera(\x3cspan class=\x22hljs-number\x22\x3e50\x3c\/span\x3e, winWth\/winHgt, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e2000\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-keyword\x22\x3ecamera\x3c\/span\x3e.up.x = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ecamera\x3c\/span\x3e.up.y = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ecamera\x3c\/span\x3e.up.z = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ecamera\x3c\/span\x3e.position.x = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ecamera\x3c\/span\x3e.position.y = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ecamera\x3c\/span\x3e.position.z = \x3cspan class=\x22hljs-number\x22\x3e400\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ecamera\x3c\/span\x3e.lookAt(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e);\n\n    \x3cspan class=\x22hljs-keyword\x22\x3egroup\x3c\/span\x3e = new THREE.Group();\n    scene.add(\x3cspan class=\x22hljs-keyword\x22\x3egroup\x3c\/span\x3e);\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 地球    \x3c\/span\x3e\n    globe();\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 飞机\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eplane\x3c\/span\x3e();\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 星点\x3c\/span\x3e\n    stars();\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 半球光\x3c\/span\x3e\n    lights();\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 渲染器\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3erenderer\x3c\/span\x3e = new THREE.WebGLRenderer({antialias: true, preserveDrawingBuffer: true});\n    \x3cspan class=\x22hljs-keyword\x22\x3erenderer\x3c\/span\x3e.setPixelRatio(\x3cspan class=\x22hljs-keyword\x22\x3ewindow\x3c\/span\x3e.devicePixelRatio);\n    \x3cspan class=\x22hljs-keyword\x22\x3erenderer\x3c\/span\x3e.setSize(winWth, winHgt);\n    \x3cspan class=\x22hljs-keyword\x22\x3econtainer\x3c\/span\x3e.appendChild(\x3cspan class=\x22hljs-keyword\x22\x3erenderer\x3c\/span\x3e.domElement);\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 盘旋控制\x3c\/span\x3e\n    var orbitControl = new THREE.OrbitControls(\x3cspan class=\x22hljs-keyword\x22\x3ecamera\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3erenderer\x3c\/span\x3e.domElement);\n    orbitControl.minDistrance = \x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e;\n    orbitControl.maxDistrance = \x3cspan class=\x22hljs-number\x22\x3e50\x3c\/span\x3e;\n    orbitControl.maxPolarAngle = Math.PI\/\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 性能测试\x3c\/span\x3e\n    stats = new Stats();\n    \x3cspan class=\x22hljs-keyword\x22\x3econtainer\x3c\/span\x3e.appendChild(stats.dom);\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ resize事件\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ewindow\x3c\/span\x3e.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27resize\x27\x3c\/span\x3e, onWindowResize, false);\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 窗口大小改变\x3c\/span\x3e\nfunction onWindowResize() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ecamera\x3c\/span\x3e.aspect = \x3cspan class=\x22hljs-keyword\x22\x3ewindow\x3c\/span\x3e.innerWidth\/\x3cspan class=\x22hljs-keyword\x22\x3ewindow\x3c\/span\x3e.innerHeight;\n    \x3cspan class=\x22hljs-keyword\x22\x3ecamera\x3c\/span\x3e.updateProjectionMatrix();\n    \x3cspan class=\x22hljs-keyword\x22\x3erenderer\x3c\/span\x3e.setSize(\x3cspan class=\x22hljs-keyword\x22\x3ewindow\x3c\/span\x3e.innerWidth, \x3cspan class=\x22hljs-keyword\x22\x3ewindow\x3c\/span\x3e.innerHeight);\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 渲染\x3c\/span\x3e\nfunction \x3cspan class=\x22hljs-keyword\x22\x3erender\x3c\/span\x3e() {\n    \x3cspan class=\x22hljs-keyword\x22\x3egroup\x3c\/span\x3e.rotation.y -= \x3cspan class=\x22hljs-number\x22\x3e0.0005\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3erenderer\x3c\/span\x3e.\x3cspan class=\x22hljs-keyword\x22\x3erender\x3c\/span\x3e(scene, \x3cspan class=\x22hljs-keyword\x22\x3ecamera\x3c\/span\x3e);\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 动画\x3c\/span\x3e\nfunction animate() {\n    requestAnimationFrame(animate);\n    \x3cspan class=\x22hljs-keyword\x22\x3erender\x3c\/span\x3e();\n    stats.update();\n}\n\ninit();\nanimate();    \x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e完整代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var log = console.log.bind(console);\n\nvar globeObj = (function() {\n    \x27use strict\x27;\n\n    \/\/ 判断浏览器是否支持webgl\n    if(!Detector.webgl) Detector.addGetWebGLMessage();\n\n    var container, stats;\n    var camera, scene, renderer;\n    var group;\n    var mouseX = 0, mouseY = 0;\n    var winWth = window.innerWidth, winHgt = window.innerHeight;\n\n    \/\/ 获取position\n    function getPosition(lng, lat, alt) {\n        var phi = (90-lat)*(Math.PI\/180),\n            theta = (lng\x2b180)*(Math.PI\/180),\n            radius = alt\x2b200,\n            x = -(radius * Math.sin(phi) * Math.cos(theta)),\n            z = (radius * Math.sin(phi) * Math.sin(theta)),\n            y = (radius * Math.cos(phi));\n        return {x: x, y: y, z: z};\n    }\n\n    \/\/ 飞机\n    function plane() {\n        var socket = io(\x27https:\/\/loc.variflight.com\/*****此处接口地址不能给了\x27, {transports: [\x27websocket\x27]});\n\n        var clientBounds = [52.793056,72.427908,2.970897,135.181814];\n\n        \/\/ 连接\n        socket.on(\x27connect\x27, function() {\n            socket.emit(\x26quot;sub\x26quot;, clientBounds, -1, \x27\x27, function(){});\n        });\n\n        \/\/ 飞机标记\n        var planeMarkers = {};\n\n        \/\/ 飞机形状\n        var planeShape = new THREE.Shape();\n        planeShape.moveTo( 0, 0);\n        planeShape.lineTo(0.2, -0.2);\n        planeShape.lineTo(0.2, -1.3);\n        planeShape.lineTo(1.6,-2.7);\n        planeShape.lineTo(1.6,-3);\n        planeShape.lineTo(0.2, -2.1);\n        planeShape.lineTo(0.2, -3);\n        planeShape.lineTo(0.5, -3.4);\n        planeShape.lineTo(0.5, -3.7);\n        planeShape.lineTo(0, -3.3);\n        planeShape.lineTo(-0.5, -3.7);\n        planeShape.lineTo(-0.5, -3.4);\n        planeShape.lineTo(-0.2, -3);\n        planeShape.lineTo(-0.2, -2.1);\n        planeShape.lineTo(-1.6,-3);\n        planeShape.lineTo(-1.6,-2.7);\n        planeShape.lineTo(-0.2, -1.3);\n        planeShape.lineTo(-0.2, -0.2);\n        var planeGeometry = new THREE.ShapeGeometry(planeShape);\n        \/\/ 飞机材质\n        var planeMaterial = new THREE.MeshPhongMaterial({color: 0x0FB4DD, side: THREE.DoubleSide, depthTest: true});\n        \/\/ 添加飞机\n        function addPlane(item) {\n            if(item.anum \x26amp;\x26amp; item.lng \x26amp;\x26amp; item.lat) {\n                var plane = new THREE.Mesh(planeGeometry, planeMaterial);\n                \/\/ 旋转\n                plane.rotation.z = THREE.Math.degToRad(item.ang);\n                \/\/ 定位\n                var position = getPosition(item.lng, item.lat, 5);\n                plane.position.set(position.x, position.y, position.z);\n                \/\/ 显示\/隐藏\n                \/\/ plane.visible = false;\n                \/\/ 保存\n                planeMarkers[item.anum] = plane;\n                \/\/ 添加到场景\n                group.add(plane);\n                \/\/ 绘制历史轨迹\n                drawHistoryTrack(item.anum);\n            }\n        }\n\n        \/\/ 时间段\n        var curTime = Date.parse(new Date())\/1000;\n        var depTime = curTime - 30*60;\n        \/\/ 轨迹线质\n        var trackMaterial = new THREE.LineBasicMaterial({color : 0x1B94B1});\n        \/\/ 绘制历史轨迹\n        function drawHistoryTrack(anum) {\n            socket.emit(\x26quot;fullPath\x26quot;, anum, depTime, curTime, function(status, data){\n                if(status) {\n                    var dLength = data.length;\n                    if(dLength\x3e=2) {\n                        var trackCoordArr = [];\n                        for(var i=0; i\x3cdLength; i\x2b\x2b) {\n                            if(data[i].lng \x26amp;\x26amp; data[i].alt) {\n                                trackCoordArr.push({lng: data[i].lng, lat: data[i].lat});\n                            }\n                        }\n\n                        var tcaLength = trackCoordArr.length;\n                        if(tcaLength\x3e=2) {\n                            var tcaHalfLength = Math.ceil(tcaLength\/2),\n                                tcaRemainLength = tcaLength-tcaHalfLength,\n                                vertexArr = [];\n\n                            \/* 所有点\n                            for(var j=0; j\x3ctcaHalfLength; j\x2b\x2b) {\n                                var p1 = getPosition(trackCoordArr[j].lng, trackCoordArr[j].lat, j*0.05);\n                                vertexArr.push(new THREE.Vector3(p1.x, p1.y, p1.z));    \n                            }\n                            for(var k=tcaRemainLength; k\x3e0; k--) {\n                                var p2 = getPosition(trackCoordArr[tcaLength-k].lng, trackCoordArr[tcaLength-k].lat, k*0.05);\n                                vertexArr.push(new THREE.Vector3(p2.x, p2.y, p2.z));    \n                            }\n                            \n                            var trackCurve = new THREE.CatmullRomCurve3(vertexArr);\n                            *\/\n\n                            \/\/ 三个点\n                            var p1 = getPosition(trackCoordArr[0].lng, trackCoordArr[0].lat, 0),\n                                p2 = getPosition(trackCoordArr[tcaHalfLength].lng, trackCoordArr[tcaHalfLength].lat, tcaLength*0.01),\n                                p3 = getPosition(trackCoordArr[tcaLength-1].lng, trackCoordArr[tcaLength-1].lat, 0);\n\n                            var trackCurve = new THREE.CatmullRomCurve3([\n                                new THREE.Vector3(p1.x, p1.y, p1.z),\n                                new THREE.Vector3(p2.x, p2.y, p2.z),\n                                new THREE.Vector3(p3.x, p3.y, p3.z)\n                            ]);\n\n                            var trackGeometry = new THREE.Geometry(),\n                                verticesArr = trackCurve.getPoints(tcaLength);\n\n                            trackGeometry.vertices = verticesArr;\n                            \n                            var trackLine = new THREE.Line(trackGeometry, trackMaterial);\n                            group.add(trackLine);\n\n                            \/\/ 动画点\n                            addLightPoint(p1, tcaLength, verticesArr);\n                        }\n                    }\n                }\n            });\n        }\n\n        \/\/ 点动画\n        var pointGeometry = new THREE.SphereGeometry(0.2, 20, 20);\n        var pointMaterial = new THREE.MeshBasicMaterial({color: 0x40E0D0});\n        function addLightPoint(pos, coordsNum ,verArr) {\n            var pointMesh = new THREE.Mesh(pointGeometry, pointMaterial);\n            pointMesh.position.set(pos.x, pos.y, pos.z);\n            group.add(pointMesh);\n\n            var index = 0;\n            function pointAnimate() {\n                index\x2b\x2b;\n                if(index\x3ecoordsNum) {\n                    index = 0;\n                }\n                pointMesh.position.set(verArr[index].x, verArr[index].y, verArr[index].z);\n                requestAnimationFrame(pointAnimate);\n            }\n            pointAnimate();\n\n            \/*var curveGeometry = new THREE.Geometry(); \n            var curveData = new THREE.CatmullRomCurve3(verArr.slice(0, 10));  \n            curveGeometry.vertices = curveData.getPoints(10);\n\n            var curveMaterial = new THREE.LineBasicMaterial({color: 0x40E0D0});\n            var curveLine = new THREE.Line(curveGeometry, curveMaterial);\n            group.add(curveLine);\n\n            var index = 0;\n            function lineAnimate() {\n                index\x2b\x2b;\n                if(index\x3ecoordsNum-10) {\n                    index = 0;\n                }\n                var offsetData = verArr.slice(index, 10\x2bindex);\n                if(offsetData.length \x3e 0) {\n                    curveData = new THREE.CatmullRomCurve3(offsetData);  \n                       curveLine.geometry.vertices = curveData.getPoints(10);\n                    curveLine.geometry.verticesNeedUpdate = true;\n                }\n                requestAnimationFrame(lineAnimate);\n            }\n            lineAnimate();*\/\n        }\n\n        \/\/ 监听数据(添加并更新)\n        socket.on(\x27~\x27, function(res) {\n            if($.isEmptyObject(planeMarkers)) {\n                $.each(res, function(i, item) {\n                    addPlane(item);\n                });\n            } else {\n                $.each(res, function(i, item) {\n                    if(planeMarkers[item.anum]) {\n                        if(item.lng \x26amp;\x26amp; item.lat) {\n                            var pos = getPosition(item.lng, item.lat, 5);\n                            planeMarkers[item.anum].position.set(pos.x, pos.y, pos.z);\n                        }\n                    } else {\n                        addPlane(item);\n                    }\n                });\n            }\n        });\n    }\n\n    \/\/ 地球\n    function globe() {\n        var globeTextureLoader = new THREE.TextureLoader();\n        globeTextureLoader.load(\x27images\/textures\/earth.jpg\x27, function (texture) {\n            var globeGgeometry = new THREE.SphereGeometry(200, 100, 100);\n            var globeMaterial = new THREE.MeshStandardMaterial({map: texture});\n            var globeMesh = new THREE.Mesh(globeGgeometry, globeMaterial);\n            group.add(globeMesh);\n            group.rotation.x = THREE.Math.degToRad(35);\n            group.rotation.y = THREE.Math.degToRad(170);\n        });\n    }\n\n    \/\/ 星点\n    function stars() {\n        var starsGeometry = new THREE.Geometry();\n        for (var i = 0; i \x3c 2000; i \x2b\x2b) {\n            var starVector = new THREE.Vector3(\n                THREE.Math.randFloatSpread(2000),\n                THREE.Math.randFloatSpread(2000),\n                THREE.Math.randFloatSpread(2000)\n            );\n            starsGeometry.vertices.push(starVector);\n        }\n        var starsMaterial = new THREE.PointsMaterial({color: 0x888888})\n        var starsPoint = new THREE.Points(starsGeometry, starsMaterial);\n        group.add(starsPoint);\n    }\n\n    \/\/ 光\n    function lights() {\n        var hemisphereLight = new THREE.HemisphereLight(0xffffff, 0x333333, 2);\n        hemisphereLight.position.x = 0;\n        hemisphereLight.position.y = 0;\n        hemisphereLight.position.z = -200;\n        group.add(hemisphereLight);\n    }\n\n    \/\/ 初始化\n    function init() {\n        container = document.getElementById(\x27zh_globe_container\x27);\n\n        scene = new THREE.Scene();\n        var bgTexture = new THREE.TextureLoader().load(\x26quot;images\/textures\/starfield.jpg\x26quot;);\n        scene.background = bgTexture;\n\n        camera = new THREE.PerspectiveCamera(50, winWth\/winHgt, 1, 2000);\n        camera.up.x = 0;\n        camera.up.y = 1;\n        camera.up.z = 0;\n        camera.position.x = 0;\n        camera.position.y = 0;\n        camera.position.z = 400;\n        camera.lookAt(0,0,0);\n\n        group = new THREE.Group();\n        scene.add(group);\n\n        \/\/ 地球    \n        globe();\n\n        \/\/ 飞机\n        plane();\n\n        \/\/ 星点\n        stars();\n    \n        \/\/ 半球光\n        lights();\n\n        \/\/ 渲染器\n        renderer = new THREE.WebGLRenderer({antialias: true, preserveDrawingBuffer: true});\n        renderer.setPixelRatio(window.devicePixelRatio);\n        renderer.setSize(winWth, winHgt);\n        container.appendChild(renderer.domElement);\n\n        \/\/ 盘旋控制\n        var orbitControl = new THREE.OrbitControls(camera, renderer.domElement);\n        orbitControl.minDistrance = 20;\n        orbitControl.maxDistrance = 50;\n        orbitControl.maxPolarAngle = Math.PI\/2;\n\n        \/\/ 性能测试\n        stats = new Stats();\n        container.appendChild(stats.dom);\n\n        \/\/ resize事件\n        window.addEventListener(\x27resize\x27, onWindowResize, false);\n    }\n\n    \/\/ 窗口大小改变\n    function onWindowResize() {\n        camera.aspect = window.innerWidth\/window.innerHeight;\n        camera.updateProjectionMatrix();\n        renderer.setSize(window.innerWidth, window.innerHeight);\n    }\n    \n    \/\/ 渲染\n    function render() {\n        group.rotation.y -= 0.0005;\n        renderer.render(scene, camera);\n    }\n\n    \/\/ 动画\n    function animate() {\n        requestAnimationFrame(animate);\n        render();\n        stats.update();\n    }\n\n    init();\n    animate();    \n})();\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre\x3e\x3ccode\x3evar log = console.log.bind(console);\n\nvar globeObj = (function() {\n    \x27use strict\x27;\n\n    \/\/ 判断浏览器是否支持webgl\n    if(!Detector.webgl) Detector.addGetWebGLMessage();\n\n    var container, stats;\n    var camera, scene, renderer;\n    var group;\n    var mouseX = 0, mouseY = 0;\n    var winWth = window.innerWidth, winHgt = window.innerHeight;\n\n    \/\/ 获取position\n    function getPosition(lng, lat, alt) {\n        var phi = (90-lat)*(Math.PI\/180),\n            theta = (lng\x2b180)*(Math.PI\/180),\n            radius = alt\x2b200,\n            x = -(radius * Math.sin(phi) * Math.cos(theta)),\n            z = (radius * Math.sin(phi) * Math.sin(theta)),\n            y = (radius * Math.cos(phi));\n        return {x: x, y: y, z: z};\n    }\n\n    \/\/ 飞机\n    function plane() {\n        var socket = io(\x27https:\/\/loc.variflight.com\/*****此处接口地址不能给了\x27, {transports: [\x27websocket\x27]});\n\n        var clientBounds = [52.793056,72.427908,2.970897,135.181814];\n\n        \/\/ 连接\n        socket.on(\x27connect\x27, function() {\n            socket.emit(\x22sub\x22, clientBounds, -1, \x27\x27, function(){});\n        });\n\n        \/\/ 飞机标记\n        var planeMarkers = {};\n\n        \/\/ 飞机形状\n        var planeShape = new THREE.Shape();\n        planeShape.moveTo( 0, 0);\n        planeShape.lineTo(0.2, -0.2);\n        planeShape.lineTo(0.2, -1.3);\n        planeShape.lineTo(1.6,-2.7);\n        planeShape.lineTo(1.6,-3);\n        planeShape.lineTo(0.2, -2.1);\n        planeShape.lineTo(0.2, -3);\n        planeShape.lineTo(0.5, -3.4);\n        planeShape.lineTo(0.5, -3.7);\n        planeShape.lineTo(0, -3.3);\n        planeShape.lineTo(-0.5, -3.7);\n        planeShape.lineTo(-0.5, -3.4);\n        planeShape.lineTo(-0.2, -3);\n        planeShape.lineTo(-0.2, -2.1);\n        planeShape.lineTo(-1.6,-3);\n        planeShape.lineTo(-1.6,-2.7);\n        planeShape.lineTo(-0.2, -1.3);\n        planeShape.lineTo(-0.2, -0.2);\n        var planeGeometry = new THREE.ShapeGeometry(planeShape);\n        \/\/ 飞机材质\n        var planeMaterial = new THREE.MeshPhongMaterial({color: 0x0FB4DD, side: THREE.DoubleSide, depthTest: true});\n        \/\/ 添加飞机\n        function addPlane(item) {\n            if(item.anum \x26amp;\x26amp; item.lng \x26amp;\x26amp; item.lat) {\n                var plane = new THREE.Mesh(planeGeometry, planeMaterial);\n                \/\/ 旋转\n                plane.rotation.z = THREE.Math.degToRad(item.ang);\n                \/\/ 定位\n                var position = getPosition(item.lng, item.lat, 5);\n                plane.position.set(position.x, position.y, position.z);\n                \/\/ 显示\/隐藏\n                \/\/ plane.visible = false;\n                \/\/ 保存\n                planeMarkers[item.anum] = plane;\n                \/\/ 添加到场景\n                group.add(plane);\n                \/\/ 绘制历史轨迹\n                drawHistoryTrack(item.anum);\n            }\n        }\n\n        \/\/ 时间段\n        var curTime = Date.parse(new Date())\/1000;\n        var depTime = curTime - 30*60;\n        \/\/ 轨迹线质\n        var trackMaterial = new THREE.LineBasicMaterial({color : 0x1B94B1});\n        \/\/ 绘制历史轨迹\n        function drawHistoryTrack(anum) {\n            socket.emit(\x22fullPath\x22, anum, depTime, curTime, function(status, data){\n                if(status) {\n                    var dLength = data.length;\n                    if(dLength\x26gt;=2) {\n                        var trackCoordArr = [];\n                        for(var i=0; i\x26lt;dLength; i\x2b\x2b) {\n                            if(data[i].lng \x26amp;\x26amp; data[i].alt) {\n                                trackCoordArr.push({lng: data[i].lng, lat: data[i].lat});\n                            }\n                        }\n\n                        var tcaLength = trackCoordArr.length;\n                        if(tcaLength\x26gt;=2) {\n                            var tcaHalfLength = Math.ceil(tcaLength\/2),\n                                tcaRemainLength = tcaLength-tcaHalfLength,\n                                vertexArr = [];\n\n                            \/* 所有点\n                            for(var j=0; j\x26lt;tcaHalfLength; j\x2b\x2b) {\n                                var p1 = getPosition(trackCoordArr[j].lng, trackCoordArr[j].lat, j*0.05);\n                                vertexArr.push(new THREE.Vector3(p1.x, p1.y, p1.z));    \n                            }\n                            for(var k=tcaRemainLength; k\x26gt;0; k--) {\n                                var p2 = getPosition(trackCoordArr[tcaLength-k].lng, trackCoordArr[tcaLength-k].lat, k*0.05);\n                                vertexArr.push(new THREE.Vector3(p2.x, p2.y, p2.z));    \n                            }\n                            \n                            var trackCurve = new THREE.CatmullRomCurve3(vertexArr);\n                            *\/\n\n                            \/\/ 三个点\n                            var p1 = getPosition(trackCoordArr[0].lng, trackCoordArr[0].lat, 0),\n                                p2 = getPosition(trackCoordArr[tcaHalfLength].lng, trackCoordArr[tcaHalfLength].lat, tcaLength*0.01),\n                                p3 = getPosition(trackCoordArr[tcaLength-1].lng, trackCoordArr[tcaLength-1].lat, 0);\n\n                            var trackCurve = new THREE.CatmullRomCurve3([\n                                new THREE.Vector3(p1.x, p1.y, p1.z),\n                                new THREE.Vector3(p2.x, p2.y, p2.z),\n                                new THREE.Vector3(p3.x, p3.y, p3.z)\n                            ]);\n\n                            var trackGeometry = new THREE.Geometry(),\n                                verticesArr = trackCurve.getPoints(tcaLength);\n\n                            trackGeometry.vertices = verticesArr;\n                            \n                            var trackLine = new THREE.Line(trackGeometry, trackMaterial);\n                            group.add(trackLine);\n\n                            \/\/ 动画点\n                            addLightPoint(p1, tcaLength, verticesArr);\n                        }\n                    }\n                }\n            });\n        }\n\n        \/\/ 点动画\n        var pointGeometry = new THREE.SphereGeometry(0.2, 20, 20);\n        var pointMaterial = new THREE.MeshBasicMaterial({color: 0x40E0D0});\n        function addLightPoint(pos, coordsNum ,verArr) {\n            var pointMesh = new THREE.Mesh(pointGeometry, pointMaterial);\n            pointMesh.position.set(pos.x, pos.y, pos.z);\n            group.add(pointMesh);\n\n            var index = 0;\n            function pointAnimate() {\n                index\x2b\x2b;\n                if(index\x26gt;coordsNum) {\n                    index = 0;\n                }\n                pointMesh.position.set(verArr[index].x, verArr[index].y, verArr[index].z);\n                requestAnimationFrame(pointAnimate);\n            }\n            pointAnimate();\n\n            \/*var curveGeometry = new THREE.Geometry(); \n            var curveData = new THREE.CatmullRomCurve3(verArr.slice(0, 10));  \n            curveGeometry.vertices = curveData.getPoints(10);\n\n            var curveMaterial = new THREE.LineBasicMaterial({color: 0x40E0D0});\n            var curveLine = new THREE.Line(curveGeometry, curveMaterial);\n            group.add(curveLine);\n\n            var index = 0;\n            function lineAnimate() {\n                index\x2b\x2b;\n                if(index\x26gt;coordsNum-10) {\n                    index = 0;\n                }\n                var offsetData = verArr.slice(index, 10\x2bindex);\n                if(offsetData.length \x26gt; 0) {\n                    curveData = new THREE.CatmullRomCurve3(offsetData);  \n                       curveLine.geometry.vertices = curveData.getPoints(10);\n                    curveLine.geometry.verticesNeedUpdate = true;\n                }\n                requestAnimationFrame(lineAnimate);\n            }\n            lineAnimate();*\/\n        }\n\n        \/\/ 监听数据(添加并更新)\n        socket.on(\x27~\x27, function(res) {\n            if($.isEmptyObject(planeMarkers)) {\n                $.each(res, function(i, item) {\n                    addPlane(item);\n                });\n            } else {\n                $.each(res, function(i, item) {\n                    if(planeMarkers[item.anum]) {\n                        if(item.lng \x26amp;\x26amp; item.lat) {\n                            var pos = getPosition(item.lng, item.lat, 5);\n                            planeMarkers[item.anum].position.set(pos.x, pos.y, pos.z);\n                        }\n                    } else {\n                        addPlane(item);\n                    }\n                });\n            }\n        });\n    }\n\n    \/\/ 地球\n    function globe() {\n        var globeTextureLoader = new THREE.TextureLoader();\n        globeTextureLoader.load(\x27images\/textures\/earth.jpg\x27, function (texture) {\n            var globeGgeometry = new THREE.SphereGeometry(200, 100, 100);\n            var globeMaterial = new THREE.MeshStandardMaterial({map: texture});\n            var globeMesh = new THREE.Mesh(globeGgeometry, globeMaterial);\n            group.add(globeMesh);\n            group.rotation.x = THREE.Math.degToRad(35);\n            group.rotation.y = THREE.Math.degToRad(170);\n        });\n    }\n\n    \/\/ 星点\n    function stars() {\n        var starsGeometry = new THREE.Geometry();\n        for (var i = 0; i \x26lt; 2000; i \x2b\x2b) {\n            var starVector = new THREE.Vector3(\n                THREE.Math.randFloatSpread(2000),\n                THREE.Math.randFloatSpread(2000),\n                THREE.Math.randFloatSpread(2000)\n            );\n            starsGeometry.vertices.push(starVector);\n        }\n        var starsMaterial = new THREE.PointsMaterial({color: 0x888888})\n        var starsPoint = new THREE.Points(starsGeometry, starsMaterial);\n        group.add(starsPoint);\n    }\n\n    \/\/ 光\n    function lights() {\n        var hemisphereLight = new THREE.HemisphereLight(0xffffff, 0x333333, 2);\n        hemisphereLight.position.x = 0;\n        hemisphereLight.position.y = 0;\n        hemisphereLight.position.z = -200;\n        group.add(hemisphereLight);\n    }\n\n    \/\/ 初始化\n    function init() {\n        container = document.getElementById(\x27zh_globe_container\x27);\n\n        scene = new THREE.Scene();\n        var bgTexture = new THREE.TextureLoader().load(\x22images\/textures\/starfield.jpg\x22);\n        scene.background = bgTexture;\n\n        camera = new THREE.PerspectiveCamera(50, winWth\/winHgt, 1, 2000);\n        camera.up.x = 0;\n        camera.up.y = 1;\n        camera.up.z = 0;\n        camera.position.x = 0;\n        camera.position.y = 0;\n        camera.position.z = 400;\n        camera.lookAt(0,0,0);\n\n        group = new THREE.Group();\n        scene.add(group);\n\n        \/\/ 地球    \n        globe();\n\n        \/\/ 飞机\n        plane();\n\n        \/\/ 星点\n        stars();\n    \n        \/\/ 半球光\n        lights();\n\n        \/\/ 渲染器\n        renderer = new THREE.WebGLRenderer({antialias: true, preserveDrawingBuffer: true});\n        renderer.setPixelRatio(window.devicePixelRatio);\n        renderer.setSize(winWth, winHgt);\n        container.appendChild(renderer.domElement);\n\n        \/\/ 盘旋控制\n        var orbitControl = new THREE.OrbitControls(camera, renderer.domElement);\n        orbitControl.minDistrance = 20;\n        orbitControl.maxDistrance = 50;\n        orbitControl.maxPolarAngle = Math.PI\/2;\n\n        \/\/ 性能测试\n        stats = new Stats();\n        container.appendChild(stats.dom);\n\n        \/\/ resize事件\n        window.addEventListener(\x27resize\x27, onWindowResize, false);\n    }\n\n    \/\/ 窗口大小改变\n    function onWindowResize() {\n        camera.aspect = window.innerWidth\/window.innerHeight;\n        camera.updateProjectionMatrix();\n        renderer.setSize(window.innerWidth, window.innerHeight);\n    }\n    \n    \/\/ 渲染\n    function render() {\n        group.rotation.y -= 0.0005;\n        renderer.render(scene, camera);\n    }\n\n    \/\/ 动画\n    function animate() {\n        requestAnimationFrame(animate);\n        render();\n        stats.update();\n    }\n\n    init();\n    animate();    \n})();\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e场景背景图\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVJyOd?w=2048\x26amp;h=1024\x22 src=\x22https:\/\/static.alili.tech\/img\/bVJyOd?w=2048\x26amp;h=1024\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e谢谢关注，如有帮助请推荐一下！\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>threejs 绘制地球、飞机、轨迹</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000008423707">https://segmentfault.com/a/1190000008423707</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/9aova4fq5hv/" target="_blank">https://alili.tech/archive/9aova4fq5hv/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>