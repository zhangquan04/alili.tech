<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="VUE的数据双向绑定"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>VUE的数据双向绑定 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/gu8gacmk3di/",
				"appid": "1613049289050283", 
				"title": "VUE的数据双向绑定 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-19T02:30:10"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/fllf57lykhr/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/dhn44grcxnj/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fgu8gacmk3di%2f&text=VUE%e7%9a%84%e6%95%b0%e6%8d%ae%e5%8f%8c%e5%90%91%e7%bb%91%e5%ae%9a"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fgu8gacmk3di%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fgu8gacmk3di%2f&text=VUE%e7%9a%84%e6%95%b0%e6%8d%ae%e5%8f%8c%e5%90%91%e7%bb%91%e5%ae%9a"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fgu8gacmk3di%2f&title=VUE%e7%9a%84%e6%95%b0%e6%8d%ae%e5%8f%8c%e5%90%91%e7%bb%91%e5%ae%9a"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fgu8gacmk3di%2f&is_video=false&description=VUE%e7%9a%84%e6%95%b0%e6%8d%ae%e5%8f%8c%e5%90%91%e7%bb%91%e5%ae%9a"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=VUE%e7%9a%84%e6%95%b0%e6%8d%ae%e5%8f%8c%e5%90%91%e7%bb%91%e5%ae%9a&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fgu8gacmk3di%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fgu8gacmk3di%2f&title=VUE%e7%9a%84%e6%95%b0%e6%8d%ae%e5%8f%8c%e5%90%91%e7%bb%91%e5%ae%9a"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fgu8gacmk3di%2f&title=VUE%e7%9a%84%e6%95%b0%e6%8d%ae%e5%8f%8c%e5%90%91%e7%bb%91%e5%ae%9a"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fgu8gacmk3di%2f&title=VUE%e7%9a%84%e6%95%b0%e6%8d%ae%e5%8f%8c%e5%90%91%e7%bb%91%e5%ae%9a"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fgu8gacmk3di%2f&title=VUE%e7%9a%84%e6%95%b0%e6%8d%ae%e5%8f%8c%e5%90%91%e7%bb%91%e5%ae%9a"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">VUE的数据双向绑定</h1><div class="meta"><div class="postdate"><time datetime="2019-01-19" itemprop="datePublished">2019-01-19</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch1 id=\x22articleHeader0\x22\x3e写在前面的东西\x3c\/h1\x3e\n\x3cp\x3eVue.js自从在github上开源以来就受到各方的极大关注，并在短暂的时间里立即火了起来，现在已成为最流行的前端框架之一；我也使用vue有一段时间了，对vue的双向绑定有一定的理解，在这和大家分享我的愚见，有错误的地方望大家给予指正。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e1、概述\x3c\/h2\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 让我们先来看一下官网的这张数据绑定的说明图：\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e 让我们先来看一下官网的这张数据绑定的说明图：\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVx1bI?w=1560\x26amp;h=874\x22 src=\x22https:\/\/static.alili.tech\/img\/bVx1bI?w=1560\x26amp;h=874\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22原理图告诉我们，a对象下面的b属性定义了getter、setter对属性进行劫持，当属性值改变是就会notify通知watch对象，而watch对象则会notify到view上对应的位置进行更新（这个地方还没讲清下面再讲），然后我们就看到了视图的更新了，反过来当在视图(如input)输入数据时，也会触发订阅者watch，更新最新的数据到data里面(图中的a.b),这样model数据就能实时响应view上的数据变化了，这样一个过程就是数据的双向绑定了。\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs haskell\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e原理图告诉我们，a对象下面的b属性定义了getter、setter对属性进行劫持，当属性值改变是就会notify通知watch对象，而watch对象则会notify到view上对应的位置进行更新（这个地方还没讲清下面再讲），然后我们就看到了视图的更新了，反过来当在视图(如input)输入数据时，也会触发订阅者watch，更新最新的数据到\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e里面(图中的\x3cspan class=\x22hljs-title\x22\x3ea\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eb\x3c\/span\x3e),这样model数据就能实时响应view上的数据变化了，这样一个过程就是数据的双向绑定了。\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e看到这里就会第一个疑问：那么setter、getter是怎样实现的劫持的呢？答案就是vue运用了es5中Object.defineProperty()这个方法，所以要想理解双向绑定就得先知道Object.defineProperty是怎么一回事了；\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e2.Object.defineProperty\x3c\/h2\x3e\n\x3cp\x3e它是es5一个方法，可以直接在一个对象上定义一个新属性，或者修改一个已经存在的属性， 并返回这个对象，对象里目前存在的属性描述符有两种主要形式：数据描述符和存取描述符。数据描述符是一个拥有可写或不可写值的属性。存取描述符是由一对 getter-setter 函数功能来描述的属性。描述符必须是两种形式之一；\x3cstrong\x3e不能同时是两者\x3c\/strong\x3e。\x3cbr\x3e  属性描述符包括：configurable(可配置性相当于属性的总开关，只有为true时才能设置，而且不可逆)、Writable(是否可写，为false时将不能够修改属性的值)、Enumerable(是否可枚举，为false时for..in以及Object.keys()将不能枚举出该属性)、get(一个给属性提供 getter 的方法)、set(一个给属性提供 setter 的方法)\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var o = {name:\x27vue\x27};\nObject.defineProperty(o, \x26quot;age\x26quot;,{ value : 3,\n                               writable : true,\/\/可以修改属性a的值\n                               enumerable : true,\/\/能够在for..in或者Object.keys()中枚举\n                               configurable : true\/\/可以配置\n                               });\n\nObject.keys(o)\/\/[\x27name\x27,\x27age\x27]\no.age = 4;\nconsole.log(o.age) \/\/4\n\nvar bValue;\nObject.defineProperty(o, \x26quot;b\x26quot;, {\n                               get : function(){ \n                                         return bValue; \n                                     },\n                               set : function(newValue){ \n                                       console.log(\x27haha..\x27)\n                                       bValue = newValue; \n                                     },\n                               enumerable : true,\/\/默认值是false 及不能被枚举\n                               configurable : true\/\/默认也是false\n                               });\n o.b = \x27something\x27;\n\/\/haha..\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e o = {\x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27vue\x27\x3c\/span\x3e};\n\x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.defineProperty(o, \x3cspan class=\x22hljs-string\x22\x3e\x22age\x22\x3c\/span\x3e,{ \x3cspan class=\x22hljs-attr\x22\x3evalue\x3c\/span\x3e : \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e,\n                               \x3cspan class=\x22hljs-attr\x22\x3ewritable\x3c\/span\x3e : \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\x3cspan class=\x22hljs-comment\x22\x3e\/\/可以修改属性a的值\x3c\/span\x3e\n                               enumerable : \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\x3cspan class=\x22hljs-comment\x22\x3e\/\/能够在for..in或者Object.keys()中枚举\x3c\/span\x3e\n                               configurable : \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/可以配置\x3c\/span\x3e\n                               });\n\n\x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.keys(o)\x3cspan class=\x22hljs-comment\x22\x3e\/\/[\x27name\x27,\x27age\x27]\x3c\/span\x3e\no.age = \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e;\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(o.age) \x3cspan class=\x22hljs-comment\x22\x3e\/\/4\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e bValue;\n\x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.defineProperty(o, \x3cspan class=\x22hljs-string\x22\x3e\x22b\x22\x3c\/span\x3e, {\n                               \x3cspan class=\x22hljs-attr\x22\x3eget\x3c\/span\x3e : \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{ \n                                         \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e bValue; \n                                     },\n                               \x3cspan class=\x22hljs-attr\x22\x3eset\x3c\/span\x3e : \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3enewValue\x3c\/span\x3e)\x3c\/span\x3e{ \n                                       \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27haha..\x27\x3c\/span\x3e)\n                                       bValue = newValue; \n                                     },\n                               \x3cspan class=\x22hljs-attr\x22\x3eenumerable\x3c\/span\x3e : \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\x3cspan class=\x22hljs-comment\x22\x3e\/\/默认值是false 及不能被枚举\x3c\/span\x3e\n                               configurable : \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/默认也是false\x3c\/span\x3e\n                               });\n o.b = \x3cspan class=\x22hljs-string\x22\x3e\x27something\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/haha..\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上面分别给出了对象属性描述符的数据描述符和存取描述的例子，注意一点是这两种不能同时拥有，也就是valuewritable不能和getset同时具备。在这里只是很粗浅的说了一下Object.defineProperty这个方法，要了解更多可以点击\x3ca href=\x22https:\/\/developer.mozilla.org\/zh-CN\/docs\/Web\/JavaScript\/Reference\/Global_Objects\/Object\/defineProperty\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e这里\x3c\/a\x3e\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader3\x22\x3e3.实现observer\x3c\/h1\x3e\n\x3cp\x3e我们在上面一部分讲到了es5的Object.defineProperty()这个方法，vue正式通过它来实现对一个对象属性的劫持的，在创建实例的时候vue会对option中的data对象进行一次数据格式化或者说初始化，给每个data的属性都设置上get\/set进行对象劫持，代码如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function Observer(data){\n    this.data = data;\n    if(Array.isArray(data)){\n        protoAugment(data,arrayMethods); \/\/arrayMethods实现对Array.prototype原型方法的拷贝;\n        this.observeArray(data);\n    }else{\n        this.walk(data);\n    }\n    \n}\n\nObserver.prototype = {\n    walk:function walk(data){\n        var _this = this;\n        Object.keys(data).forEach(function(key){\n            _this.convert(key,data[key]);\n        })\n    },\n    convert:function convert(key,val){\n        this.defineReactive(this.data,key,val);\n    },\n    defineReactive:function defineReactive(data,key,val){\n        var ochildOb = observer(val);\n        var _this = this;\n        Object.defineProperty(data,key,{\n            configurable:false,\n            enumerable:true,\n            get:function(){\n                console.log(`i get the ${key}--\x3e${val}`)\n                return val;\n            },\n            set:function(newVal){\n                if(newVal == val)return;\n                console.log(`haha.. ${key} changed oldVal--\x3e${val} newVal--\x3e${newVal}`);\n                val = newVal;\n                observer(newVal);\/\/在这里对新设置的属性再一次进行get\/set     \n            }            \n        })\n    },\n    observeArray:function observeArray(items){\n        for (var i = 0, l = items.length; i \x3c l; i\x2b\x2b) {\n            observer(items[i]);\n         }\n    }\n}\nfunction observer(data){\n    if(!data || typeof data !==\x27object\x27)return;\n    return new Observer(data);\n}\n\/\/让我们来试一下\nvar obj = {name:\x27jasonCloud\x27};\nvar ob = observer(obj);\nobj.name = \x27wu\x27;\n\/\/haha.. name changed oldVal--\x3ejasonCloud newVal--\x3ewu\nobj.name;\n\/\/i get the name--\x3ewu\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eObserver\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edata\x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.data = data;\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(\x3cspan class=\x22hljs-built_in\x22\x3eArray\x3c\/span\x3e.isArray(data)){\n        protoAugment(data,arrayMethods); \x3cspan class=\x22hljs-comment\x22\x3e\/\/arrayMethods实现对Array.prototype原型方法的拷贝;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.observeArray(data);\n    }\x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.walk(data);\n    }\n    \n}\n\nObserver.prototype = {\n    \x3cspan class=\x22hljs-attr\x22\x3ewalk\x3c\/span\x3e:\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ewalk\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edata\x3c\/span\x3e)\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e _this = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.keys(data).forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ekey\x3c\/span\x3e)\x3c\/span\x3e{\n            _this.convert(key,data[key]);\n        })\n    },\n    \x3cspan class=\x22hljs-attr\x22\x3econvert\x3c\/span\x3e:\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3econvert\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ekey,val\x3c\/span\x3e)\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.defineReactive(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.data,key,val);\n    },\n    \x3cspan class=\x22hljs-attr\x22\x3edefineReactive\x3c\/span\x3e:\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edefineReactive\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edata,key,val\x3c\/span\x3e)\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ochildOb = observer(val);\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e _this = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.defineProperty(data,key,{\n            \x3cspan class=\x22hljs-attr\x22\x3econfigurable\x3c\/span\x3e:\x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3eenumerable\x3c\/span\x3e:\x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3eget\x3c\/span\x3e:\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n                \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e`i get the \x3cspan class=\x22hljs-subst\x22\x3e${key}\x3c\/span\x3e--\x26gt;\x3cspan class=\x22hljs-subst\x22\x3e${val}\x3c\/span\x3e`\x3c\/span\x3e)\n                \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e val;\n            },\n            \x3cspan class=\x22hljs-attr\x22\x3eset\x3c\/span\x3e:\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3enewVal\x3c\/span\x3e)\x3c\/span\x3e{\n                \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(newVal == val)\x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n                \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e`haha.. \x3cspan class=\x22hljs-subst\x22\x3e${key}\x3c\/span\x3e changed oldVal--\x26gt;\x3cspan class=\x22hljs-subst\x22\x3e${val}\x3c\/span\x3e newVal--\x26gt;\x3cspan class=\x22hljs-subst\x22\x3e${newVal}\x3c\/span\x3e`\x3c\/span\x3e);\n                val = newVal;\n                observer(newVal);\x3cspan class=\x22hljs-comment\x22\x3e\/\/在这里对新设置的属性再一次进行get\/set     \x3c\/span\x3e\n            }            \n        })\n    },\n    \x3cspan class=\x22hljs-attr\x22\x3eobserveArray\x3c\/span\x3e:\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eobserveArray\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eitems\x3c\/span\x3e)\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, l = items.length; i \x26lt; l; i\x2b\x2b) {\n            observer(items[i]);\n         }\n    }\n}\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eobserver\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edata\x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(!data || \x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e data !==\x3cspan class=\x22hljs-string\x22\x3e\x27object\x27\x3c\/span\x3e)\x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Observer(data);\n}\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/让我们来试一下\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e obj = {\x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27jasonCloud\x27\x3c\/span\x3e};\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ob = observer(obj);\nobj.name = \x3cspan class=\x22hljs-string\x22\x3e\x27wu\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/haha.. name changed oldVal--\x26gt;jasonCloud newVal--\x26gt;wu\x3c\/span\x3e\nobj.name;\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/i get the name--\x26gt;wu\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e到这一步我们只实现了对属性的set\/get监听，但并没实现变化后notify，那该怎样去实现呢？在VUE里面使用了订阅器Dep，让其维持一个订阅数组，但有订阅者时就通知相应的订阅者notify。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22let _id = 0;\n\/*\n  Dep构造器用于维持$watcher检测队列；\n*\/\nfunction Dep(){\n    this.id = _id\x2b\x2b;\n    this.subs = [];\n}\n\nDep.prototype = {\n    constructor:Dep,\n    addSub:function(sub){\n        this.subs.push(sub);\n    },\n    notify:function(){\n        this.subs.forEach(function(sub){\n            if(typeof sub.update == \x27function\x27)\n            sub.update();\n        })\n    },\n    removeSub:function(sub){\n        var index = this.subs.indexOf(sub);\n        if(index \x3e-1)\n        this.subs.splice(index,1);\n    },\n    depend:function(){\n        Dep.target.addDep(this);\n    }\n}\n\nDep.target = null; \/\/定义Dep的一个属性，当watcher时Dep.targert=watcher实例对象\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs perl\x22\x3e\x3ccode\x3elet _id = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n\x3cspan class=\x22hljs-regexp\x22\x3e\/*\n  Dep构造器用于维持$watcher检测队列；\n*\/\x3c\/span\x3e\nfunction Dep(){\n    this.id = _id\x2b\x2b;\n    this.subs = [];\n}\n\nDep.prototype = {\n    constructor:Dep,\n    addSub:function(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3esub\x3c\/span\x3e)\x3c\/span\x3e{\n        this.subs.push(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3esub\x3c\/span\x3e)\x3c\/span\x3e;\n    },\n    notify:function(){\n        this.subs.forEach(function(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3esub\x3c\/span\x3e)\x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(typeof \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3esub\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eupdate\x3c\/span\x3e == \x27\x3cspan class=\x22hljs-title\x22\x3efunction\x3c\/span\x3e\x27)\n            \x3cspan class=\x22hljs-title\x22\x3esub\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eupdate\x3c\/span\x3e\x3c\/span\x3e();\n        })\n    },\n    removeSub:function(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3esub\x3c\/span\x3e)\x3c\/span\x3e{\n        var \x3cspan class=\x22hljs-keyword\x22\x3eindex\x3c\/span\x3e = this.subs.indexOf(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3esub\x3c\/span\x3e)\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3eindex\x3c\/span\x3e \x26gt;-\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e)\n        this.subs.splice(\x3cspan class=\x22hljs-keyword\x22\x3eindex\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e);\n    },\n    depend:function(){\n        Dep.target.addDep(this);\n    }\n}\n\nDep.target = null; \x3cspan class=\x22hljs-regexp\x22\x3e\/\/\x3c\/span\x3e定义Dep的一个属性，当watcher时Dep.targert=watcher实例对象\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在这里构造器Dep,维持内部一个数组subs，当有订阅时就addSub进去，通知订阅者更新时就会调用notify方法通知到订阅者；我们现在合并一下这两段代码\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function Observer(data){\n    \/\/省略的代码..\n    this.dep = new Dep();\n    \/\/省略的代码..\n    \n}\n\nObserver.prototype = {\n\n    \/\/省略的代码..\n    \n    defineReactive:function defineReactive(data,key,val){\n\n        \/\/省略的代码..\n\n        var dep = new Dep();\n\n        Object.defineProperty(data,key,{\n            configurable:false,\n            enumerable:true,\n            get:function(){\n                if(Dep.target){\n                    dep.depend();\n                    \/\/省略的代码..\n                }\n                return val;\n            },\n            set:function(newVal){\n                \/\/省略的代码..\n                dep.notify();         \n            }            \n        })\n    },\n    observeArray:function observeArray(items){\n        for (var i = 0, l = items.length; i \x3c l; i\x2b\x2b) {\n            observer(items[i]);\n         }\n    }\n}\n\nfunction observer(data){\n    if(!data || typeof data !==\x27object\x27)return;\n    return new Observer(data);\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eObserver\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(data)\x3c\/span\x3e\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/省略的代码..\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.dep = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Dep();\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/省略的代码..\x3c\/span\x3e\n    \n}\n\nObserver.prototype = {\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/省略的代码..\x3c\/span\x3e\n    \n    defineReactive:\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edefineReactive\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(data,key,val)\x3c\/span\x3e\x3c\/span\x3e{\n\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/省略的代码..\x3c\/span\x3e\n\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e dep = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Dep();\n\n        Object.defineProperty(data,key,{\n            configurable:\x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n            enumerable:\x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-keyword\x22\x3eget\x3c\/span\x3e:\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{\n                \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(Dep.target){\n                    dep.depend();\n                    \x3cspan class=\x22hljs-comment\x22\x3e\/\/省略的代码..\x3c\/span\x3e\n                }\n                \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e val;\n            },\n            \x3cspan class=\x22hljs-keyword\x22\x3eset\x3c\/span\x3e:\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(newVal)\x3c\/span\x3e\x3c\/span\x3e{\n                \x3cspan class=\x22hljs-comment\x22\x3e\/\/省略的代码..\x3c\/span\x3e\n                dep.notify();         \n            }            \n        })\n    },\n    observeArray:\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eobserveArray\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(items)\x3c\/span\x3e\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, l = items.length; i \x26lt; l; i\x2b\x2b) {\n            observer(items[i]);\n         }\n    }\n}\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eobserver\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(data)\x3c\/span\x3e\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(!data || \x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e data !==\x3cspan class=\x22hljs-string\x22\x3e\x27object\x27\x3c\/span\x3e)\x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Observer(data);\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上面代码中有一个protoAugment方法，在vue中是实现对数组一些方法的重写，但他并不是直接在Array.prototype.[xxx]直接进行重写这样会影响到所有的数组中的方法，显然是不明智的，vue很巧妙的进行了处理，使其并不会影响到所有的Array上的方法，代码可以点击\x3ca href=\x22https:\/\/github.com\/JasonCloud\/wue\/blob\/master\/src\/js\/observer.js\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e这里\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e到这里我们实现了数据的劫持，并定义了一个订阅器来存放订阅者，那么谁是订阅者呢？那就是Watcher,下面让我们看看怎样实现watcher\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e4.实现一个Watcher\x3c\/h2\x3e\n\x3cp\x3ewatcher是实现view视图指令及数据和model层数据联系的管道，当在执行编译时候，他会把对应的属性创建一个Watcher对象让他和数据层model建立起联系。但数据发生变化是会触发update方法更新到视图上view中，反过来亦然。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function Watcher(vm,expOrFn,cb){\n    this.vm = vm;\n    this.cb = cb;\n    this.expOrFn = expOrFn;\n    this.depIds = {};\n    var value = this.get(),valuetemp;\n    if(typeof value === \x27object\x27 \x26amp;\x26amp; value !== null){\n        if(Array.isArray(value)){\n            valuetemp = [];\n            for(var i = 0,len = value.length;i\x3clen;i\x2b\x2b){\n                valuetemp.push(value[i]);\n            }\n        }else{\n            valuetemp = {};\n            for(var j in value){\n                valuetemp[j] = value[j];\n            }\n        }\n        this.value = valuetemp;\n    }else{\n        this.value = value;\n    }\n     \n};\nWatcher.prototype = {\n    update:function(){\n        this.run();\n    },\n    run:function(){\n        var val = this.get(),valuetemp;\n        var oldVal = this.value;\n        if(val!==oldVal){\n            if(typeof val === \x27object\x27 \x26amp;\x26amp; val !== null){\n                if(Array.isArray(val)){\n                    valuetemp = [];\n                    for(var i = 0,len = val.length;i\x3clen;i\x2b\x2b){\n                        valuetemp.push(val[i]);\n                    }\n                }else{\n                    valuetemp = {};\n                    for(var j in val){\n                        valuetemp[j] = val[j];\n                    }\n                }\n                this.value = valuetemp;\n            }else{\n                this.value = val;\n            }\n            this.cb.call(this,val,oldVal);\n        }\n    },\n    get:function(){\n        Dep.target = this;\n        var val = this.getVMVal();\n        Dep.target = null;\n        return val;\n    },\n    getVMVal:function(){\n        var exps = this.expOrFn.split(\x27.\x27);\n        var val = this.vm._data;\n        exps.forEach(function(key){\n            val = val[key];\n        })\n\n        return val;\n    },\n    addDep:function(dep){\n        if(!this.depIds.hasOwnProperty(dep.id)){\n            dep.addSub(this);\n            this.depIds[dep.id] = dep;\n        }\n    }\n\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs kotlin\x22\x3e\x3ccode\x3efunction Watcher(vm,expOrFn,cb){\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.vm = vm;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.cb = cb;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.expOrFn = expOrFn;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.depIds = {};\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e value = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.\x3cspan class=\x22hljs-keyword\x22\x3eget\x3c\/span\x3e(),valuetemp;\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(typeof value === \x3cspan class=\x22hljs-string\x22\x3e\x27object\x27\x3c\/span\x3e \x26amp;\x26amp; value !== \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e){\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(Array.isArray(value)){\n            valuetemp = [];\n            \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,len = value.length;i\x26lt;len;i\x2b\x2b){\n                valuetemp.push(value[i]);\n            }\n        }\x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e{\n            valuetemp = {};\n            \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e j \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e value){\n                valuetemp[j] = value[j];\n            }\n        }\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.value = valuetemp;\n    }\x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.value = value;\n    }\n     \n};\nWatcher.prototype = {\n    update:function(){\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.run();\n    },\n    run:function(){\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eval\x3c\/span\x3e = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.\x3cspan class=\x22hljs-keyword\x22\x3eget\x3c\/span\x3e(),valuetemp;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e oldVal = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.value;\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3eval\x3c\/span\x3e!==oldVal){\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(typeof \x3cspan class=\x22hljs-keyword\x22\x3eval\x3c\/span\x3e === \x3cspan class=\x22hljs-string\x22\x3e\x27object\x27\x3c\/span\x3e \x26amp;\x26amp; \x3cspan class=\x22hljs-keyword\x22\x3eval\x3c\/span\x3e !== \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e){\n                \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(Array.isArray(\x3cspan class=\x22hljs-keyword\x22\x3eval\x3c\/span\x3e)){\n                    valuetemp = [];\n                    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,len = \x3cspan class=\x22hljs-keyword\x22\x3eval\x3c\/span\x3e.length;i\x26lt;len;i\x2b\x2b){\n                        valuetemp.push(\x3cspan class=\x22hljs-keyword\x22\x3eval\x3c\/span\x3e[i]);\n                    }\n                }\x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e{\n                    valuetemp = {};\n                    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e j \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eval\x3c\/span\x3e){\n                        valuetemp[j] = \x3cspan class=\x22hljs-keyword\x22\x3eval\x3c\/span\x3e[j];\n                    }\n                }\n                \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.value = valuetemp;\n            }\x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e{\n                \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.value = \x3cspan class=\x22hljs-keyword\x22\x3eval\x3c\/span\x3e;\n            }\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.cb.call(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e,\x3cspan class=\x22hljs-keyword\x22\x3eval\x3c\/span\x3e,oldVal);\n        }\n    },\n    \x3cspan class=\x22hljs-keyword\x22\x3eget\x3c\/span\x3e:function(){\n        Dep.target = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eval\x3c\/span\x3e = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.getVMVal();\n        Dep.target = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eval\x3c\/span\x3e;\n    },\n    getVMVal:function(){\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e exps = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.expOrFn.split(\x3cspan class=\x22hljs-string\x22\x3e\x27.\x27\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eval\x3c\/span\x3e = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.vm._data;\n        exps.forEach(function(key){\n            \x3cspan class=\x22hljs-keyword\x22\x3eval\x3c\/span\x3e = \x3cspan class=\x22hljs-keyword\x22\x3eval\x3c\/span\x3e[key];\n        })\n\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eval\x3c\/span\x3e;\n    },\n    addDep:function(dep){\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(!\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.depIds.hasOwnProperty(dep.id)){\n            dep.addSub(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e);\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.depIds[dep.id] = dep;\n        }\n    }\n\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e到现在还差一步就是将我们在容器中写的指令和\x22{{\x22\x22}}\x22让他和我们的model建立起连续并转化成，我们平时熟悉的html文档，这个过程也就是编译；编译简单的实现就是将我们定义的容器里面所有的子节点都获取到，然后通过对应的规则进行转换编译，为了提高性能，先创建一个文档碎片createDocumentFragment（），然后操作都在碎片中进行，等操作成功后一次性appendChild进去；\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function Compile(el,vm){\n    this.$vm = vm;\n    this.$el = this.isElementNode(el) ? el : document.querySelector(el);\n    if(this.$el){\n        this.$fragment = this.nodeToFragment(this.$el);\n        this.init();\n        this.$el.appendChild(this.$fragment);\n        this.$vm.$option[\x27mount\x27] \x26amp;\x26amp; this.$vm.$option[\x27mount\x27].call(this.$vm);\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs kotlin\x22\x3e\x3ccode\x3efunction Compile(el,vm){\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$vm = vm;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$el = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.isElementNode(el) ? el : document.querySelector(el);\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$el){\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$fragment = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.nodeToFragment(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$el);\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.init();\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$el.appendChild(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$fragment);\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$vm.$option[\x3cspan class=\x22hljs-string\x22\x3e\x27mount\x27\x3c\/span\x3e] \x26amp;\x26amp; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$vm.$option[\x3cspan class=\x22hljs-string\x22\x3e\x27mount\x27\x3c\/span\x3e].call(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$vm);\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e5.实现一个简易版的vue\x3c\/h2\x3e\n\x3cp\x3e到目前为止我们可以实现一个简单的数据双向绑定了，接下来要做的就是对这一套流程进行整合了，不多说上码\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function Wue(option){\n    this.$option = option;\n    var data = this._data = this.$option.data;\n    var _this = this;\n\n    \/\/数据代理实现数据从vm.xx == vm.$data.xx;\n    Object.keys(data).forEach(function(val){\n        _this._proxy(val)\n    });\n\n    observer(data)\n    this.$compile = new Compile(this.$option.el , this);\n}\n\nWue.prototype = {\n    $watch:function(expOrFn,cb){\n        return new Watcher(this,expOrFn,cb);\n    },\n    _proxy:function(key){\n        var _this = this;\n        Object.defineProperty(_this,key,{\n            configurable: false,\n            enumerable: true,\n            get:function(){\n                return _this._data[key];\n            },\n            set:function(newVal){\n                _this._data[key] = newVal;\n            }\n        })\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eWue\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(option)\x3c\/span\x3e\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$option = option;\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e data = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._data = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$option.data;\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e _this = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/数据代理实现数据从vm.xx == vm.$data.xx;\x3c\/span\x3e\n    Object.keys(data).forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(val)\x3c\/span\x3e\x3c\/span\x3e{\n        _this._proxy(val)\n    });\n\n    observer(data)\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$compile = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Compile(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$option.el , \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e);\n}\n\nWue.prototype = {\n    $watch:\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(expOrFn,cb)\x3c\/span\x3e\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Watcher(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e,expOrFn,cb);\n    },\n    _proxy:\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(key)\x3c\/span\x3e\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e _this = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n        Object.defineProperty(_this,key,{\n            configurable: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n            enumerable: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-keyword\x22\x3eget\x3c\/span\x3e:\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{\n                \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e _this._data[key];\n            },\n            \x3cspan class=\x22hljs-keyword\x22\x3eset\x3c\/span\x3e:\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(newVal)\x3c\/span\x3e\x3c\/span\x3e{\n                _this._data[key] = newVal;\n            }\n        })\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在这里定义了一个Wue构造函数，当实例化的时候他会对option的data属性进行格式化（劫持），然后再进行编译，让数据和视图建立起联系；在这里用_proxy进行数据代理是为了当访问数据时可以直接vm.xx而不需要vm._data.xx;\x3c\/p\x3e\n\x3cp\x3e源码放在\x3ca href=\x22https:\/\/github.com\/JasonCloud\/wue\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e这里\x3c\/a\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3e后话\x3c\/h2\x3e\n\x3cp\x3e在这里只是很初步的实现了一些vue的功能，而且还很残缺，比如对象的深层绑定，以及计算属性都还没有加入，作为后续部分吧，最后得膜拜一下尤神，太牛叉了！\x3c\/p\x3e\n\x3cp\x3e参考资料：\x3cbr\x3e 1.\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000006599500\x22\x3e\x3c\/a\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000006599500\x22 target=\x22_blank\x22\x3ehttps:\/\/segmentfault.com\/a\/11...\x3c\/a\x3e\x3cbr\x3e 2.\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000004384515\x22\x3e\x3c\/a\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000004384515\x22 target=\x22_blank\x22\x3ehttps:\/\/segmentfault.com\/a\/11...\x3c\/a\x3e\x3cbr\x3e 3.\x3ca href=\x22https:\/\/github.com\/youngwind\/blog\/issues\/87\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e\x3c\/a\x3e\x3ca href=\x22https:\/\/github.com\/youngwind\/blog\/issues\/87\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/youngwind\/...\x3c\/a\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>VUE的数据双向绑定</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000008584577">https://segmentfault.com/a/1190000008584577</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/gu8gacmk3di/" target="_blank">https://alili.tech/archive/gu8gacmk3di/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>