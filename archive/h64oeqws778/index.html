<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="vue-cli webpack配置分析"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>vue-cli webpack配置分析 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/h64oeqws778/",
				"appid": "1613049289050283", 
				"title": "vue-cli webpack配置分析 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-19T02:30:09"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/13mm6u7dsvn/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/ar5ohydid6r/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fh64oeqws778%2f&text=vue-cli%20webpack%e9%85%8d%e7%bd%ae%e5%88%86%e6%9e%90"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fh64oeqws778%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fh64oeqws778%2f&text=vue-cli%20webpack%e9%85%8d%e7%bd%ae%e5%88%86%e6%9e%90"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fh64oeqws778%2f&title=vue-cli%20webpack%e9%85%8d%e7%bd%ae%e5%88%86%e6%9e%90"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fh64oeqws778%2f&is_video=false&description=vue-cli%20webpack%e9%85%8d%e7%bd%ae%e5%88%86%e6%9e%90"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=vue-cli%20webpack%e9%85%8d%e7%bd%ae%e5%88%86%e6%9e%90&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fh64oeqws778%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fh64oeqws778%2f&title=vue-cli%20webpack%e9%85%8d%e7%bd%ae%e5%88%86%e6%9e%90"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fh64oeqws778%2f&title=vue-cli%20webpack%e9%85%8d%e7%bd%ae%e5%88%86%e6%9e%90"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fh64oeqws778%2f&title=vue-cli%20webpack%e9%85%8d%e7%bd%ae%e5%88%86%e6%9e%90"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fh64oeqws778%2f&title=vue-cli%20webpack%e9%85%8d%e7%bd%ae%e5%88%86%e6%9e%90"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">vue-cli webpack配置分析</h1><div class="meta"><div class="postdate"><time datetime="2019-01-19" itemprop="datePublished">2019-01-19</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e相信vue使用者对\x3ccode\x3evue-cli\x3c\/code\x3e都不会陌生，甚至可以说，很熟悉了，但对其\x3ccode\x3ewebpack\x3c\/code\x3e的配置可能知之甚少吧。\x3c\/p\x3e\n\x3cp\x3e过完年回来后，我接手了公司的新项目。新项目是一个spa。很自然，我就想到了vue-cli脚手架了，当时研究一下它的webpack配置。于是，就有了其他的内容。\x3c\/p\x3e\n\x3cp\x3e今天这篇文章，是在原来的基础上，增加了一些新版本的内容，但实质上变化不大。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e说明\x3c\/h2\x3e\n\x3cp\x3e此仓库为\x3ccode\x3evue-cli webpack\x3c\/code\x3e的配置分析，其实只是在源码中加上注释而已。大家查看详细分析，可以从后面提到的入口文件开始查看。\x3c\/p\x3e\n\x3cp\x3e分析不包括\x3ccode\x3echeck-versions.js\x3c\/code\x3e文件，因为\x3ccode\x3echeck-versions.js\x3c\/code\x3e是检测\x3ccode\x3enpm\x3c\/code\x3e和\x3ccode\x3enode\x3c\/code\x3e版本，不涉及\x3ccode\x3ewebpack\x3c\/code\x3e，所以就没有对\x3ccode\x3echeck-versions.js\x3c\/code\x3e进行分析。同时，也不包括测试部分的代码，该分析只是针对开发和生产环境的\x3ccode\x3ewebpack\x3c\/code\x3e配置进行分析。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3evue-cli 版本\x3c\/h2\x3e\n\x3cp\x3e2.8.1\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e入口\x3c\/h2\x3e\n\x3cp\x3e从\x3ccode\x3epackage.json\x3c\/code\x3e可以看到开发和生产环境的入口。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22  \x26quot;scripts\x26quot;: {\n    \x26quot;dev\x26quot;: \x26quot;node build\/dev-server.js\x26quot;,\n    \x26quot;build\x26quot;: \x26quot;node build\/build.js\x26quot;\n  }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e  \x3cspan class=\x22hljs-string\x22\x3e\x22scripts\x22\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-string\x22\x3e\x22dev\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22node build\/dev-server.js\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22build\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22node build\/build.js\x22\x3c\/span\x3e\n  }\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e开发环境\x3c\/h2\x3e\n\x3cp\x3e开发环境的入口文件是 \x3ca href=\x22https:\/\/github.com\/chenBright\/vue-cli-webpack-analysis\/blob\/master\/build\/dev-server.js\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ebuild\/dev-server.js\x3c\/a\x3e。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3edev-server.js\x3c\/h3\x3e\n\x3cp\x3e该文件中，使用express作为后端框架，结合一些关于webpack的中间件，搭建了一个开发环境。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 配置文件\nvar config = require(\x27..\/config\x27)\n\/\/ 如果 Node 的环境无法判断当前是 dev \/ product 环境\n\/\/ 使用 config.dev.env.NODE_ENV 作为当前的环境\nif (!process.env.NODE_ENV) {\n  process.env.NODE_ENV = JSON.parse(config.dev.env.NODE_ENV)\n}\n\n\/\/ 可以强制打开浏览器并跳转到指定 url 的插件\n\/\/ https:\/\/github.com\/sindresorhus\/opn\nvar opn = require(\x27opn\x27)\n\/\/ node自带的文件路径工具\nvar path = require(\x27path\x27)\n\/\/ express框架\nvar express = require(\x27express\x27)\nvar webpack = require(\x27webpack\x27)\n\/\/ 测试环境，使用的配置与生产环境的配置一样\n\/\/ 非测试环境，即为开发环境，因为此文件只有测试环境和开发环境使用\nvar proxyMiddleware = require(\x27http-proxy-middleware\x27)\nvar webpackConfig = process.env.NODE_ENV === \x27testing\x27\n\/\/ 生产环境配置文件\n  ? require(\x27.\/webpack.prod.conf\x27)\n  \/\/ 开发环境配置文件\n  : require(\x27.\/webpack.dev.conf\x27)\n\n\/\/ 端口号为命令行输入的PORT参数或者配置文件中的默认值\nvar port = process.env.PORT || config.dev.port\n\/\/ 配置文件中 是否自动打开浏览器\nvar autoOpenBrowser = !!config.dev.autoOpenBrowser\n\/\/ 配置文件中 http代理配置\n\/\/ https:\/\/github.com\/chimurai\/http-proxy-middleware\nvar proxyTable = config.dev.proxyTable\n\n\/\/ 启动 express 服务\nvar app = express()\n\/\/ 启动 webpack 编译\nvar compiler = webpack(webpackConfig)\n\n\/\/ 可以将编译后的文件暂存到内存中的插件\n\/\/ https:\/\/github.com\/webpack\/webpack-dev-middleware\nvar devMiddleware = require(\x27webpack-dev-middleware\x27)(compiler, {\n  \/\/ 公共路径，与webpack的publicPath一样\n  publicPath: webpackConfig.output.publicPath,\n  \/\/ 不打印\n  quiet: true\n})\n\n\/\/ Hot-reload 热重载插件\n\/\/ https:\/\/github.com\/glenjamin\/webpack-hot-middleware\nvar hotMiddleware = require(\x27webpack-hot-middleware\x27)(compiler, {\n  log: () =\x3e {}\n})\n\/\/ 当tml-webpack-plugin template更改之后，强制刷新浏览器\ncompiler.plugin(\x27compilation\x27, function (compilation) {\n  compilation.plugin(\x27html-webpack-plugin-after-emit\x27, function (data, cb) {\n    hotMiddleware.publish({ action: \x27reload\x27 })\n    cb()\n  })\n})\n\n\/\/ 将 proxyTable 中的请求配置挂在到启动的 express 服务上\nObject.keys(proxyTable).forEach(function (context) {\n  var options = proxyTable[context]\n  \/\/ 如果options的数据类型为string，则表示只设置了url，\n  \/\/ 所以需要将url设置为对象中的 target的值\n  if (typeof options === \x27string\x27) {\n    options = { target: options }\n  }\n  app.use(proxyMiddleware(options.filter || context, options))\n})\n\n\/\/ 使用 connect-history-api-fallback 匹配资源\n\/\/ 如果不匹配就可以重定向到指定地址\n\/\/ https:\/\/github.com\/bripkens\/connect-history-api-fallback\napp.use(require(\x27connect-history-api-fallback\x27)())\n\n\/\/ 将暂存到内存中的 webpack 编译后的文件挂在到 express 服务上\napp.use(devMiddleware)\n\n\/\/ 将 Hot-reload 挂在到 express 服务上\napp.use(hotMiddleware)\n\n\/\/ 拼接 static 文件夹的静态资源路径\nvar staticPath = path.posix.join(config.dev.assetsPublicPath, config.dev.assetsSubDirectory)\n\/\/ 静态文件服务\napp.use(staticPath, express.static(\x27.\/static\x27))\n\nvar uri = \x27http:\/\/localhost:\x27 \x2b port\n\n\/\/ 编译成功后打印网址信息\ndevMiddleware.waitUntilValid(function () {\n  console.log(\x27\x3e Listening at \x27 \x2b uri \x2b \x27\\n\x27)\n})\n\nmodule.exports = app.listen(port, function (err) {\n  if (err) {\n    console.log(err)\n    return\n  }\n\n  \/\/ 如果配置了自动打开浏览器，且不是测试环境，则自动打开浏览器并跳到我们的开发地址\n  if (autoOpenBrowser \x26amp;\x26amp; process.env.NODE_ENV !== \x27testing\x27) {\n    opn(uri)\n  }\n})\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 配置文件\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e config = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27..\/config\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 如果 Node 的环境无法判断当前是 dev \/ product 环境\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 使用 config.dev.env.NODE_ENV 作为当前的环境\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!process.env.NODE_ENV) {\n  process.env.NODE_ENV = \x3cspan class=\x22hljs-built_in\x22\x3eJSON\x3c\/span\x3e.parse(config.dev.env.NODE_ENV)\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 可以强制打开浏览器并跳转到指定 url 的插件\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ https:\/\/github.com\/sindresorhus\/opn\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e opn = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27opn\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ node自带的文件路径工具\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e path = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27path\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ express框架\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e express = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27express\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e webpack = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 测试环境，使用的配置与生产环境的配置一样\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 非测试环境，即为开发环境，因为此文件只有测试环境和开发环境使用\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e proxyMiddleware = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27http-proxy-middleware\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e webpackConfig = process.env.NODE_ENV === \x3cspan class=\x22hljs-string\x22\x3e\x27testing\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 生产环境配置文件\x3c\/span\x3e\n  ? \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/webpack.prod.conf\x27\x3c\/span\x3e)\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 开发环境配置文件\x3c\/span\x3e\n  : \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/webpack.dev.conf\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 端口号为命令行输入的PORT参数或者配置文件中的默认值\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e port = process.env.PORT || config.dev.port\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 配置文件中 是否自动打开浏览器\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e autoOpenBrowser = !!config.dev.autoOpenBrowser\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 配置文件中 http代理配置\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ https:\/\/github.com\/chimurai\/http-proxy-middleware\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e proxyTable = config.dev.proxyTable\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 启动 express 服务\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e app = express()\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 启动 webpack 编译\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e compiler = webpack(webpackConfig)\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 可以将编译后的文件暂存到内存中的插件\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ https:\/\/github.com\/webpack\/webpack-dev-middleware\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e devMiddleware = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack-dev-middleware\x27\x3c\/span\x3e)(compiler, {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 公共路径，与webpack的publicPath一样\x3c\/span\x3e\n  publicPath: webpackConfig.output.publicPath,\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 不打印\x3c\/span\x3e\n  quiet: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n})\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ Hot-reload 热重载插件\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ https:\/\/github.com\/glenjamin\/webpack-hot-middleware\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e hotMiddleware = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack-hot-middleware\x27\x3c\/span\x3e)(compiler, {\n  \x3cspan class=\x22hljs-attr\x22\x3elog\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {}\n})\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 当tml-webpack-plugin template更改之后，强制刷新浏览器\x3c\/span\x3e\ncompiler.plugin(\x3cspan class=\x22hljs-string\x22\x3e\x27compilation\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3ecompilation\x3c\/span\x3e) \x3c\/span\x3e{\n  compilation.plugin(\x3cspan class=\x22hljs-string\x22\x3e\x27html-webpack-plugin-after-emit\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3edata, cb\x3c\/span\x3e) \x3c\/span\x3e{\n    hotMiddleware.publish({ \x3cspan class=\x22hljs-attr\x22\x3eaction\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27reload\x27\x3c\/span\x3e })\n    cb()\n  })\n})\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 将 proxyTable 中的请求配置挂在到启动的 express 服务上\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.keys(proxyTable).forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3econtext\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e options = proxyTable[context]\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 如果options的数据类型为string，则表示只设置了url，\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 所以需要将url设置为对象中的 target的值\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e options === \x3cspan class=\x22hljs-string\x22\x3e\x27string\x27\x3c\/span\x3e) {\n    options = { \x3cspan class=\x22hljs-attr\x22\x3etarget\x3c\/span\x3e: options }\n  }\n  app.use(proxyMiddleware(options.filter || context, options))\n})\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 使用 connect-history-api-fallback 匹配资源\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 如果不匹配就可以重定向到指定地址\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ https:\/\/github.com\/bripkens\/connect-history-api-fallback\x3c\/span\x3e\napp.use(\x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27connect-history-api-fallback\x27\x3c\/span\x3e)())\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 将暂存到内存中的 webpack 编译后的文件挂在到 express 服务上\x3c\/span\x3e\napp.use(devMiddleware)\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 将 Hot-reload 挂在到 express 服务上\x3c\/span\x3e\napp.use(hotMiddleware)\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 拼接 static 文件夹的静态资源路径\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e staticPath = path.posix.join(config.dev.assetsPublicPath, config.dev.assetsSubDirectory)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 静态文件服务\x3c\/span\x3e\napp.use(staticPath, express.static(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/static\x27\x3c\/span\x3e))\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e uri = \x3cspan class=\x22hljs-string\x22\x3e\x27http:\/\/localhost:\x27\x3c\/span\x3e \x2b port\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 编译成功后打印网址信息\x3c\/span\x3e\ndevMiddleware.waitUntilValid(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27\x26gt; Listening at \x27\x3c\/span\x3e \x2b uri \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27\\n\x27\x3c\/span\x3e)\n})\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = app.listen(port, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eerr\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (err) {\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(err)\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e\n  }\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 如果配置了自动打开浏览器，且不是测试环境，则自动打开浏览器并跳到我们的开发地址\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (autoOpenBrowser \x26amp;\x26amp; process.env.NODE_ENV !== \x3cspan class=\x22hljs-string\x22\x3e\x27testing\x27\x3c\/span\x3e) {\n    opn(uri)\n  }\n})\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3ewebpack.dev.conf.js\x3c\/h3\x3e\n\x3cp\x3e\x3ccode\x3edev-server.js\x3c\/code\x3e中使用了\x3ccode\x3ewebpack.dev.conf.js\x3c\/code\x3e文件，该文件是开发环境中webpack的配置入口。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 工具函数集合\nvar utils = require(\x27.\/utils\x27)\nvar webpack = require(\x27webpack\x27)\n  \/\/ 配置文件\nvar config = require(\x27..\/config\x27)\n  \/\/ webpack 配置合并插件\nvar merge = require(\x27webpack-merge\x27)\n  \/\/ webpac基本配置\nvar baseWebpackConfig = require(\x27.\/webpack.base.conf\x27)\n  \/\/ 自动生成 html 并且注入到 .html 文件中的插件\n  \/\/ https:\/\/github.com\/ampedandwired\/html-webpack-plugin\nvar HtmlWebpackPlugin = require(\x27html-webpack-plugin\x27)\n  \/\/ webpack错误信息提示插件\n  \/\/ https:\/\/github.com\/geowarin\/friendly-errors-webpack-plugin\nvar FriendlyErrorsPlugin = require(\x27friendly-errors-webpack-plugin\x27)\n\n\/\/ 将 Hol-reload 热重载的客户端代码添加到 webpack.base.conf 的 对应 entry 中，一起打包\nObject.keys(baseWebpackConfig.entry).forEach(function(name) {\n  baseWebpackConfig.entry[name] = [\x27.\/build\/dev-client\x27].concat(baseWebpackConfig.entry[name])\n})\n\nmodule.exports = merge(baseWebpackConfig, {\n  module: {\n    \/\/ styleLoaders\n    rules: utils.styleLoaders({ sourceMap: config.dev.cssSourceMap })\n  },\n  \/\/ 最新的配置为 cheap-module-eval-source-map，虽然 cheap-module-eval-source-map更快，但它的定位不准确\n  \/\/ 所以，换成 eval-source-map\n  devtool: \x27#eval-source-map\x27,\n  plugins: [\n    \/\/ definePlugin 接收字符串插入到代码当中, 所以你需要的话可以写上 JS 的字符串\n    \/\/ 此处，插入适当的环境\n    \/\/ https:\/\/webpack.js.org\/plugins\/define-plugin\/\n    new webpack.DefinePlugin({\n      \x27process.env\x27: config.dev.env\n    }),\n    \/\/ HotModule 插件在页面进行变更的时候只会重绘对应的页面模块，不会重绘整个 html 文件\n    \/\/ https:\/\/github.com\/glenjamin\/webpack-hot-middleware#installation--usage\n    new webpack.HotModuleReplacementPlugin(),\n    new webpack.NoEmitOnErrorsPlugin(),\n    \/\/ 将 index.html 作为入口，注入 html 代码后生成 index.html文件\n    \/\/ https:\/\/github.com\/ampedandwired\/html-webpack-plugin\n    new HtmlWebpackPlugin({\n      filename: \x27index.html\x27,\n      template: \x27index.html\x27,\n      inject: true\n    }),\n    \/\/ webpack错误信息提示插件\n    new FriendlyErrorsPlugin()\n  ]\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 工具函数集合\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e utils = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/utils\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e webpack = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack\x27\x3c\/span\x3e)\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 配置文件\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e config = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27..\/config\x27\x3c\/span\x3e)\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ webpack 配置合并插件\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e merge = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack-merge\x27\x3c\/span\x3e)\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ webpac基本配置\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e baseWebpackConfig = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/webpack.base.conf\x27\x3c\/span\x3e)\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 自动生成 html 并且注入到 .html 文件中的插件\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ https:\/\/github.com\/ampedandwired\/html-webpack-plugin\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e HtmlWebpackPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27html-webpack-plugin\x27\x3c\/span\x3e)\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ webpack错误信息提示插件\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ https:\/\/github.com\/geowarin\/friendly-errors-webpack-plugin\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e FriendlyErrorsPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27friendly-errors-webpack-plugin\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 将 Hol-reload 热重载的客户端代码添加到 webpack.base.conf 的 对应 entry 中，一起打包\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.keys(baseWebpackConfig.entry).forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ename\x3c\/span\x3e) \x3c\/span\x3e{\n  baseWebpackConfig.entry[name] = [\x3cspan class=\x22hljs-string\x22\x3e\x27.\/build\/dev-client\x27\x3c\/span\x3e].concat(baseWebpackConfig.entry[name])\n})\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = merge(baseWebpackConfig, {\n  \x3cspan class=\x22hljs-attr\x22\x3emodule\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ styleLoaders\x3c\/span\x3e\n    rules: utils.styleLoaders({ \x3cspan class=\x22hljs-attr\x22\x3esourceMap\x3c\/span\x3e: config.dev.cssSourceMap })\n  },\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 最新的配置为 cheap-module-eval-source-map，虽然 cheap-module-eval-source-map更快，但它的定位不准确\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 所以，换成 eval-source-map\x3c\/span\x3e\n  devtool: \x3cspan class=\x22hljs-string\x22\x3e\x27#eval-source-map\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3eplugins\x3c\/span\x3e: [\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ definePlugin 接收字符串插入到代码当中, 所以你需要的话可以写上 JS 的字符串\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 此处，插入适当的环境\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ https:\/\/webpack.js.org\/plugins\/define-plugin\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.DefinePlugin({\n      \x3cspan class=\x22hljs-string\x22\x3e\x27process.env\x27\x3c\/span\x3e: config.dev.env\n    }),\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ HotModule 插件在页面进行变更的时候只会重绘对应的页面模块，不会重绘整个 html 文件\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ https:\/\/github.com\/glenjamin\/webpack-hot-middleware#installation--usage\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.HotModuleReplacementPlugin(),\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.NoEmitOnErrorsPlugin(),\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 将 index.html 作为入口，注入 html 代码后生成 index.html文件\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ https:\/\/github.com\/ampedandwired\/html-webpack-plugin\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e HtmlWebpackPlugin({\n      \x3cspan class=\x22hljs-attr\x22\x3efilename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27index.html\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3etemplate\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27index.html\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3einject\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n    }),\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ webpack错误信息提示插件\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e FriendlyErrorsPlugin()\n  ]\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3ewebpack.base.conf.js\x3c\/h3\x3e\n\x3cp\x3e在\x3ccode\x3ewebpack.dev.conf.js\x3c\/code\x3e中出现\x3ccode\x3ewebpack.base.conf.js\x3c\/code\x3e，这个文件是开发环境和生产环境，甚至测试环境，这些环境的公共webpack配置。可以说，这个文件相当重要。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ node自带的文件路径工具\nvar path = require(\x27path\x27)\n\/\/ 工具函数集合\nvar utils = require(\x27.\/utils\x27)\n  \/\/ 配置文件\nvar config = require(\x27..\/config\x27)\n  \/\/ 工具函数集合\nvar vueLoaderConfig = require(\x27.\/vue-loader.conf\x27)\n\n\/**\n * 获得绝对路径\n * @method resolve\n * @param  {String} dir 相对于本文件的路径\n * @return {String}     绝对路径\n *\/\nfunction resolve(dir) {\n  return path.join(__dirname, \x27..\x27, dir)\n}\n\nmodule.exports = {\n  entry: {\n    app: \x27.\/src\/main.js\x27\n  },\n  output: {\n    \/\/ 编译输出的静态资源根路径\n    path: config.build.assetsRoot,\n    \/\/ 编译输出的文件名\n    filename: \x27[name].js\x27,\n    \/\/ 正式发布环境下编译输出的上线路径的根路径\n    publicPath: process.env.NODE_ENV === \x27production\x27 ?\n      config.build.assetsPublicPath : config.dev.assetsPublicPath\n  },\n  resolve: {\n    \/\/ 自动补全的扩展名\n    extensions: [\x27.js\x27, \x27.vue\x27, \x27.json\x27],\n    \/\/ 路径别名\n    alias: {\n      \/\/ 例如 import Vue from \x27vue\x27，会自动到 \x27vue\/dist\/vue.common.js\x27中寻找\n      \x27vue$\x27: \x27vue\/dist\/vue.esm.js\x27,\n      \x27@\x27: resolve(\x27src\x27),\n    }\n  },\n  module: {\n    rules: [{\n        \/\/ 审查 js 和 vue 文件\n        \/\/ https:\/\/github.com\/MoOx\/eslint-loader\n        test: \/\\.(js|vue)$\/,\n        loader: \x27eslint-loader\x27,\n        \/\/ 表示预先处理\n        enforce: \x26quot;pre\x26quot;,\n        include: [resolve(\x27src\x27), resolve(\x27test\x27)],\n        options: {\n          formatter: require(\x27eslint-friendly-formatter\x27)\n        }\n      },\n      {\n        \/\/ 处理 vue文件\n        \/\/ https:\/\/github.com\/vuejs\/vue-loader\n        test: \/\\.vue$\/,\n        loader: \x27vue-loader\x27,\n        options: vueLoaderConfig\n      },\n      {\n        \/\/ 编译 js\n        \/\/ https:\/\/github.com\/babel\/babel-loader\n        test: \/\\.js$\/,\n        loader: \x27babel-loader\x27,\n        include: [resolve(\x27src\x27), resolve(\x27test\x27)]\n      },\n      {\n        \/\/ 处理图片文件\n        \/\/ https:\/\/github.com\/webpack-contrib\/url-loader\n        test: \/\\.(png|jpe?g|gif|svg)(\\?.*)?$\/,\n        loader: \x27url-loader\x27,\n        query: {\n          limit: 10000,\n          name: utils.assetsPath(\x27img\/[name].[hash:7].[ext]\x27)\n        }\n      },\n      {\n        \/\/ 处理字体文件\n        test: \/\\.(woff2?|eot|ttf|otf)(\\?.*)?$\/,\n        loader: \x27url-loader\x27,\n        query: {\n          limit: 10000,\n          name: utils.assetsPath(\x27fonts\/[name].[hash:7].[ext]\x27)\n        }\n      }\n    ]\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ node自带的文件路径工具\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e path = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27path\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 工具函数集合\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e utils = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/utils\x27\x3c\/span\x3e)\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 配置文件\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e config = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27..\/config\x27\x3c\/span\x3e)\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 工具函数集合\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e vueLoaderConfig = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/vue-loader.conf\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * 获得绝对路径\n * @method resolve\n * @param  {String} dir 相对于本文件的路径\n * @return {String}     绝对路径\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eresolve\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edir\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27..\x27\x3c\/span\x3e, dir)\n}\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n  \x3cspan class=\x22hljs-attr\x22\x3eentry\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3eapp\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27.\/src\/main.js\x27\x3c\/span\x3e\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3eoutput\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 编译输出的静态资源根路径\x3c\/span\x3e\n    path: config.build.assetsRoot,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 编译输出的文件名\x3c\/span\x3e\n    filename: \x3cspan class=\x22hljs-string\x22\x3e\x27[name].js\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 正式发布环境下编译输出的上线路径的根路径\x3c\/span\x3e\n    publicPath: process.env.NODE_ENV === \x3cspan class=\x22hljs-string\x22\x3e\x27production\x27\x3c\/span\x3e ?\n      config.build.assetsPublicPath : config.dev.assetsPublicPath\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3eresolve\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 自动补全的扩展名\x3c\/span\x3e\n    extensions: [\x3cspan class=\x22hljs-string\x22\x3e\x27.js\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27.vue\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27.json\x27\x3c\/span\x3e],\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 路径别名\x3c\/span\x3e\n    alias: {\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 例如 import Vue from \x27vue\x27，会自动到 \x27vue\/dist\/vue.common.js\x27中寻找\x3c\/span\x3e\n      \x3cspan class=\x22hljs-string\x22\x3e\x27vue$\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27vue\/dist\/vue.esm.js\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-string\x22\x3e\x27@\x27\x3c\/span\x3e: resolve(\x3cspan class=\x22hljs-string\x22\x3e\x27src\x27\x3c\/span\x3e),\n    }\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3emodule\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3erules\x3c\/span\x3e: [{\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 审查 js 和 vue 文件\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ https:\/\/github.com\/MoOx\/eslint-loader\x3c\/span\x3e\n        test: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.(js|vue)$\/\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27eslint-loader\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 表示预先处理\x3c\/span\x3e\n        enforce: \x3cspan class=\x22hljs-string\x22\x3e\x22pre\x22\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3einclude\x3c\/span\x3e: [resolve(\x3cspan class=\x22hljs-string\x22\x3e\x27src\x27\x3c\/span\x3e), resolve(\x3cspan class=\x22hljs-string\x22\x3e\x27test\x27\x3c\/span\x3e)],\n        \x3cspan class=\x22hljs-attr\x22\x3eoptions\x3c\/span\x3e: {\n          \x3cspan class=\x22hljs-attr\x22\x3eformatter\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27eslint-friendly-formatter\x27\x3c\/span\x3e)\n        }\n      },\n      {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 处理 vue文件\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ https:\/\/github.com\/vuejs\/vue-loader\x3c\/span\x3e\n        test: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.vue$\/\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27vue-loader\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eoptions\x3c\/span\x3e: vueLoaderConfig\n      },\n      {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 编译 js\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ https:\/\/github.com\/babel\/babel-loader\x3c\/span\x3e\n        test: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.js$\/\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27babel-loader\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3einclude\x3c\/span\x3e: [resolve(\x3cspan class=\x22hljs-string\x22\x3e\x27src\x27\x3c\/span\x3e), resolve(\x3cspan class=\x22hljs-string\x22\x3e\x27test\x27\x3c\/span\x3e)]\n      },\n      {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 处理图片文件\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ https:\/\/github.com\/webpack-contrib\/url-loader\x3c\/span\x3e\n        test: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.(png|jpe?g|gif|svg)(\\?.*)?$\/\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27url-loader\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3equery\x3c\/span\x3e: {\n          \x3cspan class=\x22hljs-attr\x22\x3elimit\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e10000\x3c\/span\x3e,\n          \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: utils.assetsPath(\x3cspan class=\x22hljs-string\x22\x3e\x27img\/[name].[hash:7].[ext]\x27\x3c\/span\x3e)\n        }\n      },\n      {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 处理字体文件\x3c\/span\x3e\n        test: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.(woff2?|eot|ttf|otf)(\\?.*)?$\/\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27url-loader\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3equery\x3c\/span\x3e: {\n          \x3cspan class=\x22hljs-attr\x22\x3elimit\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e10000\x3c\/span\x3e,\n          \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: utils.assetsPath(\x3cspan class=\x22hljs-string\x22\x3e\x27fonts\/[name].[hash:7].[ext]\x27\x3c\/span\x3e)\n        }\n      }\n    ]\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3econfig\/index.js\x3c\/h3\x3e\n\x3cp\x3e该文件在很多文件中都用到，是主要的配置文件，包含静态文件的路径、是否开启sourceMap等。其中，分为两个部分\x3ccode\x3edev\x3c\/code\x3e（开发环境的配置）和\x3ccode\x3ebuild\x3c\/code\x3e（生产环境的配置）。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 详情见文档：https:\/\/vuejs-templates.github.io\/webpack\/env.html\nvar path = require(\x27path\x27)\n\nmodule.exports = {\n  \/\/ production 生产环境\n  build: {\n    \/\/ 构建环境\n    env: require(\x27.\/prod.env\x27),\n    \/\/ 构建输出的index.html文件\n    index: path.resolve(__dirname, \x27..\/dist\/index.html\x27),\n    \/\/ 构建输出的静态资源路径\n    assetsRoot: path.resolve(__dirname, \x27..\/dist\x27),\n    \/\/ 构建输出的二级目录\n    assetsSubDirectory: \x27static\x27,\n    \/\/ 构建发布的根目录，可配置为资源服务器域名或 CDN 域名\n    assetsPublicPath: \x27\/\x27,\n    \/\/ 是否开启 cssSourceMap\n    productionSourceMap: true,\n    \/\/ Gzip off by default as many popular static hosts such as\n    \/\/ Surge or Netlify already gzip all static assets for you.\n    \/\/ Before setting to `true`, make sure to:\n    \/\/ npm install --save-dev compression-webpack-plugin\n    \/\/ 默认关闭 gzip，因为很多流行的静态资源主机，例如 Surge、Netlify，已经为所有静态资源开启gzip\n    productionGzip: false,\n    \/\/ 需要使用 gzip 压缩的文件扩展名\n    productionGzipExtensions: [\x27js\x27, \x27css\x27],\n    \/\/ Run the build command with an extra argument to\n    \/\/ View the bundle analyzer report after build finishes:\n    \/\/ `npm run build --report`\n    \/\/ Set to `true` or `false` to always turn it on or off\n    \/\/ 运行“build”命令行时，加上一个参数，可以在构建完成后参看包分析报告\n    \/\/ true为开启，false为关闭\n    bundleAnalyzerReport: process.env.npm_config_report\n  },\n  \/\/ dev 开发环境\n  dev: {\n    \/\/ 构建环境\n    env: require(\x27.\/dev.env\x27),\n    \/\/ 端口号\n    port: 3333,\n    \/\/ 是否自动打开浏览器\n    autoOpenBrowser: true,\n    assetsSubDirectory: \x27static\x27,\n    \/\/ 编译发布的根目录，可配置为资源服务器域名或 CDN 域名\n    assetsPublicPath: \x27\/\x27,\n    \/\/ proxyTable 代理的接口（可跨域）\n    \/\/ 使用方法：https:\/\/vuejs-templates.github.io\/webpack\/proxy.html\n    proxyTable: {},\n    \/\/ CSS Sourcemaps off by default because relative paths are \x26quot;buggy\x26quot;\n    \/\/ with this option, according to the CSS-Loader README\n    \/\/ (https:\/\/github.com\/webpack\/css-loader#sourcemaps)\n    \/\/ In our experience, they generally work as expected,\n    \/\/ just be aware of this issue when enabling this option.\n    \/\/ 默认情况下，关闭 CSS Sourcemaps，因为使用相对路径会报错。\n    \/\/ CSS-Loader README：https:\/\/github.com\/webpack\/css-loader#sourcemaps\n    cssSourceMap: false\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 详情见文档：https:\/\/vuejs-templates.github.io\/webpack\/env.html\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e path = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27path\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ production 生产环境\x3c\/span\x3e\n  build: {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 构建环境\x3c\/span\x3e\n    env: \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/prod.env\x27\x3c\/span\x3e),\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 构建输出的index.html文件\x3c\/span\x3e\n    index: path.resolve(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27..\/dist\/index.html\x27\x3c\/span\x3e),\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 构建输出的静态资源路径\x3c\/span\x3e\n    assetsRoot: path.resolve(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27..\/dist\x27\x3c\/span\x3e),\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 构建输出的二级目录\x3c\/span\x3e\n    assetsSubDirectory: \x3cspan class=\x22hljs-string\x22\x3e\x27static\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 构建发布的根目录，可配置为资源服务器域名或 CDN 域名\x3c\/span\x3e\n    assetsPublicPath: \x3cspan class=\x22hljs-string\x22\x3e\x27\/\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 是否开启 cssSourceMap\x3c\/span\x3e\n    productionSourceMap: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Gzip off by default as many popular static hosts such as\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Surge or Netlify already gzip all static assets for you.\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Before setting to `true`, make sure to:\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ npm install --save-dev compression-webpack-plugin\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 默认关闭 gzip，因为很多流行的静态资源主机，例如 Surge、Netlify，已经为所有静态资源开启gzip\x3c\/span\x3e\n    productionGzip: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 需要使用 gzip 压缩的文件扩展名\x3c\/span\x3e\n    productionGzipExtensions: [\x3cspan class=\x22hljs-string\x22\x3e\x27js\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27css\x27\x3c\/span\x3e],\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Run the build command with an extra argument to\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ View the bundle analyzer report after build finishes:\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ `npm run build --report`\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Set to `true` or `false` to always turn it on or off\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 运行“build”命令行时，加上一个参数，可以在构建完成后参看包分析报告\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ true为开启，false为关闭\x3c\/span\x3e\n    bundleAnalyzerReport: process.env.npm_config_report\n  },\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ dev 开发环境\x3c\/span\x3e\n  dev: {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 构建环境\x3c\/span\x3e\n    env: \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/dev.env\x27\x3c\/span\x3e),\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 端口号\x3c\/span\x3e\n    port: \x3cspan class=\x22hljs-number\x22\x3e3333\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 是否自动打开浏览器\x3c\/span\x3e\n    autoOpenBrowser: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3eassetsSubDirectory\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27static\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 编译发布的根目录，可配置为资源服务器域名或 CDN 域名\x3c\/span\x3e\n    assetsPublicPath: \x3cspan class=\x22hljs-string\x22\x3e\x27\/\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ proxyTable 代理的接口（可跨域）\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 使用方法：https:\/\/vuejs-templates.github.io\/webpack\/proxy.html\x3c\/span\x3e\n    proxyTable: {},\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ CSS Sourcemaps off by default because relative paths are \x22buggy\x22\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ with this option, according to the CSS-Loader README\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ (https:\/\/github.com\/webpack\/css-loader#sourcemaps)\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ In our experience, they generally work as expected,\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ just be aware of this issue when enabling this option.\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 默认情况下，关闭 CSS Sourcemaps，因为使用相对路径会报错。\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ CSS-Loader README：https:\/\/github.com\/webpack\/css-loader#sourcemaps\x3c\/span\x3e\n    cssSourceMap: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader8\x22\x3eutils.js\x3c\/h3\x3e\n\x3cp\x3e\x3ccode\x3eutils.js\x3c\/code\x3e也是一个被使用频率的文件，这个文件包含了三个工具函数：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e生成静态资源的路径\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e生成 ExtractTextPlugin对象或loader字符串\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e生成 style-loader的配置\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ node自带的文件路径工具\nvar path = require(\x27path\x27)\n\/\/ 配置文件\nvar config = require(\x27..\/config\x27)\n\/\/ 提取css的插件\n\/\/ https:\/\/github.com\/webpack-contrib\/extract-text-webpack-plugin\nvar ExtractTextPlugin = require(\x27extract-text-webpack-plugin\x27)\n\n\/**\n * 生成静态资源的路径\n * @method assertsPath\n * @param  {String}    _path 相对于静态资源文件夹的文件路径\n * @return {String}          静态资源完整路径\n *\/\nexports.assetsPath = function (_path) {\n  var assetsSubDirectory = process.env.NODE_ENV === \x27production\x27\n    ? config.build.assetsSubDirectory\n    : config.dev.assetsSubDirectory\n    \/\/  path.posix.join与path.join一样，不过总是以 posix 兼容的方式交互\n  return path.posix.join(assetsSubDirectory, _path)\n}\n\n\/**\n * 生成处理css的loaders配置\n * @method cssLoaders\n * @param  {Object}   options 生成配置\n *                            option = {\n *                              \/\/ 是否开启 sourceMap\n *                              sourceMap: true,\n *                              \/\/ 是否提取css\n *                              extract: true\n *                            }\n * @return {Object}           处理css的loaders配置对象\n *\/\nexports.cssLoaders = function (options) {\n  options = options || {}\n\n  var cssLoader = {\n    loader: \x27css-loader\x27,\n    options: {\n      minimize: process.env.NODE_ENV === \x27production\x27,\n      sourceMap: options.sourceMap\n    }\n  }\n  \/**\n   * 生成 ExtractTextPlugin对象或loader字符串\n   * @method generateLoaders\n   * @param  {Array}        loaders loader名称数组\n   * @return {String|Object}        ExtractTextPlugin对象或loader字符串\n   *\/\n  function generateLoaders (loader, loaderOptions) {\n    var loaders = [cssLoader]\n    if (loader) {\n      loaders.push({\n        \/\/ 例如，sass?indentedSyntax\n        \/\/ 在?号前加上“-loader”\n        loader: loader \x2b \x27-loader\x27,\n        options: Object.assign({}, loaderOptions, {\n          sourceMap: options.sourceMap\n        })\n      })\n    }\n\n    \/\/ extract为true时，提取css\n    \/\/ 生产环境中，默认为true\n    if (options.extract) {\n      return ExtractTextPlugin.extract({\n        use: loaders,\n        fallback: \x27vue-style-loader\x27\n      })\n    } else {\n      return [\x27vue-style-loader\x27].concat(loaders)\n    }\n  }\n\n  \/\/ http:\/\/vuejs.github.io\/vue-loader\/en\/configurations\/extract-css.html\n  return {\n    css: generateLoaders(),\n    postcss: generateLoaders(),\n    less: generateLoaders(\x27less\x27),\n    sass: generateLoaders(\x27sass\x27, { indentedSyntax: true }),\n    scss: generateLoaders(\x27sass\x27),\n    stylus: generateLoaders(\x27stylus\x27),\n    styl: generateLoaders(\x27stylus\x27)\n  }\n}\n\n\/**\n * 生成 style-loader的配置\n * style-loader文档：https:\/\/github.com\/webpack\/style-loader\n * @method styleLoaders\n * @param  {Object}     options 生成配置\n *                              option = {\n *                                \/\/ 是否开启 sourceMap\n *                                sourceMap: true,\n *                                \/\/ 是否提取css\n *                                extract: true\n *                              }\n * @return {Array}              style-loader的配置\n *\/\nexports.styleLoaders = function (options) {\n  var output = []\n  var loaders = exports.cssLoaders(options)\n  for (var extension in loaders) {\n    var loader = loaders[extension]\n    output.push({\n      test: new RegExp(\x27\\\\.\x27 \x2b extension \x2b \x27$\x27),\n      use: loader\n    })\n  }\n  return output\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ node自带的文件路径工具\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e path = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27path\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 配置文件\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e config = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27..\/config\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 提取css的插件\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ https:\/\/github.com\/webpack-contrib\/extract-text-webpack-plugin\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ExtractTextPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27extract-text-webpack-plugin\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * 生成静态资源的路径\n * @method assertsPath\n * @param  {String}    _path 相对于静态资源文件夹的文件路径\n * @return {String}          静态资源完整路径\n *\/\x3c\/span\x3e\nexports.assetsPath = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e_path\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e assetsSubDirectory = process.env.NODE_ENV === \x3cspan class=\x22hljs-string\x22\x3e\x27production\x27\x3c\/span\x3e\n    ? config.build.assetsSubDirectory\n    : config.dev.assetsSubDirectory\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/  path.posix.join与path.join一样，不过总是以 posix 兼容的方式交互\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e path.posix.join(assetsSubDirectory, _path)\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * 生成处理css的loaders配置\n * @method cssLoaders\n * @param  {Object}   options 生成配置\n *                            option = {\n *                              \/\/ 是否开启 sourceMap\n *                              sourceMap: true,\n *                              \/\/ 是否提取css\n *                              extract: true\n *                            }\n * @return {Object}           处理css的loaders配置对象\n *\/\x3c\/span\x3e\nexports.cssLoaders = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eoptions\x3c\/span\x3e) \x3c\/span\x3e{\n  options = options || {}\n\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e cssLoader = {\n    \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27css-loader\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3eoptions\x3c\/span\x3e: {\n      \x3cspan class=\x22hljs-attr\x22\x3eminimize\x3c\/span\x3e: process.env.NODE_ENV === \x3cspan class=\x22hljs-string\x22\x3e\x27production\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3esourceMap\x3c\/span\x3e: options.sourceMap\n    }\n  }\n  \x3cspan class=\x22hljs-comment\x22\x3e\/**\n   * 生成 ExtractTextPlugin对象或loader字符串\n   * @method generateLoaders\n   * @param  {Array}        loaders loader名称数组\n   * @return {String|Object}        ExtractTextPlugin对象或loader字符串\n   *\/\x3c\/span\x3e\n  \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3egenerateLoaders\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eloader, loaderOptions\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e loaders = [cssLoader]\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (loader) {\n      loaders.push({\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 例如，sass?indentedSyntax\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 在?号前加上“-loader”\x3c\/span\x3e\n        loader: loader \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27-loader\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eoptions\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.assign({}, loaderOptions, {\n          \x3cspan class=\x22hljs-attr\x22\x3esourceMap\x3c\/span\x3e: options.sourceMap\n        })\n      })\n    }\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ extract为true时，提取css\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 生产环境中，默认为true\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (options.extract) {\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e ExtractTextPlugin.extract({\n        \x3cspan class=\x22hljs-attr\x22\x3euse\x3c\/span\x3e: loaders,\n        \x3cspan class=\x22hljs-attr\x22\x3efallback\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27vue-style-loader\x27\x3c\/span\x3e\n      })\n    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e [\x3cspan class=\x22hljs-string\x22\x3e\x27vue-style-loader\x27\x3c\/span\x3e].concat(loaders)\n    }\n  }\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ http:\/\/vuejs.github.io\/vue-loader\/en\/configurations\/extract-css.html\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-attr\x22\x3ecss\x3c\/span\x3e: generateLoaders(),\n    \x3cspan class=\x22hljs-attr\x22\x3epostcss\x3c\/span\x3e: generateLoaders(),\n    \x3cspan class=\x22hljs-attr\x22\x3eless\x3c\/span\x3e: generateLoaders(\x3cspan class=\x22hljs-string\x22\x3e\x27less\x27\x3c\/span\x3e),\n    \x3cspan class=\x22hljs-attr\x22\x3esass\x3c\/span\x3e: generateLoaders(\x3cspan class=\x22hljs-string\x22\x3e\x27sass\x27\x3c\/span\x3e, { \x3cspan class=\x22hljs-attr\x22\x3eindentedSyntax\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e }),\n    \x3cspan class=\x22hljs-attr\x22\x3escss\x3c\/span\x3e: generateLoaders(\x3cspan class=\x22hljs-string\x22\x3e\x27sass\x27\x3c\/span\x3e),\n    \x3cspan class=\x22hljs-attr\x22\x3estylus\x3c\/span\x3e: generateLoaders(\x3cspan class=\x22hljs-string\x22\x3e\x27stylus\x27\x3c\/span\x3e),\n    \x3cspan class=\x22hljs-attr\x22\x3estyl\x3c\/span\x3e: generateLoaders(\x3cspan class=\x22hljs-string\x22\x3e\x27stylus\x27\x3c\/span\x3e)\n  }\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * 生成 style-loader的配置\n * style-loader文档：https:\/\/github.com\/webpack\/style-loader\n * @method styleLoaders\n * @param  {Object}     options 生成配置\n *                              option = {\n *                                \/\/ 是否开启 sourceMap\n *                                sourceMap: true,\n *                                \/\/ 是否提取css\n *                                extract: true\n *                              }\n * @return {Array}              style-loader的配置\n *\/\x3c\/span\x3e\nexports.styleLoaders = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eoptions\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e output = []\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e loaders = exports.cssLoaders(options)\n  \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e extension \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e loaders) {\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e loader = loaders[extension]\n    output.push({\n      \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eRegExp\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27\\\\.\x27\x3c\/span\x3e \x2b extension \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27$\x27\x3c\/span\x3e),\n      \x3cspan class=\x22hljs-attr\x22\x3euse\x3c\/span\x3e: loader\n    })\n  }\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e output\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader9\x22\x3e生产环境\x3c\/h2\x3e\n\x3cp\x3e开发环境的入口文件是\x3ca href=\x22https:\/\/github.com\/chenBright\/vue-cli-webpack-analysis\/blob\/master\/build\/build.js\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e\x3ccode\x3ebuild\/build.js \x3c\/code\x3e\x3c\/a\x3e。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader10\x22\x3ebuild.js\x3c\/h3\x3e\n\x3cp\x3e该文件，为构建打包文件，会将源码进行构建（编译、压缩等）后打包。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 设置当前环境为生产环境\nprocess.env.NODE_ENV = \x27production\x27\n\n\/\/ loading 插件\n\/\/ https:\/\/github.com\/sindresorhus\/ora\nvar ora = require(\x27ora\x27)\n\/\/ 可以在 node 中执行`rm -rf`的工具\n\/\/ https:\/\/github.com\/isaacs\/rimraf\nvar rm = require(\x27rimraf\x27)\n\/\/ node自带的文件路径工具\nvar path = require(\x27path\x27)\n\/\/ 在终端输出带颜色的文字\n\/\/ https:\/\/github.com\/chalk\/chalk\nvar chalk = require(\x27chalk\x27)\nvar webpack = require(\x27webpack\x27)\n\/\/ 配置文件\nvar config = require(\x27..\/config\x27)\nvar webpackConfig = require(\x27.\/webpack.prod.conf\x27)\n\n\/\/ 在终端显示loading效果，并输出提示\nvar spinner = ora(\x27building for production...\x27)\nspinner.start()\n\n\/\/ 删除这个文件夹 （递归删除）\nrm(path.join(config.build.assetsRoot, config.build.assetsSubDirectory), err =\x3e {\n  if (err) throw err\n  \/\/ 构建\n  webpack(webpackConfig, function (err, stats) {\n    \/\/ 构建成功\n\n    \/\/ 停止 loading动画\n    spinner.stop()\n    if (err) throw err\n    process.stdout.write(stats.toString({\n      colors: true,\n      modules: false,\n      children: false,\n      chunks: false,\n      chunkModules: false\n    }) \x2b \x27\\n\\n\x27)\n\n    \/\/ 打印提示\n    console.log(chalk.cyan(\x27  Build complete.\\n\x27))\n    console.log(chalk.yellow(\n      \x27  Tip: built files are meant to be served over an HTTP server.\\n\x27 \x2b\n      \x27  Opening index.html over file:\/\/ won\\\x27t work.\\n\x27\n    ))\n  })\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 设置当前环境为生产环境\x3c\/span\x3e\nprocess.env.NODE_ENV = \x3cspan class=\x22hljs-string\x22\x3e\x27production\x27\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ loading 插件\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ https:\/\/github.com\/sindresorhus\/ora\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ora = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27ora\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 可以在 node 中执行`rm -rf`的工具\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ https:\/\/github.com\/isaacs\/rimraf\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e rm = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27rimraf\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ node自带的文件路径工具\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e path = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27path\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 在终端输出带颜色的文字\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ https:\/\/github.com\/chalk\/chalk\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e chalk = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27chalk\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e webpack = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 配置文件\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e config = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27..\/config\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e webpackConfig = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/webpack.prod.conf\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 在终端显示loading效果，并输出提示\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e spinner = ora(\x3cspan class=\x22hljs-string\x22\x3e\x27building for production...\x27\x3c\/span\x3e)\nspinner.start()\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 删除这个文件夹 （递归删除）\x3c\/span\x3e\nrm(path.join(config.build.assetsRoot, config.build.assetsSubDirectory), err =\x26gt; {\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (err) \x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e err\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 构建\x3c\/span\x3e\n  webpack(webpackConfig, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eerr, stats\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 构建成功\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 停止 loading动画\x3c\/span\x3e\n    spinner.stop()\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (err) \x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e err\n    process.stdout.write(stats.toString({\n      \x3cspan class=\x22hljs-attr\x22\x3ecolors\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3emodules\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3echildren\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3echunks\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3echunkModules\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n    }) \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27\\n\\n\x27\x3c\/span\x3e)\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 打印提示\x3c\/span\x3e\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(chalk.cyan(\x3cspan class=\x22hljs-string\x22\x3e\x27  Build complete.\\n\x27\x3c\/span\x3e))\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(chalk.yellow(\n      \x3cspan class=\x22hljs-string\x22\x3e\x27  Tip: built files are meant to be served over an HTTP server.\\n\x27\x3c\/span\x3e \x2b\n      \x3cspan class=\x22hljs-string\x22\x3e\x27  Opening index.html over file:\/\/ won\\\x27t work.\\n\x27\x3c\/span\x3e\n    ))\n  })\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader11\x22\x3ewebpack.prod.conf\x3c\/h3\x3e\n\x3cp\x3e该文件，为生产环境中webpack的配置入口。同时，它也依赖于前面提到的\x3ccode\x3ewebpack.base.conf.js\x3c\/code\x3e、\x3ccode\x3eutils.js\x3c\/code\x3e和\x3ccode\x3econfig\/index.js\x3c\/code\x3e。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ node自带的文件路径工具\nvar path = require(\x27path\x27)\n\/\/ 工具函数集合\nvar utils = require(\x27.\/utils\x27)\nvar webpack = require(\x27webpack\x27)\n\/\/ 配置文件\nvar config = require(\x27..\/config\x27)\n\/\/ webpack 配置合并插件\nvar merge = require(\x27webpack-merge\x27)\n\/\/ webpack 基本配置\nvar baseWebpackConfig = require(\x27.\/webpack.base.conf\x27)\n\/\/ webpack 复制文件和文件夹的插件\n\/\/ https:\/\/github.com\/kevlened\/copy-webpack-plugin\nvar CopyWebpackPlugin = require(\x27copy-webpack-plugin\x27)\n\/\/ 自动生成 html 并且注入到 .html 文件中的插件\n\/\/ https:\/\/github.com\/ampedandwired\/html-webpack-plugin\nvar HtmlWebpackPlugin = require(\x27html-webpack-plugin\x27)\n\/\/ 提取css的插件\n\/\/ https:\/\/github.com\/webpack-contrib\/extract-text-webpack-plugin\nvar ExtractTextPlugin = require(\x27extract-text-webpack-plugin\x27)\n\/\/ webpack 优化压缩和优化 css 的插件\n\/\/ https:\/\/github.com\/NMFR\/optimize-css-assets-webpack-plugin\nvar OptimizeCSSPlugin = require(\x27optimize-css-assets-webpack-plugin\x27)\n\n\/\/ 如果当前环境为测试环境，则使用测试环境\n\/\/ 否则，使用生产环境\nvar env = process.env.NODE_ENV === \x27testing\x27\n  ? require(\x27..\/config\/test.env\x27)\n  : config.build.env\n\nvar webpackConfig = merge(baseWebpackConfig, {\n  module: {\n    \/\/ styleLoaders\n    rules: utils.styleLoaders({\n      sourceMap: config.build.productionSourceMap,\n      extract: true\n    })\n  },\n  \/\/ 是否开启 sourceMap\n  devtool: config.build.productionSourceMap ? \x27#source-map\x27 : false,\n  output: {\n    \/\/ 编译输出的静态资源根路径\n    path: config.build.assetsRoot,\n    \/\/ 编译输出的文件名\n    filename: utils.assetsPath(\x27js\/[name].[chunkhash].js\x27),\n    \/\/ 没有指定输出名的文件输出的文件名\n    chunkFilename: utils.assetsPath(\x27js\/[id].[chunkhash].js\x27)\n  },\n  plugins: [\n    \/\/ definePlugin 接收字符串插入到代码当中, 所以你需要的话可以写上 JS 的字符串\n    \/\/ 此处，插入适当的环境\n    \/\/ http:\/\/vuejs.github.io\/vue-loader\/en\/workflow\/production.html\n    new webpack.DefinePlugin({\n      \x27process.env\x27: env\n    }),\n    \/\/ 压缩 js\n    new webpack.optimize.UglifyJsPlugin({\n      compress: {\n        warnings: false\n      },\n      sourceMap: true\n    }),\n    \/\/ 提取 css\n    new ExtractTextPlugin({\n      filename: utils.assetsPath(\x27css\/[name].[contenthash].css\x27)\n    }),\n    \/\/ 压缩提取出来的 css\n    \/\/ 可以删除来自不同组件的冗余代码\n    \/\/ Compress extracted CSS. We are using this plugin so that possible\n    \/\/ duplicated CSS from different components can be deduped.\n    new OptimizeCSSPlugin(),\n    \/\/ 将 index.html 作为入口，注入 html 代码后生成 index.html文件\n    \/\/ https:\/\/github.com\/ampedandwired\/html-webpack-plugin\n    new HtmlWebpackPlugin({\n      filename: process.env.NODE_ENV === \x27testing\x27\n        ? \x27index.html\x27\n        : config.build.index,\n      template: \x27index.html\x27,\n      inject: true,\n      minify: {\n        removeComments: true,\n        collapseWhitespace: true,\n        removeAttributeQuotes: true\n        \/\/ 更多选项 https:\/\/github.com\/kangax\/html-minifier#options-quick-reference\n      },\n      \/\/ 必须通过 CommonsChunkPlugin一致地处理多个 chunks\n      chunksSortMode: \x27dependency\x27\n    }),\n    \/\/ 分割公共 js 到独立的文件\n    \/\/ https:\/\/webpack.js.org\/guides\/code-splitting-libraries\/#commonschunkplugin\n    new webpack.optimize.CommonsChunkPlugin({\n      name: \x27vendor\x27,\n      minChunks: function (module, count) {\n        \/\/ node_modules中的任何所需模块都提取到vendor\n        return (\n          module.resource \x26amp;\x26amp;\n          \/\\.js$\/.test(module.resource) \x26amp;\x26amp;\n          module.resource.indexOf(\n            path.join(__dirname, \x27..\/node_modules\x27)\n          ) === 0\n        )\n      }\n    }),\n    \/\/ 将webpack runtime 和模块清单 提取到独立的文件，以防止当 app包更新时导致公共 jsd hash也更新\n    \/\/ extract webpack runtime and module manifest to its own file in order to\n    \/\/ prevent vendor hash from being updated whenever app bundle is updated\n    new webpack.optimize.CommonsChunkPlugin({\n      name: \x27manifest\x27,\n      chunks: [\x27vendor\x27]\n    }),\n    \/\/ 复制静态资源\n    \/\/ https:\/\/github.com\/kevlened\/copy-webpack-plugin\n    new CopyWebpackPlugin([\n      {\n        from: path.resolve(__dirname, \x27..\/static\x27),\n        to: config.build.assetsSubDirectory,\n        ignore: [\x27.*\x27]\n      }\n    ])\n  ]\n})\n\n\/\/ 开启 gzip 的情况时，给 webpack plugins添加 compression-webpack-plugin 插件\nif (config.build.productionGzip) {\n    \/\/ webpack 压缩插件\n    \/\/ https:\/\/github.com\/webpack-contrib\/compression-webpack-plugin\n  var CompressionWebpackPlugin = require(\x27compression-webpack-plugin\x27)\n\n  \/\/ 向webpackconfig.plugins中加入下方的插件\n  webpackConfig.plugins.push(\n    new CompressionWebpackPlugin({\n      asset: \x27[path].gz[query]\x27,\n      algorithm: \x27gzip\x27,\n      test: new RegExp(\n        \x27\\\\.(\x27 \x2b\n        config.build.productionGzipExtensions.join(\x27|\x27) \x2b\n        \x27)$\x27\n      ),\n      threshold: 10240,\n      minRatio: 0.8\n    })\n  )\n}\n\n\/\/ 开启包分析的情况时， 给 webpack plugins添加 webpack-bundle-analyzer 插件\nif (config.build.bundleAnalyzerReport) {\n  \/\/ https:\/\/github.com\/th0r\/webpack-bundle-analyzer\n  var BundleAnalyzerPlugin = require(\x27webpack-bundle-analyzer\x27).BundleAnalyzerPlugin\n  webpackConfig.plugins.push(new BundleAnalyzerPlugin())\n}\n\nmodule.exports = webpackConfig\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ node自带的文件路径工具\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e path = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27path\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 工具函数集合\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e utils = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/utils\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e webpack = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 配置文件\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e config = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27..\/config\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ webpack 配置合并插件\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e merge = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack-merge\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ webpack 基本配置\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e baseWebpackConfig = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/webpack.base.conf\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ webpack 复制文件和文件夹的插件\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ https:\/\/github.com\/kevlened\/copy-webpack-plugin\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e CopyWebpackPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27copy-webpack-plugin\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 自动生成 html 并且注入到 .html 文件中的插件\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ https:\/\/github.com\/ampedandwired\/html-webpack-plugin\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e HtmlWebpackPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27html-webpack-plugin\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 提取css的插件\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ https:\/\/github.com\/webpack-contrib\/extract-text-webpack-plugin\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ExtractTextPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27extract-text-webpack-plugin\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ webpack 优化压缩和优化 css 的插件\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ https:\/\/github.com\/NMFR\/optimize-css-assets-webpack-plugin\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e OptimizeCSSPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27optimize-css-assets-webpack-plugin\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 如果当前环境为测试环境，则使用测试环境\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 否则，使用生产环境\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e env = process.env.NODE_ENV === \x3cspan class=\x22hljs-string\x22\x3e\x27testing\x27\x3c\/span\x3e\n  ? \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27..\/config\/test.env\x27\x3c\/span\x3e)\n  : config.build.env\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e webpackConfig = merge(baseWebpackConfig, {\n  \x3cspan class=\x22hljs-attr\x22\x3emodule\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ styleLoaders\x3c\/span\x3e\n    rules: utils.styleLoaders({\n      \x3cspan class=\x22hljs-attr\x22\x3esourceMap\x3c\/span\x3e: config.build.productionSourceMap,\n      \x3cspan class=\x22hljs-attr\x22\x3eextract\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n    })\n  },\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 是否开启 sourceMap\x3c\/span\x3e\n  devtool: config.build.productionSourceMap ? \x3cspan class=\x22hljs-string\x22\x3e\x27#source-map\x27\x3c\/span\x3e : \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3eoutput\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 编译输出的静态资源根路径\x3c\/span\x3e\n    path: config.build.assetsRoot,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 编译输出的文件名\x3c\/span\x3e\n    filename: utils.assetsPath(\x3cspan class=\x22hljs-string\x22\x3e\x27js\/[name].[chunkhash].js\x27\x3c\/span\x3e),\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 没有指定输出名的文件输出的文件名\x3c\/span\x3e\n    chunkFilename: utils.assetsPath(\x3cspan class=\x22hljs-string\x22\x3e\x27js\/[id].[chunkhash].js\x27\x3c\/span\x3e)\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3eplugins\x3c\/span\x3e: [\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ definePlugin 接收字符串插入到代码当中, 所以你需要的话可以写上 JS 的字符串\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 此处，插入适当的环境\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ http:\/\/vuejs.github.io\/vue-loader\/en\/workflow\/production.html\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.DefinePlugin({\n      \x3cspan class=\x22hljs-string\x22\x3e\x27process.env\x27\x3c\/span\x3e: env\n    }),\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 压缩 js\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.optimize.UglifyJsPlugin({\n      \x3cspan class=\x22hljs-attr\x22\x3ecompress\x3c\/span\x3e: {\n        \x3cspan class=\x22hljs-attr\x22\x3ewarnings\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n      },\n      \x3cspan class=\x22hljs-attr\x22\x3esourceMap\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n    }),\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 提取 css\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e ExtractTextPlugin({\n      \x3cspan class=\x22hljs-attr\x22\x3efilename\x3c\/span\x3e: utils.assetsPath(\x3cspan class=\x22hljs-string\x22\x3e\x27css\/[name].[contenthash].css\x27\x3c\/span\x3e)\n    }),\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 压缩提取出来的 css\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 可以删除来自不同组件的冗余代码\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Compress extracted CSS. We are using this plugin so that possible\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ duplicated CSS from different components can be deduped.\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e OptimizeCSSPlugin(),\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 将 index.html 作为入口，注入 html 代码后生成 index.html文件\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ https:\/\/github.com\/ampedandwired\/html-webpack-plugin\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e HtmlWebpackPlugin({\n      \x3cspan class=\x22hljs-attr\x22\x3efilename\x3c\/span\x3e: process.env.NODE_ENV === \x3cspan class=\x22hljs-string\x22\x3e\x27testing\x27\x3c\/span\x3e\n        ? \x3cspan class=\x22hljs-string\x22\x3e\x27index.html\x27\x3c\/span\x3e\n        : config.build.index,\n      \x3cspan class=\x22hljs-attr\x22\x3etemplate\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27index.html\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3einject\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3eminify\x3c\/span\x3e: {\n        \x3cspan class=\x22hljs-attr\x22\x3eremoveComments\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3ecollapseWhitespace\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eremoveAttributeQuotes\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 更多选项 https:\/\/github.com\/kangax\/html-minifier#options-quick-reference\x3c\/span\x3e\n      },\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 必须通过 CommonsChunkPlugin一致地处理多个 chunks\x3c\/span\x3e\n      chunksSortMode: \x3cspan class=\x22hljs-string\x22\x3e\x27dependency\x27\x3c\/span\x3e\n    }),\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 分割公共 js 到独立的文件\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ https:\/\/webpack.js.org\/guides\/code-splitting-libraries\/#commonschunkplugin\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.optimize.CommonsChunkPlugin({\n      \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27vendor\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3eminChunks\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3emodule, count\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ node_modules中的任何所需模块都提取到vendor\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n          \x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.resource \x26amp;\x26amp;\n          \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.js$\/\x3c\/span\x3e.test(\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.resource) \x26amp;\x26amp;\n          \x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.resource.indexOf(\n            path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27..\/node_modules\x27\x3c\/span\x3e)\n          ) === \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e\n        )\n      }\n    }),\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 将webpack runtime 和模块清单 提取到独立的文件，以防止当 app包更新时导致公共 jsd hash也更新\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ extract webpack runtime and module manifest to its own file in order to\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ prevent vendor hash from being updated whenever app bundle is updated\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.optimize.CommonsChunkPlugin({\n      \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27manifest\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3echunks\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x27vendor\x27\x3c\/span\x3e]\n    }),\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 复制静态资源\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ https:\/\/github.com\/kevlened\/copy-webpack-plugin\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e CopyWebpackPlugin([\n      {\n        \x3cspan class=\x22hljs-attr\x22\x3efrom\x3c\/span\x3e: path.resolve(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27..\/static\x27\x3c\/span\x3e),\n        \x3cspan class=\x22hljs-attr\x22\x3eto\x3c\/span\x3e: config.build.assetsSubDirectory,\n        \x3cspan class=\x22hljs-attr\x22\x3eignore\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x27.*\x27\x3c\/span\x3e]\n      }\n    ])\n  ]\n})\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 开启 gzip 的情况时，给 webpack plugins添加 compression-webpack-plugin 插件\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (config.build.productionGzip) {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ webpack 压缩插件\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ https:\/\/github.com\/webpack-contrib\/compression-webpack-plugin\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e CompressionWebpackPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27compression-webpack-plugin\x27\x3c\/span\x3e)\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 向webpackconfig.plugins中加入下方的插件\x3c\/span\x3e\n  webpackConfig.plugins.push(\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e CompressionWebpackPlugin({\n      \x3cspan class=\x22hljs-attr\x22\x3easset\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27[path].gz[query]\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3ealgorithm\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27gzip\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eRegExp\x3c\/span\x3e(\n        \x3cspan class=\x22hljs-string\x22\x3e\x27\\\\.(\x27\x3c\/span\x3e \x2b\n        config.build.productionGzipExtensions.join(\x3cspan class=\x22hljs-string\x22\x3e\x27|\x27\x3c\/span\x3e) \x2b\n        \x3cspan class=\x22hljs-string\x22\x3e\x27)$\x27\x3c\/span\x3e\n      ),\n      \x3cspan class=\x22hljs-attr\x22\x3ethreshold\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e10240\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3eminRatio\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0.8\x3c\/span\x3e\n    })\n  )\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 开启包分析的情况时， 给 webpack plugins添加 webpack-bundle-analyzer 插件\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (config.build.bundleAnalyzerReport) {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ https:\/\/github.com\/th0r\/webpack-bundle-analyzer\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e BundleAnalyzerPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack-bundle-analyzer\x27\x3c\/span\x3e).BundleAnalyzerPlugin\n  webpackConfig.plugins.push(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e BundleAnalyzerPlugin())\n}\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = webpackConfig\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader12\x22\x3e其他\x3c\/h2\x3e\n\x3cp\x3e如果你觉得在segmentfault的代码阅读体验不好，你可以到我github上将代码clone下来看。\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/chenBright\/vue-cli-webpack-analysis\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3evue-cli-webpack-analysis\x3c\/a\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader13\x22\x3e总结\x3c\/h2\x3e\n\x3cp\x3e这次研究webpack配置的时候，我自己跟着源码敲了一遍（很笨的方法），然后，在github和webpack官网上查使用到的插件的作用和用法。经过这一次折腾，加深对webpack的认识。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>vue-cli webpack配置分析</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000008644830">https://segmentfault.com/a/1190000008644830</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/h64oeqws778/" target="_blank">https://alili.tech/archive/h64oeqws778/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>