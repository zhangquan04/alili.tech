<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="canvas小游戏——flappy bird"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>canvas小游戏——flappy bird | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/qef8o4z447/",
				"appid": "1613049289050283", 
				"title": "canvas小游戏——flappy bird | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-05T02:30:10"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/agyqmjzzkaa/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/ovwr00gfh9/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fqef8o4z447%2f&text=canvas%e5%b0%8f%e6%b8%b8%e6%88%8f%e2%80%94%e2%80%94flappy%20bird"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fqef8o4z447%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fqef8o4z447%2f&text=canvas%e5%b0%8f%e6%b8%b8%e6%88%8f%e2%80%94%e2%80%94flappy%20bird"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fqef8o4z447%2f&title=canvas%e5%b0%8f%e6%b8%b8%e6%88%8f%e2%80%94%e2%80%94flappy%20bird"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fqef8o4z447%2f&is_video=false&description=canvas%e5%b0%8f%e6%b8%b8%e6%88%8f%e2%80%94%e2%80%94flappy%20bird"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=canvas%e5%b0%8f%e6%b8%b8%e6%88%8f%e2%80%94%e2%80%94flappy%20bird&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fqef8o4z447%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fqef8o4z447%2f&title=canvas%e5%b0%8f%e6%b8%b8%e6%88%8f%e2%80%94%e2%80%94flappy%20bird"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fqef8o4z447%2f&title=canvas%e5%b0%8f%e6%b8%b8%e6%88%8f%e2%80%94%e2%80%94flappy%20bird"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fqef8o4z447%2f&title=canvas%e5%b0%8f%e6%b8%b8%e6%88%8f%e2%80%94%e2%80%94flappy%20bird"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fqef8o4z447%2f&title=canvas%e5%b0%8f%e6%b8%b8%e6%88%8f%e2%80%94%e2%80%94flappy%20bird"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">canvas小游戏——flappy bird</h1><div class="meta"><div class="postdate"><time datetime="2019-01-05" itemprop="datePublished">2019-01-05</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3e前言\x3c\/h2\x3e\n\x3cp\x3e如果说学编程就是学逻辑的话，那锻炼逻辑能力的最好方法就莫过于写游戏了。最近看了一位大神的\x3ca href=\x22http:\/\/www.jianshu.com\/p\/45d994d04a25\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3efly bird\x3c\/a\x3e小游戏，感觉很有帮助。于是为了寻求进一步的提高，我花了两天时间自己写了一个canvas版本的。虽然看起来原理都差不多，但是实现方法大相径庭，如果有兴趣的话可以大家自己\x3ca href=\x22https:\/\/github.com\/tzc123\/canvas_game\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e下载\x3c\/a\x3e下来玩一玩，大概效果就像下面这样：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010542674\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010542674\x22 alt=\x22游戏效果\x22 title=\x22游戏效果\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e\x3cbr\x3e怎么样？是不是感觉难度巨大？...可能是因为我比较菜吧。相信高手还是大有人在的，随便过个几十关也是不在话下。但是如果有和我一样10关都过不了小菜鸡的话，根本不用丧气对吧？咱是程序员是不是？游戏不会玩，作弊还不会吗？咳咳，下面就是作弊的方法：\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e首先搞清楚结构\x3c\/h2\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cstyle\x3e\n  *{\n    margin: 0;\n    padding: 0;\n  }\n  html,body {\n    height: 100%;\n    width: 100%;\n    overflow: hidden;\n  }\n  #canvas{\n    display: block;\n    margin: 50px auto;\n  }\n\x3c\/style\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22css\x22\x3e\n  *{\n    \x3cspan class=\x22hljs-attribute\x22\x3emargin\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-attribute\x22\x3epadding\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n  }\n  \x3cspan class=\x22hljs-selector-tag\x22\x3ehtml\x3c\/span\x3e,\x3cspan class=\x22hljs-selector-tag\x22\x3ebody\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-attribute\x22\x3eheight\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e100%\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-attribute\x22\x3ewidth\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e100%\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-attribute\x22\x3eoverflow\x3c\/span\x3e: hidden;\n  }\n  \x3cspan class=\x22hljs-selector-id\x22\x3e#canvas\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-attribute\x22\x3edisplay\x3c\/span\x3e: block;\n    \x3cspan class=\x22hljs-attribute\x22\x3emargin\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e50px\x3c\/span\x3e auto;\n  }\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3ccanvas id=\x26quot;canvas\x26quot; width=\x26quot;343\x26quot; height=\x26quot;480\x26quot;\x3e\x3c\/canvas\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22css hljs\x22\x3e\x3ccode class=\x22css\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x26lt;\x3cspan class=\x22hljs-selector-tag\x22\x3ecanvas\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3eid\x3c\/span\x3e=\x22\x3cspan class=\x22hljs-selector-tag\x22\x3ecanvas\x3c\/span\x3e\x22 \x3cspan class=\x22hljs-selector-tag\x22\x3ewidth\x3c\/span\x3e=\x22343\x22 \x3cspan class=\x22hljs-selector-tag\x22\x3eheight\x3c\/span\x3e=\x22480\x22\x26gt;\x26lt;\/\x3cspan class=\x22hljs-selector-tag\x22\x3ecanvas\x3c\/span\x3e\x26gt;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e很简单，就是这样。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e注意！我要开始说了\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e首先咱先加载一下所有的图片\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 图片集合\nvar imgs = {\n  \/\/创建图片\n  bg: new Image(),\n  grass: new Image(),\n  title: new Image(),\n  bird0: new Image(),\n  bird1: new Image(),\n  up_bird0: new Image(),\n  up_bird1: new Image(),\n  down_bird0: new Image(),\n  down_bird1: new Image(),\n  startBtn: new Image(),\n  up_pipe: new Image(),\n  up_mod: new Image(),\n  down_pipe: new Image(),\n  down_mod: new Image(),\n  scroe0:new Image(),\n  scroe1:new Image(),\n  scroe2:new Image(),\n  scroe3:new Image(),\n  scroe4:new Image(),\n  scroe5:new Image(),\n  scroe6:new Image(),\n  scroe7:new Image(),\n  scroe8:new Image(),\n  scroe9:new Image(),\n  \/\/加载图片\n  loadImg: function (fn) {\n    this.bg.src = \x27.\/img\/bg.jpg\x27;\n    this.grass.src = \x27.\/img\/banner.jpg\x27;\n    this.title.src = \x27.\/img\/head.jpg\x27;\n    this.bird0.src = \x27.\/img\/bird0.png\x27;\n    this.bird1.src = \x27.\/img\/bird1.png\x27;\n    this.up_bird0.src = \x27.\/img\/up_bird0.png\x27;\n    this.up_bird1.src = \x27.\/img\/up_bird1.png\x27;\n    this.down_bird0.src = \x27.\/img\/down_bird0.png\x27;\n    this.down_bird1.src = \x27.\/img\/down_bird1.png\x27;\n    this.startBtn.src = \x27.\/img\/start.jpg\x27;\n    this.up_pipe.src = \x27.\/img\/up_pipe.png\x27;\n    this.up_mod.src = \x27.\/img\/up_mod.png\x27;\n    this.down_pipe.src = \x27.\/img\/down_pipe.png\x27;\n    this.down_mod.src = \x27.\/img\/down_mod.png\x27;\n    this.scroe0.src = \x27.\/img\/0.jpg\x27;\n    this.scroe1.src = \x27.\/img\/1.jpg\x27;\n    this.scroe2.src = \x27.\/img\/2.jpg\x27;\n    this.scroe3.src = \x27.\/img\/3.jpg\x27;\n    this.scroe4.src = \x27.\/img\/4.jpg\x27;\n    this.scroe5.src = \x27.\/img\/5.jpg\x27;\n    this.scroe6.src = \x27.\/img\/6.jpg\x27;\n    this.scroe7.src = \x27.\/img\/7.jpg\x27;\n    this.scroe8.src = \x27.\/img\/8.jpg\x27;\n    this.scroe9.src = \x27.\/img\/9.jpg\x27;\n    var that = this;\n    \/\/添加定时器，判断图片是否加载完成\n    var timer = setInterval(function() {\n      if (that.bg.complete\x26amp;\x26amp;that.grass.complete\n        \x26amp;\x26amp;that.title.complete\x26amp;\x26amp;that.startBtn.complete\n        \x26amp;\x26amp;that.bird0.complete\x26amp;\x26amp;that.bird1.complete\n        \x26amp;\x26amp;that.up_bird0.complete\x26amp;\x26amp;that.up_bird1.complete\n        \x26amp;\x26amp;that.down_bird0.complete\x26amp;\x26amp;that.down_bird1.complete\n        \x26amp;\x26amp;that.up_pipe.complete\x26amp;\x26amp;that.up_mod.complete\n        \x26amp;\x26amp;that.down_mod.complete\x26amp;\x26amp;that.down_pipe.complete\n        \x26amp;\x26amp;that.scroe0.complete\x26amp;\x26amp;that.scroe1.complete\n        \x26amp;\x26amp;that.scroe2.complete\x26amp;\x26amp;that.scroe3.complete\n        \x26amp;\x26amp;that.scroe4.complete\x26amp;\x26amp;that.scroe5.complete\n        \x26amp;\x26amp;that.scroe6.complete\x26amp;\x26amp;that.scroe7.complete\n        \x26amp;\x26amp;that.scroe8.complete\x26amp;\x26amp;that.scroe9.complete) {\n        \/\/删除定时器\n        clearInterval(timer);\n        \/\/图片全部加载完成后，运行此函数\n        fn();\n      }\n    }, 50)\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 图片集合\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e imgs = {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/创建图片\x3c\/span\x3e\n  bg: \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Image(),\n  \x3cspan class=\x22hljs-attr\x22\x3egrass\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Image(),\n  \x3cspan class=\x22hljs-attr\x22\x3etitle\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Image(),\n  \x3cspan class=\x22hljs-attr\x22\x3ebird0\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Image(),\n  \x3cspan class=\x22hljs-attr\x22\x3ebird1\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Image(),\n  \x3cspan class=\x22hljs-attr\x22\x3eup_bird0\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Image(),\n  \x3cspan class=\x22hljs-attr\x22\x3eup_bird1\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Image(),\n  \x3cspan class=\x22hljs-attr\x22\x3edown_bird0\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Image(),\n  \x3cspan class=\x22hljs-attr\x22\x3edown_bird1\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Image(),\n  \x3cspan class=\x22hljs-attr\x22\x3estartBtn\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Image(),\n  \x3cspan class=\x22hljs-attr\x22\x3eup_pipe\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Image(),\n  \x3cspan class=\x22hljs-attr\x22\x3eup_mod\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Image(),\n  \x3cspan class=\x22hljs-attr\x22\x3edown_pipe\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Image(),\n  \x3cspan class=\x22hljs-attr\x22\x3edown_mod\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Image(),\n  \x3cspan class=\x22hljs-attr\x22\x3escroe0\x3c\/span\x3e:\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Image(),\n  \x3cspan class=\x22hljs-attr\x22\x3escroe1\x3c\/span\x3e:\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Image(),\n  \x3cspan class=\x22hljs-attr\x22\x3escroe2\x3c\/span\x3e:\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Image(),\n  \x3cspan class=\x22hljs-attr\x22\x3escroe3\x3c\/span\x3e:\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Image(),\n  \x3cspan class=\x22hljs-attr\x22\x3escroe4\x3c\/span\x3e:\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Image(),\n  \x3cspan class=\x22hljs-attr\x22\x3escroe5\x3c\/span\x3e:\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Image(),\n  \x3cspan class=\x22hljs-attr\x22\x3escroe6\x3c\/span\x3e:\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Image(),\n  \x3cspan class=\x22hljs-attr\x22\x3escroe7\x3c\/span\x3e:\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Image(),\n  \x3cspan class=\x22hljs-attr\x22\x3escroe8\x3c\/span\x3e:\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Image(),\n  \x3cspan class=\x22hljs-attr\x22\x3escroe9\x3c\/span\x3e:\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Image(),\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/加载图片\x3c\/span\x3e\n  loadImg: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3efn\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.bg.src = \x3cspan class=\x22hljs-string\x22\x3e\x27.\/img\/bg.jpg\x27\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.grass.src = \x3cspan class=\x22hljs-string\x22\x3e\x27.\/img\/banner.jpg\x27\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.title.src = \x3cspan class=\x22hljs-string\x22\x3e\x27.\/img\/head.jpg\x27\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.bird0.src = \x3cspan class=\x22hljs-string\x22\x3e\x27.\/img\/bird0.png\x27\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.bird1.src = \x3cspan class=\x22hljs-string\x22\x3e\x27.\/img\/bird1.png\x27\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.up_bird0.src = \x3cspan class=\x22hljs-string\x22\x3e\x27.\/img\/up_bird0.png\x27\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.up_bird1.src = \x3cspan class=\x22hljs-string\x22\x3e\x27.\/img\/up_bird1.png\x27\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.down_bird0.src = \x3cspan class=\x22hljs-string\x22\x3e\x27.\/img\/down_bird0.png\x27\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.down_bird1.src = \x3cspan class=\x22hljs-string\x22\x3e\x27.\/img\/down_bird1.png\x27\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.startBtn.src = \x3cspan class=\x22hljs-string\x22\x3e\x27.\/img\/start.jpg\x27\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.up_pipe.src = \x3cspan class=\x22hljs-string\x22\x3e\x27.\/img\/up_pipe.png\x27\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.up_mod.src = \x3cspan class=\x22hljs-string\x22\x3e\x27.\/img\/up_mod.png\x27\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.down_pipe.src = \x3cspan class=\x22hljs-string\x22\x3e\x27.\/img\/down_pipe.png\x27\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.down_mod.src = \x3cspan class=\x22hljs-string\x22\x3e\x27.\/img\/down_mod.png\x27\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.scroe0.src = \x3cspan class=\x22hljs-string\x22\x3e\x27.\/img\/0.jpg\x27\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.scroe1.src = \x3cspan class=\x22hljs-string\x22\x3e\x27.\/img\/1.jpg\x27\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.scroe2.src = \x3cspan class=\x22hljs-string\x22\x3e\x27.\/img\/2.jpg\x27\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.scroe3.src = \x3cspan class=\x22hljs-string\x22\x3e\x27.\/img\/3.jpg\x27\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.scroe4.src = \x3cspan class=\x22hljs-string\x22\x3e\x27.\/img\/4.jpg\x27\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.scroe5.src = \x3cspan class=\x22hljs-string\x22\x3e\x27.\/img\/5.jpg\x27\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.scroe6.src = \x3cspan class=\x22hljs-string\x22\x3e\x27.\/img\/6.jpg\x27\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.scroe7.src = \x3cspan class=\x22hljs-string\x22\x3e\x27.\/img\/7.jpg\x27\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.scroe8.src = \x3cspan class=\x22hljs-string\x22\x3e\x27.\/img\/8.jpg\x27\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.scroe9.src = \x3cspan class=\x22hljs-string\x22\x3e\x27.\/img\/9.jpg\x27\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e that = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/添加定时器，判断图片是否加载完成\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e timer = setInterval(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (that.bg.complete\x26amp;\x26amp;that.grass.complete\n        \x26amp;\x26amp;that.title.complete\x26amp;\x26amp;that.startBtn.complete\n        \x26amp;\x26amp;that.bird0.complete\x26amp;\x26amp;that.bird1.complete\n        \x26amp;\x26amp;that.up_bird0.complete\x26amp;\x26amp;that.up_bird1.complete\n        \x26amp;\x26amp;that.down_bird0.complete\x26amp;\x26amp;that.down_bird1.complete\n        \x26amp;\x26amp;that.up_pipe.complete\x26amp;\x26amp;that.up_mod.complete\n        \x26amp;\x26amp;that.down_mod.complete\x26amp;\x26amp;that.down_pipe.complete\n        \x26amp;\x26amp;that.scroe0.complete\x26amp;\x26amp;that.scroe1.complete\n        \x26amp;\x26amp;that.scroe2.complete\x26amp;\x26amp;that.scroe3.complete\n        \x26amp;\x26amp;that.scroe4.complete\x26amp;\x26amp;that.scroe5.complete\n        \x26amp;\x26amp;that.scroe6.complete\x26amp;\x26amp;that.scroe7.complete\n        \x26amp;\x26amp;that.scroe8.complete\x26amp;\x26amp;that.scroe9.complete) {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/删除定时器\x3c\/span\x3e\n        clearInterval(timer);\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/图片全部加载完成后，运行此函数\x3c\/span\x3e\n        fn();\n      }\n    }, \x3cspan class=\x22hljs-number\x22\x3e50\x3c\/span\x3e)\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e...抱歉有点长，但是怕破坏代码的结构，就全部拷下来了，上面的朋友快点下来吧，都是重复的没啥好看的。我来给大家解释一下，首先这是一个对象字面量，创建的时候新建了若干个图片对象，然后它有一个函数loadImg，只要一执行，就会给所有的图片添加路径，然后添加一个定时器每一段时间通过查询所有图片的complete属性判断图片是否全部加载完成。如果是，就删除这个定时器，并执行一段回调函数，还是很好理解的吧:)，不过我感觉这种方法可能有点蠢，不知道各位高人有没有更好的方法？\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e接下来，就要开始画了\x3c\/h2\x3e\n\x3cp\x3e大家都知道，其实canvas就是画图，如果要用canvas实现动画效果的话，就只能一遍一遍的擦了画、画了擦了。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e首先\x3c\/h3\x3e\n\x3cp\x3e先把几个固定不动的部分的绘制方法和清空画布的方法写在函数里\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/绘制背景\n  function drawBg() {\n    ctx.drawImage(imgs.bg,0,0);\n  }\n  \/\/绘制开始按钮\n  function drawStartBtn() {\n    ctx.drawImage(imgs.startBtn,130,300);\n  }\n    \/\/清空画布\n  function clean() {\n    ctx.clearRect(0,0,canvas.width,canvas.height);\n  }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/绘制背景\x3c\/span\x3e\n  \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edrawBg\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    ctx.drawImage(imgs.bg,\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e);\n  }\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/绘制开始按钮\x3c\/span\x3e\n  \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edrawStartBtn\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    ctx.drawImage(imgs.startBtn,\x3cspan class=\x22hljs-number\x22\x3e130\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e300\x3c\/span\x3e);\n  }\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/清空画布\x3c\/span\x3e\n  \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eclean\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    ctx.clearRect(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,canvas.width,canvas.height);\n  }\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e然后\x3c\/h3\x3e\n\x3cp\x3e把会动的部分也加上\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var v = 0;\/\/草坪滚动的增量\n  \/\/绘制草坪\n  function drawGrass() {\n    \/\/每次运行横坐标向左移\n    ctx.drawImage(imgs.grass,3*v--,423);\n    ctx.drawImage(imgs.grass,337\x2b3*v--,423);\n    if(3*v \x3c -343){\n      v=0;\n    }\n  }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e v = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\x3cspan class=\x22hljs-comment\x22\x3e\/\/草坪滚动的增量\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/绘制草坪\x3c\/span\x3e\n  \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edrawGrass\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/每次运行横坐标向左移\x3c\/span\x3e\n    ctx.drawImage(imgs.grass,\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e*v--,\x3cspan class=\x22hljs-number\x22\x3e423\x3c\/span\x3e);\n    ctx.drawImage(imgs.grass,\x3cspan class=\x22hljs-number\x22\x3e337\x3c\/span\x3e\x2b\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e*v--,\x3cspan class=\x22hljs-number\x22\x3e423\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e*v \x26lt; \x3cspan class=\x22hljs-number\x22\x3e-343\x3c\/span\x3e){\n      v=\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n    }\n  }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样每次运行一次，草坪就会向左移一点了\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var shake = true;\/\/标题的抖动状态\n  \/\/标题的抖动效果\n  function titleShake() {\n    if (shake) {\n      ctx.drawImage(imgs.title,53,97);\n      ctx.drawImage(imgs.bird1,250,137);\n    }else{\n      ctx.drawImage(imgs.title,53,103);\n      ctx.drawImage(imgs.bird0,250,143);\n    }\n  }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e shake = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\x3cspan class=\x22hljs-comment\x22\x3e\/\/标题的抖动状态\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/标题的抖动效果\x3c\/span\x3e\n  \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3etitleShake\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (shake) {\n      ctx.drawImage(imgs.title,\x3cspan class=\x22hljs-number\x22\x3e53\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e97\x3c\/span\x3e);\n      ctx.drawImage(imgs.bird1,\x3cspan class=\x22hljs-number\x22\x3e250\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e137\x3c\/span\x3e);\n    }\x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e{\n      ctx.drawImage(imgs.title,\x3cspan class=\x22hljs-number\x22\x3e53\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e103\x3c\/span\x3e);\n      ctx.drawImage(imgs.bird0,\x3cspan class=\x22hljs-number\x22\x3e250\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e143\x3c\/span\x3e);\n    }\n  }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样通过改变shake的值，就可以使标题的抖动了。\x3cbr\x3e机智的各位应该已经发现了，上面两个函数需要重复调用，才能产生动画的效果，所以这就是我接下来要讲的。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e开始界面的定时器\x3c\/h3\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010542675\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010542675\x22 alt=\x22开始界面\x22 title=\x22开始界面\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var startTimer;\/\/开始界面定时器\nvar startTime = 0;\/\/定时器运行的次数\nfunction startLayer() {\n    startTimer = setInterval(function () {\n      clean();\n      drawBg();\n      drawStartBtn();\n      drawGrass();\n      titleShake();\n      \/\/定时器每运行7次改变标题位置\n      if(startTime == 7){\n        shake = !shake;\n        startTime = 0;\n      }\n      \/\/运行次数\x2b1\n      startTime\x2b\x2b;\n      \/\/window.requestAnimationFrame(startLayer)\n    }, 24);\n  }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e startTimer;\x3cspan class=\x22hljs-comment\x22\x3e\/\/开始界面定时器\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e startTime = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\x3cspan class=\x22hljs-comment\x22\x3e\/\/定时器运行的次数\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3estartLayer\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    startTimer = setInterval(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n      clean();\n      drawBg();\n      drawStartBtn();\n      drawGrass();\n      titleShake();\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/定时器每运行7次改变标题位置\x3c\/span\x3e\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(startTime == \x3cspan class=\x22hljs-number\x22\x3e7\x3c\/span\x3e){\n        shake = !shake;\n        startTime = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n      }\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/运行次数\x2b1\x3c\/span\x3e\n      startTime\x2b\x2b;\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/window.requestAnimationFrame(startLayer)\x3c\/span\x3e\n    }, \x3cspan class=\x22hljs-number\x22\x3e24\x3c\/span\x3e);\n  }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e大家也可以理解为这就是开始界面，因为开始界面就是通过定时器一次次运行上面的函数所实现的。然而上面定义的startTimer和startTime又有什么用呢，当然不是多此一举，首先，把这个定时器赋给一个变量，是为了在开始游戏的时候把这个界面关掉，也就是把这个定时器取消，往后看大家就明白了:)其次，startTime是为了记录定时器运行的次数，因为这个定时器刷新的实现极快，只有短短的24毫秒，如果标题以这个速度抖动的话，大家的眼睛一定受不了了吧，所以我设法让他慢下来，每运行7次抖动一次，当然大家可以设置9、10、11使它的频率更加缓慢（大家还可以尝试使用requestAnimation-\x3cbr\x3e -Frame,那样性能更佳，但是控制频率略显麻烦。这里使用setInterval更容易理解）当然这个作弊没有半毛钱关系，不过下面就是重头戏了。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader8\x22\x3e主角登场！！！\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var bird = {\n  bird: [imgs.bird0,imgs.bird1],\/\/正常状态，图片\n  up_bird: [imgs.up_bird0,imgs.up_bird1],\/\/向上飞状态\n  down_bird: [imgs.down_bird0,imgs.down_bird1],\/\/向下掉状态\n  posX: 100,\/\/横坐标\n  posY: 200,\/\/纵坐标Y\n  speed: 0,\/\/速度\n  index: 0,\/\/翅膀挥动，切换图片的标\n  alive: true,\/\/存活状态\n  \/\/绘制小鸟\n  draw: function (bird) {\n    ctx.drawImage(bird,this.posX,this.posY);\n  },\n  \/\/飞行中\n  fly: function () {\n    \/\/纵坐标随速度改变\n    this.posY\x2b=this.speed;\n    \/\/加速度为1\n    this.speed\x2b\x2b;\n    \/\/如果坠地，死亡\n    if(this.posY \x3e= 395){\n      this.speed = 0;\n      this.draw(this.bird[this.index]);\n      this.dead();\n    }\n    \/\/如果撞顶，弹回来\n    if(this.posY \x3c= 0){\n      this.speed = 6;\n    }\n    \/\/如果速度为正，则向下，反之，则向上，否则水平\n    if(this.speed\x3e0){\n      this.draw(this.down_bird[this.index]);\n    }else if(this.speed\x3c0){\n      this.draw(this.up_bird[this.index]);\n    }else{\n      this.draw(this.bird[this.index]);\n    }\n    \/\/确保坠落速度不会太快\n    if(bird.speed \x3e 6){\n      bird.speed = 6;\n    }\n  },\n  \/\/煽动翅膀，切换图片\n  wingWave: function () {\n    this.index\x2b\x2b;\n    if(this.index \x3e 1){\n      this.index = 0;\n    }\n  },\n  \/\/死亡\n  dead: function() {\n    this.alive = false;\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e bird = {\n  \x3cspan class=\x22hljs-attr\x22\x3ebird\x3c\/span\x3e: [imgs.bird0,imgs.bird1],\x3cspan class=\x22hljs-comment\x22\x3e\/\/正常状态，图片\x3c\/span\x3e\n  up_bird: [imgs.up_bird0,imgs.up_bird1],\x3cspan class=\x22hljs-comment\x22\x3e\/\/向上飞状态\x3c\/span\x3e\n  down_bird: [imgs.down_bird0,imgs.down_bird1],\x3cspan class=\x22hljs-comment\x22\x3e\/\/向下掉状态\x3c\/span\x3e\n  posX: \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e,\x3cspan class=\x22hljs-comment\x22\x3e\/\/横坐标\x3c\/span\x3e\n  posY: \x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e,\x3cspan class=\x22hljs-comment\x22\x3e\/\/纵坐标Y\x3c\/span\x3e\n  speed: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\x3cspan class=\x22hljs-comment\x22\x3e\/\/速度\x3c\/span\x3e\n  index: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\x3cspan class=\x22hljs-comment\x22\x3e\/\/翅膀挥动，切换图片的标\x3c\/span\x3e\n  alive: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\x3cspan class=\x22hljs-comment\x22\x3e\/\/存活状态\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/绘制小鸟\x3c\/span\x3e\n  draw: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3ebird\x3c\/span\x3e) \x3c\/span\x3e{\n    ctx.drawImage(bird,\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.posX,\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.posY);\n  },\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/飞行中\x3c\/span\x3e\n  fly: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/纵坐标随速度改变\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.posY\x2b=\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.speed;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/加速度为1\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.speed\x2b\x2b;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/如果坠地，死亡\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.posY \x26gt;= \x3cspan class=\x22hljs-number\x22\x3e395\x3c\/span\x3e){\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.speed = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.draw(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.bird[\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.index]);\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.dead();\n    }\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/如果撞顶，弹回来\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.posY \x26lt;= \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e){\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.speed = \x3cspan class=\x22hljs-number\x22\x3e6\x3c\/span\x3e;\n    }\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/如果速度为正，则向下，反之，则向上，否则水平\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.speed\x26gt;\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e){\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.draw(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.down_bird[\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.index]);\n    }\x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.speed\x26lt;\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e){\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.draw(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.up_bird[\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.index]);\n    }\x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e{\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.draw(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.bird[\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.index]);\n    }\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/确保坠落速度不会太快\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(bird.speed \x26gt; \x3cspan class=\x22hljs-number\x22\x3e6\x3c\/span\x3e){\n      bird.speed = \x3cspan class=\x22hljs-number\x22\x3e6\x3c\/span\x3e;\n    }\n  },\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/煽动翅膀，切换图片\x3c\/span\x3e\n  wingWave: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.index\x2b\x2b;\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.index \x26gt; \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e){\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.index = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n    }\n  },\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/死亡\x3c\/span\x3e\n  dead: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.alive = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e;\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e...当然这只是主角的代码，一个对象字面量。但是它可以操控主角的所有行为（虽然也没有几个行为...），首先就是画出主角draw()，通过传进不同的图片绘制出主角不同情况下的英姿...然后是wingWave()，通过改变index,切换上面定义的图片数组中的图片，也就是挥翅膀。再然后就是飞行fly(),在飞行过程中主角会碰到各种各样的事故，像是飞的太高撞到天花板啊，或是飞的太低，摔了个狗啃屎。再干脆点一头撞死在了钢管上，但是这个函数并不在这里，因为小鸟撞死在钢管上到底是小鸟的行为，还是钢管的行为呢，我还没想明白，所以干脆放在了全局中。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22  \/\/判断是否碰撞\n  function isHit(oPipe){\n    if(bird.posX\x2bbird.bird[0].width\x3eoPipe.posX\x26amp;\x26amp;bird.posX\x3coPipe.posX\x2boPipe.down_pipe.width){\n      if(bird.posY\x3coPipe.up_posY||bird.posY\x2b30\x3eoPipe.down_posY){\n        bird.dead();\n      }\n    }\n  }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e  \x3cspan class=\x22hljs-comment\x22\x3e\/\/判断是否碰撞\x3c\/span\x3e\n  \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eisHit\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eoPipe\x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(bird.posX\x2bbird.bird[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].width\x26gt;oPipe.posX\x26amp;\x26amp;bird.posX\x26lt;oPipe.posX\x2boPipe.down_pipe.width){\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(bird.posY\x26lt;oPipe.up_posY||bird.posY\x2b\x3cspan class=\x22hljs-number\x22\x3e30\x3c\/span\x3e\x26gt;oPipe.down_posY){\n        bird.dead();\n      }\n    }\n  }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e就像这样，通过判断小鸟和钢管的位置判断小鸟是不是撞在钢管上了。反正结果还是撞死bird.dead()。看到这里相信不用我说，大家也明白了吧，只要将这段代码注释掉，我们的小鸟不就练成的绝世铁头功，钢管都捅穿给你看。或者稍稍增大一点小鸟会被碰撞到的体积，那就是凌波微步、轻功管上飘了呀。说了半天，还没告诉大家这个水管又是哪里来的。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader9\x22\x3e钢管\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/水管类\nclass Pipe {\n  constructor(up_pipe,up_mod,down_pipe,down_mod) {\n    \/\/构造函数\n    this.up_pipe = up_pipe;\/\/上水管头部\n    this.up_mod = up_mod;\/\/上水管中间部分\n    this.down_pipe = down_pipe;\n    this.down_mod = down_mod;\n    this.up_height = Math.floor(Math.random()*60);\/\/随机生成上管体高度\n    this.down_height = (60 - this.up_height)*3;\/\/保证所有上下水管距离相同\n    this.posX = 300;\/\/横坐标\n    this.up_posY = this.up_height*3\x2bthis.up_pipe.height;\/\/上水管纵坐标\n    this.down_posY = 362-this.down_height;\/\/下水管纵坐标\n    this.hadSkipped = false;\/\/是否被越过\n    this.hadSkippedChange = false;\/\/去重\n  }\n  \/\/绘制水管\n  drawPipe() {\n    ctx.drawImage(this.up_pipe,this.posX,this.up_height*3);\n    ctx.drawImage(this.down_pipe,this.posX,362-this.down_height);\n  }\n  \/\/绘制管体\n  drawMods() {\n    for(var i=0;i\x3cthis.up_height;i\x2b\x2b){\n      ctx.drawImage(this.up_mod,this.posX,i*3)\n    }\n    for(var j=0;j\x3cthis.down_height;j\x2b\x2b){\n      ctx.drawImage(this.down_mod,this.posX,362-this.down_height\x2bthis.down_pipe.height\x2bj);\n    }\n  }\n  \/\/水管移动\n  move() {\n    this.posX -= 6;\n    this.drawMods();\n    this.drawPipe();\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/水管类\x3c\/span\x3e\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ePipe\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e(up_pipe,up_mod,down_pipe,down_mod) {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/构造函数\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.up_pipe = up_pipe;\x3cspan class=\x22hljs-comment\x22\x3e\/\/上水管头部\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.up_mod = up_mod;\x3cspan class=\x22hljs-comment\x22\x3e\/\/上水管中间部分\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.down_pipe = down_pipe;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.down_mod = down_mod;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.up_height = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.floor(\x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.random()*\x3cspan class=\x22hljs-number\x22\x3e60\x3c\/span\x3e);\x3cspan class=\x22hljs-comment\x22\x3e\/\/随机生成上管体高度\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.down_height = (\x3cspan class=\x22hljs-number\x22\x3e60\x3c\/span\x3e - \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.up_height)*\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e;\x3cspan class=\x22hljs-comment\x22\x3e\/\/保证所有上下水管距离相同\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.posX = \x3cspan class=\x22hljs-number\x22\x3e300\x3c\/span\x3e;\x3cspan class=\x22hljs-comment\x22\x3e\/\/横坐标\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.up_posY = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.up_height*\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e\x2b\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.up_pipe.height;\x3cspan class=\x22hljs-comment\x22\x3e\/\/上水管纵坐标\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.down_posY = \x3cspan class=\x22hljs-number\x22\x3e362\x3c\/span\x3e-\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.down_height;\x3cspan class=\x22hljs-comment\x22\x3e\/\/下水管纵坐标\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.hadSkipped = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e;\x3cspan class=\x22hljs-comment\x22\x3e\/\/是否被越过\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.hadSkippedChange = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e;\x3cspan class=\x22hljs-comment\x22\x3e\/\/去重\x3c\/span\x3e\n  }\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/绘制水管\x3c\/span\x3e\n  drawPipe() {\n    ctx.drawImage(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.up_pipe,\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.posX,\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.up_height*\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e);\n    ctx.drawImage(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.down_pipe,\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.posX,\x3cspan class=\x22hljs-number\x22\x3e362\x3c\/span\x3e-\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.down_height);\n  }\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/绘制管体\x3c\/span\x3e\n  drawMods() {\n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i=\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;i\x26lt;\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.up_height;i\x2b\x2b){\n      ctx.drawImage(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.up_mod,\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.posX,i*\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e)\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e j=\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;j\x26lt;\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.down_height;j\x2b\x2b){\n      ctx.drawImage(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.down_mod,\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.posX,\x3cspan class=\x22hljs-number\x22\x3e362\x3c\/span\x3e-\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.down_height\x2b\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.down_pipe.height\x2bj);\n    }\n  }\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/水管移动\x3c\/span\x3e\n  move() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.posX -= \x3cspan class=\x22hljs-number\x22\x3e6\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.drawMods();\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.drawPipe();\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010542676\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010542676\x22 alt=\x22管口\x22 title=\x22管口\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010542677\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010542677\x22 alt=\x22管体\x22 title=\x22管体\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e\x3cbr\x3e又是一段冗长的代码，大家不要急躁，我来给大家详细解释，水管分为两部分，一部分是固定的管口，还有一部分是为了控制钢管长度的管体，在上面的图片也可以看到，每一关的管道是分为上下两个的——up_pipe和down_pipe，也就是说我们看到的钢管是由数个相同的管体加管口构成的，这里管体的数量是随机的，这样就可以使管道拥有随机的长度了。然后为了保证上下两个钢管的中间距离固定，下管道的高度就是总高度减去上管道的高度，嗯，这里需要理一理，大家也可以直接去看我的代码。有了上面的理论，接下来就简单了，绘制管口drawPipe()，注意给管体预留出位置来，再绘制管体drawMods(),用一个for循环依次绘制出数个管体叠加在一起的样子。水管移动move(),就是改变水管的横坐标了。这里可以通过改变上下水管高度的总值，来增加上下水管之间的距离，是不是游戏难度一下就降了很多？再有就是判断水管是否被小鸟跨越的hadskiped属性，往下看\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/判断是否越过水管\n  function isSkipped(oPipe) {\n    if(bird.posX\x3eoPipe.posX\x2boPipe.down_pipe.width){\n      \/\/水管已经被越过\n      oPipe.hadSkipped = true;\n      \/\/确保水管只被越过一次\n      if(!oPipe.hadSkippedChange\x26amp;\x26amp;oPipe.hadSkipped){\n        \/\/分数\x2b1\n        scroll\x2b\x2b;\n        oPipe.hadSkippedChange = true;\n      }\n    }\n  }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/判断是否越过水管\x3c\/span\x3e\n  \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eisSkipped\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eoPipe\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(bird.posX\x26gt;oPipe.posX\x2boPipe.down_pipe.width){\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/水管已经被越过\x3c\/span\x3e\n      oPipe.hadSkipped = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/确保水管只被越过一次\x3c\/span\x3e\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(!oPipe.hadSkippedChange\x26amp;\x26amp;oPipe.hadSkipped){\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/分数\x2b1\x3c\/span\x3e\n        scroll\x2b\x2b;\n        oPipe.hadSkippedChange = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n      }\n    }\n  }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我是通过判断水管的位置是否已经位于小鸟的后面来判断，小鸟是否越过了水管的，如果越过了就\x2b1分，至于没越过就是通过前面讲过到的isHit()判断了，因为不是同一时间段发生的事情所以不能放在一起。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader10\x22\x3e计分表\x3c\/h3\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010542678\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010542678\x22 alt=\x22计分表\x22 title=\x22计分表\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var scroll = 0;\/\/当前得分\nvar scrollImg = [imgs.scroe0,imgs.scroe1,imgs.scroe2,\n              imgs.scroe3,imgs.scroe4,imgs.scroe5,\n              imgs.scroe6,imgs.scroe7,imgs.scroe8,\n              imgs.scroe9];\/\/存储数字图片\n  \/\/绘制当前得分\n  function drawScore() {\n    \/\/每绘制一位数，向右移23，绘制下一位数\n    for(var i=0;i\x3cscroll.toString().length;i\x2b\x2b){\n      ctx.drawImage(scrollImg[parseInt(scroll.toString().substr(i,1))],147\x2bi*23,40)\n    }\n  }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e scroll = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\x3cspan class=\x22hljs-comment\x22\x3e\/\/当前得分\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e scrollImg = [imgs.scroe0,imgs.scroe1,imgs.scroe2,\n              imgs.scroe3,imgs.scroe4,imgs.scroe5,\n              imgs.scroe6,imgs.scroe7,imgs.scroe8,\n              imgs.scroe9];\x3cspan class=\x22hljs-comment\x22\x3e\/\/存储数字图片\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/绘制当前得分\x3c\/span\x3e\n  \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edrawScore\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/每绘制一位数，向右移23，绘制下一位数\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i=\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;i\x26lt;scroll.toString().length;i\x2b\x2b){\n      ctx.drawImage(scrollImg[\x3cspan class=\x22hljs-built_in\x22\x3eparseInt\x3c\/span\x3e(scroll.toString().substr(i,\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e))],\x3cspan class=\x22hljs-number\x22\x3e147\x3c\/span\x3e\x2bi*\x3cspan class=\x22hljs-number\x22\x3e23\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e40\x3c\/span\x3e)\n    }\n  }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e首先，把所有分数有关的图片放到这里scrollImg来，方便使用。然后判断数字的位数，也就是个十百千万。循环并截取每个位数，再通过相应的图片绘制出来，并且每绘制一个位数的图片位置向右移23，这样数字就不会叠在一起了。这里有一种最没意思的作弊方法，就是手动调整分数，但这只是一个数字，游戏的乐趣果然还是在于过程，下面...\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader11\x22\x3e游戏开始！\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/游戏界面\n  function gameLayer() {\n    gameTimer = setInterval(function () {\n      clean();\n      drawBg();\n      drawGrass();\n      if(gameTime%5 == 0){\n        if(gameTime == 30){\n          createPipes();\n          gameTime = 0;\n        }\n        bird.wingWave();\n      }\n      gameTime\x2b\x2b;\n      for(var i = 0;i\x3c pipes.length;i\x2b\x2b){\n        pipes[i].move();\n        isHit(pipes[i]);\n        isSkipped(pipes[i]);\n      }\n      drawScore();\n      bird.fly();\n      \/\/如果小鸟死了\n      if(!bird.alive){\n        gameOver();\/\/游戏结束\n        reset();\/\/数据重置\n      }\n    }, 24);\n  }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/游戏界面\x3c\/span\x3e\n  \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3egameLayer\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    gameTimer = setInterval(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n      clean();\n      drawBg();\n      drawGrass();\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(gameTime%\x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e == \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e){\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(gameTime == \x3cspan class=\x22hljs-number\x22\x3e30\x3c\/span\x3e){\n          createPipes();\n          gameTime = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n        }\n        bird.wingWave();\n      }\n      gameTime\x2b\x2b;\n      \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;i\x26lt; pipes.length;i\x2b\x2b){\n        pipes[i].move();\n        isHit(pipes[i]);\n        isSkipped(pipes[i]);\n      }\n      drawScore();\n      bird.fly();\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/如果小鸟死了\x3c\/span\x3e\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(!bird.alive){\n        gameOver();\x3cspan class=\x22hljs-comment\x22\x3e\/\/游戏结束\x3c\/span\x3e\n        reset();\x3cspan class=\x22hljs-comment\x22\x3e\/\/数据重置\x3c\/span\x3e\n      }\n    }, \x3cspan class=\x22hljs-number\x22\x3e24\x3c\/span\x3e);\n  }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e...看到这里，估计已经有人在骂我了，讲了半天游戏还没开始...好吧，你们看，其实游戏的界面也不过是一个定时器，将前面讲到的函数和代码，无脑的、重复的执行着。然后这里一定要注意画图的顺序，不然后画的部分会把前面覆盖掉，其次这里的gameTimer和gameTime也和开始界面中startTimer、startTime起到类似的作用，每过一段较长的时间生成一个水管，也就是通过水管类实例化一个水管对象，具体的方法被我封装进一个createPipes函数里了。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var pipes = [];\/\/用于存放水管\nfunction createPipes() {\n    var pipe = new Pipe(imgs.up_pipe,imgs.up_mod,imgs.down_pipe,imgs.down_mod);\n    \/\/添加进pipes中，如果已经有三个水管，则依次替换\n    if(pipes.length\x3c3){\n      pipes.push(pipe);\n    }else{\n      pipes[index] = pipe;\n      index\x2b\x2b;\n      if(index \x3e= 3){\n        index = 0;\n      }\n    }\n  }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e pipes = [];\x3cspan class=\x22hljs-comment\x22\x3e\/\/用于存放水管\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ecreatePipes\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e pipe = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Pipe(imgs.up_pipe,imgs.up_mod,imgs.down_pipe,imgs.down_mod);\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/添加进pipes中，如果已经有三个水管，则依次替换\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(pipes.length\x26lt;\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e){\n      pipes.push(pipe);\n    }\x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e{\n      pipes[index] = pipe;\n      index\x2b\x2b;\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(index \x26gt;= \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e){\n        index = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n      }\n    }\n  }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e因为实现的方法没有想象中那么简单，首先我们要创造一个水管的数组，它的作用就是为了控制水管的数量，不然我们的定时器就会一遍一遍的创造出无数的水管，但是前面的水管早就离我们远去，所以我就用数组把水管装起来，控制只有一个屏幕的水管，也就是三个。如果创建了超过三个水管，就会把最前面一个替换掉，因为它已经超出了我们的视野。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader12\x22\x3e响应事件\x3c\/h3\x3e\n\x3cp\x3e光有动画也不行，只能看不能玩有个皮用啊。所以我们当然要添加响应事件了。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/键盘点击事件\n  function kd(e) {\n    if (e.keyCode === 32) {\n      bird.speed = -10;\n    }\n  }\n  \/\/触屏事件\n  function ts() {\n    bird.speed = -10;\n  }\n  \/\/start按钮点击事件\n  function startBtn_click(e) {\n    \/\/判断点击位置\n    if(e.clientX\x3ecanvas.offsetLeft\x2bcanvas.width\/2-imgs.startBtn.width\/2\n      \x26amp;\x26amp;e.clientX\x3ccanvas.offsetLeft\x2bcanvas.width\/2\x2bimgs.startBtn.width\/2\n      \x26amp;\x26amp;e.clientY\x3ccanvas.offsetTop\x2b300\x2bimgs.startBtn.height\n      \x26amp;\x26amp;e.clientY\x3ecanvas.offsetTop\x2b300){\n      clean();\n      \/\/清除开始界面定时器\n      clearInterval(startTimer);\n      gameLayer();\n      \/\/添加响应事件\n      window.addEventListener(\x27keydown\x27,kd,false)\n      window.addEventListener(\x27touchstart\x27,ts,false)\n      \/\/删除start按钮响应事件\n      canvas.removeEventListener(\x27click\x27,startBtn_click,false);\n    }\n  }\n  canvas.addEventListener(\x27click\x27, startBtn_click , false);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/键盘点击事件\x3c\/span\x3e\n  \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ekd\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ee\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (e.keyCode === \x3cspan class=\x22hljs-number\x22\x3e32\x3c\/span\x3e) {\n      bird.speed = \x3cspan class=\x22hljs-number\x22\x3e-10\x3c\/span\x3e;\n    }\n  }\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/触屏事件\x3c\/span\x3e\n  \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ets\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    bird.speed = \x3cspan class=\x22hljs-number\x22\x3e-10\x3c\/span\x3e;\n  }\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/start按钮点击事件\x3c\/span\x3e\n  \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3estartBtn_click\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ee\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/判断点击位置\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(e.clientX\x26gt;canvas.offsetLeft\x2bcanvas.width\/\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e-imgs.startBtn.width\/\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e\n      \x26amp;\x26amp;e.clientX\x26lt;canvas.offsetLeft\x2bcanvas.width\/\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e\x2bimgs.startBtn.width\/\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e\n      \x26amp;\x26amp;e.clientY\x26lt;canvas.offsetTop\x2b\x3cspan class=\x22hljs-number\x22\x3e300\x3c\/span\x3e\x2bimgs.startBtn.height\n      \x26amp;\x26amp;e.clientY\x26gt;canvas.offsetTop\x2b\x3cspan class=\x22hljs-number\x22\x3e300\x3c\/span\x3e){\n      clean();\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/清除开始界面定时器\x3c\/span\x3e\n      clearInterval(startTimer);\n      gameLayer();\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/添加响应事件\x3c\/span\x3e\n      \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27keydown\x27\x3c\/span\x3e,kd,\x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e)\n      \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27touchstart\x27\x3c\/span\x3e,ts,\x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e)\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/删除start按钮响应事件\x3c\/span\x3e\n      canvas.removeEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27click\x27\x3c\/span\x3e,startBtn_click,\x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e);\n    }\n  }\n  canvas.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27click\x27\x3c\/span\x3e, startBtn_click , \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这就是所有的响应事件了，通过按空格键和点击屏幕都可以改变小鸟的速度，只要把这个速度调整到一个比较舒服的程度，游戏难度就会大大降低。其次，因为canvas是一个整体，所以我们没有办法直接监听里面图片按钮的响应事件，只能退而求其次，判断点击的位置是否在按钮的位置上了，就上面那段有点长的if判断语句。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader13\x22\x3e游戏结束\x3c\/h3\x3e\n\x3cp\x3e假如我们的主角真的一个不小心如我们所料的撞死在了钢管上（往上翻，就在游戏开始那里），那就表示gameOver();\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22  \/\/游戏结束\n  function gameOver(){\n    \/\/清除定时器\n    clearInterval(gameTimer);\n    \/\/清除窗口响应事件\n    window.removeEventListener(\x27keydown\x27,kd,false);\n    window.removeEventListener(\x27touchstart\x27,ts,false);\n    \/\/绘制GAME OVER\n    ctx.font = \x26quot;50px blod\x26quot;;\n    ctx.fontWeight = \x271000\x27\n    ctx.fillStyle = \x26quot;white\x26quot;;\n    ctx.fillText(\x26quot;GAME OVER\x26quot;, 20, 200);\n    drawStartBtn();\n  }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e  \x3cspan class=\x22hljs-comment\x22\x3e\/\/游戏结束\x3c\/span\x3e\n  \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3egameOver\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/清除定时器\x3c\/span\x3e\n    clearInterval(gameTimer);\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/清除窗口响应事件\x3c\/span\x3e\n    \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.removeEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27keydown\x27\x3c\/span\x3e,kd,\x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.removeEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27touchstart\x27\x3c\/span\x3e,ts,\x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/绘制GAME OVER\x3c\/span\x3e\n    ctx.font = \x3cspan class=\x22hljs-string\x22\x3e\x2250px blod\x22\x3c\/span\x3e;\n    ctx.fontWeight = \x3cspan class=\x22hljs-string\x22\x3e\x271000\x27\x3c\/span\x3e\n    ctx.fillStyle = \x3cspan class=\x22hljs-string\x22\x3e\x22white\x22\x3c\/span\x3e;\n    ctx.fillText(\x3cspan class=\x22hljs-string\x22\x3e\x22GAME OVER\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e);\n    drawStartBtn();\n  }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010542679\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010542679\x22 alt=\x22游戏结束\x22 title=\x22游戏结束\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e\x3cbr\x3e整个世界都平静了下来，定时器关掉，响应事件移除掉，然后绘上大大的、惨白的GAME OVER,下面附带一个游戏开始时就出现的start按钮。不是有一句话说的是，结束不过是新的开始吗，你又可以再来一局了。......好吧，这个就是我为了偷懒随便搞搞的。不过这还没完，数据还得重置一下，不然怎么重新开始。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22  \/\/重置数据\n  function reset(){\n    bird.posY = 200;\n    bird.speed = 0;\n    bird.alive = true;\n    pipes = [];\n    scroll = 0;\n    canvas.addEventListener(\x27click\x27, startBtn_click , false);\n  }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e  \x3cspan class=\x22hljs-comment\x22\x3e\/\/重置数据\x3c\/span\x3e\n  \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ereset\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n    bird.posY = \x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e;\n    bird.speed = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n    bird.alive = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n    pipes = [];\n    scroll = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n    canvas.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27click\x27\x3c\/span\x3e, startBtn_click , \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e);\n  }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e最后再给这个start按钮添加上点击事件，大功告成！这就是我调整难度之后的样子：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010542680\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010542680\x22 alt=\x22低难度版\x22 title=\x22低难度版\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e\x3cbr\x3e啧啧啧，这种闲庭信步的感觉......\x3cbr\x3e\x3cbr\x3e果然游戏还是有点难度才有意思......\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader14\x22\x3e总结\x3c\/h2\x3e\n\x3cp\x3e吁...一篇又臭又长、废话又多的文章终于写完了，如果大家觉得有帮助，或者对这篇文章有兴趣的话，就赏个赞。如果觉得我的程序有问题，或者有别的想说的，都可以在评论里告诉我，我会看的。\x3cbr\x3e\x3cbr\x3e我的项目地址：\x3ca href=\x22https:\/\/github.com\/tzc123\/canvas_game\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/tzc123\/can...\x3c\/a\x3e\x3cbr\x3e\x3cbr\x3e参考项目地址：\x3ca href=\x22http:\/\/www.jianshu.com\/p\/45d994d04a25\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/www.jianshu.com\/p\/45d9...\x3c\/a\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>canvas小游戏——flappy bird</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000010542669">https://segmentfault.com/a/1190000010542669</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/qef8o4z447/" target="_blank">https://alili.tech/archive/qef8o4z447/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>