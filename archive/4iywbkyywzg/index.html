<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="[使用 Weex 和 Vue 开发原生应用] 4 使用 Weex 平台的功能"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>[使用 Weex 和 Vue 开发原生应用] 4 使用 Weex 平台的功能 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/4iywbkyywzg/",
				"appid": "1613049289050283", 
				"title": "[使用 Weex 和 Vue 开发原生应用] 4 使用 Weex 平台的功能 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-26T02:30:18"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/qa2c1jrsv1/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/xuhcpsrkbci/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f4iywbkyywzg%2f&text=%5b%e4%bd%bf%e7%94%a8%20Weex%20%e5%92%8c%20Vue%20%e5%bc%80%e5%8f%91%e5%8e%9f%e7%94%9f%e5%ba%94%e7%94%a8%5d%204%20%e4%bd%bf%e7%94%a8%20Weex%20%e5%b9%b3%e5%8f%b0%e7%9a%84%e5%8a%9f%e8%83%bd"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f4iywbkyywzg%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f4iywbkyywzg%2f&text=%5b%e4%bd%bf%e7%94%a8%20Weex%20%e5%92%8c%20Vue%20%e5%bc%80%e5%8f%91%e5%8e%9f%e7%94%9f%e5%ba%94%e7%94%a8%5d%204%20%e4%bd%bf%e7%94%a8%20Weex%20%e5%b9%b3%e5%8f%b0%e7%9a%84%e5%8a%9f%e8%83%bd"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f4iywbkyywzg%2f&title=%5b%e4%bd%bf%e7%94%a8%20Weex%20%e5%92%8c%20Vue%20%e5%bc%80%e5%8f%91%e5%8e%9f%e7%94%9f%e5%ba%94%e7%94%a8%5d%204%20%e4%bd%bf%e7%94%a8%20Weex%20%e5%b9%b3%e5%8f%b0%e7%9a%84%e5%8a%9f%e8%83%bd"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f4iywbkyywzg%2f&is_video=false&description=%5b%e4%bd%bf%e7%94%a8%20Weex%20%e5%92%8c%20Vue%20%e5%bc%80%e5%8f%91%e5%8e%9f%e7%94%9f%e5%ba%94%e7%94%a8%5d%204%20%e4%bd%bf%e7%94%a8%20Weex%20%e5%b9%b3%e5%8f%b0%e7%9a%84%e5%8a%9f%e8%83%bd"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%5b%e4%bd%bf%e7%94%a8%20Weex%20%e5%92%8c%20Vue%20%e5%bc%80%e5%8f%91%e5%8e%9f%e7%94%9f%e5%ba%94%e7%94%a8%5d%204%20%e4%bd%bf%e7%94%a8%20Weex%20%e5%b9%b3%e5%8f%b0%e7%9a%84%e5%8a%9f%e8%83%bd&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f4iywbkyywzg%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f4iywbkyywzg%2f&title=%5b%e4%bd%bf%e7%94%a8%20Weex%20%e5%92%8c%20Vue%20%e5%bc%80%e5%8f%91%e5%8e%9f%e7%94%9f%e5%ba%94%e7%94%a8%5d%204%20%e4%bd%bf%e7%94%a8%20Weex%20%e5%b9%b3%e5%8f%b0%e7%9a%84%e5%8a%9f%e8%83%bd"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f4iywbkyywzg%2f&title=%5b%e4%bd%bf%e7%94%a8%20Weex%20%e5%92%8c%20Vue%20%e5%bc%80%e5%8f%91%e5%8e%9f%e7%94%9f%e5%ba%94%e7%94%a8%5d%204%20%e4%bd%bf%e7%94%a8%20Weex%20%e5%b9%b3%e5%8f%b0%e7%9a%84%e5%8a%9f%e8%83%bd"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f4iywbkyywzg%2f&title=%5b%e4%bd%bf%e7%94%a8%20Weex%20%e5%92%8c%20Vue%20%e5%bc%80%e5%8f%91%e5%8e%9f%e7%94%9f%e5%ba%94%e7%94%a8%5d%204%20%e4%bd%bf%e7%94%a8%20Weex%20%e5%b9%b3%e5%8f%b0%e7%9a%84%e5%8a%9f%e8%83%bd"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f4iywbkyywzg%2f&title=%5b%e4%bd%bf%e7%94%a8%20Weex%20%e5%92%8c%20Vue%20%e5%bc%80%e5%8f%91%e5%8e%9f%e7%94%9f%e5%ba%94%e7%94%a8%5d%204%20%e4%bd%bf%e7%94%a8%20Weex%20%e5%b9%b3%e5%8f%b0%e7%9a%84%e5%8a%9f%e8%83%bd"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">[使用 Weex 和 Vue 开发原生应用] 4 使用 Weex 平台的功能</h1><div class="meta"><div class="postdate"><time datetime="2019-01-26" itemprop="datePublished">2019-01-26</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e\x3cp\x3e系列文章的目录在 ? \x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000008342533\x22\x3e这里\x3c\/a\x3e\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e除了 Vue 框架提供的功能以为，Weex 平台本身也提供了很多功能，这些功能比前端框架更底层一些，而且是跨框架通用的，在 \x3ca href=\x22https:\/\/github.com\/vuejs\/vue\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eVue\x3c\/a\x3e 和 \x3ca href=\x22https:\/\/github.com\/alibaba\/rax\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eRax\x3c\/a\x3e 里都可以用。本文的几个例子越来越偏底层，最后一个例子还需要写 java 代码。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e使用 Weex 的模块\x3c\/h2\x3e\n\x3cblockquote\x3e\x3cp\x3e\x3ca href=\x22http:\/\/weex.apache.org\/cn\/references\/modules\/index.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eWeex 模块的文档\x3c\/a\x3e\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e通过 \x3ccode\x3eweex.requireModule\x3c\/code\x3e 即可引入 weex 的模块。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const modal = weex.requireModule(\x27modal\x27)\n\nmodal.toast({\n  message: \x27native toast\x27\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e modal = weex.requireModule(\x3cspan class=\x22hljs-string\x22\x3e\x27modal\x27\x3c\/span\x3e)\n\nmodal.toast({\n  \x3cspan class=\x22hljs-attr\x22\x3emessage\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27native toast\x27\x3c\/span\x3e\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3eWeex 的模块到底是什么东西？\x3c\/h3\x3e\n\x3cp\x3e模块的用法很简单，像普通 js 模块一样调接口就行了，看起来挺像一个 npm 模块的，但是在 Weex 模块内部会调用原生接口，最终调用的都是原生平台提供的功能。\x3cstrong\x3eWeex 的模块提供了使用原生功能的能力。\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e例如 \x3ca href=\x22http:\/\/weex.apache.org\/cn\/references\/modules\/modal.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e\x3ccode\x3emodal\x3c\/code\x3e 模块\x3c\/a\x3e可以弹出 \x3ccode\x3etoast\x3c\/code\x3e 、\x3ccode\x3ealert\x3c\/code\x3e 、\x3ccode\x3econfirm\x3c\/code\x3e 、\x3ccode\x3eprompt\x3c\/code\x3e 等各种弹窗，这些弹窗都是原生弹窗，在 Android 和 iOS 下的风格和行为是由各自的系统决定的。Weex 的模块在 js 这一层只负责向原生环境里传递数据，通知 native 去执行某些操作。\x3c\/p\x3e\n\x3cp\x3e像 \x3ccode\x3estorage\x3c\/code\x3e 、\x3ccode\x3enavigator\x3c\/code\x3e 、\x3ccode\x3eclipboard\x3c\/code\x3e 这种依赖平台特性的功能，需要调用平台原生接口才能实现，所以只能写成模块。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e模块的同步和异步\x3c\/h3\x3e\n\x3cp\x3e一般来说，都是调用模块的功能，并不会依赖模块返回值的，但是像 \x3ca href=\x22http:\/\/weex.apache.org\/cn\/references\/modules\/dom.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e\x3ccode\x3edom\x3c\/code\x3e 模块\x3c\/a\x3e中的 \x3ccode\x3egetComponentRect\x3c\/code\x3e 接口是用来计算组件的宽高和位置的，必须得从原生端获取值。但是在 Weex 最初设计的版本里，模块都是异步返回值的，也就是说，只能通过回调函数的方式拿到真正的布局信息（也可以自己封装成 Promise）。现在 Weex 已经支持了模块的同步返回值，但是为了保持原先版本中接口的行为一致，\x3ccode\x3egetComponentRect\x3c\/code\x3e 这个方法依然是异步的。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const dom = weex.requireModule(\x27dom\x27)\n\nconst returns = dom.getComponentRect(this.$refs.box, option =\x3e {\n  console.log(option) \/\/ { result: true, size: { ... } }\n})\n\nconsole.log(returns) \/\/ undefined\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e dom = weex.requireModule(\x3cspan class=\x22hljs-string\x22\x3e\x27dom\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e returns = dom.getComponentRect(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$refs.box, option =\x26gt; {\n  \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(option) \x3cspan class=\x22hljs-comment\x22\x3e\/\/ { result: true, size: { ... } }\x3c\/span\x3e\n})\n\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(returns) \x3cspan class=\x22hljs-comment\x22\x3e\/\/ undefined\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上边的代码中，会先执行 \x3ccode\x3econsole.log(returns)\x3c\/code\x3e 再执行 \x3ccode\x3econsole.log(option)\x3c\/code\x3e，并且 \x3ccode\x3egetComponentRect\x3c\/code\x3e 方法没有返回值，所以 \x3ccode\x3ereturns\x3c\/code\x3e 的值是 undefined，\x3ccode\x3eoption\x3c\/code\x3e 中才是真正的原生端返回的布局信息。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e扩展 Weex 的模块\x3c\/h3\x3e\n\x3cp\x3eWeex 本身内置了很多模块，出于通用性考虑，我们只会把最基础的模块打包进 SDK。其他个性化的模块可以自己来实现，或者从社区中找。\x3ca href=\x22http:\/\/market.weex-project.io\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eWeex Market\x3c\/a\x3e 将会是一个收集这些扩展模块（组件、插件）的地方，结合 \x3ca href=\x22https:\/\/github.com\/weexteam\/weex-pack\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eweex-pack\x3c\/a\x3e 可以实现方便的安装和扩展。\x3cstrong\x3e（目前来说，Weex Market 中还是基于旧版 \x3ccode\x3e.we\x3c\/code\x3e语法的模块比较多，不适用于 Vue，在使用前要看准适用的框架）\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e具体的扩展 Weex 模块的方法，参考：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/weex.apache.org\/cn\/references\/android-apis.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e《Android APIs》\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/weex.apache.org\/cn\/references\/advanced\/extend-to-android.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e《Android 扩展》\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/weex.apache.org\/cn\/references\/ios-apis.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e《iOS APIs》\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/weex.apache.org\/cn\/references\/advanced\/extend-to-ios.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e《iOS 扩展》\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e获取平台环境数据\x3c\/h2\x3e\n\x3cp\x3eWeex 的运行环境有好几种，在写代码的时候，有些情况下需要获取环境数据。Weex 提供了 \x3ccode\x3eweex.config\x3c\/code\x3e 变量可以获取配置信息。\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3ebundleUrl\x3c\/code\x3e: 当前 js bundle 的 URL 地址。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3e\x3ccode\x3eenv\x3c\/code\x3e: 环境对象。\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3eweexVersion\x3c\/code\x3e: WeexSDK 的版本。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3eappName\x3c\/code\x3e: 应用名字。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3eappVersion\x3c\/code\x3e: 应用版本。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3eplatform\x3c\/code\x3e: 平台信息，目前是 \x3ccode\x3e\x22iOS\x22\x3c\/code\x3e、\x3ccode\x3e\x22Android\x22\x3c\/code\x3e 和 \x3ccode\x3e\x22Web\x22\x3c\/code\x3e 之一。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3eosVersion\x3c\/code\x3e: 系统版本。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3edeviceModel\x3c\/code\x3e: 设备型号 (仅限 iOS 和 Android)。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3edeviceWidth\x3c\/code\x3e: 设备宽度。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ccode\x3edeviceHeight\x3c\/code\x3e: 设备高度。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e此外其实还有一个全局的 \x3ccode\x3eWXEnvironment\x3c\/code\x3e 变量，它和 \x3ccode\x3eweex.config.env\x3c\/code\x3e 的属性是一样的。\x3c\/p\x3e\n\x3cp\x3e下边是一个获取环境数据的二维码（支持拷贝）：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVJGdd?w=400\x26amp;h=450\x22 src=\x22https:\/\/static.alili.tech\/img\/bVJGdd?w=400\x26amp;h=450\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e写三端不一致的代码\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e只针对 native 平台注册 Vuex\x3c\/h3\x3e\n\x3cp\x3e因为在浏览器环境中，Vuex 是会\x3ca href=\x22https:\/\/github.com\/vuejs\/vuex\/blob\/v2.1.2\/src\/index.js#L425-L428\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e自动注册\x3c\/a\x3e的，只需要引入库文件就行了，如果重复注册，Vuex 会抛出警告的。(下边这段代码摘自 Vuex)\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ auto install in dist mode\nif (typeof window !== \x27undefined\x27 \x26amp;\x26amp; window.Vue) {\n  install(window.Vue)\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ auto install in dist mode\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e !== \x3cspan class=\x22hljs-string\x22\x3e\x27undefined\x27\x3c\/span\x3e \x26amp;\x26amp; \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.Vue) {\n  install(\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.Vue)\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e但是在 native 环境中没有 \x3ccode\x3ewindow\x3c\/code\x3e 变量，就需要再手动调用 \x3ccode\x3eVue.use(Vuex)\x3c\/code\x3e 注册 Vuex 插件，在注册前判断当前运行的平台。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import Vue from \x27vue\x27\nimport Vuex from \x27vuex\x27\n\n\/\/ Vuex is auto installed on the web\nif (WXEnvironment.platform !== \x27Web\x27) {\n  Vue.use(Vuex)\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Vue \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27vue\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Vuex \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27vuex\x27\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ Vuex is auto installed on the web\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (WXEnvironment.platform !== \x3cspan class=\x22hljs-string\x22\x3e\x27Web\x27\x3c\/span\x3e) {\n  Vue.use(Vuex)\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e不同的链接跳转行为\x3c\/h3\x3e\n\x3cp\x3e如果你在不同端上运行了 \x3ca href=\x22https:\/\/github.com\/weexteam\/weex-hackernews\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eweex-hackernews\x3c\/a\x3e 里的项目，会发现在浏览器上点击文章链接是会新开一个页签的，但是在客户端上点击链接就不会新开视图，而是在当前视图里跳转。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVJGde?w=804\x26amp;h=504\x22 src=\x22https:\/\/static.alili.tech\/img\/bVJGde?w=804\x26amp;h=504\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e这种不同的行为体现在 \x3ca href=\x22https:\/\/github.com\/weexteam\/weex-hackernews\/blob\/v1.0\/src\/components\/story.vue#L4-L7\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3estory.vue\x3c\/a\x3e 文件里，这里的跳转链接并不是直接使用的 Weex 里的 \x3ca href=\x22http:\/\/weex.apache.org\/cn\/references\/components\/a.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e\x3ccode\x3e\x26lt;a\x26gt;\x3c\/code\x3e\x3c\/a\x3e 标签，而是自定义了一个 \x3ccode\x3e\x26lt;external-link\x26gt;\x3c\/code\x3e 的组件，把 \x3ccode\x3eurl\x3c\/code\x3e 参数传过去。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cexternal-link :url=\x26quot;story.url\x26quot;\x3e\n  \x3ctext\x3e\x22{{\x22story.title\x22}}\x22\x3c\/text\x3e\n  \x3ctext v-if=\x26quot;story.url\x26quot;\x3e(\x22{{\x22 story.url | host \x22}}\x22)\x3c\/text\x3e\n\x3c\/external-link\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eexternal-link\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e:url\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22story.url\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etext\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x22{{\x22story.title\x22}}\x22\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etext\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etext\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ev-if\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22story.url\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e(\x22{{\x22 story.url | host \x22}}\x22)\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etext\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eexternal-link\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e页面跳转逻辑是在 \x3ca href=\x22https:\/\/github.com\/weexteam\/weex-hackernews\/blob\/v1.0\/src\/components\/external-link.vue\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eexternal-link.vue\x3c\/a\x3e 里组件实现的：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3ctemplate\x3e\n  \x3cdiv @click=\x26quot;open\x26quot;\x3e\n    \x3cslot\x3e\x3c\/slot\x3e\n  \x3c\/div\x3e\n\x3c\/template\x3e\n\n\x3cscript\x3e\n  export default {\n    props: [\x27url\x27],\n    methods: {\n      open () {\n        const env = weex.config.env || WXEnvironment\n\n        \/\/ open a new window (tab) on the web\n        if (env.platform === \x27Web\x27) {\n          window.open(this.url)\n          return\n        }\n\n        \/\/ change router path on native (Android \x26amp; iOS)\n        this.jump(`\/article\/${this.url}`)\n      }\n    }\n  }\n\x3c\/script\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e @\x3cspan class=\x22hljs-attr\x22\x3eclick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22open\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eslot\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eslot\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-attr\x22\x3eprops\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x27url\x27\x3c\/span\x3e],\n    \x3cspan class=\x22hljs-attr\x22\x3emethods\x3c\/span\x3e: {\n      open () {\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e env = weex.config.env || WXEnvironment\n\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ open a new window (tab) on the web\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (env.platform === \x3cspan class=\x22hljs-string\x22\x3e\x27Web\x27\x3c\/span\x3e) {\n          \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.open(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.url)\n          \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e\n        }\n\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ change router path on native (Android \x26amp; iOS)\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.jump(\x3cspan class=\x22hljs-string\x22\x3e`\/article\/\x3cspan class=\x22hljs-subst\x22\x3e${\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.url}\x3c\/span\x3e`\x3c\/span\x3e)\n      }\n    }\n  }\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e该组件监听了 \x3ccode\x3eclick\x3c\/code\x3e 事件，在点击时会首先判断当前运行的平台，如果是 \x3ccode\x3eWeb\x3c\/code\x3e ，则使用 \x3ccode\x3ewindow.open\x3c\/code\x3e 新开页面，否则（在原生平台中）就默认使用 \x3ccode\x3evue-router\x3c\/code\x3e 进行跳转，这个“跳转”其实只是更新了当前的视图，其实还在同一个原生页面内。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3e透传原生事件\x3c\/h2\x3e\n\x3cp\x3e如果你看了 \x3ca href=\x22https:\/\/github.com\/weexteam\/weex-hackernews\/blob\/v1.0\/src\/App.vue#L2\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3esrc\/App.vue\x3c\/a\x3e 中的代码，会发现里边用了一个 \x3ccode\x3eandroidback\x3c\/code\x3e 的事件。它实现的效果是绑定了 Android 中的“返回”事件，点击返回按钮就会退回上一个视图。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3ctemplate\x3e\n  \x3cdiv @androidback=\x26quot;back\x26quot;\x3e\n    \x3crouter-view\x3e\x3c\/router-view\x3e\n  \x3c\/div\x3e\n\x3c\/template\x3e\n\n\x3cscript\x3e\n  export default {\n    methods: {\n      back () {\n        this.$router.back()\n      }\n    }\n  }\n\x3c\/script\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e @\x3cspan class=\x22hljs-attr\x22\x3eandroidback\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22back\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3erouter-view\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3erouter-view\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-attr\x22\x3emethods\x3c\/span\x3e: {\n      back () {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$router.back()\n      }\n    }\n  }\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这个事件并不是 Vue.js 本身提供的，也不是 Web 标准里的，在浏览器上肯定不会给你提供一个以 \x3ccode\x3eandroid\x3c\/code\x3e 开头的事件名。在 \x3ccode\x3evue-router\x3c\/code\x3e 里也不会加这样的东西。甚至如果你去翻 Weex 的文档，也找不到这个事件类型，它也不是 Weex 默认提供的。\x3c\/p\x3e\n\x3cp\x3e想要实现 Android 特有的功能，就得在 Android 项目里的代码，在“前端”层面是解决不了这个问题的，要写 \x3ccode\x3ejava\x3c\/code\x3e。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader9\x22\x3e在 Android 中派发原生事件\x3c\/h3\x3e\n\x3cp\x3e首先，在 Android 里肯定是可以监听到“返回”按钮的点击事件的，其实只要实现 \x3ccode\x3eActivity\x3c\/code\x3e 里的 \x3ccode\x3eonBackPressed\x3c\/code\x3e 接口就可以了，它会在当前视图里点击返回按钮时执行。在 weex-hackernews Andorid 项目里的 \x3ca href=\x22https:\/\/github.com\/weexteam\/weex-hackernews\/blob\/v1.0\/android\/app\/src\/main\/java\/com\/example\/weex\/hackernews\/MainActivity.java#L53-L56\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eMainActivity.java\x3c\/a\x3e 中，就实现了 \x3ccode\x3eonBackPressed\x3c\/code\x3e 接口：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22public void onBackPressed() {\n    Log.e(\x26quot;USER ACTION\x26quot;, \x26quot;BACK\x26quot;);\n    WXSDKManager.getInstance().fireEvent(mWXSDKInstance.getInstanceId(), \x26quot;_root\x26quot;, \x26quot;androidback\x26quot;);\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22java hljs\x22\x3e\x3ccode class=\x22java\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3epublic\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3evoid\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eonBackPressed\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e \x3c\/span\x3e{\n    Log.e(\x3cspan class=\x22hljs-string\x22\x3e\x22USER ACTION\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22BACK\x22\x3c\/span\x3e);\n    WXSDKManager.getInstance().fireEvent(mWXSDKInstance.getInstanceId(), \x3cspan class=\x22hljs-string\x22\x3e\x22_root\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22androidback\x22\x3c\/span\x3e);\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在这个方法里，通过 \x3ccode\x3eWXSDKManager.getInstance()\x3c\/code\x3e 取到了当前页面的实例，然后调用 \x3ccode\x3efireEvent\x3c\/code\x3e 接口给根视图派发 \x3ccode\x3eandroidback\x3c\/code\x3e 事件，事件名是可以自定义的。在 Weex Runtime 中会接收到这个事件，会传递给 Vue.js 框架，并且触发最外层组件的 \x3ccode\x3eandroidback\x3c\/code\x3e 事件，最终会找到 \x3ccode\x3eback\x3c\/code\x3e 方法并执行。（这里说的 Weex Runtime 是前端代码实现的，比 Vue.js 更底层一些）。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader10\x22\x3e小结\x3c\/h2\x3e\n\x3cp\x3e除了 Vue.js 本身的特性以外，Weex 还提供了很多平台化的特性，这些特性比前端框架更底层，也更通用一些。即使你用的不是 Vue.js 而是 \x3ca href=\x22https:\/\/github.com\/alibaba\/rax\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eRax\x3c\/a\x3e，或者是旧版的 \x3ccode\x3e.we\x3c\/code\x3e 的语法，Weex 里的这些特性也都是可以用的。\x3c\/p\x3e\n\x3cp\x3e虽然同一份代码可以运行在三端，但是 iOS 和 Android 和 Web 都有各自的优势和缺陷，如果你想实现一些平台特有的功能，Weex 也是支持的。如果你想要体现平台特有的优势，就得针对某个平台写一下原生代码。在写 iOS 或者 Android 代码的时候，肯定能确保在其他平台中不会执行到；但是在写 js 代码的时候，如果使用了只在 Web 上才有的特性，就得注意一些，不要让 iOS 和 Android 执行到这些代码。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>[使用 Weex 和 Vue 开发原生应用] 4 使用 Weex 平台的功能</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000008464683">https://segmentfault.com/a/1190000008464683</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/4iywbkyywzg/" target="_blank">https://alili.tech/archive/4iywbkyywzg/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>