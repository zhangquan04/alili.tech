<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="Javascript Proxy对象 简介"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>Javascript Proxy对象 简介 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/8x2p8kdm04b/",
				"appid": "1613049289050283", 
				"title": "Javascript Proxy对象 简介 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-25T02:30:23"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/jjzixyvvoi/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/2syjrjeleno/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f8x2p8kdm04b%2f&text=Javascript%20Proxy%e5%af%b9%e8%b1%a1%20%e7%ae%80%e4%bb%8b"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f8x2p8kdm04b%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f8x2p8kdm04b%2f&text=Javascript%20Proxy%e5%af%b9%e8%b1%a1%20%e7%ae%80%e4%bb%8b"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f8x2p8kdm04b%2f&title=Javascript%20Proxy%e5%af%b9%e8%b1%a1%20%e7%ae%80%e4%bb%8b"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f8x2p8kdm04b%2f&is_video=false&description=Javascript%20Proxy%e5%af%b9%e8%b1%a1%20%e7%ae%80%e4%bb%8b"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=Javascript%20Proxy%e5%af%b9%e8%b1%a1%20%e7%ae%80%e4%bb%8b&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f8x2p8kdm04b%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f8x2p8kdm04b%2f&title=Javascript%20Proxy%e5%af%b9%e8%b1%a1%20%e7%ae%80%e4%bb%8b"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f8x2p8kdm04b%2f&title=Javascript%20Proxy%e5%af%b9%e8%b1%a1%20%e7%ae%80%e4%bb%8b"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f8x2p8kdm04b%2f&title=Javascript%20Proxy%e5%af%b9%e8%b1%a1%20%e7%ae%80%e4%bb%8b"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f8x2p8kdm04b%2f&title=Javascript%20Proxy%e5%af%b9%e8%b1%a1%20%e7%ae%80%e4%bb%8b"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">Javascript Proxy对象 简介</h1><div class="meta"><div class="postdate"><time datetime="2019-01-25" itemprop="datePublished">2019-01-25</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n            \x3ch1\x3e\x3ccenter\x3eJavascript Proxy对象\x3c\/center\x3e\x3c\/h1\x3e\n\x3ch2\x3e\x3ccenter\x3e改变你操作对象的方式\x3c\/center\x3e\x3c\/h2\x3e\n\x3cp\x3e\x3cimg src=\x22http:\/\/p0.qhimg.com\/t0155939497b6ee9df3.png\x22 alt=\x22\x22\x3e\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3cp\x3eProxies 是Javasript对象的中间件\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e...或者说至少是那种很早的版本。\x3c\/p\x3e\n\x3cp\x3eES6 中引入Proxies，让你可以自定义\x3ccode\x3eObject\x3c\/code\x3e的基本操作。例如，\x3ccode\x3eget\x3c\/code\x3e就是\x3ccode\x3eObject\x3c\/code\x3e的基础操作方法。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs ebnf\x22\x3e\x3cspan class=\x22hljs-attribute\x22\x3econst obj\x3c\/span\x3e = {\n   val: 10\n};\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cpre\x3e\x3ccode class=\x22hljs css\x22\x3e\x3cspan class=\x22hljs-selector-tag\x22\x3econsole\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.log\x3c\/span\x3e(\x3cspan class=\x22hljs-selector-tag\x22\x3eobj\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.val\x3c\/span\x3e);\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e这里，\x3ccode\x3econsole.log()\x3c\/code\x3e表达式在对象\x3ccode\x3eobj\x3c\/code\x3e上执行\x3ccode\x3eget\x3c\/code\x3e方法来获取\x3ccode\x3eval\x3c\/code\x3e的值。\x3c\/p\x3e\n\x3cp\x3e另一个对象的基本操作方法是 \x3ccode\x3eset\x3c\/code\x3e。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs ebnf\x22\x3e\x3cspan class=\x22hljs-attribute\x22\x3econst obj\x3c\/span\x3e = {\n   val: 10\n};\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cpre\x3e\x3ccode class=\x22hljs abnf\x22\x3eobj.val2 = \x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e这里，\x3ccode\x3eset\x3c\/code\x3e方法用来给对象\x3ccode\x3eobj\x3c\/code\x3e设置一个新的值。\x3c\/p\x3e\n\x3chr\x3e\n\x3ch3\x3e如何创建Proxy?\x3c\/h3\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs aspectj\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e proxiedObject = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Proxy(initialObj, \x3cspan class=\x22hljs-keyword\x22\x3ehandler\x3c\/span\x3e);\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e调用Proxy构造函数，\x3ccode\x3enew Proxy()\x3c\/code\x3e将返回一个对象，不仅包含了\x3ccode\x3einitialObj\x3c\/code\x3e里的值，而且其基本操作（如\x3ccode\x3eget\x3c\/code\x3e 和 \x3ccode\x3eset\x3c\/code\x3e）现在可以通过\x3ccode\x3ehandler\x3c\/code\x3e对象来指定一些自定义逻辑。\x3c\/p\x3e\n\x3cp\x3e我们写个例子来理解这个概念，\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs qml\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e handler = {\n    \x3cspan class=\x22hljs-attribute\x22\x3eget\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27A value has been accessed\x27\x3c\/span\x3e);\n    }\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e initialObj = {\n    \x3cspan class=\x22hljs-attribute\x22\x3eid:\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e 1,\n    name\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27Foo Bar\x27\x3c\/span\x3e\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e proxiedObj = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eProxy\x3c\/span\x3e(initialObj, handler);\n\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(proxiedObj.name);\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e现在，如果我们没有构造一个Proxy对象，执行第14行的\x3ccode\x3econsole.log(proxiedObj.name)\x3c\/code\x3e会在控制台输出 “Foo Bar”。\x3c\/p\x3e\n\x3cp\x3e不过现在我们定义了一个Proxy，并在第三行\x3ccode\x3eget\x3c\/code\x3e方法中定义了一些自定义逻辑。\x3c\/p\x3e\n\x3cp\x3e现在执行\x3ccode\x3econsole.log(proxiedObj.name)\x3c\/code\x3e会在控制台输出 “A value has been accessed”。\x3c\/p\x3e\n\x3cp\x3e\x3cimg src=\x22http:\/\/p0.qhimg.com\/t018c664821dd8b3c59.png\x22 alt=\x22\x22\x3e\x3c\/p\x3e\n\x3cp\x3e仔细看，你会发现控制台中实际上有两条记录。 “A value has been accessed” 和 \x3ccode\x3eundefined\x3c\/code\x3e。 为什么？?\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3eget\x3c\/code\x3e运算符的默认实现是返回Object中存储的值。由于我们将它重写为只记录一条语句，该值永远不会返回，因此第14行的\x3ccode\x3econsole.log()\x3c\/code\x3e输出\x3ccode\x3eundefined\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e让我们来解决这个问题！\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3eget\x3c\/code\x3e运算符有两个参数 - 对象本身和被访问的属性。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs qml\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e handler = {\n    \x3cspan class=\x22hljs-attribute\x22\x3eget\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eobj, prop\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27A value has been accessed\x27\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e obj[prop]; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 返回访问的key在obj的值\x3c\/span\x3e\n    }\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e initialObj = {\n    \x3cspan class=\x22hljs-attribute\x22\x3eid:\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e 1,\n    name\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27Foo Bar\x27\x3c\/span\x3e\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e proxiedObj = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eProxy\x3c\/span\x3e(initialObj, handler);\n\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(proxiedObj.name);\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ccenter\x3e返回属性值\x3c\/center\x3e\n\n\n\x3cp\x3e\x3cimg src=\x22http:\/\/p0.qhimg.com\/t01d390aefe3fc2aab1.png\x22 alt=\x22\x22\x3e\x3c\/p\x3e\n\x3ccenter\x3e返回属性值 --- 控制台的输出\x3c\/center\x3e\n\n\x3cp\x3e好多了吧! ?\x3c\/p\x3e\n\x3cp\x3e我们为\x3ccode\x3eget\x3c\/code\x3e提供的自定义覆盖被称为“拦截器”（大概基于\x3ca href=\x22https:\/\/en.wikipedia.org\/wiki\/Trap_%28computing%29\x22\x3e操作系统拦截\x3c\/a\x3e的概念）。 \x3ccode\x3ehandler\x3c\/code\x3e对象基本上是一个包含一组“拦截”的对象，每当访问对象属性时都会被触发。\x3c\/p\x3e\n\x3cp\x3e我们给\x3ccode\x3eset\x3c\/code\x3e也添加一个“拦截器”。 我们将做同样的事情 - 任何时候设置一个值，我们将记录被修改的属性，以及为该键设置的值。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3eset\x3c\/code\x3e操作符有三个参数 - 对象本身，被访问的属性和为该属性设置的值。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs qml\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e handler = {\n    \x3cspan class=\x22hljs-attribute\x22\x3eget\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eobj, prop\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27A value has been accessed\x27\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e obj[prop];\n    },\n    \x3cspan class=\x22hljs-attribute\x22\x3eset\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eobj, prop, value\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e`\x3cspan class=\x22hljs-subst\x22\x3e${prop}\x3c\/span\x3e is being set to \x3cspan class=\x22hljs-subst\x22\x3e${value}\x3c\/span\x3e`\x3c\/span\x3e);\n    }\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e initialObj = {\n    \x3cspan class=\x22hljs-attribute\x22\x3eid:\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e 1,\n    name\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27Foo Bar\x27\x3c\/span\x3e\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e proxiedObj = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eProxy\x3c\/span\x3e(initialObj, handler);\n\nproxiedObj.age = \x3cspan class=\x22hljs-number\x22\x3e24\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ccenter\x3e添加\x3ccode\x3eset\x3c\/code\x3e “拦截器”\x3c\/center\x3e\n\n\x3cp\x3e这里，在第18行进行的访问将触发第6行定义的功能，该功能将记录正在访问的属性和正在设置的值。\x3c\/p\x3e\n\x3cp\x3e\x3cimg src=\x22http:\/\/p0.qhimg.com\/t0128ad6db32ab4ded7.png\x22 alt=\x22\x22\x3e\x3c\/p\x3e\n\x3ccenter\x3e\x3ccode\x3eSet\x3c\/code\x3e “拦截器” —— 控制台的输出\x3c\/center\x3e\n\n\x3chr\x3e\n\x3ch3\x3e一个真实的例子\x3c\/h3\x3e\n\x3cp\x3e假设我们有一个定义叫person的对象\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs qml\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e person = {\n   \x3cspan class=\x22hljs-attribute\x22\x3eid:\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e 1,\n   name\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27Foo Bar\x27\x3c\/span\x3e\n};\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e如果我们想让这个对象的id属性是一个私有属性呢？ 没人能够通过person.id访问这个属性，如果有人这样做，我们需要抛出一个错误。 我们将如何做到这一点？\x3c\/p\x3e\n\x3cp\x3e让Proxies来拯救吧！??‍?\x3c\/p\x3e\n\x3cp\x3e我们所需要做的就是给这个对象创建一个Proxy，并覆盖\x3ccode\x3eget\x3c\/code\x3e运算符来阻止我们访问\x3ccode\x3eid\x3c\/code\x3e属性！\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs qml\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e handler = {\n    \x3cspan class=\x22hljs-attribute\x22\x3eget\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eobj, prop\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (prop === \x3cspan class=\x22hljs-string\x22\x3e\x27id\x27\x3c\/span\x3e) { \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Check if the id is being accessed\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eError\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27Cannot access private properties!\x27\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Throw an error\x3c\/span\x3e\n        } \x3cspan class=\x22hljs-title\x22\x3eelse\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e obj[prop]; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ If it\x27s not the id property, return it as usual\x3c\/span\x3e\n        }\n    }\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e person = {\n    \x3cspan class=\x22hljs-attribute\x22\x3eid:\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e 1,\n    name\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27Foo Bar\x27\x3c\/span\x3e\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e proxiedPerson = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eProxy\x3c\/span\x3e(person, handler);\n\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(proxiedPerson.id);\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ccenter\x3e阻止访问私有属性\x3c\/center\x3e\n\n\x3cp\x3e这里，在我们给\x3ccode\x3eget\x3c\/code\x3e创建的“拦截器”，我们检查被访问的属性是否是\x3ccode\x3eid\x3c\/code\x3e属性，如果是的话，我们会抛出一个错误。 否则，我们照常返回值。\x3c\/p\x3e\n\x3cp\x3e\x3cimg src=\x22http:\/\/p0.qhimg.com\/t01b04fc77b1c186a9e.png\x22 alt=\x22\x22\x3e\x3c\/p\x3e\n\x3ccenter\x3e私有属性 — 控制台输出\x3c\/center\x3e\n\n\x3chr\x3e\n\x3cp\x3e另一个极好的用例是校验。 通过设置\x3ccode\x3eset\x3c\/code\x3e“拦截器”，我们可以在设置值之前添加自定义验证。 如果该值不符合验证，我们可以抛出一个错误！\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e handler = {\n    \x3cspan class=\x22hljs-attr\x22\x3eset\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eobj, prop, value\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e value !== \x3cspan class=\x22hljs-string\x22\x3e\x27string\x27\x3c\/span\x3e) {\n            \x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eError\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27Only string values can be stored in this object!\x27\x3c\/span\x3e);\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n            obj[prop] = value;\n        }\n    }\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e obj = {};\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e proxiedObj = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eProxy\x3c\/span\x3e(obj, handler);\n\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(proxiedObj); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ This will log an empty object\x3c\/span\x3e\nproxiedObj.name = \x3cspan class=\x22hljs-string\x22\x3e\x27Foo Bar\x27\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ This should be allowed\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(proxiedObj); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ This will log an object with the name property set\x3c\/span\x3e\n\nproxiedObj.age = \x3cspan class=\x22hljs-number\x22\x3e24\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ This will throw an error.\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ccenter\x3e自定义对象的属性校验\x3c\/center\x3e\n\n\x3cp\x3e\x3cimg src=\x22http:\/\/p0.qhimg.com\/t01e98aebce5a46df5a.png\x22 alt=\x22\x22\x3e\x3c\/p\x3e\n\x3ccenter\x3e自定义校验 - 控制台输出\x3c\/center\x3e\n\n\x3chr\x3e\n\x3cp\x3e在上面的例子中，我们已经看到了\x3ccode\x3eget\x3c\/code\x3e和\x3ccode\x3eset\x3c\/code\x3e“陷阱”。 实际上可以设置更多的“陷阱”。 你可以在这里找到\x3ca href=\x22https:\/\/docs.microsoft.com\/en-us\/scripting\/javascript\/reference\/proxy-object-javascript\x22\x3e整个列表\x3c\/a\x3e。\x3c\/p\x3e\n\x3cp\x3eProxy对象只是在阅读\x3ca href=\x22https:\/\/davidwalsh.name\/watch-object-changes?utm_source=blog.campvanilla.com\x22\x3e关于它们的这篇文章\x3c\/a\x3e之后才进入我的视野，我已经可以在我每天写的代码中看到它们的用处了！\x3c\/p\x3e\n\x3cp\x3e如果你之前在项目或工作中使用过Proxies，我很乐意听到！?\x3c\/p\x3e\n\x3cp\x3e～最后～\x3c\/p\x3e\n\x3chr\x3e\n\x3cp\x3e如果您觉得这篇文章对您有用，请点个赞?!\x3c\/p\x3e\n\x3cp\x3e在什么地方卡住了，需要更多的帮助，还是只想打个招呼？ 在\x3ca href=\x22https:\/\/hashnode.com\/@abinavseelan\x22\x3eHashnode\x3c\/a\x3e 给我直接发问题，或者在\x3ca href=\x22https:\/\/twitter.com\/AbinavSeelan\x22\x3eTwitter\x3c\/a\x3e上Call我。 你也可以在\x3ca href=\x22https:\/\/github.com\/abinavseelan\/\x22\x3eGithub\x3c\/a\x3e上找到我。?\x3c\/p\x3e\n\n          \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>Javascript Proxy对象 简介</p><h2 id="原文链接">原文链接</h2><p><a href="https://www.zcfy.cc/article/an-intro-to-javascript-proxy-objects-camp-vanilla">https://www.zcfy.cc/article/an-intro-to-javascript-proxy-objects-camp-vanilla</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/8x2p8kdm04b/" target="_blank">https://alili.tech/archive/8x2p8kdm04b/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>