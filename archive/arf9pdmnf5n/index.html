<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="手把手教你从零写一个简单的 VUE"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>手把手教你从零写一个简单的 VUE | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/arf9pdmnf5n/",
				"appid": "1613049289050283", 
				"title": "手把手教你从零写一个简单的 VUE | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-12T02:30:24"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/2odrkfx4cx3/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/73lzu1bvwo3/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2farf9pdmnf5n%2f&text=%e6%89%8b%e6%8a%8a%e6%89%8b%e6%95%99%e4%bd%a0%e4%bb%8e%e9%9b%b6%e5%86%99%e4%b8%80%e4%b8%aa%e7%ae%80%e5%8d%95%e7%9a%84%20VUE"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2farf9pdmnf5n%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2farf9pdmnf5n%2f&text=%e6%89%8b%e6%8a%8a%e6%89%8b%e6%95%99%e4%bd%a0%e4%bb%8e%e9%9b%b6%e5%86%99%e4%b8%80%e4%b8%aa%e7%ae%80%e5%8d%95%e7%9a%84%20VUE"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2farf9pdmnf5n%2f&title=%e6%89%8b%e6%8a%8a%e6%89%8b%e6%95%99%e4%bd%a0%e4%bb%8e%e9%9b%b6%e5%86%99%e4%b8%80%e4%b8%aa%e7%ae%80%e5%8d%95%e7%9a%84%20VUE"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2farf9pdmnf5n%2f&is_video=false&description=%e6%89%8b%e6%8a%8a%e6%89%8b%e6%95%99%e4%bd%a0%e4%bb%8e%e9%9b%b6%e5%86%99%e4%b8%80%e4%b8%aa%e7%ae%80%e5%8d%95%e7%9a%84%20VUE"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e6%89%8b%e6%8a%8a%e6%89%8b%e6%95%99%e4%bd%a0%e4%bb%8e%e9%9b%b6%e5%86%99%e4%b8%80%e4%b8%aa%e7%ae%80%e5%8d%95%e7%9a%84%20VUE&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2farf9pdmnf5n%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2farf9pdmnf5n%2f&title=%e6%89%8b%e6%8a%8a%e6%89%8b%e6%95%99%e4%bd%a0%e4%bb%8e%e9%9b%b6%e5%86%99%e4%b8%80%e4%b8%aa%e7%ae%80%e5%8d%95%e7%9a%84%20VUE"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2farf9pdmnf5n%2f&title=%e6%89%8b%e6%8a%8a%e6%89%8b%e6%95%99%e4%bd%a0%e4%bb%8e%e9%9b%b6%e5%86%99%e4%b8%80%e4%b8%aa%e7%ae%80%e5%8d%95%e7%9a%84%20VUE"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2farf9pdmnf5n%2f&title=%e6%89%8b%e6%8a%8a%e6%89%8b%e6%95%99%e4%bd%a0%e4%bb%8e%e9%9b%b6%e5%86%99%e4%b8%80%e4%b8%aa%e7%ae%80%e5%8d%95%e7%9a%84%20VUE"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2farf9pdmnf5n%2f&title=%e6%89%8b%e6%8a%8a%e6%89%8b%e6%95%99%e4%bd%a0%e4%bb%8e%e9%9b%b6%e5%86%99%e4%b8%80%e4%b8%aa%e7%ae%80%e5%8d%95%e7%9a%84%20VUE"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">手把手教你从零写一个简单的 VUE</h1><div class="meta"><div class="postdate"><time datetime="2019-01-12" itemprop="datePublished">2019-01-12</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e本系列是一个教程，下面贴下目录~\x3cbr\x3e1.\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000009846314\x22\x3e手把手教你从零写一个简单的 VUE\x3c\/a\x3e\x3cbr\x3e2.\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000010611308\x22 target=\x22_blank\x22\x3e手把手教你从零写一个简单的 VUE--模板篇\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e今天给大家带来的是实现一个简单的类似 VUE 一样的前端框架，VUE 框架现在应该算是非常主流的前端数据驱动框架，今天我们来从零开始写一个非常简单的 VUE 框架，主要是让大家知道最核心的 vue 部分是怎么运转起来的。包括数据绑定，模板处理，以及页面渲染，数据驱动视图等几个部分，代码在文章末尾给出来，下面我们开始~\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader0\x22\x3eVUE 是怎么运转起来的\x3c\/h3\x3e\n\x3cp\x3e在正式动手之前，我们先来了解下 vue 是怎么运转起来的，vue 从核心来说，是一个通过数据去驱动页面渲染的框架，也就是说通过改变数据的状态，可以控制页面中渲染的逻辑，比如展示数据，切换样式，这些的核心都是通过对数据改变的监听，从而将数据发生改变的对应的视图进行更新渲染，这是整个框架的核心运行机制。因此我们制作的简单 vue 框架，主要是围绕着怎么监听，怎么渲染，怎么更新这个流程去做的，旨在让大家知道 vue 怎么跑起来的，其余的 vue 组件，指令，插件等内容将在后面的文章中写出。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e设计\x3c\/h3\x3e\n\x3cp\x3e首先我们要知道我们要做一个简单数据驱动视图前端框架，它包括以下几个部分:\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e能够编译简单的模板\x3c\/li\x3e\n\x3cli\x3e能够监听数据变化\x3c\/li\x3e\n\x3cli\x3e数据变化的时候，能够关联对应的视图并同步的更新视图\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e根据上面列举的需求，我们需要程序抽象以下几个部分:\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e存储数据的\x3ccode\x3e$data\x3c\/code\x3e,用于保存数据，渲染视图\x3c\/li\x3e\n\x3cli\x3e与每个模板对应的\x3ccode\x3eNode\x3c\/code\x3e对象，对象包含对应模板的渲染函数，还有渲染函数需要使用的数据集合\x3c\/li\x3e\n\x3cli\x3e对数据进行监听关联的\x3ccode\x3eWatcher\x3c\/code\x3e类，用于关联数据和对应的模板，监听数据变化\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e开始编码\x3c\/h3\x3e\n\x3cp\x3e首先介绍下项目用的工具及框架，项目使用\x3ccode\x3erollup\x3c\/code\x3e进行项目模块化构建,使用\x3ccode\x3eES6\x3c\/code\x3e进行编码。下面开始正式编码。\x3cbr\x3e首先我给框架起了个简单的名字，叫\x3ccode\x3eQV\x3c\/code\x3e，这个对象会暴露到全局中，进行实例化，实例化代码如下:\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVPp1a?w=1110\x26amp;h=900\x22 src=\x22https:\/\/static.alili.tech\/img\/bVPp1a?w=1110\x26amp;h=900\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e在实例化的时候传给了对象 \x3ccode\x3eel\x3c\/code\x3e、\x3ccode\x3etemplate\x3c\/code\x3e、\x3ccode\x3edata\x3c\/code\x3e等数据，其中\x3ccode\x3eel\x3c\/code\x3e是模板在页面的挂载点，template 是获取模板的选择器，分别对应\x3ccode\x3ebody\x3c\/code\x3e的\x3ccode\x3e\x26lt;app\x26gt;\x26lt;\/app\x26gt;\x3c\/code\x3e标签和script标签中的模板，data 是定义的数据对象。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e数据处理\x3c\/h3\x3e\n\x3cp\x3e在\x3ccode\x3eQV\x3c\/code\x3e类的构造函数中，我们会对传入的配置进行处理，首先我们会对数据进行格式化，使得其在被\x3ccode\x3eWatcher\x3c\/code\x3e正常监控。格式化数据的代码如下：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVPsC4?w=1104\x26amp;h=836\x22 src=\x22https:\/\/static.alili.tech\/img\/bVPsC4?w=1104\x26amp;h=836\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e可以看到\x3ccode\x3eformatData\x3c\/code\x3e方法在原来的\x3ccode\x3edata\x3c\/code\x3e上面又挂载了一个\x3ccode\x3e_od_\x3c\/code\x3e属性，然后将原始数据进行格式化，每个数据分别包含\x3ccode\x3evalue\x3c\/code\x3e(数据值),\x3ccode\x3elinkNodes\x3c\/code\x3e(被使用的节点值),\x3ccode\x3emounted\x3c\/code\x3e(是否已经被格式化过)，通过对数据进行预处理，方便后面的数据监控绑定\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e模板节点处理\x3c\/h3\x3e\n\x3cp\x3e模板的能力是一个前端框架的重要组成部分，\x3ccode\x3evue\x3c\/code\x3e将模板转化为\x3ccode\x3eAST\x3c\/code\x3e（抽象语法树），然后去解析其中的语法，比如\x3ccode\x3e\x22{{\x22\x22}}\x22\x3c\/code\x3e、\x3ccode\x3ev-for v-if\x3c\/code\x3e等等，模板解析的总体思路如下:\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e将模板字符串通过正则表达式等方法进行切割，切割点为模板定义的关键字\x3c\/li\x3e\n\x3cli\x3e将切割完的字符串进行分析，可以生成\x3ccode\x3eAST\x3c\/code\x3e(抽象语法树)或者是直接进行处理操作\x3c\/li\x3e\n\x3cli\x3e将分析完的东西进行字符串拼接，通过\x3ccode\x3enew Function\x3c\/code\x3e生成模板函数\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e本例子只做流程的说明，所以模板很简单，只有赋值语法，如下:\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVPtnM?w=1082\x26amp;h=144\x22 src=\x22https:\/\/static.alili.tech\/img\/bVPtnM?w=1082\x26amp;h=144\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e可以看到模板中只有\x3ccode\x3e\x22{{\x22\x22}}\x22\x3c\/code\x3e的赋值语法，插入变量为\x3ccode\x3ea、sdf、ccc\x3c\/code\x3e的语法\x3cbr\x3e那么这个是怎么进行解析的呢，代码如下:\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVPtoN?w=1286\x26amp;h=1192\x22 src=\x22https:\/\/static.alili.tech\/img\/bVPtoN?w=1286\x26amp;h=1192\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e下面重点讲一讲这个函数，可以看到函数的开头定义了一个正则表达式\x3ccode\x3e \/\x22{{\x22[ \\t]*([\\w\\W]*?)[ \\t]*\x22}}\x22\/g\x3c\/code\x3e,用于匹配和分割用\x3ccode\x3e\x22{{\x22\x22}}\x22\x3c\/code\x3e界定的变量,通过 \x3ccode\x3eexec\x3c\/code\x3e的运行，匹配出来的结果如下:\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVPtqX?w=966\x26amp;h=69\x22 src=\x22https:\/\/static.alili.tech\/img\/bVPtqX?w=966\x26amp;h=69\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e可以看到\x3ccode\x3ea,sdf,ccc\x3c\/code\x3e都被匹配出来了，然后通过\x3ccode\x3eslice\x3c\/code\x3e进行分割后重建，变成一段\x3cstrong\x3e模板函数字符串\x3c\/strong\x3e,如下：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVPtsj?w=1069\x26amp;h=21\x22 src=\x22https:\/\/static.alili.tech\/img\/bVPtsj?w=1069\x26amp;h=21\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e然后再通过\x3ccode\x3enew Function\x3c\/code\x3e将上面的字符串变成一个函数,方法如下\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVPtsv?w=802\x26amp;h=396\x22 src=\x22https:\/\/static.alili.tech\/img\/bVPtsv?w=802\x26amp;h=396\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e其中的\x3ccode\x3enew Function(\x22od\x22,$t)\x3c\/code\x3e中的\x3ccode\x3eod\x3c\/code\x3e是这个函数的参数，可以在函数中使用\x3cbr\x3e最后生成的模板函数如下：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVPtsU?w=875\x26amp;h=68\x22 src=\x22https:\/\/static.alili.tech\/img\/bVPtsU?w=875\x26amp;h=68\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e这样子就完成了模板函数的开发，而且还将模板用的变量进行抽取，标记这个模板用到了哪些变量\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e监听器\x3c\/h3\x3e\n\x3cp\x3e监听器作为连接数据和视图更新的纽带，是\x3ccode\x3evue\x3c\/code\x3e的核心部分，\x3ccode\x3evue\x3c\/code\x3e是使用\x3ccode\x3eObject.defineProperty\x3c\/code\x3e对数据进行处理后实现数据监听的，本程序也是使用这个核心方法进行数据监听的，核心代码如下：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVPtvD?w=1270\x26amp;h=1302\x22 src=\x22https:\/\/static.alili.tech\/img\/bVPtvD?w=1270\x26amp;h=1302\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e下面我具体说下这段代码：\x3cbr\x3e之前格式化数据的时候在原始数据里面添加了\x3ccode\x3e_od_\x3c\/code\x3e字段，是用在数据监控时候的，\x3ccode\x3eObject.defineProperty\x3c\/code\x3e可以设置\x3ccode\x3eget set\x3c\/code\x3e属性，分别在对应的数据被获取或者被修改的时候会进行回调，因此如果直接操作原始数据，会导致监控程序发生死循环，因此通过\x3ccode\x3e_od_\x3c\/code\x3e的拷贝数据进行操作，能够避免这种情况，可以看到\x3ccode\x3eget\x3c\/code\x3e函数会直接返回\x3ccode\x3e_od_\x3c\/code\x3e里面对应属性的\x3ccode\x3evalue\x3c\/code\x3e，而\x3ccode\x3eset\x3c\/code\x3e函数我做了一个优化节流，对于连续修改数据只发生一次更新，将使用到这个数据的\x3ccode\x3eNode\x3c\/code\x3e对象进行\x3ccode\x3eupdate\x3c\/code\x3e操作\x3c\/p\x3e\n\x3cp\x3e程序最核心的方法已经开发完成了，演示下结果，直接打开页面，可以看到下面的视图\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVPtAJ?w=932\x26amp;h=344\x22 src=\x22https:\/\/static.alili.tech\/img\/bVPtAJ?w=932\x26amp;h=344\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e可以看到程序将数据\x3ccode\x3ea sdf ccc\x3c\/code\x3e赋值给模板，然后替换页面的\x3ccode\x3eapp\x3c\/code\x3e节点，渲染到页面上\x3cbr\x3e接下来我们通过实例直接修改\x3ccode\x3edata\x3c\/code\x3e，\x3cbr\x3e\x3ccode\x3eqv.$data.a = \x22change data a\x22\x3c\/code\x3e\x3cbr\x3e可以看到页面会更新成为\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVPtBk?w=960\x26amp;h=514\x22 src=\x22https:\/\/static.alili.tech\/img\/bVPtBk?w=960\x26amp;h=514\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e下面说下重新渲染的流程：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e数据修改之后触发了\x3ccode\x3eObject.defineProperty\x3c\/code\x3e的\x3ccode\x3eset\x3c\/code\x3e方法，方法检测到设置数据与原数据不同，回去获取\x3ccode\x3elinkNodes\x3c\/code\x3e属性，里面包含了使用这个数据的\x3ccode\x3eNode\x3c\/code\x3e节点，然后分别调用\x3ccode\x3eNode\x3c\/code\x3e节点的\x3ccode\x3eupdate\x3c\/code\x3e方法\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eupdate\x3c\/code\x3e方法被调用之后，\x3ccode\x3eNode\x3c\/code\x3e会重新获取\x3ccode\x3edata\x3c\/code\x3e去生成\x3ccode\x3edom\x3c\/code\x3e元素，然后替换现有的模板元素，至此完成一次更新\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e结语\x3c\/h3\x3e\n\x3cp\x3e这篇文章的例子旨在跟大家说明\x3ccode\x3eVue\x3c\/code\x3e是怎么运作的，希望可以帮助到大家在日常使用的时候遇到一些坑，可以从根本原理上面去找原因，当然这个demo 离\x3ccode\x3eVue\x3c\/code\x3e还是非常不完整的，缺少了各种模板语法，指令，事件绑定，组件系统，只是把核心的流程展现出来，希望大家喜欢\x3c\/p\x3e\n\x3cp\x3e最后附上源码 \x3ca href=\x22https:\/\/github.com\/qbright\/QV\/tree\/article-1\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e点我点我\x3c\/a\x3e，喜欢的话给个 star 呗~~\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>手把手教你从零写一个简单的 VUE</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000009846314">https://segmentfault.com/a/1190000009846314</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/arf9pdmnf5n/" target="_blank">https://alili.tech/archive/arf9pdmnf5n/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/5ed53lrrg7e/">如何禁止浏览器自动填充<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/gij1sdp355j/">实践是检验程序员的唯一标准02：用户不想跟你说话并向你扔出一张图片 - 图片上传组件开发【开发篇】<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/y9eqaypgij/">123<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/4ho25kya1mg/">2018你成长了么？一份给你的前端技术清单<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/g2lx7wrrhy4/">Apache、Nginx 与 Node.js 之争 —— WordPress 与 Ghost 的性能大对决<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/dfejr0q89no/">CSS单位em是相对于父元素还是当前元素的字体大小？<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/cik25m3bh7m/">ES6 系列之 Babel 将 Generator 编译成了什么样子<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/vwkme203i7/">ES6 系列之异步处理实战<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/q2at4ffqrr/">Hola～ 一款基于Electron的聊天软件<aside class="dates">2019-02-15</aside></a></li><li><a href="/archive/t2mci6htsdn/">JavaScript 数组操作方法小结<aside class="dates">2019-02-15</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>